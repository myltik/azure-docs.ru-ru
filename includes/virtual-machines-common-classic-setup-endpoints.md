---
title: включение файла
description: включение файла
services: virtual-machines-windows
author: cynthn
ms.service: virtual-machines-windows
ms.topic: include
ms.date: 05/17/2018
ms.author: cynthn
ms.custom: include file
ms.openlocfilehash: cfe675ca269a69c7c2bfa67638acd0afbcd1c8ea
ms.sourcegitcommit: b6319f1a87d9316122f96769aab0d92b46a6879a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2018
ms.locfileid: "34371292"
---
У каждой конечной точки есть *общий* и *частный* порты:

* Общий порт используется подсистемой балансировки нагрузки Azure для прослушивания входящего трафика на виртуальную машину из Интернета.
* Частный порт используется виртуальной машиной для прослушивания входящего трафика, который, как правило, предназначен для приложения или службы, запущенных на виртуальной машине.

Значения по умолчанию для протокола IP и TCP- или UDP-порты для хорошо известных сетевых протоколов предоставляются при создании конечных точек с помощью портала Azure. Для пользовательских конечных точек потребуется указать правильный IP-протокол (TCP или UDP), а также общий и частный порты. Чтобы распределить входящий трафик по нескольким виртуальным машинам случайным образом, необходимо создать набор балансировки нагрузки, состоящий из нескольких конечных точек.

После создания конечной точки вы можете использовать список управления доступом (ACL) для определения правил, разрешающих или запрещающих входящий трафик на открытый порт конечной точки на основе его IP-адреса источника. Однако, если виртуальная машина находится в виртуальной сети Azure, вместо этого необходимо использовать группы безопасности сети. Дополнительные сведения см. в статье [О группах безопасности сети](../articles/virtual-network/security-overview.md).

> [!NOTE]
> Брандмауэр для виртуальных машин Azure настраивается автоматически для портов, связанных с удаленными конечными точками подключения, которые Azure создает автоматически. Для портов, указанных для всех остальных конечных точек, автоматическая настройка брандмауэра для виртуальных машин не выполняется. При создании конечной точки для виртуальной машины, необходимо обеспечить, чтобы брандмауэр виртуальной машины также разрешал трафик для протокола и частного порта, соответствующий конфигурации конечной точки. Инструкции по настройке брандмауэра см. в документации или в интерактивной справке операционной системы, под управлением которой работает виртуальная машина.
>
>

## <a name="create-an-endpoint"></a>Создание конечной точки
1. Перейдите на [портал Azure](https://portal.azure.com), если вы еще этого не сделали.
2. Щелкните **Виртуальные машины**, а затем щелкните имя виртуальной машины, которую необходимо настроить.
3. В разделе **Параметры** щелкните **Конечные точки**. На странице **Конечные точки** перечислены все текущие конечные точки виртуальной машины. (В этом примере используется виртуальная машина Windows. На виртуальных машинах Linux по умолчанию отображается конечная точка для SSH.)

   <!-- ![Endpoints](./media/virtual-machines-common-classic-setup-endpoints/endpointswindows.png) -->
   ![Конечные точки](./media/virtual-machines-common-classic-setup-endpoints/endpointsblade.png)

4. На панели команд над записями конечных точек щелкните **Добавить**.
5. На странице **Добавление конечной точки** укажите **имя** конечной точки.
6. В качестве **протокола**, укажите **TCP** или **UDP**.
7. В поле **Общий порт** введите номер порта для входящего трафика из Интернета. В поле **Частный порт**введите номер порта, который используется виртуальной машиной для прослушивания. Эти номера портов могут отличаться. Брандмауэр на виртуальной машине должен быть настроен так, чтобы разрешать трафик, соответствующий протоколу (см. шаг 6) и частному порту.
10. Нажмите кнопку **ОК**.

Новая конечная точка будет указана на странице **Конечные точки** .

![Конечная точка успешно создана](./media/virtual-machines-common-classic-setup-endpoints/endpointcreated.png)

## <a name="manage-the-acl-on-an-endpoint"></a>Управление ACL для конечной точки
Чтобы определить набор компьютеров, которые могут отправлять трафик, ACL для конечной точки может ограничить трафик на основе исходного IP-адреса. Выполните следующие действия, чтобы добавить, изменить или удалить ACL для конечной точки.

> [!NOTE]
> Если конечная точка является частью набора балансировки нагрузки, любые изменения, внесенные в ACL для конечной точки, будут применены ко всем конечным точкам в наборе.
>
>

Если виртуальная машина находится в виртуальной сети Azure, вместо списков ACL рекомендуется использовать группы безопасности сети. Дополнительные сведения см. в статье [О группах безопасности сети](../articles/virtual-network/security-overview.md).

1. Войдите на портал Azure, если вы еще этого не сделали.
2. Щелкните **Виртуальные машины**, а затем щелкните имя виртуальной машины, которую необходимо настроить.
3. Нажмите кнопку **Конечные точки**. Выберите в списке требуемую конечную точку. Список ACL находится в нижней части страницы.

   ![Укажите сведения об ACL](./media/virtual-machines-common-classic-setup-endpoints/aclpreentry.png)

4. Используйте строки в списке для добавления, удаления или изменения правил для ACL, а также для изменения их порядка. Значение **Удаленная подсеть** представляет собой диапазон IP-адресов для входящего трафика из Интернета, который балансировщик нагрузки Azure использует, чтобы разрешать или запрещать трафик по его исходному IP-адресу. Не забудьте указать диапазон IP-адресов в формате CIDR, который также известен как формат префикса адреса. Например, `10.1.0.0/8`.

 ![Новая запись ACL](./media/virtual-machines-common-classic-setup-endpoints/newaclentry.png)


Можно использовать правила, чтобы разрешать трафик только от конкретных компьютеров, соответствующих компьютерам в Интернете, или запрещать трафик от определенных известных диапазонов адресов.

Правила оцениваются по порядку, начиная с первого и заканчивая последним правилом. Это означает, что правила должны быть упорядочены, начиная от наименее строгого к наиболее строгому. См. дополнительные сведения о [сетевом списке управления доступом](../articles/virtual-network/virtual-networks-acl.md) и примеры его использования.
