---
title: Управление формулами в Azure DevTest Labs для создания виртуальных машин | Документация Майкрософт
description: Узнайте, как изменять и удалять формулы Azure DevTest Labs.
services: devtest-lab,virtual-machines
documentationcenter: na
author: craigcaseyMSFT
manager: douge
editor: ''
ms.assetid: 841dd95a-657f-4d80-ba26-59a9b5104fe4
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/07/2017
ms.author: v-craic
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 330f6ae246697d54c6bce0690346652b5f2e2dd0
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2018
---
# <a name="manage-azure-devtest-labs-formulas"></a>Управление формулами Azure DevTest Labs

[!INCLUDE [devtest-lab-formula-definition](../../includes/devtest-lab-formula-definition.md)]

В этой статье показано, как создать формулу из базового образа (пользовательского образа, образа Marketplace или другой формулы) или существующей виртуальной машины. В этой статье также объясняется, как управлять существующими формулами.

## <a name="create-a-formula"></a>Создание формулы
Любой пользователь, имеющий разрешения роли *Пользователь* DevTest Labs, может создавать виртуальные машины на основе формул. Формулы можно создавать двумя способами. 

* Из базового образа — используйте этот способ, если хотите задать все характеристики формулы.
* На основе существующей виртуальной машины — используйте этот способ, если хотите создать формулу на основе параметров существующей виртуальной машины.

Дополнительные сведения о добавлении пользователей и разрешений см. в статье [Добавление владельцев и пользователей в Azure DevTest Labs](./devtest-lab-add-devtest-user.md).

### <a name="create-a-formula-from-a-base"></a>Создание формулы из базового образа
Ниже приведены пошаговые инструкции по созданию формулы на основе пользовательского образа, образа Marketplace или другой формулы.

1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).

2. Щелкните **Все службы** и выберите в списке **DevTest Labs**.

3. Из списка лабораторий выберите нужную лабораторию.  

4. В колонке лаборатории выберите **Formulas (reusable bases)**(Формулы (базовые образы, используемые повторно)).
   
    ![Меню формулы](./media/devtest-lab-create-formulas/lab-settings-formulas.png)

5. В колонке **Formulas** (Формулы) выберите **+ Добавить**.
   
    ![Добавление формулы](./media/devtest-lab-create-formulas/add-formula.png)

6. В колонке **Выбор основы** выберите базовый образ (пользовательский образ, образ Marketplace или формулу), на основе которого хотите создать формулу.
   
    ![Список базовых образов](./media/devtest-lab-create-formulas/base-list.png)

7. В колонке **Создание формулы** укажите перечисленные ниже значения.
   
    * **Имя формулы** — введите имя формулы. Это значение отображается в списке базовых образов при создании виртуальной машины. Имя проверяется по мере ввода. Если оно недопустимо, появляется сообщение с указанием требований к именам.
    * **Описание** — введите содержательное описание формулы. Это значение доступно в контекстном меню формулы при создании виртуальной машины.
    * **Имя пользователя** — введите имя пользователя, которому будут предоставлены права администратора.
    * **Пароль** — введите или выберите из раскрывающегося списка значение, связанное с секретом (паролем), которое будет применяться для указанного пользователя. Дополнительные сведения о секретах см. в статье [Azure DevTest Labs: Personal secret store](https://azure.microsoft.com/updates/azure-devtest-labs-keep-your-secrets-safe-and-easy-to-use-with-the-new-personal-secret-store/) (Azure DevTest Labs: личное хранилище секретов).
    * **Virtual machine disk type** (Тип диска виртуальной машины) — выберите тип диска, HDD (жесткий диск) или SSD (твердотельный накопитель), чтобы указать тип диска хранилища, разрешенный для виртуальных машин, которые подготавливаются с помощью этого базового образа.
    * **Размер виртуальной машины** — выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины. 
    * **Артефакты** — щелкните, чтобы открыть колонку **Add artifacts** (Добавление артефактов), где можно выбрать и настроить артефакты, которые нужно добавить в базовый образ. Дополнительные сведения об артефактах см. в статье о [создании настраиваемых артефактов для виртуальной машины Azure DevTest Labs](devtest-lab-artifact-author.md).
    * **Дополнительные параметры** — щелкните, чтобы открыть колонку **Advanced** (Дополнительно), в которой можно настроить следующие параметры:
        * **Виртуальная сеть** — укажите нужную виртуальную сеть.
        * **Подсеть** — укажите нужную подсеть.    
        * **Настройка IP-адреса** — укажите, какие IP-адреса необходимо использовать (общедоступные, частные или общие). Дополнительные сведения см. в статье [Общие IP-адреса в Azure DevTest Labs](./devtest-lab-shared-ip.md).
        * **Make this machine claimable** (Разрешить запрашивать эту виртуальную машину) — этот параметр означает, что при создании виртуальной машины права владения не будут назначаться. Вместо этого пользователи лаборатории смогут становиться владельцами этой виртуальной машины ("запрашивать" ее) в колонке лаборатории.     
    * **Образ** — в этом поле приводится имя базового образа, выбранного в предыдущей колонке. 
     
       ![Создание формулы](./media/devtest-lab-create-formulas/create-formula.png)

8. Щелкните **Создать** , чтобы создать формулу.

9. Когда формула создана, она отображается в колонке **Formulas** (Формулы).

### <a name="create-a-formula-from-a-vm"></a>Создание формулы на основе виртуальной машины
Ниже приводятся пошаговые инструкции по созданию формулы на основе существующей виртуальной машины. 

> [!NOTE]
> Для создания формулы на основе виртуальной машины необходимо, чтобы эта виртуальная машина была создана после 30 марта 2016 г. 
> 
> 

1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
2. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
3. Из списка лабораторий выберите нужную лабораторию.  
4. В колонке **Обзор** выберите виртуальную машину, на основе которой будет создана формула.
   
    ![Лабораторные виртуальные машины](./media/devtest-lab-create-formulas/my-vms.png)
5. В колонке виртуальной машины выберите **Create formula (reusable base)**(Создать формулу (базовый образ, используемый повторно)).
   
    ![Создание формулы](./media/devtest-lab-create-formulas/create-formula-menu.png)
6. В колонке **Создать формулу** введите **имя** и **описание** новой формулы в соответствующих полях.
   
    ![Колонка "Create formula" (Создание формулы)](./media/devtest-lab-create-formulas/create-formula-blade.png)
7. Нажмите кнопку **ОК** , чтобы создать формулу.

## <a name="modify-a-formula"></a>Изменение формулы
Чтобы изменить формулу, выполните указанные ниже действия.

1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
2. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
3. Из списка лабораторий выберите нужную лабораторию.  
4. В колонке лаборатории выберите **Formulas (reusable bases)**(Формулы (базовые образы, используемые повторно)).
   
    ![Меню формулы](./media/devtest-lab-manage-formulas/lab-settings-formulas.png)
5. В колонке **Lab formulas** (Формулы лаборатории) выберите формулу, которую нужно изменить.
6. В колонке **Update formula** (Обновление формулы) внесите необходимые изменения и щелкните **Обновить**.

## <a name="delete-a-formula"></a>Удаление формулы
Чтобы удалить формулу, выполните указанные ниже действия.

1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
2. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
3. Из списка лабораторий выберите нужную лабораторию.  
4. В колонке **Параметры** лаборатории выберите **Формулы**.
   
    ![Меню формулы](./media/devtest-lab-manage-formulas/lab-settings-formulas.png)
5. В колонке **Lab formulas** (Формулы лаборатории) щелкните многоточие справа от формулы, которую нужно удалить.
   
    ![Меню формулы](./media/devtest-lab-manage-formulas/lab-formulas-blade.png)
6. В контекстном меню формулы выберите **Удалить**.
   
    ![Контекстное меню формулы](./media/devtest-lab-manage-formulas/formula-delete-context-menu.png)
7. В диалоговом окне подтверждения удаления нажмите кнопку **Да** .

[!INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

## <a name="related-blog-posts"></a>Связанные записи в блогах
* [Custom images or formulas? (Пользовательские изображения или формулы?)](https://blogs.msdn.microsoft.com/devtestlab/2016/04/06/custom-images-or-formulas/)

## <a name="next-steps"></a>Дополнительная информация
После создания формулы, которая служит для создания виртуальных машин, можно [добавить виртуальную машину в лабораторию](devtest-lab-add-vm.md).

