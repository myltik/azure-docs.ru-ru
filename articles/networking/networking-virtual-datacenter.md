---
title: 'Виртуальный центр обработки данных Microsoft Azure: сетевая перспектива | Документация Майкрософт'
description: Узнайте, как создать виртуальный центр обработки данных в Azure
services: networking
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/26/2017
ms.author: jonor
ms.openlocfilehash: 7fcd8e12a7109218387788e47eddad48e72797bb
ms.sourcegitcommit: 3a4ebcb58192f5bf7969482393090cb356294399
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
# <a name="microsoft-azure-virtual-datacenter-a-network-perspective"></a>Виртуальный центр обработки данных Microsoft Azure: сетевая перспектива
**Microsoft Azure**: ускоренное перемещение, оптимальные затраты, интеграция локальных приложений и данных

## <a name="overview"></a>Обзор
Перемещение локальных приложений в Azure даже без каких-либо значительных изменений (подход lift-and-shift) предоставляет организациям безопасную и экономичную инфраструктуру. Тем не менее для получения максимальной гибкости облачных вычислений организациям нужно модернизировать свою архитектуру, чтобы использовать возможности Azure в полном объеме. Microsoft Azure предоставляет гипермасштабируемые службы и инфраструктуру, надежность и возможности корпоративного класса, а также множество вариантов гибридных подключений. Клиенты могут обращаться к этим облачным службам через Интернет или с помощью службы Azure ExpressRoute, которая позволяет создавать подключения к частной сети. Платформа Microsoft Azure позволяет клиентам легко добавлять в свою инфраструктуру облачные решения и создавать многоуровневую архитектуру. Кроме того, партнеры Майкрософт предоставляют расширенные возможности, предлагая службы безопасности и виртуальные устройства, оптимизированные для работы в Azure.

Эта статья содержит обзор шаблонов и разработок, которые можно использовать для решения проблем безопасности, производительности и масштабирования архитектуры, с которыми сталкиваются многие клиенты, рассматривая массовое перемещение в облако. Здесь также обсуждается применение различных ролей ИТ-специалистов в управлении и регулировании системы с упором на требованиях безопасности и оптимизации затрат.

## <a name="what-is-a-virtual-data-center"></a>Что такое виртуальный центр обработки данных?
Изначально облачные решения были разработаны для размещения отдельных относительно изолированных приложений для общедоступного использования. Этот подход был оптимальным несколько лет. Однако, когда преимущества облачных решений стали очевидными, и в облаке стало возможным размещать несколько крупномасштабных рабочих нагрузок, обеспечение безопасности, надежности, производительности и оптимальных затрат развертывания в одном или нескольких регионах стало критически важным в масштабах жизненного цикла облачной службы.

На схеме облачного развертывания ниже показаны некоторые примеры упущений в системе безопасности (область выделена красным), а также пространство для оптимизации сетевых виртуальных устройств для рабочих нагрузок (области выделены желтым).

[![0]][0]

Виртуальный центр обработки данных появился вследствие необходимости масштабирования для поддержки корпоративных рабочих нагрузок и необходимости решения проблем, возникающих при поддержке широкомасштабных приложений в общедоступном облаке.

Виртуальный центр обработки данных представляет собой не только рабочие нагрузки приложения в облаке, но также сеть, безопасность, управление и инфраструктуру (например, DNS и службы каталогов). Он также обеспечивает обратное частное подключение к локальной сети или центру обработки данных. Так как все больше и больше рабочих нагрузок перемещаются в Azure, важно подумать о поддержке инфраструктуры и объектов, вмещающих эти рабочие нагрузки. Верное понимание того, как структурированы ресурсы, может помочь избежать распространения сотен "островов рабочих нагрузок", которым требуется отдельное управление с независимым потоком данных, моделями безопасности и подходом к решению проблем соответствия требованиям.

Виртуальный центр обработки данных — это преимущественно коллекция отдельных, но связанных сущностей с общими функциями поддержки, возможностями и инфраструктурой. Рассматривая рабочие нагрузки как интегрированный виртуальный центр обработки данных, вы осознаете потенциальную экономию затрат за счет увеличения масштабирования, оптимизированной безопасности с помощью централизации потока данных и компонентов, а также упрощенного аудита операций, управления и соответствия требованиям.

> [!NOTE]
> Важно понимать, что виртуальный центр обработки данных — это **не** дискретный продукт Azure, а сочетание различных функций и возможностей для обеспечения точных требований. Это возможность подумать о том, как можно использовать рабочие нагрузки и Azure для максимизации ресурсов и возможностей в облаке. Таким образом, виртуальный центр обработки данных представляет модульный подход к созданию ИТ-служб в Azure с учетом корпоративных ролей и обязанностей.

Этот центр может помочь реализовать предприятиям следующие сценарии для рабочих нагрузок и приложений в Azure:

-   размещения нескольких связанных рабочих нагрузок;
-   перемещения рабочих нагрузок из локальной среды в Azure;
-   реализации общей или централизованной безопасности и требований к доступности рабочих нагрузок;
-   соответствующего объединения DevOps и централизованной ИТ-инфраструктуры для большого предприятия.

Ключом к получению возможности использовать преимущества виртуального центра обработки данных является централизованная топология (типа "звезда"), а также совмещение функций Azure: [виртуальной сети Azure][VNet], [групп безопасности сети][NSG], [пиринга виртуальных сетей][VNetPeering], [определенных пользователями маршрутов (UDR)][UDR], а также удостоверения Azure с [контролем доступа на основе ролей (RBAC)][RBAC].

## <a name="who-needs-a-virtual-data-center"></a>Кому нужен виртуальный центр обработки данных?
Любому клиенту Azure, которому нужно переместить более нескольких рабочих нагрузок в Azure, стоит рассмотреть возможность использования общих ресурсов. В зависимости от масштабов использование шаблонов и компонентов, заложенных в виртуальный центр обработки данных, может оказаться эффективным даже для отдельных приложений.

Если у вашей организации есть централизованная ИТ-инфраструктура, группа или отдел по сетям, обеспечению безопасности и соответствия требованиям, виртуальный центр обработки данных поможет вам в применении политики, разделении обязанностей, а также обеспечении единообразия базовых общих компонентов, не ограничивая при этом группу по работе с приложениями в определенных вопросах в соответствии со своими требованиями.

Организации, которые отдают предпочтение DevOps, могут использовать основные концепции виртуального центра обработки данных для обеспечения авторизованных групп ресурсов Azure, а также обеспечить полный контроль в таких группах (подписке или группе ресурсов в общей подписке), но границы безопасности и сети соответствуют стандартам, определенным централизованной политикой в центральной виртуальной сети и группе ресурсов.

## <a name="considerations-on-implementing-a-virtual-data-center"></a>Рекомендации по реализация виртуального центра обработки данных
При разработке виртуального центра обработки данных стоит рассмотреть следующие критически важные вопросы:

-   службы удостоверений и каталогов;
-   инфраструктуру безопасности;
-   подключения к облаку;
-   подключения в облаке.

##### <a name="identity-and-directory-service"></a>*Службы удостоверений и каталогов*
Службы удостоверений и каталогов — ключевой аспект всех центров обработки данных, локальных и в облаке. Удостоверение связано со всеми аспектами доступа и авторизации в отношении служб в пределах виртуального центра обработки данных. Чтобы обеспечить доступ к учетной записи и ресурсам Azure только авторизованным пользователям и процессам, Azure использует несколько типов учетных данных для аутентификации. К ним относятся пароли (для доступа к учетной записи Azure), криптографические ключи, цифровые подписи и сертификаты. [*Многофакторная идентификация Azure* (MFA)][MFA] — это дополнительный слой обеспечения безопасности для получения доступа к службам Azure. Этот слой обеспечивает надежную проверку подлинности с использованием ряда простых вариантов подтверждения (например, телефонных вызовов, текстовых сообщений или уведомлений в мобильных приложениях). Пользователи сами выбирают предпочтительный способ подтверждения.

Любому крупному предприятию необходимо определить процесс управления удостоверениями, описывающий управление индивидуальными удостоверениями, их проверку подлинности, авторизацию, роли и привилегии в виртуальном центре обработки данных. Цели такого процесса — повышение безопасности и производительности при одновременном снижении затрат, времени простоя, а также повторяющихся и выполняемых вручную задач.

Предприятиям или организациям может потребоваться нужное сочетание служб для различных бизнес-приложений, так как сотрудники часто используют разные роли при работе с различными проектами. Виртуальный центр обработки данных требует налаженного взаимодействия между различными группами, для каждой из которых предусмотрены конкретные определения ролей, для надлежащего регулирования запущенных систем. Матрица обязанностей, разрешений и прав может быть очень непростой. Управление удостоверениями в виртуальном центре обработки данных реализуется с помощью [*Azure Active Directory* (AAD)][AAD] и управления доступом на основе ролей (RBAC).

Служба каталогов — это общая инфраструктура сведений для поиска, управления, администрирования и организации стандартных элементов и сетевых ресурсов. Эти ресурсы могут включать тома, папки, файлы, принтеры, пользователей, группы, устройства и другие объекты. Каждый ресурс в сети считается объектом сервера каталогов. Сведения о ресурсе хранятся в виде коллекции атрибутов, связанных с этим ресурсом или объектом.

Все бизнес-службы Microsoft Online используют Azure Active Directory (AAD) для входа и других задач, связанных с идентификацией. Azure Active Directory (Azure AD) — это комплексное высокодоступное облачное решение для управления удостоверениями и доступом, предоставляющее базовые службы каталогов, расширенные функции управления удостоверениями и функции управления доступом к приложениям. AAD можно интегрировать с локальным каталогом Active Directory для включения единого входа для всех облачных и локальных приложений. Атрибуты пользователя локальной службы Active Directory могут автоматически синхронизироваться с AAD.

Для назначения всех разрешений в виртуальном центре обработки данных не требуется отдельный глобальный администратор. Вместо этого получить разрешения, необходимые для управления собственными ресурсами в таком центре, может каждый отдел (группа пользователей или служб в службе каталогов). Структурирование разрешений требует балансировки. Большое количество разрешений может препятствовать оптимальной производительности, а недостаточное или отсутствие некоторых — может повысить риски для системы безопасности. Управление доступом на основе ролей (RBAC) Azure помогает решить эту задачу, обеспечивая точное управление доступом для ресурсов виртуального центра обработки данных.

##### <a name="security-infrastructure"></a>*Инфраструктура безопасности*
Инфраструктура безопасности в контексте виртуального центра обработки данных преимущественно относится к разделению трафика в конкретных сегментах виртуальной сети такого центра, а также к управлению входящим и исходящим потоками для всего центра. Служба Azure основана на мультитенантной архитектуре, которая предотвращает несанкционированный и непреднамеренный трафик между развертываниями, используя изоляцию виртуальной сети (VNet), списки управления доступом (ACL), подсистемы балансировки нагрузки, IP-фильтры и политики потока трафика. Преобразование сетевых адресов (NAT) отделяет внутренний и внешний сетевой трафик.

Структура Azure выделяет ресурсы инфраструктуры для рабочих нагрузок клиента и управляет исходящим и входящим обменом данными виртуальных машин. Низкоуровневая оболочка Azure принудительно разделяет память и процессы между виртуальными машинами и обеспечивает безопасную передачу сетевого трафика клиентам гостевой ОС.

##### <a name="connectivity-to-the-cloud"></a>*Подключения к облаку*
Виртуальному центру данных требуется подключение к внешним сетям, чтобы предложить службы клиентам, партнерам и внутренним пользователям. Обычно это подразумевает подключение не только к Интернету, но также к локальным сетям и центрам обработки данных.

Клиенты могут создавать свои политики безопасности, чтобы регулировать, каким образом можно получить доступ к определенным размещенным службам виртуального центра обработки данных из Интернета с помощью сетевых виртуальных устройств (с фильтрацией и проверкой трафика), настраиваемых политик маршрутизации и сетевой фильтрации (определяемые пользователем маршруты и группы сетевой безопасности).

Предприятиям часто требуется подключать виртуальные центры данных к локальным центрам обработки данных или другим ресурсам. Таким образом, подключение между Azure и локальными сетями — важный аспект при проектировании эффективной архитектуры. Предприятия могут использовать два разных способа для создания взаимодействия между виртуальным центром данных и локальными центрами в Azure: подключение через Интернет и частные прямые подключения.

[**VPN типа "сеть —сеть" Azure**][VPN] — это служба подключения через Интернет между локальными сетями и виртуальным центром данных. Подключение устанавливается через защищенные зашифрованные подключения (туннели IPsec или IKE). Подключение типа "сеть — сеть" Azure — это гибкое подключение, которое можно быстро создать. Оно не требует последующего снабжения, так как все подключения выполняются через Интернет.

[**ExpressRoute**][ExR] — это служба подключения Azure, которая позволяет создавать частные подключения между виртуальным центром обработки данных и локальными сетями. Подключения ExpressRoute не осуществляются через общедоступный Интернет и обеспечивают повышенный уровень безопасности, надежности и быстродействия (до 10 Гбит/с) с низкими и последовательными задержками. ExpressRoute оптимально использовать для виртуальных центров обработки данных, так как клиенты ExpressRoute могут получить преимущества правил соответствия, связанных с частными подключениями.

Развертывание подключений ExpressRoute требует участия поставщика услуг ExpressRoute. Для клиентов, которым необходимо быстро приступить к работе, мы рекомендуем поначалу использовать VPN типа "сеть — сеть", чтобы установить подключение между виртуальным центром обработки данных и локальными ресурсами, а после выбрать подключение ExpressRoute.

##### <a name="connectivity-within-the-cloud"></a>*Подключения в облаке*
[Виртуальные сети][VNet] и [пиринг виртуальных сетей][VNetPeering] — основные сетевые службы подключения в виртуальном центре обработки данных. Виртуальная сеть гарантирует естественную границу изоляции для ресурсов виртуального центра обработки данных, а пиринг виртуальных сетей разрешает внутренние взаимодействия между различными виртуальными сетями в одном регионе Azure. Управление трафиком внутри виртуальной сети и между ними должно выполняться в соответствии с набором правил безопасности, заданных через списки управления доступом ([группа безопасности сети][NSG]), [сетевые виртуальные устройства][NVA] и настраиваемые таблицы маршрутизации ([UDR][UDR]).

## <a name="virtual-data-center-overview"></a>Обзор виртуального центра обработки данных

### <a name="topology"></a>Топология
Звездообразная модель, расширяющая виртуальный центр обработки данных в пределах одного региона Azure

[![1]][1]

Центральная зона (концентратор) контролирует и проверяет входящий и исходящий трафик между различными зонами: Интернетом, локальными зонами и периферийными. Звездообразная топология предоставляет ИТ-отделу возможность применить политики безопасности в центральном расположении, одновременно снижая вероятность уязвимости и ошибки в конфигурации.

В центре содержатся общие компоненты службы, используемые периферийными зонами. Ниже приведены несколько стандартных примеров распространенных центральных служб:

-   инфраструктура Windows Active Directory (со связанной службой ADFS) для проверки подлинности сторонних пользователей, которые пытаются получить доступ из ненадежных сетей (эта проверка выполняется прежде, чем предоставить таким пользователям доступ к рабочим нагрузкам в периферийных зонах);
-   служба DNS для разрешения именования рабочих нагрузок в периферийных зонах, чтобы получить доступ к ресурсам локально и в Интернете;
-   инфраструктура PKI для реализации единого входа для рабочих нагрузок;
-   управление потоком (TCP/UDP) между периферийными зонами и Интернетом;
-   управление потоком между периферийными зонами и локальными центрами;
-   управление потоком между несколькими периферийными зонами при необходимости.

Виртуальный центр обработки данных снижает общую стоимость, используя общую центральную инфраструктуру между несколькими периферийными зонами.

Роль каждой периферийной зоны может заключаться в размещении различных типов рабочих нагрузок. Периферийные зоны также предоставляют модульный подход для повторяемых развертываний (например, сценарии разработки и тестирования, пользовательское приемочное тестирование, предварительный этап и рабочий этап) одних рабочих нагрузок. Также эти зоны можно использовать для разделения и активации различных групп в организации (например, групп DevOps). Внутри периферийной зоны можно развернуть базовую рабочую нагрузку или сложные многоуровневые рабочие нагрузки с управлением трафиком между уровнями.

##### <a name="subscription-limits-and-multiple-hubs"></a>Ограничения подписки и несколько центральных зон
В Azure каждый компонент (независимо от типа) развертывается в подписке Azure. Изоляция компонентов Azure в разных подписках Azure может удовлетворять требования различных бизнес-приложений, например настройку дифференцированных уровней доступа и авторизации.

Отдельный виртуальный центр обработки данных можно масштабировать для большого количества периферийных зон, но, как и в случае с любой ИТ-системой, существуют ограничения платформы. Развертывание концентратора привязано к определенной подписке Azure с установленными ограничениями (например, максимальное число пиринга виртуальных сетей;. дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы][Limits]). В случаях, когда ограничения становятся проблемой, архитектуру можно далее масштабировать, расширяя отдельную звездообразную модель до кластера. Несколько концентраторов в одном или нескольких регионах Azure могут быть взаимосвязаны с помощью подключения Express Route или VPN типа "сеть — сеть".

[![2]][2]

Введение нескольких концентраторов приводит к увеличению затрат и действий по управлению системой и может быть оправдано только соответствующей масштабируемостью (для ограничений или избыточности системы) и региональной репликацией (для производительности пользователя или аварийного восстановления). В сценариях, требующих несколько концентраторов, все концентраторы должны обеспечивать один набор служб для упрощения выполнения операций.

##### <a name="interconnection-between-spokes"></a>Взаимодействие между периферийными зонами
Внутри отдельной периферийной зоны можно реализовать сложные рабочие нагрузки с несколькими уровнями. Многоуровневые конфигурации можно реализовать с помощью подсетей (одна подсеть для каждого уровня) в одной виртуальной сети и фильтрации потоков с помощью групп безопасности сети.

С другой стороны архитектор может также развернуть многоуровневую рабочую нагрузку для нескольких виртуальных сетей. Периферийные зоны могут подключаться к другим периферийным зонам в одном концентраторе или разных с помощью пиринга виртуальных сетей. Типичным примером такого сценария является случай, когда серверы обработки приложения располагаются в одной периферийной зоне (виртуальной сети), а база данных развернута в другой периферийной зоне (виртуальной сети). В этом случае периферийные зоны могут легко взаимодействовать через пиринг виртуальных сетей, не используя при этом концентратор. Особой проверки в этом случае требуют архитектура и система безопасности, чтобы гарантировать, что обход концентратора не сопровождается обходом важных элементов безопасности или аудита, которые могут существовать только в концентраторе.

[![3]][3]

Периферийные зоны могут также взаимодействовать с периферийной зоной, выполняющей функции концентратора. Такой подход создает двухуровневую иерархию: периферийная зона высокого уровня (уровень 0) становится концентратором подчиненных периферийных зон (уровень 1) иерархии. Периферийные зоны виртуального центра обработки данных должны направлять трафик в центральный концентратор, чтобы подключиться к локальной сети или Интернету. Такая архитектура концентратора представляет сложную маршрутизацию, что сводит на нет преимущества отдельной звездообразной связи.

Несмотря на то что Azure допускает сложные топологии, одним из основных принципов концепции виртуального центра обработки данных является повторяемость и простота. Чтобы свести к минимуму действия по управлению системой, в эталонной архитектуре виртуального центра обработки данных рекомендуется простая звездообразная модель.

### <a name="components"></a>Компоненты
Виртуальный центр обработки данных состоит из четырех базовых типов компонентов: **инфраструктуры**, **сетей периметра**, **рабочих нагрузок** и **мониторинга**.

Каждый тип компонента состоит из различных функций и ресурсов Azure. Ваш виртуальный центр обработки данных состоит из экземпляров нескольких типов компонентов и нескольких вариантов одного типа компонента. Например, у вас может быть много разных, логически разделенных экземпляров рабочей нагрузки, представляющих разные приложения. Вы используете эти различные экземпляры и типы компонентов, чтобы в конечном счете создать виртуальный центр обработки данных.

[![4]][4]

Предыдущая высокоуровневая архитектура виртуального центра обработки данных показывает разные типы компонентов, используемые в различных зонах звездообразной топологии. На схеме показаны компоненты инфраструктуры в различных частях архитектуры.

Как показывает опыт (для локального центра обработки данных или виртуального центра обработки данных), права доступа и привилегии должны предоставляться на основе группы. Работа с группами, а не отдельными пользователями, позволит обеспечить согласованность политик доступа между группами, а также минимизировать ошибки конфигурации. Назначение и удаление пользователей в соответствующих группах позволит обеспечить актуальность привилегий определенного пользователя.

Каждая группа роли должна содержать уникальный префикс имени, чтобы легко определить связь определенной группы с определенной рабочей нагрузкой. Например, рабочая нагрузка, размещающая службы проверки подлинности, должна содержать группы с именами *AuthServiceNetOps, AuthServiceSecOps, AuthServiceDevOps и AuthServiceInfraOps.* Аналогичным образом для централизованных ролей или ролей, не связанных с конкретной службой, должен использоваться префикс "Corp" (например, *CorpNetOps*).

Многие организации используют разновидность следующих групп для предоставления основной декомпозиции ролей:

-   *Центральная ИТ-группа (Corp)* имеет права владения для управления компонентами инфраструктуры (например, сетями и безопасностью). Поэтому должна включать роль участника в подписке (и управлять концентратором) и права участника сети в периферийных зонах. Большая организация часто разделяет эти обязанности управления между несколькими группами, например группой по выполнению сетевых операций (CorpNetOps) (уделяя исключительное внимание сетевым службам) и группой по выполнению операций безопасности (CorpSecOps) (отвечающей за политики безопасности и брандмауэра). В этом конкретном случае требуется создание двух разных групп для назначения этих пользовательских ролей.
-   *Группа разработки и тестирования (AppDevOps)* несет ответственность за развертывание рабочих нагрузок (приложений или служб). Эта группа выполняет роль участника виртуальной машины для развертываний IaaS, а также одну или несколько ролей участника PaaS (дополнительные сведения см. в статье [Встроенные роли управления доступом на основе ролей в Azure][Roles]). При необходимости группе разработки и тестирования может потребоваться видимость политик безопасности (групп безопасности сети) и политик маршрутизации (UDR) внутри концентратора или определенной периферийной зоны. Таким образом, кроме ролей участника для рабочих нагрузок этой группе также потребуется роль сетевого средства чтения.
-   *Группа операций и обслуживания (CorpInfraOps или AppInfraOps)* несет ответственность за управление рабочими нагрузками в рабочей среде. Эта группа должна быть участником подписки для рабочих нагрузок в любой рабочей подписке. Некоторые организации могут также решить, есть ли необходимость в дополнительной эскалации группы службы поддержки с помощью роли участника подписки в рабочей среде и подписке центрального концентратора, чтобы разрешить потенциальные проблемы конфигурации в рабочей среде.

Так как виртуальный центр обработки данных структурирован, группы, созданные для центральных ИТ-групп, управляющих концентратором, содержат соответствующие группы на уровне рабочей нагрузки. Кроме управления ресурсами концентратора только центральные ИТ-группы смогут управлять внешним доступом и разрешениями верхнего уровня в подписке. Тем не менее группы рабочей нагрузки смогли бы управлять ресурсами и разрешениями своих виртуальных сетей независимо от центрального ИТ-отдела.

Виртуальный центр обработки данных должен быть секционирован для безопасного размещения нескольких проектов в различных бизнес-приложениях. Всем проектам необходимы разные изолированные среды (разработки, UAT, рабочая среда). Отдельные подписки Azure для каждой из этих сред обеспечивают естественную изоляцию.

[![5]][5]

На предыдущей схеме показана связь между проектами организации, пользователями, группами и средами, в которых развернуты компоненты Azure.

Обычно в сфере ИТ среда (или уровень) представляет систему, в которой развертываются и выполняются несколько приложений. Крупные предприятия используют среду разработки (в которой формируются и тестируются изменения) и рабочую среду (которую используют пользователи). Эти среды отделены, часто с помощью нескольких промежуточных сред, что позволяет выполнять поэтапное развертывание, тестирование и откат в случае возникновения проблем. Архитектуры развертывания сильно различаются, но обычно соблюдается основной процесс начала развертывания (разработка) и окончания развертывания (рабочая среда).

Общая архитектура для этих типов многоуровневых сред состоит из DevOps (разработка и тестирование), UAT (промежуточная среда) и рабочих сред. Организации могут использовать один или несколько клиентов Azure AD для определения доступа к этим средам и соответствующих прав. На предыдущей схеме показана ситуация, когда используются два разных клиента Azure AD: один для DevOps и UAT, а другой — исключительно для рабочей среды.

Наличие разных клиентов Azure AD обеспечивает разделение между средами. Одна группа пользователей (например, центрального ИТ-отдела) должна пройти проверку подлинности с помощью другого URI, чтобы получить доступ к другому клиенту AD и изменить роли или разрешения DevOps или рабочих сред проекта. Выполнение проверки подлинности другого пользователя для доступа к другим средам уменьшает возможные простои и другие проблемы, вызванные человеческим фактором.

#### <a name="component-type-infrastructure"></a>Тип компонента: инфраструктура
В этом типе компонента размещается большая часть вспомогательной инфраструктуры. Здесь также проводят большую часть времени группы централизованной ИТ-инфраструктуры и группы по обеспечению соответствия требованиям и безопасности.

[![6]][6]

Компоненты инфраструктуры обеспечивают взаимодействие между различными компонентами виртуального центра обработки данных и присутствуют в концентраторе и периферийных зонах. Ответственность за управление компонентами инфраструктуры и их обслуживание обычно возлагается на группу централизованной ИТ-инфраструктуры или группу безопасности.

Одна из основных задач группы ИТ-инфраструктуры — обеспечение согласованности схем IP-адреса на предприятии. Пространство частного IP-адреса, назначенное виртуальному центру данных, должно быть согласованно с частным IP-адресом, назначенным локальным сетям и не перекрываться им.

Хотя преобразование NAT в локальных пограничных маршрутизаторах или средах Azure может помочь избежать конфликтов IP-адресов, оно усложняет работу компонентов инфраструктуры. Простота управления — одна из основных целей виртуального центра обработки данных, поэтому мы не рекомендуем использовать NAT для обхода конфликта IP-адресов.

Компоненты инфраструктуры содержат следующие возможности.

-   [**Службы удостоверений и каталогов**][AAD]. Доступ к каждому типу ресурса в Azure регулируется удостоверением, хранящимся в службе каталогов. В службе каталогов хранится не только список пользователей, но также права доступа к ресурсам в определенной подписке Azure. Эти службы могут существовать только в облаке или их можно синхронизировать с локальным удостоверением, хранящимся в Active Directory.
-   [**Виртуальная сеть**][VPN]. Виртуальные сети — это один из основных компонентов виртуального центра обработки данных. Они позволяют создавать границы изоляции трафика на платформе Azure. Виртуальная сеть состоит из одного или нескольких сегментов виртуальной сети, каждый из которых содержит определенный сетевой префикс IP-адреса (подсеть). Виртуальная сеть определяет внутреннюю область периметра, где виртуальные машины IaaS и службы PaaS могут устанавливать конфиденциальный канал связи. Виртуальные машины (и службы PaaS) в одной виртуальной сети не могут напрямую обращаться к виртуальным машинам (и службам PaaS) в другой виртуальной сети, даже если обе виртуальные сети созданы одним клиентом в одной подписке. Это критически важное свойство, которое гарантирует, что виртуальные машины и все коммуникации клиента останутся закрытыми в пределах виртуальной сети.
-   [**UDR**][UDR]. Трафик в виртуальной сети перенаправляется по умолчанию на основе системной таблицы маршрутизации. Маршрут, определенный пользователем, представляет настраиваемую таблицу маршрутизации, которую сетевые администраторы могут связать с одной или несколькими подсетями, чтобы перезаписать поведение системной таблицы маршрутизации и определить путь обмена данными в виртуальной сети. Наличие маршрутов, определенных пользователем, гарантирует, что исходящий трафик из периферийной зоны проходит через определенные настраиваемые виртуальные машины, сетевые виртуальные устройства и подсистемы балансировки нагрузки в концентраторе и периферийных зонах.
-   [**Группа безопасности сети (NSG)**][NSG]. Группа безопасности сети представляет список правил безопасности, которые действуют как фильтрация трафика для источников IP-адреса, назначения IP-адреса, протоколов, портов источника IP-адреса и портов назначения IP-адреса. Эти группы можно применить к подсети, виртуальной плате сетевого адаптера, связанной с виртуальной машиной Azure или и к тому, и к другому. Группы безопасности сети необходимы для реализации правильного управления потоком в концентраторе и периферийных зонах. Уровень безопасности, обеспечиваемый этой группой, определяется функцией, с помощью которой вы можете открыть определенные порты для определенной цели. Клиенты должны применить дополнительные фильтры для каждой виртуальной машины с помощью брандмауэров на основе узла, например iptables или брандмауэра Windows.
-   **DNS**. Разрешение имен ресурсов в виртуальных сетях виртуального центра обработки данных обеспечивается через DNS. Область разрешения имен DNS по умолчанию ограничена виртуальной сетью. Обычно требуется развернуть пользовательскую службу DNS в концентраторе как часть общих служб, но основные потребители службы находятся в периферийной зоне. При необходимости клиенты могут создать иерархическую структуру DNS с делегированием зон DNS в периферийные зоны.
-   [**Подписка][SubMgmt] и [управление группой ресурсов][RGMgmt]**. Подписка определяет естественную границу, чтобы создать несколько групп ресурсов в Azure. Ресурсы в подписке собраны вместе в логические контейнеры, которые называются группами ресурсов. Группа ресурсов представляет логическую группу для организации ресурсов виртуального центра обработки данных.
-   [**RBAC**][RBAC]. Через RBAC можно сопоставить роль в организации с правами доступа к определенным ресурсам Azure, позволяя предоставить пользователям разрешения только на определенный набор действий (т. е. ограничить их). С помощью RBAC доступ предоставляется путем назначения соответствующей роли пользователям, группам и приложениям в определенной области. Областью назначения роли может быть подписка Azure, группа ресурсов или отдельный ресурс. RBAC разрешает наследование разрешений. Роли, назначенной в родительской области, предоставляется доступ также к содержащимся в ней дочерним элементам. С помощью RBAC вы можете распределить обязанности и предоставить пользователям доступ на уровне, который им необходим для выполнения поставленных задач. Например, можно использовать RBAC, чтобы разрешить одному сотруднику управлять виртуальными машинами в подписке, а другому — управлять в ней базами данных SQL.
-   [**Пиринговая связь между виртуальными сетями**][VNetPeering]. Основная функция, используемая для создания инфраструктуры виртуального центра обработки данных — пиринговая связь между виртуальными сетями, механизм, который соединяет две виртуальные сети в одном регионе через сеть центра обработки данных Azure.

#### <a name="component-type-perimeter-networks"></a>Тип компонента: сети периметра
Компоненты [сети периметра][DMZ] (сети DMZ) позволяют обеспечить сетевые подключения локальных или физических сетей центра обработки данных, а также любые подключения к Интернету и из него. Сетевые группы и группы по обеспечению безопасности также проводят здесь большую часть времени.

Прежде чем попасть на внутренние серверы в периферийных зонах, входящие пакеты должны пройти через устройства безопасности в концентраторе, такие как брандмауэры, IDS и IPS. Пакеты, направленные в Интернет рабочими нагрузками, также должны проходить через защитные устройства сети периметра перед выходом из сети. Это удобно для применения политик, выполнения проверок и аудита.

Компоненты сети периметра предоставляют следующие возможности:

-   [Виртуальные сети][VNet], [UDR][UDR], [NSG][NSG].
-   [Виртуальные сетевые модули][NVA].
-   [Подсистема балансировки нагрузки][ALB].
-   [Шлюз приложения][AppGW] / [WAF][WAF].
-   [Общедоступные IP-адреса][PIP].

Как правило, группы централизованной ИТ-инфраструктуры и группы по обеспечению безопасности ответственны за определение требований и операций в сетях периметра.

[![7]][7]

На предыдущей схеме показано применение двух периметров с доступом в Интернет и локальную сеть. Оба периметра располагаются в концентраторе. В отдельном концентраторе сеть периметра с доступом в Интернет можно масштабировать для поддержки большого количества бизнес-приложений с помощью нескольких ферм брандмауэров веб-приложения (WAF) и стандартных брандмауэров.

[**Виртуальные сети**][VNet]. Обычно концентратор создается в виртуальной сети с несколькими подсетями для размещения другого типа служб, выполняющих фильтрацию и анализ трафика в Интернет и обратно через NVA, WAF и шлюзы приложения Azure.

[**UDR**][UDR]. С помощью UDR клиенты могут развернуть брандмауэр, устройство IDS/IPS или другие виртуальные устройства и направить сетевой трафик через эти устройства безопасности, что позволяет применять, контролировать и проверять политики границ безопасности. UDR можно создать в концентраторе и периферийных зонах для обеспечения передачи трафика через определенные пользовательские виртуальные машины, виртуальные сетевые устройства и подсистемы балансировки нагрузки, используемые виртуальным центром обработки данных. Чтобы гарантировать, что трафик, созданный виртуальными машинами, находящимися в периферийной зоне, передается в нужные виртуальные устройства, в подсетях периферийной зоны необходимо задать определяемый пользователем маршрут. Для этого нужно задать интерфейсный IP-адрес внутреннего балансировщика нагрузки для следующего перехода. Внутренняя подсистема балансировки нагрузки распределяет внутренний трафик на виртуальные устройства (внутренний пул подсистемы балансировки нагрузки).

[![8]][8]

[**Сетевые виртуальные устройства**][NVA]. В концентраторе сеть периметра с доступом в Интернет обычно управляется с помощью фермы брандмауэров или брандмауэров веб-приложения (WAF).

Различные бизнес-приложения обычно используют многие веб-приложения, которые, как правило, являются уязвимыми. Брандмауэры веб-приложений представляют особое поколение продукта, используемого для обнаружения атак, направленных на веб-приложения (HTTP и HTTPS). Это и отличает их от брандмауэров стандартного типа. По сравнению с традиционными брандмауэрами WAF содержит набор специальных функций для защиты внутренних веб-серверов от угроз.

Ферма брандмауэра представляет группу брандмауэров, совместно работающих под общим администрированием и включающих набор правил безопасности для защиты рабочих нагрузок, размещенных в периферийных зонах, а также управление доступом к локальным сетям. Программное обеспечение фермы брандмауэра менее специализированное по сравнению с ПО WAF, но включает широкую область для фильтрации и проверки любого типа трафика (входящего и исходящего). Фермы брандмауэра обычно реализуются в Azure с помощью виртуальных сетевых устройств (NVA), доступных в Azure Marketplace.

Мы рекомендуем использовать один набор NVA для трафика в Интернете, и другой набор — для трафика, создаваемого локальными системами. Использование только одного набора NVA в обоих случаях представляет угрозу безопасности, так как между двумя наборами сетевого трафика отсутствует периметр безопасности. Использование отдельных NVA упрощает проверку правил безопасности, а также позволяет понять, какие правила соответствуют определенным входящим сетевым запросам.

Большинство крупных предприятий управляют несколькими доменами. Azure DNS можно использовать для размещения DNS-записей определенного домена. Например, виртуальный IP-адрес (VIP) внешней подсистемы балансировки нагрузки Azure (или брандмауэры WAF) можно зарегистрировать в записи A записи Azure DNS.

[**Azure Load Balancer**][ALB]. Это служба высокого уровня доступности (уровень 4) (TCP, UDP), которая может распределять входящий трафик между экземплярами службы, определенными в наборе балансировки нагрузки. Трафик, отправленный в подсистему балансировки нагрузки из интерфейсных конечных точек (конечных точек общедоступного IP-адреса или частного IP-адреса) может распространяться с преобразованием адреса и без него в набор внутреннего пула IP-адресов (например, виртуальные сетевые устройства или виртуальные машины).

Azure Load Balancer также может проверять работоспособность различных экземпляров сервера. Если проверка завершается ошибкой, подсистема балансировки нагрузки останавливает передачу трафика в неработоспособный экземпляр. В виртуальном центре обработки данных у нас есть внешняя подсистема балансировки нагрузки в концентраторе (например, балансировка трафика в NVA) и периферийных зонах (для выполнения таких задач, как балансировка трафика между разными виртуальными машинами многоуровневого приложения).

[**Шлюз приложений**][AppGW]. Шлюз приложений Microsoft Azure — это выделенный виртуальный модуль, предоставляющий контроллер доставки приложений (ADC) как услугу, предлагая для приложения множество функций балансировки нагрузки уровня 7. Таким образом, вы можете оптимизировать производительность веб-фермы за счет выполнения операции завершения SSL-запросов, требующей интенсивного использования ЦП, на шлюзе приложений. Кроме того, пользователи получают другие возможности маршрутизации уровня 7, включая распределение входящего трафика методом циклического перебора, соответствие сеансу на основе файлов cookie, маршрутизацию на основе URL-путей и возможность размещения нескольких веб-сайтов за одним шлюзом приложений. Брандмауэр веб-приложений (WAF) также предоставляется как часть SKU WAF шлюза приложений. Этот SKU обеспечивает защиту веб-приложений от распространенных веб-уязвимостей и эксплойтов. Шлюз приложений можно настроить как шлюз с выходом в Интернет, внутренний шлюз или их сочетание. 

[**Общедоступные IP-адреса**][PIP]. Некоторые функции Azure позволяют связывать конечные точки службы с общедоступным IP-адресом для получения доступа к ресурсам из Интернета. Конечная точка использует преобразование сетевых адресов (NAT) для маршрутизации трафика на внутренний адрес и порт в виртуальной сети Azure. Это основной путь передачи внешнего трафика в виртуальную сеть. Общедоступные IP-адреса можно настроить, чтобы определить, какой трафик следует пропускать в виртуальную сеть, а также как и где его следует пропускать.

#### <a name="component-type-monitoring"></a>Тип компонента: мониторинг
Компоненты мониторинга обеспечивают видимость и оповещения, получаемые от всех других типов компонентов. У всех групп должен быть доступ к мониторингу соответствующих компонентов и служб. Если у вас есть централизованная служба поддержки или операционные группы, им понадобится интегрированный доступ к данным, обеспечиваемым этими компонентами.

Azure предлагает различные типы служб ведения журналов и мониторинга для отслеживания поведения размещенных ресурсов Azure. Регулирование рабочих нагрузок и управление ими в Azure основано не только на сборе данных журнала, но также на возможности активировать действия на основе определенных сообщаемых событий.

Есть два основных типа журналов в Azure:

-   [**Журнал действий**][ActLog] (также называется "операционный журнал") обеспечивает сведения об операциях, выполняемых в ресурсах в подписке Azure. Эти журналы предоставляют отчет о событиях уровня управления в подписках. Журналы аудита ведутся для каждого ресурса Azure.

-   [**Журналы диагностики Azure**][DiagLog] генерируются ресурсом. Они содержат подробные и своевременные данные о работе этого ресурса. Содержимое этих журналов зависит от типа ресурса.

[![9]][9]

В виртуальном центре обработки данных очень важно отслеживать журналы групп безопасности сети (NSG), а особенно следующие:

-   [**Журналы событий**][NSGLog]. Эти журналы предоставляют сведения о правилах NSG, примененных к виртуальным машинам и ролям экземпляров на основе MAC-адреса.
-   [**Журналы счетчиков**][NSGLog].Они позволяют отслеживать, сколько раз каждое правило NSG применялось для запрета или разрешения трафика.

Все журналы можно хранить в учетных записях хранения Azure для аудита, статического анализа или архивации. Если журналы хранятся в учетной записи хранения Azure, клиенты могут использовать разные типы платформ для извлечения, подготовки, анализа и визуализации этих данных для отчета о состоянии работоспособности облачных ресурсов.

У больших предприятий должна быть стандартная платформа для мониторинга локальных систем, которую они могут расширить для интеграции журналов, созданных развертываниями в облаке. Для организаций, которые предпочитают хранить все журналы в облаке, [Log Analytics][LogAnalytics] — оптимальный выбор. Набор Log Analytics реализован как облачная служба, поэтому время, затрачиваемое на подготовку к работе, минимально, как и вложения в службы инфраструктуры. Кроме того, Log Analytics может поддерживать интеграцию с компонентами System Center, такими как System Center Operations Manager, позволяя распространить существующие инвестиции управления в облако.

Log Analytics — это служба в Azure, которая помогает выполнять сбор, сопоставление, поиск и действия в отношении данных журналов и производительности, созданных операционными системами, приложениями и облачными компонентами инфраструктуры. OMS Log Analytics предоставляет клиентам сведения об операциях в режиме реального времени, используя интегрированный поиск и настраиваемые панели мониторинга для анализа всех записей всех рабочих нагрузок в виртуальном центре обработки данных.

#### <a name="component-type-workloads"></a>Тип компонента: рабочие нагрузки
Именно здесь находятся ваши фактические приложения и службы. Группы разработчиков приложения также проводят здесь большую часть времени.

Возможности рабочих нагрузок на самом деле безграничны. Ниже приведены всего несколько возможных типов рабочих нагрузок.

**Внутренние бизнес-приложения**

Бизнес-приложения — приложения для компьютера, которые являются чрезвычайно важными для выполняющихся корпоративных операций. У них есть некоторые общие характеристики.

-   **Интерактивность**. Бизнес-приложения интерактивны по своей природе: вводятся данные и возвращаются результаты или отчеты.
-   **Активное использование данных**. Бизнес-приложения — это приложения, интенсивно использующие данные, которым требуется частый доступ к базам данных или другому хранилищу.
-   **Интеграция**. Эти приложения предлагают интеграцию с другими системами в организации или за ее пределами.

**Веб-сайты для клиентов (Интернет или внутренние)**. Большинство приложений, взаимодействующих с Интернетом, — это веб-сайты. Azure предлагает возможность запуска веб-сайта на виртуальной машине IaaS или на сайте [веб-приложений Azure][WebApps] (PaaS). Веб-приложения Azure поддерживают интеграцию с виртуальными сетями, которые разрешают развертывание веб-приложений в периферийной зоне виртуального центра обработки данных. Благодаря интеграции с виртуальной сетью вам не нужно предоставлять конечную точку в Интернете приложениям. Вместо этого из частной виртуальной сети будут использоваться частные адреса, недоступные из Интернета.

**Данные большого размера и анализ**. Когда данные необходимо масштабировать до очень большого объема, базы данных могут не справиться с соответствующим масштабированием. Технология Hadoop предлагает систему для параллельного запуска распределенных запросов в большом количестве узлов. Клиенты могут выполнить рабочие нагрузки данных на виртуальных машинах IaaS или в PaaS ([HDInsight][HDI]). HDInsight поддерживает развертывание в виртуальную сеть на основе расположения. Развертывание можно выполнить в кластер в периферийной зоне виртуального центра обработки данных.


[Концентраторы событий Azure][EventHubs]**для событий и сообщений** — это служба обработки данных телеметрии с высокой степенью масштабируемости, которая собирает, преобразовывает и хранит миллионы событий. Эта распределенная платформа для потоковой передачи данных с низкой задержкой и настраиваемым временем хранения позволяет принимать большие объемы данных телеметрии в Azure, а также считывать эти данные из нескольких приложений. С концентраторами событий отдельный поток может поддерживать обработку конвейеров в режиме реального времени и на основе пакетов.

Высоконадежную облачную систему для обмена сообщениями между приложениями и службами можно реализовать с помощью [служебной шины Azure][ServiceBus], которая предлагает асинхронный обмен сообщениями через брокер между клиентом и сервером, а также обработку сообщений в порядке поступления и возможность публикации и подписки.

[![10]][10]

### <a name="multiple-vdc"></a>Несколько виртуальных центров обработки данных
Как видно в этой статье основное внимание уделяется отдельному виртуальному центру данных. Здесь описываются базовые компоненты и архитектура, обеспечивающие отказоустойчивость этого центра. Такие компоненты Azure, как Azure Load Balancer, NVA, группы доступности, наборы масштабирования и другие механизмы обеспечивают систему, позволяющую создать в рабочих службах надежные уровни SLA.

Тем не менее, отдельный виртуальный центр обработки данных размещается в одном регионе и является уязвимым к простоям, что может сказаться на функционировании всего региона. Клиентам, которые хотят получить высокий уровень обслуживания согласно SLA, необходимо защитить службы с помощью развертываний одного проекта в двух (или более) виртуальных центрах данных в разных регионах.

Кроме этого сценария, мы рекомендуем рассмотреть еще несколько распространенных сценариев, требующих развертывания нескольких виртуальных центров обработки данных.

-   Региональное и глобальное присутствие.
-   Аварийное восстановление
-   Механизм перенаправления трафика между центрами обработки данных.

#### <a name="regionalglobal-presence"></a>Региональное и глобальное присутствие
Центры обработки данных Azure присутствуют в различных регионах по всему миру. При выборе нескольких центров обработки данных Azure клиенты должны учитывать два связанных фактора: географические расстояния и задержку. Клиентам необходимо рассчитать географическое расстояние между виртуальными центрами обработки данных, а также расстояние между таким центром и пользователем для обеспечения оптимального взаимодействия с последним.

Регион Azure, в котором размещаются виртуальные центры обработки данных, должен соответствовать нормативным требованиям, установленным обязательной юрисдикцией для организации.

#### <a name="disaster-recovery"></a>Аварийное восстановление
Реализация плана аварийного восстановления напрямую связана с типом соответствующей рабочей нагрузки и возможностью синхронизации состояния рабочей нагрузки между виртуальными центрами обработки данных. В идеале большинство клиентов хотят синхронизировать данные приложений между развертываниями, выполняющимися в двух разных виртуальных центрах данных, для реализации быстрой отработки отказа. Большинство приложений чувствительны к задержке, что может привести к потенциальному истечению времени ожидания и задержке синхронизации данных.

Мониторинг синхронизации или пульса приложений в разных виртуальных центрах данных требует взаимодействия между этими центрами. Два виртуальных центра обработки данных в разных регионах можно подключить следующим образом:

-   частный пиринг ExpressRoute, когда концентраторы виртуального центра обработки данных подключены к одному каналу ExpressRoute;
-   несколько каналов ExpressRoute, подключенных через корпоративную магистраль, и сетку виртуального центра обработки данных, подключенную к каналам ExpressRoute;
-   VPN-подключения типа "сеть — сеть" между концентраторами виртуального центра обработки данных в каждом регионе Azure.

Подключение ExpressRoute — предпочтительный механизм из-за более высокой пропускной способности и последовательной задержки при передаче через магистраль Майкрософт.

Для проверки приложения, распределенного между двумя (или более) разными виртуальными центрами обработки данных, расположенных в разных регионах, используется стандартный способ. Клиенты должны выполнить тестовую проверку сети, чтобы проверить задержку и пропускную способность подключений и решить, какая репликация данных более подходящая (синхронная или асинхронная), а также определить оптимальное целевое время восстановления для рабочих нагрузок.

#### <a name="mechanism-to-divert-traffic-between-dc"></a>Механизм перенаправления трафика между центрами обработки данных
Один из эффективных подходов для перенаправления входящего трафика из одного виртуального центра обработки данных в другой основан на DNS. [Диспетчер трафика Azure][TM] использует механизм службы доменных имен (DNS), чтобы направлять трафик пользователей в наиболее оптимальную общедоступную конечную точку в определенном виртуальном центре обработки данных. Через пробы диспетчер трафика периодически проверяет работоспособность службы общедоступных конечных точек в разных виртуальных центрах данных, а в случае сбоя этих конечных точек выполняется автоматическое перенаправление в дополнительный виртуальный центр обработки данных.

Диспетчер трафика работает в общедоступных конечных точках Azure и его можно использовать, например, для управления или перенаправления трафика на виртуальные машины Azure и веб-приложения в соответствующем виртуальном центре обработки данных. Диспетчер трафика является отказоустойчивым даже в случае сбоя во всем регионе Azure. Он может управлять распределением пользовательского трафика для конечных точек службы в разных виртуальных центрах данных на основе нескольких критериев (например, при сбое службы в определенном виртуальном центре обработки данных или выборе виртуального центра обработки данных с наименьшей задержкой сети для клиента).

### <a name="conclusion"></a>Заключение
Виртуальный центр обработки данных — это подход к перемещению центра обработки данных в облако, в котором используется сочетание функций и возможностей для создания масштабируемой архитектуры в Azure, расширяющей использование облачных ресурсов, сокращающей затраты и упрощающей системное регулирование. Понятие виртуального центра обработки данных основано на звездообразной топологии, предоставляющей распространенные общие службы в концентраторе и позволяющей размещать конкретные приложения и рабочие нагрузки в периферийных зонах. Виртуальный центр обработки данных соответствует структуре корпоративных ролей при совместной работе разных отделов (центрального ИТ-отдела, DevOps, операционного отдела и отдела обслуживания), для каждого из которых предусмотрен определенный список ролей и обязанностей. Виртуальный центр обработки данных удовлетворяет требованиям перемещения по методике lift-and-shift и также предоставляет множество преимуществ для системных развертываний в облаке.

## <a name="references"></a>Ссылки
В этом руководстве были рассмотрены приведенные ниже функции и компоненты. Щелкните ссылки, чтобы получить дополнительные сведения.

| | | |
|-|-|-|
|Сетевые функции|Балансировка нагрузки|Соединение|
|[Виртуальные сети Azure][VNet]</br>[Группы безопасности сети][NSG].</br>[Журналы групп безопасности сети][NSGLog]</br>[Определяемая пользователем маршрутизация][UDR]</br>[Сетевые виртуальные устройства][NVA]</br>[Общедоступные IP-адреса][PIP]|[Azure Load Balancer (L3) ][ALB]</br>[Шлюз приложений (L7) ][AppGW]</br>[Брандмауэр веб-приложения][WAF]</br>[Диспетчер трафика Azure][TM] |[Пиринг виртуальных сетей][VNetPeering]</br>[Виртуальная частная сеть][VPN]</br>[ExpressRoute][ExR]
|Удостоверение</br>|Мониторинг</br>|Рекомендации</br>|
|[Azure Active Directory][AAD]</br>[Многофакторная идентификация][MFA]</br>[Элементы управления доступом на основе ролей][RBAC]</br>[Роли AAD по умолчанию][Roles] |[Журналы действий][ActLog]</br>[Журналы диагностики][DiagLog]</br>[Log Analytics][LogAnalytics]</br> |[Сети периметра: рекомендации][DMZ]</br>[Управление подпиской][SubMgmt]</br>[Управление группой ресурсов][RGMgmt]</br>[Ограничения подписки Azure][Limits] |
|Прочие службы Azure|
|[Веб-приложения Azure][WebApps]</br>[HDInsights (Hadoop) ][HDI]</br>[Концентраторы событий][EventHubs]</br>[Служебная шина][ServiceBus]|



## <a name="next-steps"></a>Дальнейшие действия
 - Ознакомьтесь с [пиринговой связью между виртуальными сетями][VNetPeering] — базовой технологией связи в звездообразной топологии виртуального центра обработки данных.
 - Реализуйте [AAD][AAD], чтобы приступить к анализу [RBAC][RBAC].
 - Разработайте модель управления ресурсами и подпиской, а также модель RBAC для обеспечения необходимой структуры, требований и политик организации. Планирование является самым важным действием: для реорганизации, слияния, новых разработок и т. д.

<!--Image References-->
[0]: ./media/networking-virtual-datacenter/redundant-equipment.png "Примеры совмещения компонентов" 
[1]: ./media/networking-virtual-datacenter/vdc-high-level.png "Подробный пример звездообразной топологии в виртуальном центре обработки данных"
[2]: ./media/networking-virtual-datacenter/hub-spokes-cluster.png "Кластер со звездообразной топологией"
[3]: ./media/networking-virtual-datacenter/spoke-to-spoke.png "Подключение типа "луч — луч" в звездообразной топологии"
[4]: ./media/networking-virtual-datacenter/vdc-block-level-diagram.png "Схема виртуального центра обработки данных на уровне блоков"
[5]: ./media/networking-virtual-datacenter/users-groups-subsciptions.png "Пользователи, группы, подписки и проекты"
[6]: ./media/networking-virtual-datacenter/infrastructure-high-level.png "Общая схема инфраструктуры"
[7]: ./media/networking-virtual-datacenter/highlevel-perimeter-networks.png "Общая схема инфраструктуры"
[8]: ./media/networking-virtual-datacenter/vnet-peering-perimeter-neworks.png "Пиринг виртуальных сетей и сетей периметра"
[9]: ./media/networking-virtual-datacenter/high-level-diagram-monitoring.png "Общая схема мониторинга"
[10]: ./media/networking-virtual-datacenter/high-level-workloads.png "Общая схема рабочих нагрузок"

<!--Link References-->
[Limits]: https://docs.microsoft.com/azure/azure-subscription-service-limits
[Roles]: https://docs.microsoft.com/azure/active-directory/role-based-access-built-in-roles
[VNet]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview
[NSG]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg 
[VNetPeering]: https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview 
[UDR]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: https://docs.microsoft.com/azure/active-directory/role-based-access-control-what-is
[MFA]: https://docs.microsoft.com/azure/multi-factor-authentication/multi-factor-authentication
[AAD]: https://docs.microsoft.com/azure/active-directory/active-directory-whatis
[VPN]: https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: https://docs.microsoft.com/azure/expressroute/expressroute-introduction 
[NVA]: https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/nva-ha
[SubMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-subscription-governance 
[RGMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview
[DMZ]: https://docs.microsoft.com/azure/best-practices-network-security
[ALB]: https://docs.microsoft.com/azure/load-balancer/load-balancer-overview
[PIP]: https://docs.microsoft.com/azure/virtual-network/resource-groups-networking#public-ip-address
[AppGW]: https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction
[WAF]: https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview
[ActLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log
[LogAnalytics]: https://docs.microsoft.com/azure/log-analytics/log-analytics-overview
[WebApps]: https://docs.microsoft.com/azure/app-service/
[HDI]: https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview
[TM]: https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview
