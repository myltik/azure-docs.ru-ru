---
title: Создание, изменение или удаление сетевых интерфейсов Azure | Документация Майкрософт
description: Узнайте, что такое сетевой интерфейс, как создать и удалить сетевые интерфейсы, а также изменить их параметры.
services: virtual-network
documentationcenter: na
author: jimdial
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/24/2017
ms.author: jdial
ms.openlocfilehash: a6e3bb31886f1b682ef20404b536bfc4a0c07151
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34656889"
---
# <a name="create-change-or-delete-a-network-interface"></a>Создание, изменение или удаление сетевых интерфейсов

Узнайте, как создать и удалить сетевые интерфейсы, а также изменить их параметры. Сетевой интерфейс позволяет виртуальной машине Azure взаимодействовать с Интернетом, Azure и локальными ресурсами. При создании виртуальной машины с помощью портала Azure создается один сетевой интерфейс с параметрами по умолчанию. Вместо этого можно создать сетевые интерфейсы с пользовательскими параметрами и добавить один или несколько сетевых интерфейсов для виртуальной машины при ее создании. Кроме того, можно изменить параметры имеющегося сетевого интерфейса по умолчанию. В этой статье объясняется, как создавать сетевые интерфейсы с пользовательскими параметрами, изменять имеющиеся параметры, такие как назначенный сетевой фильтр (группы безопасности сети), назначенная подсеть, параметры DNS-сервера и IP-пересылка, и как удалять сетевые интерфейсы.

При необходимости изучите инструкции по [добавлению, изменению и удалению IP-адресов](virtual-network-network-interface-addresses.md) для сетевого интерфейса. Если нужно добавить или удалить сетевые интерфейсы на виртуальных машинах, ознакомьтесь со статьей [Добавление и удаление сетевых интерфейсов виртуальных машин](virtual-network-network-interface-vm.md).

## <a name="before-you-begin"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- При использовании портала перейдите по адресу https://portal.azure.com и войдите с использованием своей учетной записи Azure.
- При использовании команд PowerShell для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/powershell) или в PowerShell на своем компьютере. Azure Cloud Shell — это бесплатная интерактивная оболочка, с помощью которой можно выполнять действия, описанные в этой статье. Она включает предварительно установленные общие инструменты Azure и настроена для использования с вашей учетной записью. Для работы с этим руководством требуется модуль Azure PowerShell 5.4.1 или более поздней версии. Выполните командлет `Get-Module -ListAvailable AzureRM`, чтобы узнать установленную версию. Если вам необходимо выполнить обновление, ознакомьтесь со статьей, посвященной [установке модуля Azure PowerShell](/powershell/azure/install-azurerm-ps). Если модуль PowerShell запущен локально, необходимо также выполнить командлет `Connect-AzureRmAccount`, чтобы создать подключение к Azure.
- При использовании команд интерфейса командной строки Azure (CLI) для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/bash) или в интерфейсе командной строки на своем компьютере. Для этого руководства требуется Azure CLI 2.0.28 или более поздней версии. Выполните командлет `az --version`, чтобы узнать установленную версию. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli). Если Azure CLI запущен локально, необходимо также выполнить командлет `az login`, чтобы создать подключение к Azure.

Учетной записи, в которую вы входите или с помощью которой подключаетесь к Azure, должна быть назначена роль [Участник сетей](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) или [пользовательская роль](../role-based-access-control/custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json), которой назначены соответствующие действия, перечисленные в таблице [Разрешения](#permissions).

## <a name="create-a-network-interface"></a>Создание сетевого интерфейса

При создании виртуальной машины с помощью портала Azure создается один сетевой интерфейс с параметрами по умолчанию. Если нужно указать все параметры сетевого интерфейса, можно создать сетевой интерфейс с пользовательскими параметрами и подключить его к виртуальной машине при ее создании (с помощью PowerShell или Azure CLI). Кроме того, можно создать сетевой интерфейс и добавить его к имеющейся виртуальной машине (с помощью PowerShell или Azure CLI). Дополнительные сведения о создании виртуальной машины с существующим сетевым интерфейсом, добавлении и удалении сетевых интерфейсов на существующей виртуальной машине см. в [этой статье](virtual-network-network-interface-vm.md). Перед созданием сетевого интерфейса необходимо, чтобы в расположении и подписке, в которых он будет создана, была настроена [виртуальная сеть](manage-virtual-network.md#create-a-virtual-network).

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите **+ Добавить** в разделе **Сетевые интерфейсы**.
3. Введите или выберите значения для перечисленных ниже параметров, а затем щелкните **Создать**.

    |Параметр|Обязательный?|Сведения|
    |---|---|---|
    |ИМЯ|Yes|Имя должно быть уникальным в пределах выбранной группы ресурсов. Со временем в вашей подписке Azure скорее всего появится несколько сетевых интерфейсов. Ознакомьтесь с разделом [Правила именования и ограничения](/azure/architecture/best-practices/naming-conventions?toc=%2fazure%2fvirtual-network%2ftoc.json#naming-rules-and-restrictions), чтобы изучить рекомендации по созданию соглашения об именовании, упрощающего управление несколькими сетевыми интерфейсами. Имя невозможно изменить после создания сетевого интерфейса.|
    |Виртуальная сеть|Yes|Выберите виртуальную сеть для сетевого интерфейса. Сетевой интерфейс можно назначить только той виртуальной сети, которая находится в той же подписке и расположении, что и сетевой интерфейс. После создания сетевого интерфейса невозможно изменить виртуальную сеть, которой он назначен. Виртуальная машина, в которую добавляется сетевой интерфейс, также должна находится в том же расположении и подписке, что и сетевой интерфейс.|
    |Подсеть|Yes|Выберите подсеть в выбранной виртуальной сети. Подсеть, которой назначен сетевой интерфейс, можно изменить после его создания.|
    |Назначение частного IP-адреса|Yes| Здесь вы выбираете метода назначения IPv4-адреса. Выберите один из следующих методов назначения. **Динамический**. При выборе этого параметра Azure автоматически назначает следующий доступный адрес из адресного пространства выбранной подсети. **Статический**. При выборе этого параметра необходимо вручную назначить доступный IP-адрес из адресного пространства подсети, которую вы выбрали. Статические и динамические адреса меняются только по требованию или при удалении сетевого интерфейса. Метод назначения можно изменить после создания сетевого интерфейса. DHCP-сервер Azure назначает этот адрес сетевому интерфейсу в операционной системе виртуальной машины.|
    |Группа безопасности сети|Нет | Оставьте значение **Нет**, выберите имеющуюся [группу безопасности сети](security-overview.md) или [создайте новую](tutorial-filter-network-traffic.md). Группы безопасности сети позволяют фильтровать передачу исходящего и входящего сетевого трафика сетевого интерфейса. К сетевому интерфейсу можно применить одну группу безопасности сети или не применять их вообще. К подсети, к которой назначен сетевой интерфейс, также можно применить одну группу безопасности сети или не применять их вообще. Применение группы безопасности сети к сетевому интерфейсу и подсети, которой назначен сетевой интерфейс, иногда может приводить к неожиданным результатам. Чтобы устранить проблемы с группами безопасности сети, примененными к сетевым интерфейсам и подсетям, воспользуйтесь [этими инструкциями](diagnose-network-traffic-filter-problem.md).|
    |Подписка|Yes|Выберите одну из [подписок](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription) Azure. Виртуальная машина и виртуальная сеть, к которой подключен сетевой интерфейс, должна находится в одной подписке.|
    |"Private IP address (IPv6)" (Частный IP-адрес (IPv6))|Нет | Если этот флажок установлен, кроме IPv4-адреса сетевому интерфейсу назначается IPv6-адрес. Важные сведения об использовании IPv6 с сетевыми интерфейсами см. в [этом разделе](#IPv6) статьи. Выбрать метод назначения IPv6-адреса невозможно. IPv6-адрес назначается динамическим методом.
    |"IPv6 name" (Имя IPv6) (отображается только если установлен флажок **Private IP address (IPv6)** (Частный IP-адрес (IPv6))). |Да, если установлен флажок **Private IP address (IPv6)** (Частный IP-адрес (IPv6)).| Это имя присваивается дополнительной IP-конфигурации сетевого интерфейса. Дополнительные сведения об IP-конфигурации см. в разделе [Просмотр параметров сетевого интерфейса](#view-network-interface-settings).|
    |Группа ресурсов|Yes|Выберите существующую [группу ресурсов](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#resource-group) или создайте новую. Сетевой интерфейс может находится в одной группе ресурсов с виртуальной машиной, к которой он подключен, и с виртуальной сетью или в разных.|
    |Расположение|Yes|Виртуальная машина и виртуальная сеть, к которой подключен сетевой интерфейс, должна находится в одном [расположении](https://azure.microsoft.com/regions) (регионе).|

На портале невозможно назначить общедоступный IP-адрес сетевому интерфейсу при его создании, но портал создает общедоступный IP-адрес и назначает его сетевому интерфейсу при создании виртуальной машины с помощью портала. Чтобы узнать, как добавить общедоступный IP-адрес в ранее созданный сетевой интерфейс, см. статью [Добавление, изменение и удаление IP-адресов для сетевого интерфейса Azure](virtual-network-network-interface-addresses.md). Если вы хотите создать сетевой интерфейс с общедоступным IP-адресом, для этого необходимо использовать интерфейс командной строки или PowerShell.

На портале невозможно назначить сетевой интерфейс группам безопасности приложений, однако это можно сделать с помощью Azure CLI и PowerShell. Дополнительные сведения о группах безопасности приложений см. в статье [Группы безопасности приложений](security-overview.md#application-security-groups).

>[!Note]
> Azure назначает MAC-адрес сетевому интерфейсу только после его подключения к виртуальной машине и ее первого запуска. Невозможно указать MAC-адрес, который Azure назначает сетевому интерфейсу. MAC-адрес остается назначенным сетевому интерфейсу, пока сетевой интерфейс не будет удален или пока не будет изменен частный IP-адрес, назначенный основной IP-конфигурации основного сетевого интерфейса. Дополнительные сведения об IP-адресах и IP-конфигурациях см. в статье [Добавление, изменение и удаление IP-адресов для сетевого интерфейса Azure](virtual-network-network-interface-addresses.md).

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic create](/cli/azure/network/nic#az_network_nic_create)|
|PowerShell|[New-AzureRmNetworkInterface](/powershell/module/azurerm.network/new-azurermnetworkinterface#create)|

## <a name="view-network-interface-settings"></a>Просмотр параметров сетевого интерфейса

Большинство параметров сетевого интерфейса можно просматривать и изменять после его создания. Портал не отображает DNS-суффикс или сведения о членстве в группах безопасности приложений для сетевого интерфейса. Чтобы просмотреть DNS-суффикс и сведения о членстве в группах безопасности приложений, используйте [команды](#view-settings-commands) PowerShell или Azure CLI.

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите из списка сетевой интерфейс, который вы хотите просмотреть или настроить.
3. Для выбранного сетевого интерфейса отображаются следующие элементы:
    - **Обзор.** Здесь содержатся сведения о сетевом интерфейсе, такие как назначенные IP-адреса, виртуальная сеть и подсеть, к которой назначен сетевой интерфейс, и виртуальная машина, к которой подключен сетевой интерфейс (если таковая имеется). На следующем рисунке представлены параметры сетевого интерфейса **mywebserver256**: ![Обзор сетевого интерфейса](./media/virtual-network-network-interface/nic-overview.png). Сетевой интерфейс можно переместить в другую группу ресурсов или подписку, щелкнув (**Изменить**) рядом с пунктом **Группа ресурсов** или **Имя подписки**. При перемещении сетевого интерфейса необходимо переместить все ресурсы, связанные с ним. Если сетевой интерфейс подключен, например, к виртуальной машине, также необходимо переместить виртуальную машину и другие ресурсы, связанные с ней. Сведения о перемещении сетевого интерфейса см. в статье [Перемещение ресурсов в новую группу ресурсов или подписку](../azure-resource-manager/resource-group-move-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json#use-portal). В ней указаны необходимые условия для перемещения, а также процедура перемещения с использованием портала Azure, PowerShell и Azure CLI.
    - **IP configurations** (IP-конфигурации). Здесь перечислены общедоступные и частные IPv4- и IPv6-адреса, назначенные IP-конфигурации. Если IPv6-адрес назначен IP-конфигурации, он не отображается. Дополнительные сведения об IP-конфигурациях, а также о добавлении и удалении IP-адресов см. в статье [Добавление, изменение и удаление IP-адресов для сетевого интерфейса Azure](virtual-network-network-interface-addresses.md). В этом разделе также настраиваются IP-пересылка и назначение подсетей. Дополнительные сведения об этих параметрах см. в разделах [Включение и отключение IP-пересылки](#enable-or-disable-ip-forwarding) и [Изменение назначения подсети](#change-subnet-assignment).
    - **DNS-серверы.** Вы можете указать, какому DNS-серверу назначен сетевой интерфейс с использованием DHCP-серверов Azure. Сетевой интерфейс может наследовать параметр от виртуальной сети, которой он назначен, или использовать пользовательский параметр, переопределяющий параметр этой виртуальной сети. Чтобы изменить отображаемые элементы, см. раздел [Изменение DNS-серверов](#change-dns-servers).
    - **Network security group (NSG)** (Группа безопасности сети (NSG)). Указывает, связана ли с сетевым интерфейсом группа безопасности сети. NSG содержит правила входящего и исходящего трафика, фильтрующие трафик сетевого интерфейса. Если группа безопасности сети связана с сетевым интерфейсом, отображается имя этой группы. Изменение отображаемых элементов описано в разделе [Создание, изменение или удаление сетевых интерфейсов](#associate-or-dissociate-a-network-security-group).
    - **Свойства.** Здесь отображаются основные параметры сетевого интерфейса, включая MAC-адрес (остается пустым, если сетевой интерфейс не подключен к виртуальной машине), а также подписка, в которой он находится.
    - **Effective security rules** (Действующие правила безопасности). Правила безопасности указываются, если сетевой интерфейс подключен к работающей виртуальной машине, а NSG связана с сетевым интерфейсом, подсетью, которой он назначен, или и с тем, и с другим. Чтобы узнать больше о том, что отображено, изучите раздел [Создание, изменение или удаление сетевых интерфейсов](#view-effective-security-rules). Дополнительные сведения о группах безопасности сети см. в статье [Фильтрация сетевого трафика с помощью групп безопасности сети](security-overview.md).
    - **Effective routes** (Действующие маршруты). Маршруты указываются, если сетевой интерфейс подключен к работающей виртуальной машине. Маршруты представляют собой сочетание маршрутов Azure по умолчанию, любых определяемых пользователем маршрутов и всех маршрутов BGP, которые могут существовать для подсети, к которой подключен сетевой интерфейс. Чтобы узнать больше о том, что отображено, изучите раздел [Создание, изменение или удаление сетевых интерфейсов](#view-effective-routes). Чтобы узнать больше о маршрутах по умолчанию Azure и определяемых пользователем маршрутах, изучите раздел [Маршрутизация трафика в виртуальной сети](virtual-networks-udr-overview.md).
    - **Общие параметры диспетчера ресурсов Azure**. Дополнительные сведения об общих параметрах диспетчера ресурсов Azure см. в документах о [журнале действий](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#activity-logs), [контроле доступа (IAM)](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#access-control), [тегах](../azure-resource-manager/resource-group-using-tags.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [блокировках](../azure-resource-manager/resource-group-lock-resources.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [скрипте службы автоматизации](../azure-resource-manager/resource-manager-export-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json#export-the-template-from-resource-group).

<a name="view-settings-commands"></a>**Команды**

Если IPv6-адрес назначается сетевому интерфейсу, в выходных данных PowerShell указывается, что адрес назначен, но сам назначенный адрес не возвращается. Аналогично в выходных данных интерфейса командной строки указывается, что адрес назначен, но для адреса возвращается значение *null*.

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic list](/cli/azure/network/nic#az_network_nic_list) для просмотра сетевых интерфейсов в подписке, [az network nic show](/cli/azure/network/nic#az_network_nic_show) для просмотра параметров сетевого интерфейса.|
|PowerShell|[Get-AzureRmNetworkInterface](/powershell/module/azurerm.network/get-azurermnetworkinterface) для просмотра сетевых интерфейсов в подписке или для просмотра параметров сетевого интерфейса.|

## <a name="change-dns-servers"></a>Изменение DNS-серверов

DNS-сервер для сетевого интерфейса в ОС виртуальной машины назначает DHCP-сервер Azure в соответствии с параметром DNS-сервера для сетевого интерфейса. Дополнительные сведения о параметрах разрешении имен для сетевого интерфейса см. в статье [Разрешение имен для ВМ и экземпляров ролей](virtual-networks-name-resolution-for-vms-and-role-instances.md). Сетевой интерфейс может наследовать параметры виртуальной сети или использовать собственные уникальные параметры, переопределяющие параметры для виртуальной сети.

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите из списка сетевой интерфейс, для которого вы хотите изменить DNS-сервер.
3. Выберите **DNS-серверы** в разделе **Параметры**.
4. Выберите один из вариантов:
    - **Inherit from virtual network** (Наследовать от виртуальной сети). Выберите этот вариант, чтобы наследовать параметры DNS-сервера, определенные для виртуальной сети, которой назначен сетевой интерфейс. На уровне виртуальной сети определяется пользовательский DNS-сервер или DNS-сервер, предоставленный Azure. DNS-сервер, предоставленной Azure, может разрешать имена узлов для ресурсов, назначенных той же виртуальной сети. Для разрешения ресурсов, назначенных для разным виртуальным сетям, нужно использовать FQDN.
    - **Custom** (Пользовательские). Вы можете настроить собственный DNS-сервер для разрешения имен в нескольких виртуальных сетях. Введите IP-адрес сервера, который будет использоваться в качестве DNS-сервера. Указанный адрес DNS-сервера назначается только этому сетевому интерфейсу и переопределяет любые параметры DNS для виртуальной сети, которой назначен сетевой интерфейс.
5. Щелкните **Сохранить**.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic update](/cli/azure/network/nic#az_network_nic_update)|
|PowerShell|[Set-AzureRmNetworkInterface](/powershell/module/azurerm.network/set-azurermnetworkinterface)|

## <a name="enable-or-disable-ip-forwarding"></a>Включение и отключение IP-пересылки

Благодаря IP-пересылке виртуальная машина, к которой подключен сетевой интерфейс, получает следующие возможности:
- Получать сетевой трафик, не предназначенный для одного из IP-адресов, назначенных какой-либо IP-конфигурации, которая назначена сетевому интерфейсу.
- Отправлять сетевой трафик с исходным IP-адресом, который отличается от одного из присвоенных IP-конфигурации сетевого интерфейса.

Параметр нужно включить для каждого сетевого интерфейса, подключенного к виртуальной машине, принимающей трафик, который ей нужно переслать. Трафик может перенаправить виртуальная машина, к которой подключен один или несколько сетевых интерфейсов. Хотя IP-пересылка и является параметром Azure, на виртуальной машине также должно выполняться приложение с такой возможностью, например брандмауэр, приложения для оптимизации глобальной сети и балансировки нагрузки. Если на виртуальной машине выполняются сетевые приложения, ее часто называют виртуальным сетевым устройством. Список готовых к развертыванию виртуальных сетевых устройств см. в [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/category/networking?page=1&subcategories=appliances). IP-пересылка обычно используется в определяемых пользователем маршрутах. Дополнительные сведения об определяемых пользователем маршрутах см. в [этой статье](virtual-networks-udr-overview.md).

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите сетевой интерфейс, для которого вы намерены включить или отключить IP-пересылку.
3. Выберите **Конфигурация IP** в разделе **Параметры**.
4. Щелкните **Включено** или **Отключено** (значение по умолчанию), чтобы изменить этот параметр.
5. Щелкните **Сохранить**.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic update](/cli/azure/network/nic#az_network_nic_update)|
|PowerShell|[Set-AzureRmNetworkInterface](/powershell/module/azurerm.network/set-azurermnetworkinterface)|

## <a name="change-subnet-assignment"></a>Изменение назначения подсети

Вы можете изменить подсеть, но не виртуальную сеть, которой назначен сетевой интерфейс.

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите из списка сетевой интерфейс, для которого вы хотите изменить назначение подсети.
3. Выберите **Конфигурация IP** в разделе **Параметры**. Если возле каких-либо частных IP-адресов в любой IP-конфигурации имеется подпись **(Статический)**, необходимо изменить способ назначения этих адресов на динамический, выполнив приведенные ниже инструкции. Для изменения назначения подсети сетевого интерфейса все частные IP-адреса должны быть назначены динамически. Если адреса назначаются динамическим способом, перейдите к шагу 5. Если IPv4-адреса назначены статически, выполните следующие действия, чтобы изменить их способ назначения на динамический.
    - Выберите из списка конфигурацию IP, для которой вы намерены изменить метод назначения IPv4-адреса.
    - Выберите **динамический** способ **назначения** частных IP-адресов. Невозможно назначить IPv6-адрес статическим методом.
    - Щелкните **Сохранить**.
4. В раскрывающемся списке **Подсеть** выберите подсеть, в которую нужно переместить сетевой интерфейс.
5. Щелкните **Сохранить**. Новые динамические адреса назначаются из диапазона адресов новой подсети. После назначения сетевого интерфейса в новую подсеть ей можно будет назначить статический IPv4-адрес из диапазона адресов новой подсети, если это требуется. Дополнительные сведения о добавлении, изменении и удалении IP-адресов для сетевого интерфейса см. в [этой статье](virtual-network-network-interface-addresses.md).

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic ip-config update](/cli/azure/network/nic/ip-config#az_network_nic_ip_config_update)|
|PowerShell|[Set-AzureRmNetworkInterfaceIpConfig](/powershell/module/azurerm.network/set-azurermnetworkinterfaceipconfig)|

## <a name="add-to-or-remove-from-application-security-groups"></a>Добавление в группы безопасности приложений или удаление из них

На портале невозможно назначить (или отменить назначение) сетевой интерфейс группам безопасности приложений, однако это можно сделать с помощью Azure CLI и PowerShell. Дополнительные сведения о группах безопасности приложений см. в разделах [Группы безопасности приложений](security-overview.md#application-security-groups) и [Создание, изменение или удаление сетевых интерфейсов](#create-an-application-security-group).

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic update](/cli/azure/network/nic#az_network_nic_update)|
|PowerShell|[Set-AzureRmNetworkInterface](/powershell/module/azurerm.network/set-azurermnetworkinterface)|

## <a name="associate-or-dissociate-a-network-security-group"></a>Связывание группы безопасности сети или удаление этой связи

1. В поле поиска в верхней части портала введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите из списка сетевой интерфейс, с которым требуется связать группу безопасности сети или связь группы безопасности сети с которым требуется удалить.
3. В разделе **Параметры** щелкните **Группа безопасности сети**.
4. Выберите **Изменить**
5. Выберите **Группа безопасности сети** и выберите группу безопасности сети, которую требуется связать с сетевым интерфейсом, или выберите **Нет**, чтобы удалить связь с группой безопасности сети.
6. Щелкните **Сохранить**.

**Команды**

- Azure CLI: [az network nic update](/cli/azure/network/nic#az-network-nic-update)
- PowerShell: [Set-AzureRmNetworkInterface](/powershell/module/azurerm.network/set-azurermnetworkinterface)

## <a name="delete-a-network-interface"></a>Удаление сетевого интерфейса

Сетевой интерфейс можно удалить, если он не подключен к виртуальной машине. Если сетевой интерфейс подключен к виртуальной машине, необходимо сначала изменить состояние виртуальной машины на "Остановлена" (освобождена), а затем отключить сетевой интерфейс от виртуальной машины. Чтобы отключить сетевой интерфейс от виртуальной машины, выполните действия из раздела [Удаление сетевого интерфейса из виртуальной машины](virtual-network-network-interface-vm.md#remove-a-network-interface-from-a-vm). Однако если это единственный сетевой интерфейс, который подключен к виртуальной машине, его невозможно отключить от нее. К виртуальной машине всегда должен быть подключен по крайней мере один сетевой интерфейс. При удалении виртуальной машины все подключенные к ней сетевые интерфейсы отключаются, но не удаляются.

1. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, выберите их.
2. Выберите многоточие (**…**) справа от сетевого интерфейса, который вы намерены удалить из списка сетевых интерфейсов.
3. Нажмите кнопку **Удалить**.
4. Выберите **Да**, чтобы подтвердить удаление сетевого интерфейса.

При удалении сетевого интерфейса MAC- или IP-адреса, назначенные ему, освобождаются.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic delete](/cli/azure/network/nic#az_network_nic_delete)|
|PowerShell|[Remove-AzureRmNetworkInterface](/powershell/module/azurerm.network/remove-azurermnetworkinterface)|

## <a name="resolve-connectivity-issues"></a>Устранение проблем с подключением

Если не удается подключиться к виртуальной машине или из нее, возможно, причиной проблемы являются правила безопасности группы безопасности сети или маршруты, действующие для сетевого интерфейса. Доступны следующие варианты устранения проблемы.

### <a name="view-effective-security-rules"></a>Просмотр действующих правил безопасности

Действующие правила безопасности для каждого сетевого интерфейса, подключенного к виртуальной машине, представляют собой сочетание правил, которые вы создали в группе безопасности сети, и [правил безопасности по умолчанию](security-overview.md#default-security-rules). Общие сведения о действующих правилах безопасности сетевого интерфейса могут помочь определить, почему не удается подключиться к виртуальной машине или из нее. Вы можете просмотреть действующие правила для любого сетевого интерфейса, подключенного к работающей виртуальной машине.

1. В поле поиска в верхней области портала введите имя виртуальной машины, для которой нужно просмотреть действующие правила. Если вы не знаете ее имя, введите в поле поиска *виртуальные машины*. Когда элемент **Виртуальные машины** появится в результатах поиска, щелкните его и выберите из списка виртуальную машину.
2. В разделе **параметров** выберите **Сеть**.
3. Выберите имя сетевого интерфейса.
4. В разделе **Поддержка и устранение неполадок** выберите **Действующие правила безопасности**.
5. Просмотрите список действующих правил безопасности, чтобы определить, имеются ли корректные правила для требуемых входящих и исходящих подключений. Дополнительные сведения о том, что отображается в списке, можно найти в разделе [Безопасность сети](security-overview.md).

Функция проверки потока IP службы "Наблюдатель за сетями Azure" также может помочь определить, не препятствуют ли правила безопасности связи между виртуальной машиной и конечной точкой. Дополнительные сведения см. в разделе [Diagnose a virtual machine network traffic filter problem - Azure portal](../network-watcher/diagnose-vm-network-traffic-filtering-problem.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Диагностика проблемы с сетевым фильтром виртуальной машины с помощью портала Azure).

**Команды**

- Azure CLI: [az network nic list-effective-nsg](/cli/azure/network/nic#az-network-nic-list-effective-nsg)
- PowerShell: [Get-AzureRmEffectiveNetworkSecurityGroup](/powershell/module/azurerm.network/get-azurermeffectivenetworksecuritygroup) 

### <a name="view-effective-routes"></a>Просмотр действующих маршрутов

Действующие маршруты сетевых интерфейсов, подключенных к виртуальной машине, представляют собой комбинацию маршрутов по умолчанию, созданных вами маршрутов и всех маршрутов, распространенных из локальных сетей с помощью BGP через шлюз виртуальной сети Azure. Общие сведения о действующих маршрутах сетевого интерфейса могут помочь определить, почему не удается подключиться к виртуальной машине или из нее. Вы можете просмотреть действующие маршруты для любого сетевого интерфейса, подключенного к работающей виртуальной машине.

1. В поле поиска в верхней области портала введите имя виртуальной машины, для которой нужно просмотреть действующие правила. Если вы не знаете ее имя, введите в поле поиска *виртуальные машины*. Когда элемент **Виртуальные машины** появится в результатах поиска, щелкните его и выберите из списка виртуальную машину.
2. В разделе **параметров** выберите **Сеть**.
3. Выберите имя сетевого интерфейса.
4. В разделе **Поддержка и устранение неполадок** выберите **Фактические маршруты**.
5. Просмотрите список действующих маршрутов, чтобы определить, имеются ли корректные маршруты для требуемых входящих и исходящих подключений. Дополнительные сведения о том, что отображается в списке, см. в статье [Маршрутизация трафика в виртуальной сети](virtual-networks-udr-overview.md).

Функция проверки следующего прыжка службы "Наблюдатель за сетями Azure" также может помочь определить, не препятствуют ли маршруты обмену данными между виртуальной машиной и конечной точкой. Дополнительные сведения см. в разделе [Diagnose a virtual machine network traffic filter problem - Azure portal](../network-watcher/diagnose-vm-network-routing-problem.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Диагностика проблемы с сетевым фильтром виртуальной машины с помощью портала Azure).

**Команды**

- Azure CLI: [az network nic show-effective-route-table](/cli/azure/network/nic#az-network-nic-show-effective-route-table)
- PowerShell: [Get-AzureRmEffectiveRouteTable](/powershell/module/azurerm.network/get-azurermeffectiveroutetable)

## <a name="permissions"></a>Разрешения

Для выполнения задач с сетевыми интерфейсами учетной записи должна быть назначена роль [Участник сети](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) или [пользовательская](../role-based-access-control/custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) роль, которой назначены соответствующие разрешения, перечисленные в следующей таблице.

| Действие                                                                     | ИМЯ                                                      |
| ---------                                                                  | -------------                                             |
| Microsoft.Network/networkInterfaces/read                                   | Получение сетевого интерфейса.                                     |
| Microsoft.Network/networkInterfaces/write                                  | Создание или обновление сетевого интерфейса.                        |
| Microsoft.Network/networkInterfaces/join/action                            | Подключение сетевого интерфейса к виртуальной машине.           |
| Microsoft.Network/networkInterfaces/delete                                 | Удаление сетевого интерфейса.                                  |
| Microsoft.Network/networkInterfaces/joinViaPrivateIp/action                | Присоединение ресурса к сетевому интерфейсу с помощью ассоциации службы.     |
| Microsoft.Network/networkInterfaces/effectiveRouteTable/action             | Получение действующей таблицы маршрутов сетевого интерфейса.               |
| Microsoft.Network/networkInterfaces/effectiveNetworkSecurityGroups/action  | Получение действующих групп безопасности сети для сетевого интерфейса.           |
| Microsoft.Network/networkInterfaces/loadBalancers/read                     | Получение подсистем балансировки нагрузки сетевого интерфейса.                      |
| Microsoft.Network/networkInterfaces/serviceAssociations/read               | Получение ассоциации службы.                                   |
| Microsoft.Network/networkInterfaces/serviceAssociations/write              | Создание или обновление ассоциации службы.                    |
| Microsoft.Network/networkInterfaces/serviceAssociations/delete             | Удаление ассоциации службы.                                |
| Microsoft.Network/networkInterfaces/serviceAssociations/validate/action    | Проверка ассоциации службы.                              |
| Microsoft.Network/networkInterfaces/ipconfigurations/read                  | Получение конфигурации IP сетевого интерфейса.                    |

## <a name="next-steps"></a>Дополнительная информация

- Создайте виртуальную машину с несколькими сетевыми адаптерами с помощью [Azure CLI](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json) или [PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json).
- Создайте виртуальную машину с одним сетевым адаптером и несколькими IPv4-адресами с помощью [Azure CLI](virtual-network-multiple-ip-addresses-cli.md) или [PowerShell](virtual-network-multiple-ip-addresses-powershell.md).
- Создайте виртуальную машину с одним сетевым адаптером и частным IPv6-адресом (управляемую Azure Load Balancer) с помощью [Azure CLI](../load-balancer/load-balancer-ipv6-internet-cli.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../load-balancer/load-balancer-ipv6-internet-ps.md?toc=%2fazure%2fvirtual-network%2ftoc.json) или [шаблона Azure Resource Manager](../load-balancer/load-balancer-ipv6-internet-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|.
- Создайте сетевой интерфейс с помощью примеров сценариев [PowerShell](powershell-samples.md) или [Azure CLI](cli-samples.md) либо на основе [шаблонов Azure Resource Manager](template-samples.md).
- Создайте и примените [политику Azure](policy-samples.md) для виртуальных сетей.