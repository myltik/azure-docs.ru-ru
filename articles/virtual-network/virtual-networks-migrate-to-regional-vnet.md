---
title: Перенос виртуальной сети Azure (классической) из территориальной группы в регион | Документация Майкрософт
description: Узнайте, как перенести виртуальную сеть (классическую) из территориальной группы в регион.
services: virtual-network
documentationcenter: na
author: genlin
manager: cshepard
editor: ''
tags: azure-service-management
ms.assetid: 84febcb9-bb8b-4e79-ab91-865ad9de41cb
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/15/2016
ms.author: genli
ms.openlocfilehash: 1fca7f6165998b95254f841638cf8bcbc1fb352d
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
ms.locfileid: "31792160"
---
# <a name="migrate-a-virtual-network-classic-from-an-affinity-group-to-a-region"></a>Перенос виртуальной сети (классической) из территориальной группы в регион

> [!IMPORTANT]
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json). В этой статье рассматривается использование классической модели развертывания. Для большинства новых развертываний корпорация Майкрософт рекомендует использовать модель развертывания с помощью Resource Manager.

Ресурсы, созданные внутри одной территориальной группы, физически размещаются на серверах, расположенных в географической близости друг к другу. Это позволяет ресурсам взаимодействовать быстрее. В прошлом наличие территориальной группы было обязательным условием для создания виртуальной сети (классической). В то время служба диспетчера сети, которая управляла виртуальными сетями (классическими), могла работать только в пределах набора физических серверов или единицы масштабирования. Архитектурные усовершенствования позволили расширить масштабы управления сетью до региона.

В результате этих усовершенствований необходимость в наличии территориальных групп для виртуальных сетей (классических) отпала. Вместо территориальных групп для виртуальных сетей (классических) теперь используются регионы. Классические виртуальные сети, связанные с регионами, называются региональными.

Территориальные группы не рекомендуется использовать вообще. Помимо создания виртуальных сетей, территориальные группы также использовались для того, чтобы размещать рядом друг с другом такие ресурсы, как среды вычисления приложений и хранилища (то и другое в классической модели). Однако с текущей архитектурой сети Azure эти требования к размещению более не актуальны.

> [!IMPORTANT]
> Создать виртуальную сеть, связанную с территориальной группой, по-прежнему технически возможно, но это не дает никаких преимуществ. Многие возможности виртуальных сетей, в частности группы безопасности сети, доступны только при использовании региональной виртуальной сети и недоступны для виртуальных сетей, связанных с территориальными группами.
> 
> 

## <a name="edit-the-network-configuration-file"></a>Изменение файла конфигурации сети

1. Экспортируйте файл конфигурации сети. Сведения о том, как экспортировать файл конфигурации сети с помощью PowerShell или интерфейса командной строки Azure (Azure CLI) 1.0, см. в статье [Настройка (классической) виртуальной сети с помощью файла конфигурации сети](virtual-networks-using-network-configuration-file.md#export).
2. Измените файл конфигурации сети, заменив параметр **AffinityGroup** на **Location**. В качестве значения параметра **Location** следует указать [регион](https://azure.microsoft.com/regions) Azure.
   
   > [!NOTE]
   > **Location** (расположение) — это регион, указанный для территориальной группы, которая связана с виртуальной сетью (классической). Например, если виртуальная сеть (классическая) связана с территориальной группой, расположенной на западе США, во время переноса следует указать в параметре **Location** расположение West US. 
   > 
   > 
   
    Измените следующие строки в файле конфигурации сети, заменив значения собственными. 
   
    **Старое значение:** \<VirtualNetworkSitename="VNetUSWest" AffinityGroup="VNetDemoAG"\>. 
   
    **Новое значение:** \<VirtualNetworkSitename="VNetUSWest" Location="West US"\>.
3. Сохраните изменения и [импортируйте](virtual-networks-using-network-configuration-file.md#import) конфигурацию сети в Azure.

> [!NOTE]
> Такая миграция НЕ вызывает простоев в работе ваших служб.
> 
> 

## <a name="what-to-do-if-you-have-a-vm-classic-in-an-affinity-group"></a>Действия при наличии виртуальной машины (классической) в территориальной группе
Виртуальные машины (классические), которые сейчас находятся в территориальной группе, не нужно удалять из группы. При развертывании виртуальной машины она попадает в одну единицу масштабирования. Территориальные группы могут ограничивать набор доступных размеров виртуальных машин для нового развертывания виртуальных машин, но существующая развернутая виртуальная машина уже ограничена набором размеров, доступных в единице масштабирования, в которой она развернута. Так как виртуальная машина уже развернута в единице масштабирования, ее удаление из территориальной группы не окажет на виртуальную машину никакого влияния.
