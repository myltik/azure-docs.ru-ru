---
title: Настройка IP-адресов для сетевого интерфейса Azure | Документация Майкрософт
description: Узнайте, как добавлять, изменять и удалять частные и общедоступные IP-адреса для сетевого интерфейса.
services: virtual-network
documentationcenter: na
author: jimdial
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/24/2017
ms.author: jdial
ms.openlocfilehash: 79b84e3231886f62bf5978195562339d5c3275b6
ms.sourcegitcommit: 59914a06e1f337399e4db3c6f3bc15c573079832
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/19/2018
---
# <a name="add-change-or-remove-ip-addresses-for-an-azure-network-interface"></a>Добавление, изменение и удаление IP-адресов для сетевого интерфейса Azure

Узнайте, как добавлять, изменять и удалять общедоступные и частные IP-адреса для сетевого интерфейса. Частные IP-адреса, назначенные сетевому интерфейсу, позволяют виртуальной машине взаимодействовать с другими ресурсами в виртуальной сети Azure и подключенных к ней сетях. Частный IP-адрес также обеспечивает исходящее подключение к Интернету с использованием непредсказуемого IP-адреса. [Общедоступный IP-адрес](virtual-network-public-ip-address.md), назначенный сетевому интерфейсу, обеспечивает входящее подключение к виртуальной машине из Интернета. Он также обеспечивает исходящее подключение виртуальной машины к Интернету с использованием непредсказуемого IP-адреса. Дополнительные сведения см. в разделе [Общие сведения об исходящих подключениях в Azure](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json). 

Чтобы создать, изменить или удалить сетевой интерфейс, ознакомьтесь со статьей [Создание, изменение или удаление сетевых интерфейсов](virtual-network-network-interface.md). Если вам нужно добавить или удалить сетевые интерфейсы на виртуальной машине, ознакомьтесь со статьей [Добавление или удаление сетевых интерфейсов виртуальных машин](virtual-network-network-interface-vm.md). 


## <a name="before-you-begin"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- При использовании портала перейдите по адресу https://portal.azure.com и войдите с использованием своей учетной записи Azure.
- При использовании команд PowerShell для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/powershell) или в PowerShell на своем компьютере. Azure Cloud Shell — это бесплатная интерактивная оболочка, с помощью которой можно выполнять действия, описанные в этой статье. Она включает предварительно установленные общие инструменты Azure и настроена для использования с вашей учетной записью. Для работы с этим руководством требуется модуль Azure PowerShell версии не ниже 5.2.0. Выполните командлет `Get-Module -ListAvailable AzureRM`, чтобы узнать установленную версию. Если вам необходимо выполнить обновление, ознакомьтесь со статьей, посвященной [установке модуля Azure PowerShell](/powershell/azure/install-azurerm-ps). Если модуль PowerShell запущен локально, необходимо также выполнить командлет `Connect-AzureRmAccount`, чтобы создать подключение к Azure.
- При использовании команд интерфейса командной строки Azure (CLI) для работы с этой статьей выполняйте их в [Azure Cloud Shell](https://shell.azure.com/bash) или в интерфейсе командной строки на своем компьютере. Для этого руководства требуется Azure CLI версии не ниже 2.0.26. Выполните командлет `az --version`, чтобы узнать установленную версию. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli). Если Azure CLI запущен локально, необходимо также выполнить командлет `az login`, чтобы создать подключение к Azure.

## <a name="add-ip-addresses"></a>Добавление IP-адресов

Вы можете добавить требуемое [частных](#private) и [общедоступных](#public) количество [IPv4](#ipv4)-адресов для сетевого интерфейса в пределах, приведенных в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits). С помощью портала невозможно добавить IPv6-адрес для существующего сетевого интерфейса (хотя на портале можно добавить частный IPv6-адрес для сетевого интерфейса при его создании). Можно добавить частный IPv6-адрес в одну из [дополнительных IP-конфигураций](#secondary) (если дополнительные IP-конфигурации не существуют) для существующего сетевого интерфейса, который не подключен к виртуальной машине, с помощью PowerShell или интерфейса командной строки. Невозможно добавить общедоступный IPv6-адрес для сетевого интерфейса с помощью какого-либо инструмента. Ознакомьтесь с протоколом [IPv6](#ipv6), чтобы узнать больше об использовании IPv6-адресов. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевой интерфейс, для которого нужно добавить IPv4-адрес.
4. В разделе **Параметры** колонки выбранного сетевого интерфейса щелкните **Конфигурации IP**.
5. В появившейся колонке IP-конфигураций щелкните **+ Add** (+ Добавить).
6. Укажите следующие сведения и нажмите кнопку **ОК**, чтобы закрыть колонку **Добавить IP-конфигурацию**.

    |Параметр|Обязательный?|Сведения|
    |---|---|---|
    |ИМЯ|Yes|Должно быть уникальным для сетевого интерфейса.|
    |type|Yes|Так как вы добавляете IP-конфигурацию к существующему сетевому интерфейсу и каждый сетевой интерфейс должен иметь [основную](#primary) IP-конфигурацию, единственным вариантом является параметр **Вторичный**.|
    |"Private IP address assignment method" (Способ назначения общедоступных IP-адресов)|Yes|[**Динамически.**](#dynamic) В Azure назначается первый доступный адрес из диапазона адресов подсети, в которой развернут этот сетевой интерфейс. [**Статически.**](#static) Вы назначаете любой свободный адрес из диапазона адресов подсети, в которой развернут этот сетевой интерфейс.|
    |Общедоступный IP-адрес|Нет |**Отключено.** Сейчас с IP-конфигурацией не связан ресурс общедоступного IP-адреса. **Включено.** Выберите существующий общедоступный IPv4-адрес или создайте его. Дополнительные сведения о создании общедоступного IP-адреса см. в [этом разделе](virtual-network-public-ip-address.md#create-a-public-ip-address).|
7. Добавьте дополнительный частный IP-адрес в операционную систему виртуальной машины вручную, выполнив инструкции в статье [Назначение виртуальным машинам нескольких IP-адресов с помощью портала Azure](virtual-network-multiple-ip-addresses-portal.md#os-config). Ознакомьтесь с [частными](#private) IP-адресами, чтобы изучить специальные рекомендации, прежде чем вручную добавлять IP-адреса в операционную систему виртуальной машины. Не добавляйте в операционную систему виртуальной машины общедоступные IP-адреса.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic ip-config create](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#az_network_nic_ip_config_create)|
|PowerShell|[Add-AzureRmNetworkInterfaceIpConfig](/powershell/module/azurerm.network/add-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="change-ip-address-settings"></a>Изменение параметров IP-адреса

Может потребоваться изменить способ назначения IPv4-адресов, статический IPv4-адрес или общедоступный IP-адрес для сетевого интерфейса. При изменении частного IPv4-адреса дополнительной IP-конфигурации, связанной с дополнительным сетевым интерфейсом в виртуальной машине (узнайте больше об [основных и дополнительных сетевых интерфейсах](virtual-network-network-interface-vm.md)), переведите виртуальную машину в остановленное состояние (освободите ее), прежде чем выполнять приведенные ниже действия. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевой интерфейс, для которого нужно просмотреть или изменить параметры IP-адреса.
4. В разделе **Параметры** колонки выбранного сетевого интерфейса щелкните **Конфигурации IP**.
5. В появившейся колонке IP-конфигурации в списке щелкните IP-конфигурацию, которую следует изменить.
6. Измените параметры требуемым образом, используя сведения о параметрах, приведенные на шаге 6 в разделе [Добавление IP-конфигурации](#create-ip-config) этой статьи. Нажмите кнопку **Сохранить**, чтобы закрыть колонку IP-конфигурации, которую вы изменили.

>[!NOTE]
>Если изменить частный IP-адрес основной IP-конфигурации в основном сетевом интерфейсе, которому назначено несколько IP-конфигураций, то необходимо вручную переназначить все дополнительные IP-адреса сетевому интерфейсу в Windows (не требуется в Linux). Чтобы назначать IP-адрес сетевому интерфейсу в операционной системе вручную, прочитайте статью [Назначение виртуальным машинам нескольких IP-адресов с помощью портала Azure](virtual-network-multiple-ip-addresses-portal.md#os-config). Ознакомьтесь с [частными](#private) IP-адресами, чтобы изучить специальные рекомендации, прежде чем вручную добавлять IP-адреса в операционную систему виртуальной машины. Не добавляйте в операционную систему виртуальной машины общедоступные IP-адреса.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic ip-config update](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#az_network_nic_ip_config_update)|
|PowerShell|[Set-AzureRMNetworkInterfaceIpConfig](/powershell/module/azurerm.network/set-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="remove-ip-addresses"></a>Удаление IP-адресов

Можно удалить [частные](#private) и [общедоступные](#public) IP-адреса сетевого интерфейса, но у него всегда должен оставаться по крайней мере один назначенный частный IPv4-адрес.

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены как минимум разрешения на роль "Участник сети" для подписки. Сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../role-based-access-control/built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *сетевые интерфейсы*. Когда **сетевые интерфейсы** появятся в результатах поиска, щелкните их.
3. В появившейся колонке **Сетевые интерфейсы** щелкните сетевой интерфейс, для которого нужно удалить IP-адреса.
4. В разделе **Параметры** колонки выбранного сетевого интерфейса щелкните **Конфигурации IP**.
5. Щелкните правой кнопкой мыши [дополнительную](#secondary) IP-конфигурацию ([основную](#primary) конфигурацию удалить невозможно), которую нужно удалить, щелкните **Удалить**, затем нажмите кнопку **Да**, чтобы подтвердить удаление. Если с IP-конфигурацией был связан общедоступный IP-адрес, его связь с ней отменяется, но сам IP-адрес не удаляется.
6. Закройте колонку **Конфигурации IP**.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az network nic ip-config delete](/cli/azure/network/nic/ip-config?toc=%2fazure%2fvirtual-network%2ftoc.json#az_network_nic_ip_config_delete)|
|PowerShell|[Remove-AzureRmNetworkInterfaceIpConfig](/powershell/module/azurerm.network/remove-azurermnetworkinterfaceipconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="ip-configurations"></a>Конфигурации IP

[Частный](#private) и (необязательно) [общедоступный](#public) IP-адреса назначаются одной или нескольким IP-конфигурациям, назначенным сетевому интерфейсу. Существуют два типа IP-конфигураций.

### <a name="primary"></a>Первичная

Каждому сетевому интерфейсу назначается основная IP-конфигурация. Особенности основной IP-конфигурации:

- Ей назначается [частный](#private) [IPv4](#ipv4)-адрес. Ей невозможно назначить частный [IPv6](#ipv6)-адрес.
- Ей также может быть назначен [общедоступный](#public) IPv4-адрес. Общедоступный IPv6-адрес невозможно назначить основной или дополнительной IP-конфигурации. Однако вы можете назначить общедоступный IPv6-адрес Azure Load Balancer, который может распределять нагрузку трафика для частного IPv6-адреса виртуальной машины. Дополнительные сведения см. в разделе [Подробные сведения и ограничения](../load-balancer/load-balancer-ipv6-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#details-and-limitations).

### <a name="secondary"></a>Вторичная

Помимо основной IP-конфигурации сетевому интерфейсу может быть назначено несколько дополнительных IP-конфигураций (не обязательно). Особенности дополнительной IP-конфигурации:

- Ей должен быть назначен частный IPv4- или IPv6-адрес. Если назначен IPv6-адрес, то у сетевого интерфейса может быть только одна дополнительная IP-конфигурация. Если назначен IPv4-адрес, то сетевому интерфейсу может быть назначено несколько дополнительных IP-конфигураций. Чтобы узнать больше о том, сколько частных и общедоступных IPv4-адресов можно назначить сетевому интерфейсу, прочитайте статью [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).  
- Ей также может быть назначен общедоступный IPv4-адрес, если частный IP-адрес использует протокол IPv4. Если частный IP-адрес использует протокол IPv6, то невозможно назначить IP-конфигурации общедоступный IPv4- или IPv6-адрес. Назначение нескольких IP-адресов сетевому интерфейсу удобно в следующих сценариях:
    - Возможность размещать на одном сервере несколько веб-сайтов или служб с разными IP-адресами и SSL-сертификатами.
    - Возможность использовать виртуальную машину в качестве виртуального сетевого устройства, такого как брандмауэр или балансировщик нагрузки.
    - Возможность добавления любых частных IPv4-адресов любых сетевых интерфейсов во внутренний пул Azure Load Balancer. Раньше во внутренний пул можно было добавить только основной IPv4-адрес для основного сетевого интерфейса. Дополнительные сведения о балансировке нагрузки в конфигурациях с несколькими IPv4-адресами см. в разделе [Балансировка нагрузки в конфигурациях с несколькими IP-адресами с помощью портала Azure](../load-balancer/load-balancer-multiple-ip.md?toc=%2fazure%2fvirtual-network%2ftoc.json). 
    - Возможность распределять нагрузку для одного IPv6-адреса, назначенного сетевому интерфейсу. Чтобы узнать больше о том, как распределять нагрузку для частного IPv6-адреса, изучите раздел [Общие сведения о поддержке IPv6 для Azure Load Balancer](../load-balancer/load-balancer-ipv6-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json).


## <a name="address-types"></a>Типы адресов

Можно назначить [IP-конфигурации](#ip-configurations) IP-адреса для следующих типов.

### <a name="private"></a>Private

Частные [IPv4](#ipv4)-адреса позволяют виртуальной машине взаимодействовать с другими ресурсами в виртуальной сети или других подключенных к ней сетях. Невозможно передавать входящий трафик на виртуальную машину, а также виртуальная машина не может передавать трафик с помощью частного [IPv6](#ipv6)-адреса, за одним исключением. Виртуальная машина может взаимодействовать с Azure Load Balancer с помощью IPv6-адреса. Дополнительные сведения см. в разделе [Подробные сведения и ограничения](../load-balancer/load-balancer-ipv6-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#details-and-limitations). 

По умолчанию DHCP-серверы Azure назначают частный IPv4-адрес [основной IP-конфигурации](#primary) сетевому интерфейсу Azure в операционной системе на виртуальной машине. Кроме случаев, когда это действительно необходимо, не настраивайте вручную IP-адрес сетевого интерфейса в операционной системе виртуальной машины. 

> [!WARNING]
> Если IPv4-адрес, заданный в качестве основного IP-адреса сетевого интерфейса в операционной системе на виртуальной машине, будет отличаться от частного IPv4-адреса, назначенного основной IP-конфигурации основного сетевого интерфейса, подключенного к виртуальной машине в Azure, то возможно нарушение подключения к этой виртуальной машине.

В некоторых случаях бывает необходимо вручную задать IP-адрес сетевого интерфейса в операционной системе виртуальной машины. Например, при добавлении нескольких IP-адресов для виртуальной машины Azure необходимо вручную задать основной и дополнительный IP-адреса в операционной системе Windows. Для виртуальной машины Linux может потребоваться задать вручную только дополнительные IP-адреса. Дополнительные сведения см. в разделе [Добавление IP-адресов в операционную систему виртуальной машины](virtual-network-multiple-ip-addresses-portal.md#os-config). Если вам когда-либо потребуется изменить адрес, назначенный IP-конфигурации, то рекомендуется выполнить следующее.

1. Убедитесь, что виртуальная машина получает адрес от DHCP-серверов Azure. После этого снова измените способ назначение IP-адреса на DHCP в операционной системе и перезапустите виртуальную машину.
2. Остановите (освободите) виртуальную машину.
3. Измените IP-адрес для IP-конфигурации в Azure.
4. Запустите виртуальную машину.
5. [Вручную настройте](virtual-network-multiple-ip-addresses-portal.md#os-config) дополнительные IP-адреса в операционной системе (и также основной IP-адрес в Windows) в соответствии с адресами, задаваемыми в Azure.
 
Если выполнить приведенные выше инструкции, частный IP-адрес, назначенный сетевому интерфейсу в Azure, и IP-адрес в операционной системе виртуальной машины не изменятся. Чтобы следить за тем, для каких виртуальных машин в подписке вы вручную задали IP-адреса в операционной системе, рассмотрите возможность добавления [тега](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json#tags) Azure к таким виртуальным машинам. Например, можно использовать тег "Назначение IP-адресов: статическое". Таким образом можно будет легко находить в подписке виртуальные машины, для которых вы вручную задали IP-адрес в операционной системе.

Помимо возможности взаимодействия виртуальной машины с другими ресурсами в той же виртуальной сети или в подключенных к ней виртуальных сетях, частный IP-адрес также обеспечивает исходящее подключение к Интернету. Для установления исходящих подключений Azure преобразовывает исходный сетевой адрес в непредсказуемый общедоступный IP-адрес. Чтобы узнать больше об исходящих интернет-подключениях Azure, прочитайте статью [Общие сведения об исходящих подключениях в Azure](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json). К частному IP-адресу виртуальной машины невозможно подключиться из Интернета. Если для исходящих подключений вам нужен прогнозируемый общедоступный IP-адрес, привяжите к сетевому интерфейсу ресурс общедоступного IP-адреса.

### <a name="public"></a>Общедоступные

Общедоступные IP-адреса, назначаемые с помощью ресурса общедоступного IP-адреса, поддерживают входящие подключения к виртуальной машине из Интернета. Исходящие подключения к Интернету используют предсказуемый IP-адрес. Дополнительные сведения см. в разделе [Общие сведения об исходящих подключениях в Azure](../load-balancer/load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json). Можно назначить общедоступный IP-адрес IP-конфигурации, но это не обязательно. Если не назначить общедоступный IP-адрес, присоединяя к виртуальной машине ресурс общедоступного IP-адреса, она все равно сможет устанавливать исходящие подключения к Интернету. В этом случае Azure преобразовывает частный сетевой адрес, назначенный сетевому интерфейсу, в непрогнозируемый общедоступный IP-адрес. Дополнительные сведения см. в статье о [ресурсах общедоступного IP-адреса](virtual-network-public-ip-address.md).

Число общедоступных и частных IP-адресов, которые можно назначить сетевому интерфейсу, ограничено. Дополнительные сведения см. в статье об [ограничениях в Azure](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).

> [!NOTE]
> Azure преобразовывает частный IP-адрес виртуальной машины общедоступный IP-адрес. Это означает, что в операционной системе виртуальной машины нет никаких сведений о назначенных общедоступных IP-адресах и нет необходимости вручную назначать общедоступный IP-адрес в операционной системе.

## <a name="assignment-methods"></a>Способы назначения

Общедоступные и частные IP-адреса можно назначать любым из следующих способов:

### <a name="dynamic"></a>Динамический

Динамические частные и общедоступные IPv4- и IPv6-адреса (необязательно) назначаются по умолчанию. 

- **Только общедоступный.** В Azure назначается адрес из уникального диапазона для каждого региона Azure. Чтобы узнать, какие диапазоны назначаются для каждого региона, см. [описание диапазонов IP-адресов Microsoft Azure Datacenter](https://www.microsoft.com/download/details.aspx?id=41653). Адрес может измениться, когда виртуальная машина останавливается (освобождается) и запускается снова. Ни один из этих методов не позволяет назначить IP-конфигурации общедоступный адрес IPv6.
- **Только частные.** В Azure резервируются четыре первых адреса в каждом диапазоне адресов подсети. Эти адреса не назначаются. В Azure ресурсу присваивается следующий свободный адрес из диапазона адресов подсети. Например, если диапазон адресов подсети — 10.0.0.0/16, а адреса 10.0.0.0.4–10.0.0.14 уже назначены (при этом адреса .0–.3 зарезервированы), в Azure следующему ресурсу назначается адрес 10.0.0.15. По умолчанию используется динамический способ выделения. Назначенные динамические IP-адреса освобождаются, только если сетевой интерфейс удаляется или переносится в другую подсеть в той же виртуальной сети, а также если метод распределения изменяется на статический с указанием другого IP-адреса. Если метод распределения изменяется с динамического на статической, в Azure по умолчанию назначается в качестве статического адреса тот же адрес, который был до этого момента назначен динамически. С помощью динамического метода можно назначить только частный IPv6-адрес.

### <a name="static"></a>Статическое

Можно дополнительно назначить статический общедоступный или частный IPv4-адрес IP-конфигурации. Невозможно назначить IP-конфигурации статический общедоступный или частный IPv6-адрес. Чтобы узнать больше о том, как Azure назначает статические общедоступные IPv4-адреса, прочитайте статью [Общедоступные IP-адреса](virtual-network-public-ip-address.md).

- **Только общедоступный.** В Azure назначается адрес из уникального диапазона для каждого региона Azure. Чтобы узнать, какие диапазоны назначаются для каждого региона, см. [описание диапазонов IP-адресов Microsoft Azure Datacenter](https://www.microsoft.com/download/details.aspx?id=41653). Этот адрес не меняется, пока вы не удалите ресурс общедоступного IP-адреса или не измените метод присваивания на динамический. Если ресурс общедоступного IP-адреса связан с IP-конфигурацией, привязку следует отменить перед изменением метода назначения.
- **Только частные.** Вы выбираете и назначаете адрес из диапазона адресов подсети. Вы можете назначить любой адрес из диапазона адресов подсети, кроме первых четырех адресов из этого диапазона и тех адресов, которые уже назначены другим ресурсам в этой подсети. Статические адреса не освобождаются, пока сетевой интерфейс не будет удален. Если вы измените метод распределения на статический, в Azure сетевому интерфейсу динамически назначается тот же IP-адрес, который ранее был назначен ему как динамический адрес, даже если это не первый свободный адрес в диапазоне адресов подсети. Также адрес изменится, если назначить сетевой интерфейс другой подсети в пределах той же виртуальной сети. Если же нужно назначить сетевой интерфейс другой подсети, сначала необходимо изменить метод распределения со статического на динамический. Назначив сетевой интерфейс другой подсети, вы сможете снова изменить способ распределения на статический и назначить IP-адрес, но уже из диапазона адресов новой подсети.

## <a name="ip-address-versions"></a>Версии IP-адреса

При назначении адресов можно указать следующие версии.

### <a name="ipv4"></a>IPv4

У каждого сетевого интерфейса должна быть одна [основная](#primary) IP-конфигурация с назначенным [частным](#private) [IPv4](#ipv4)-адресом. Можно добавить одну или несколько [дополнительных](#secondary) IP-конфигураций с частным IPv4-адресом и (необязательно) [общедоступным](#public) IPv4-адресом.

### <a name="ipv6"></a>IPv6

Можно не назначать вовсе или назначить один частный [IPv6](#ipv6)-адрес одной дополнительной IP-конфигурации сетевого интерфейса. Для этого у сетевого интерфейса не должно быть каких-либо дополнительных IP-конфигураций. Невозможно добавить IP-конфигурацию с IPv6-адресом с помощью портала. Чтобы добавить IP-конфигурацию с частным IPv6-адресом для существующего сетевого интерфейса, используйте PowerShell или интерфейс командной строки. Этого нельзя сделать для имеющейся виртуальной машины.

> [!NOTE]
> Хотя сетевой интерфейс с IPv6-адресом можно создать с помощью портала, невозможно с помощью портала добавить существующий сетевой интерфейс на новую или существующую виртуальную машину. Используйте PowerShell или Azure CLI 2.0, чтобы создать сетевой интерфейс с частным IPv6-адресом, а затем подключить этот сетевой интерфейс при создании виртуальной машины. Невозможно подключить сетевой интерфейс, которому назначен частный IPv6-адрес, к существующей виртуальной машине. Невозможно добавить частный IPv6-адрес в IP-конфигурацию для какого-либо сетевого интерфейса, подключенного к виртуальной машине, используя любые инструменты (портал, интерфейс командной строки или PowerShell).

Общедоступный IPv6-адрес невозможно назначить основной или дополнительной IP-конфигурации.

## <a name="skus"></a>Номера SKU

Общедоступный IP-адрес создается с номером SKU категории "Базовый" или "Стандартный".  Дополнительные сведения о различиях номеров SKU см. в разделе [Управление общедоступными IP-адресами](virtual-network-public-ip-address.md).

> [!NOTE]
> При назначении общедоступного IP-адреса стандартных SKU сетевому интерфейсу виртуальной машины необходимо явно разрешить предполагаемый трафик с помощью [группы безопасности сети](security-overview.md#network-security-groups). Обмен данными с ресурсом будет невозможен, пока вы не создадите и не свяжете группу безопасности сети и явно не разрешите нужный трафик.

## <a name="next-steps"></a>Дополнительная информация
Чтобы создать виртуальную машину с разными IP-конфигурациями, ознакомьтесь со следующими статьями:

|Задача|Средство|
|---|---|
|Создание виртуальной машины с несколькими сетевыми адаптерами|[Интерфейс командной строки](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначено несколько IPv4-адресов|[Интерфейс командной строки](virtual-network-multiple-ip-addresses-cli.md), [PowerShell](virtual-network-multiple-ip-addresses-powershell.md)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначен частный IPv6-адрес (обслуживаемый Azure Load Balancer).|[Интерфейс командной строки](../load-balancer/load-balancer-ipv6-internet-cli.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../load-balancer/load-balancer-ipv6-internet-ps.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [шаблон Azure Resource Manager](../load-balancer/load-balancer-ipv6-internet-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
