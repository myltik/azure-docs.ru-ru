---
title: Пример сети периметра Azure. Создание простой сети периметра с группами безопасности сети | Документация Майкрософт
description: Создание сети периметра с группами безопасности сети
services: virtual-network
documentationcenter: na
author: tracsman
manager: rossort
editor: ''
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/03/2017
ms.author: jonor
ms.openlocfilehash: ec29e6b250f927a3a4a94ffdf83d6c7c0e325722
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2018
ms.locfileid: "23126682"
---
# <a name="example-1--build-a-simple-dmz-using-nsgs-with-an-azure-resource-manager-template"></a>Пример 1. Создание сети периметра с группами безопасности сети с помощью шаблона Azure Resource Manager
[Вернуться на страницу с советами и рекомендациями по построению периметра безопасности][HOME]

> [!div class="op_single_selector"]
> * [Шаблон Resource Manager](virtual-networks-dmz-nsg.md)
> * [Классическая модель: PowerShell](virtual-networks-dmz-nsg-asm.md)
> 
>

В этой статье мы создадим простую сеть периметра с четырьмя серверами Windows Server и группами безопасности сети. Здесь также рассмотрены все связанные разделы шаблона для более глубокого понимания каждого этапа. В разделе "Сценарий прохождения трафика" также подробно описано поэтапное прохождение трафика через уровни защиты в сети периметра. Наконец, в разделе справочной информации содержится весь код шаблона и приведены инструкции по созданию этой среды для тестирования и экспериментов с различными сценариями. 

[!INCLUDE [azure-arm-classic-important-include](../../includes/azure-arm-classic-important-include.md)] 

![Входящая сеть периметра с группой безопасности сети][1]

## <a name="environment-description"></a>Описание среды
В этом примере используется подписка, которая содержит такие ресурсы:

* одну группу ресурсов.
* виртуальную сеть с двумя подсетями (интерфейсной и внутренней);
* одна группа безопасности сети, которая применяется к обеим подсетям;
* сервер Windows Server, который представляет веб-сервер приложений (IIS01);
* два сервера Windows Server, представляющих тыловые серверы приложений (AppVM01, AppVM02);
* сервер Windows Server, который представляет DNS-сервер (DNS01).
* общедоступный IP-адрес, связанный с веб-сервером приложения.

В разделе справочной информации приведена ссылка на шаблон Azure Resource Manager, который создает описанную выше среду. Шаблон создает также виртуальные машины и сети, но подробного описания этого процесса нет в этом документе. 

**Создание этой среды** (подробные инструкции приведены в разделе справочной информации этой статьи)

1. Разверните шаблон Azure Resource Manager, который можно найти в [шаблонах быстрого запуска Azure][Template].
2. Установите пример приложения, который можно найти в разделе [Скрипт примера приложения][SampleApp].

>[!NOTE]
>Сервер IIS используется в качестве "поля перехода" для подключения по протоколу удаленного рабочего стола к любому внутреннему серверу в этом экземпляре. Сначала подключитесь по протоколу удаленного рабочего стола к серверу IIS, а затем таким же образом подключитесь из сервера IIS к внутреннему серверу. В качестве альтернативы можно связать общедоступный IP-адрес с каждым сетевым адаптером сервера для упрощения подключения через RDP.
> 
>

В следующих разделах содержится подробное описание группы безопасности сети и принципа ее работы на примере основных строк шаблона Azure Resource Manager.

## <a name="network-security-groups-nsg"></a>Группы безопасности сети
В этом примере создается группа безопасности сети, после чего в нее загружаются шесть правил. 

>[!TIP]
>В общем, сначала создаются конкретные правила разрешения, а затем более общие правила запрета. Порядок выполнения правил задается назначенным приоритетом. Когда система находит правило, применимое к пакету трафика, остальные правила игнорируются. Правила группы безопасности сети могут применяться ко входящему или исходящему трафику (относительно подсети).
>
>

Декларативно для входящего трафика определяются следующие правила.

1. Внутренний трафик DNS (порт 53) разрешается.
2. Трафик RDP (порт 3389) из Интернета к любой виртуальной машине разрешается.
3. Трафик HTTP (порт 80) из Интернета к веб-серверу (IIS01) разрешается.
4. Весь трафик (все порты) от сервера IIS01 к серверу AppVM1 разрешается.
5. Весь трафик (все порты) из Интернета ко всей виртуальной сети (обе подсети) запрещается.
6. Весь трафик (все порты) из подсети FrontEnd в подсеть BackEnd запрещается.

С учетом этих правил, связанных с каждой подсетью, если HTTP-запрос поступил из Интернета на веб-сервер, должны быть применены оба правила 3 (Разрешить) и 5 (Запретить), но так как правило 3 имеет более высокий приоритет, то будет применено только оно, и правило 5 не задействуется. Таким образом, HTTP-запрос сможет достичь веб-сервера. Если тот же трафик пытается достичь сервера DNS01, то сначала будет применено правило 5 (Запретить), и трафику не будет разрешено пройти на сервер. Правило 6 (Запретить) блокирует трафик из интерфейсной подсети во внутреннюю подсеть (за исключением трафика, разрешенного правилами 1 и 4). Это позволяет защитить внутреннюю сеть при компрометации веб-приложения на интерфейсном сервере. В этом случае злоумышленник получит ограниченный доступ к "защищенной" внутренней сети (только к ресурсам, предоставляемым на сервере AppVM01).

Для исходящего трафика стандартное правило разрешает любой трафик в Интернет. В этом примере мы разрешаем исходящий трафик и не меняем для него никаких правил. Чтобы применить политику безопасности к трафику в обоих направлениях, требуется определенная пользователем маршрутизация. Этот момент рассмотрен в примере 3 статьи [Облачные службы Microsoft Cloud и сетевая безопасность][HOME].

Ниже приведены пояснения по каждому правилу.

1. Сначала создается экземпляр группы безопасности сети, в который затем будут добавлены правила.

    ```JSON
    "resources": [
      {
        "apiVersion": "2015-05-01-preview",
        "type": "Microsoft.Network/networkSecurityGroups",
        "name": "[variables('NSGName')]",
        "location": "[resourceGroup().location]",
        "properties": { }
      }
    ]
    ``` 

2. Первое правило в этом примере разрешает трафик DNS между всеми внутренними сетями к DNS-серверу во внутренней подсети. У правила есть несколько важных параметров.
  * destinationAddressPrefix — правила могут использовать специальный тип префикса адреса, который называется тегом по умолчанию. Эти теги являются системными идентификаторами, что позволяет работать с большими категориями адресных префиксов. Для обозначения любого адреса за пределами виртуальной сети это правило использует Internet в качестве тега по умолчанию. Другие метки префиксов — VirtualNetwork и AzureLoadBalancer.
  * Параметр Direction определяет тип трафика (входящий или исходящий), к которому будет применяться правило. Направление определяется с точки зрения подсети или виртуальной машины (в зависимости от того, где работает группа безопасности сети). Таким образом, если для параметра Direction задано значение Inbound и в подсети обнаруживается входящий трафик, к нему будет применено это правило. Исходящий из подсети трафик не будет обрабатываться этим правилом.
  * Параметр Priority определяет порядок обработки потока трафика. Чем меньше число, тем выше приоритет. Как только для потока трафика определяется подходящее правило, все остальные правила игнорируются. Например, правило с приоритетом 1 разрешает трафик, а правило с приоритетом 2 — запрещает. Если оба правила применимы к трафику, то он будет разрешен, так как правило 1 имеет более высокий приоритет и после его применения обработка остальных правил прекращается.
  * Параметр Access определяет, что нужно делать с трафиком, который подпадает под действие правила: запретить (Deny) или разрешить (Allow).

    ```JSON
    "properties": {
    "securityRules": [
      {
        "name": "enable_dns_rule",
        "properties": {
          "description": "Enable Internal DNS",
          "protocol": "*",
          "sourcePortRange": "*",
          "destinationPortRange": "53",
          "sourceAddressPrefix": "VirtualNetwork",
          "destinationAddressPrefix": "10.0.2.4",
          "access": "Allow",
          "priority": 100,
          "direction": "Inbound"
        }
      },
    ```

3. Это правило пропускает трафик RDP из Интернета к порту RDP на любом сервере в связанной подсети. 

    ```JSON
    {
      "name": "enable_rdp_rule",
      "properties": {
        "description": "Allow RDP",
        "protocol": "Tcp",
        "sourcePortRange": "*",
        "destinationPortRange": "3389",
        "sourceAddressPrefix": "*",
        "destinationAddressPrefix": "*",
        "access": "Allow",
        "priority": 110,
        "direction": "Inbound"
      }
    },
    ```

4. Это правило пропускает входящий интернет-трафик к веб-серверу. Это правило не влияет на маршрутизацию, а только пропускает трафик к серверу IIS01. Таким образом, правило пропустит интернет-трафик к веб-серверу, а обработка остальных правил прекратится. (Правило с приоритетом 140 блокирует весь остальной входящий интернет-трафик.) Если вам нужно обрабатывать только HTTP-трафик, область применения этого правила можно дополнительно сузить, пропуская трафик только к конечному порту 80.

    ```JSON
    {
      "name": "enable_web_rule",
      "properties": {
        "description": "Enable Internet to [variables('VM01Name')]",
        "protocol": "Tcp",
        "sourcePortRange": "*",
        "destinationPortRange": "80",
        "sourceAddressPrefix": "Internet",
        "destinationAddressPrefix": "10.0.1.5",
        "access": "Allow",
        "priority": 120,
        "direction": "Inbound"
        }
      },
    ```

5. Это правило разрешает трафик от сервера IIS01 к серверу AppVM01. Одно из следующих после него правил блокирует весь остальной трафик от подсети FrontEnd к подсети BackEnd. Это правило можно улучшить, указав в нем номер порта (если он известен). Например, если сервер IIS обращается только к серверу SQL Server на сервере AppVM01, диапазон конечных портов следует изменить с «*» (все) на 1433 (порт SQL). Таким образом, вы уменьшите количество направлений возможной атаки на сервер AppVM01, если веб-приложение будет скомпрометировано.

    ```JSON
    {
      "name": "enable_app_rule",
      "properties": {
        "description": "Enable [variables('VM01Name')] to [variables('VM02Name')]",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "10.0.1.5",
        "destinationAddressPrefix": "10.0.2.5",
        "access": "Allow",
        "priority": 130,
        "direction": "Inbound"
      }
    },
     ```

6. Это правило блокирует интернет-трафик ко всем серверам в сети. В сочетании с правилами, имеющими приоритет 110 и 120, это правило пропускает входящий интернет-трафик только к брандмауэру и портам RDP на серверах. Остальной трафик блокируется. Это резервное правило для блокирования всех непредвиденных потоков.

    ```JSON
    {
      "name": "deny_internet_rule",
      "properties": {
        "description": "Isolate the [variables('VNetName')] VNet from the Internet",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "Internet",
        "destinationAddressPrefix": "VirtualNetwork",
        "access": "Deny",
        "priority": 140,
        "direction": "Inbound"
      }
    },
     ```

7. Последнее правило блокирует трафик из подсети FrontEnd в подсеть BackEnd. Это правило обрабатывает только входящий трафик, поэтому исходящие подключения (из внутренней к интерфейсной) разрешены.

    ```JSON
    {
      "name": "deny_frontend_rule",
      "properties": {
        "description": "Isolate the [variables('Subnet1Name')] subnet from the [variables('Subnet2Name')] subnet",
        "protocol": "*",
        "sourcePortRange": "*",
        "destinationPortRange": "*",
        "sourceAddressPrefix": "[variables('Subnet1Prefix')]",
        "destinationAddressPrefix": "[variables('Subnet2Prefix')]",
        "access": "Deny",
        "priority": 150,
        "direction": "Inbound"
      }
    }
    ```

## <a name="traffic-scenarios"></a>Варианты прохождения трафика
#### <a name="allowed-internet-to-web-server"></a>Запрос из Интернета к веб-серверу (*разрешено*)
1. Интернет-пользователь запрашивает страницу HTTP с общедоступного IP-адреса сетевого адаптера, связанного с сетевым адаптером IIS01.
2. Общедоступный IP-адрес передает трафик в виртуальную сеть к IIS01 (веб-сервер).
3. Подсеть Frontend начинает обработку правила для входящего трафика.
  1. Правило 1 группы безопасности сети (DNS) не применяется — переход к следующему правилу.
  2. Правило 2 группы безопасности сети (RDP) не применяется — переход к следующему правилу.
  3. Правило 3 группы безопасности сети (интернет-подключение к IIS01) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
4. Трафик достигает внутреннего IP-адреса веб-сервера IIS01 (10.0.1.5).
5. IIS01 ожидает передачу данных из Интернета, получает этот запрос и начинает его обработку.
6. IIS01 запрашивает сведения у сервера SQL Server на сервере AppVM01.
7. В подсети Frontend нет правил для обработки исходящего трафика — трафик разрешается.
8. Подсеть BackEnd начинает обработку правил для входящего трафика.
  1. Правило 1 группы безопасности сети (DNS) не применяется — переход к следующему правилу.
  2. Правило 2 группы безопасности сети (RDP) не применяется — переход к следующему правилу.
  3. Правило 3 группы безопасности сети (Подключение из Интернета к брандмауэру) не применяется, переход к следующему правилу
  4. Правило 4 группы безопасности сети (трафик от IIS01 к AppVM01) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
9. Сервер AppVM01 получает SQL-запрос и отправляет ответ.
10. Так как правил для исходящего трафика во внутренней подсети нет, отправка ответа разрешается.
11. Подсеть Frontend начинает обработку правила для входящего трафика.
  1. Так как в группе безопасности сети нет правил, которые могут применяться ко входящему трафику из подсети Backend в подсеть Frontend, все правила группы безопасности игнорируются.
  2. Системное правило по умолчанию, которое разрешает трафик между подсетями, разрешает прохождение этого трафика, поэтому трафик разрешается.
12. Сервер IIS получает ответ SQL, завершает HTTP-запрос и отправляет ответ запрашивающему.
13. Так как для интерфейсной подсети нет исходящих правил, то отправка ответа разрешена, и интернет-пользователь получает запрашиваемую веб-страницу.

#### <a name="allowed-rdp-to-iis-server"></a>Запрос через протокол удаленного рабочего стола к веб-серверу (*разрешено*)
1. Администратор сервера запрашивает по Интернету сеанс RDP к IIS01 по общедоступному IP-адресу сетевого адаптера, связанного с сетевым адаптером IIS01 (этот общедоступный IP-адрес можно найти на портале или с помощью PowerShell).
2. Общедоступный IP-адрес передает трафик в виртуальную сеть к IIS01 (веб-сервер).
3. Подсеть Frontend начинает обработку правила для входящего трафика.
  1. Правило 1 группы безопасности сети (DNS) не применяется — переход к следующему правилу.
  2. Правило 2 группы безопасности сети (RDP) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
4. Правил для исходящего трафика нет, поэтому применяются правила по умолчанию и обратный трафик разрешается.
5. Начинается сеанс RDP.
6. IIS01 запрашивает имя пользователя и пароль.

>[!NOTE]
>Сервер IIS используется в качестве "поля перехода" для подключения по протоколу удаленного рабочего стола к любому внутреннему серверу в этом экземпляре. Сначала подключитесь по протоколу удаленного рабочего стола к серверу IIS, а затем таким же образом подключитесь из сервера IIS к внутреннему серверу.
>
>

#### <a name="allowed-web-server-dns-look-up-on-dns-server"></a>DNS-запрос веб-сервера к серверу DNS (*разрешено*)
1. Веб-серверу IIS01 нужен веб-канал данных с сайта www.data.gov, но ему необходимо разрешить адрес.
2. В конфигурации виртуальной сети в качестве основного DNS-сервера указан сервер DNS01 (10.0.2.4 в подсети Backend). Веб-сервер IIS01 отправляет DNS-запрос серверу DNS01.
3. В подсети Frontend нет правил для обработки исходящего трафика — трафик разрешается.
4. Подсеть BackEnd начинает обработку входящего правила:
  * Правило 1 группы безопасности сети (DNS) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
5. DNS-сервер получает запрос.
6. Указанный адрес отсутствует в кэше DNS-сервера, поэтому он отправляет запрос к корневому DNS-серверу в Интернете.
7. В подсети BackEnd нет правил для исходящего трафика, поэтому трафик разрешается.
8. DNS-сервер в Интернете отправляет ответ. Так как этот сеанс инициирован внутри системы, ответ пропускается.
9. DNS-сервер кэширует ответ и отправляет ответ на исходный запрос обратно на сервер IIS01.
10. В подсети BackEnd нет правил для исходящего трафика, поэтому трафик разрешается.
11. Подсеть FrontEnd начинает обработку входящего правила:
  1. Так как в группе безопасности сети нет правил, которые могут применяться ко входящему трафику из подсети Backend в подсеть Frontend, все правила группы безопасности игнорируются.
  2. Системное правило по умолчанию, которое разрешает трафик между подсетями, разрешает прохождение этого трафика, поэтому трафик разрешается.
12. Сервер IIS01 получает ответ от сервера DNS01.

#### <a name="allowed-web-server-access-file-on-appvm01"></a>Обращение веб-сервера к файлу на сервере AppVM01 (*разрешено*)
1. IIS01 запрашивает файл на AppVM01
2. В подсети Frontend нет правил для обработки исходящего трафика — трафик разрешается.
3. Подсеть BackEnd начинает обработку правил для входящего трафика.
  1. Правило 1 группы безопасности сети (DNS) не применяется — переход к следующему правилу.
  2. Правило 2 группы безопасности сети (RDP) не применяется — переход к следующему правилу.
  3. Правило 3 группы безопасности сети (интернет-подключение к IIS01) не применяется — переход к следующему правилу.
  4. Правило 4 группы безопасности сети (трафик от IIS01 к AppVM01) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
4. Сервер AppVM01 получает запрос и отправляет ответ в виде файла (предполагается, что доступ авторизован).
5. Так как правил для исходящего трафика во внутренней подсети нет, отправка ответа разрешается.
6. Подсеть Frontend начинает обработку правила для входящего трафика.
  1. Так как в группе безопасности сети нет правил, которые могут применяться ко входящему трафику из подсети Backend в подсеть Frontend, все правила группы безопасности игнорируются.
  2. Системное правило по умолчанию, которое разрешает трафик между подсетями, разрешает прохождение этого трафика, поэтому трафик разрешается.
7. Сервер IIS получает запрос

#### <a name="denied-rdp-to-backend"></a>Запрос сеанса RDP к внутренней подсети (*запрещено*)
1. Интернет-пользователь пытается выполнить запрос по протоколу RDP к серверу AppVM01.
2. Так как связанные с этими сетевыми адаптерами серверов общедоступные IP-адреса не существуют, этот трафик никогда не попадет в виртуальную сеть и не достигнет сервера.
3. Однако если бы общедоступный IP-адрес был включен по какой-либо причине, правило 2 группы безопасности сети (RDP) разрешило бы прохождение этого трафика.

>[!NOTE]
>Сервер IIS используется в качестве "поля перехода" для подключения по протоколу удаленного рабочего стола к любому внутреннему серверу в этом экземпляре. Сначала подключитесь по протоколу удаленного рабочего стола к серверу IIS, а затем таким же образом подключитесь из сервера IIS к внутреннему серверу.
>
>

#### <a name="denied-web-to-backend-server"></a>Запрос из Интернета к внутреннему серверу (*запрещено*)
1. Интернет-пользователь пытается получить доступ к файлу на AppVM01.
2. Так как связанные с этими сетевыми адаптерами серверов общедоступные IP-адреса не существуют, этот трафик никогда не попадет в виртуальную сеть и не достигнет сервера.
3. Если бы общедоступный IP-адрес был включен по какой-либо причине, правило 5 группы безопасности сети (запрос из Интернета к виртуальной сети) заблокировало бы этот трафик.

#### <a name="denied-web-dns-look-up-on-dns-server"></a>DNS-запрос из Интернета к серверу DNS (*запрещено*)
1. Интернет-пользователь пытается получить внутреннюю запись DNS на сервере DNS01.
2. Так как связанные с этими сетевыми адаптерами серверов общедоступные IP-адреса не существуют, этот трафик никогда не попадет в виртуальную сеть и не достигнет сервера.
3. Если бы общедоступный IP-адрес был включен по какой-либо причине, правило 5 группы безопасности сети (запрос из Интернета к виртуальной сети) заблокировало бы этот трафик. Обратите внимание, что правило 1 (DNS) в этом случае не было бы применено, так как адрес источника запроса находится в Интернете, а это правило применяется только к адресам, источником которых является локальная виртуальная сеть.

#### <a name="denied-sql-access-on-the-web-server"></a>Доступ к данным SQL на веб-сервере (*запрещено*)
1. Интернет-пользователь запрашивает данные SQL от сервера IIS01.
2. Так как связанные с этими сетевыми адаптерами серверов общедоступные IP-адреса не существуют, этот трафик никогда не попадет в виртуальную сеть и не достигнет сервера.
3. Если бы общедоступный IP-адрес был включен по какой-либо причине, интерфейсная подсеть начала бы обработку правил для входящего трафика.
  1. Правило 1 группы безопасности сети (DNS) не применяется — переход к следующему правилу.
  2. Правило 2 группы безопасности сети (RDP) не применяется — переход к следующему правилу.
  3. Правило 3 группы безопасности сети (интернет-подключение к IIS01) применяется — трафик разрешается, дальнейшая обработка правил прекращается.
4. Трафик достигает внутреннего IP-адреса сервера IIS01 (10.0.1.5).
5. Сервер IIS01 не ожидает передачу данных на порту 1433, поэтому ответ на запрос отсутствует.

## <a name="conclusion"></a>Заключение
Этот пример демонстрирует достаточно простой и эффективный способ изоляции внутренней подсети от входящего трафика.

Дополнительные примеры и общие сведения о периметре безопасности сети можно найти [здесь][HOME].

## <a name="references"></a>Ссылки
### <a name="azure-resource-manager-template"></a>Шаблон диспетчера ресурсов Azure
Этот пример использует шаблон Azure Resource Manager, уже настроенный в репозитории GitHub корпорации Майкрософт и доступный для всех. Этот шаблон можно развернуть прямо из репозитория GitHub или скачать и внести необходимые изменения. 

Основной шаблон находится в файле с именем azuredeploy.json. Этот шаблон можно отправить через PowerShell или интерфейс командной строки (со связанным файлом azuredeploy.parameters.json), чтобы развернуть этот шаблон. Проще всего использовать кнопку Deploy to Azure (Развернуть в Azure) на странице README.md на портале GitHub.

Чтобы развернуть шаблон, который создает этот пример из GitHub и портала Azure, выполните следующие действия:

1. В браузере перейдите по ссылке [Шаблон][Template].
2. Нажмите кнопку Deploy to Azure (Развернуть в Azure) (или кнопку Visualize (Визуализировать), чтобы просмотреть графическое представление этого шаблона).
3. Введите учетную запись хранения, имя пользователя и пароль в колонке "Параметры", а затем нажмите кнопку **ОК**.
5. Создайте группу ресурсов для этого развертывания (можно использовать существующую, но рекомендуется использовать новую для получения оптимальных результатов).
6. При необходимости измените параметры "Подписка" и "Расположение" для виртуальной сети.
7. Щелкните **Просмотреть юридические условия**, ознакомьтесь с ними и примите их, нажав кнопку **Приобрести**.
8. Щелкните **Создать**, чтобы начать развертывание этого шаблона.
9. После успешного завершения развертывания перейдите в группу ресурсов, созданную для этого развертывания, чтобы просмотреть настроенные внутри ресурсы.

>[!NOTE]
>Этот шаблон включает RDP к серверу IIS01 (найдите общедоступный IP-адрес для сервера IIS01 на портале). Сервер IIS используется в качестве "поля перехода" для подключения по протоколу удаленного рабочего стола к любому внутреннему серверу в этом экземпляре. Сначала подключитесь по протоколу удаленного рабочего стола к серверу IIS, а затем таким же образом подключитесь из сервера IIS к внутреннему серверу.
>
>

Чтобы удалить это развертывание, удалите группу ресурсов. Все дочерние ресурсы также будут удалены.

#### <a name="sample-application-scripts"></a>Примеры сценариев приложения
Если шаблон успешно выполняется, можно настроить веб-сервер и сервер приложений с простым веб-приложением, с помощью которых можно протестировать эту конфигурацию сети периметра. Пример приложения для этого и других примеров сети периметра можно скачать по [этой ссылке][SampleApp].

## <a name="next-steps"></a>Дополнительная информация

* Разверните этот пример.
* Создайте пример приложения.
* Проверьте прохождение разных потоков трафика через эту сеть периметра.

<!--Image References-->
[1]: ./media/virtual-networks-dmz-nsg-arm/example1design.png "Входящая сеть периметра с группой безопасности сети"

<!--Link References-->
[HOME]: ../best-practices-network-security.md
[Template]: https://github.com/Azure/azure-quickstart-templates/tree/master/301-dmz-nsg
[SampleApp]: ./virtual-networks-sample-app.md