---
title: Руководство. Интеграция Azure Active Directory с iLMS | Документация Майкрософт
description: Узнайте, как настроить единый вход между Azure Active Directory и iLMS.
services: active-directory
documentationCenter: na
author: jeevansd
manager: mtillman
ms.assetid: d6e11639-6cea-48c9-b008-246cf686e726
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/13/2017
ms.author: jeedes
ms.openlocfilehash: 0281b0fca107908654dfac31014c79c187aa9b5d
ms.sourcegitcommit: b6319f1a87d9316122f96769aab0d92b46a6879a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2018
ms.locfileid: "34347182"
---
# <a name="tutorial-azure-active-directory-integration-with-ilms"></a>Руководство. Интеграция Azure Active Directory с iLMS

В этом руководстве описано, как интегрировать iLMS с Azure Active Directory (Azure AD).

Интеграция Azure AD с приложением iLMS обеспечивает следующие преимущества.

- С помощью Azure AD вы можете контролировать доступ к iLMS.
- Вы можете включить автоматический вход пользователей в iLMS (единый вход) с учетной записью Azure AD.
- Вы можете управлять учетными записями централизованно — через портал Azure.

Подробнее узнать об интеграции приложений SaaS с Azure AD можно в разделе [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory](manage-apps/what-is-single-sign-on.md).

## <a name="prerequisites"></a>предварительным требованиям

Чтобы настроить интеграцию Azure AD с iLMS, вам потребуется:

- подписка Azure AD;
- подписка iLMS с поддержкой единого входа.

> [!NOTE]
> Мы не рекомендуем использовать рабочую среду для проверки действий в этом учебнике.

При проверке действий в этом учебнике соблюдайте следующие рекомендации:

- Не следует использовать рабочую среду при отсутствии необходимости.
- Если у вас нет пробной среды Azure AD, вы можете получить пробную версию на один месяц по [этой ссылке](https://azure.microsoft.com/pricing/free-trial/).

## <a name="scenario-description"></a>Описание сценария
В рамках этого руководства проводится проверка единого входа Azure AD в тестовой среде. Сценарий, описанный в этом учебнике, состоит из двух стандартных блоков.

1. Добавление iLMS из коллекции
2. настройка и проверка единого входа в Azure AD.

## <a name="adding-ilms-from-the-gallery"></a>Добавление iLMS из коллекции
Чтобы настроить интеграцию iLMS с Azure AD, необходимо добавить iLMS из коллекции в список управляемых приложений SaaS.

**Чтобы добавить iLMS из коллекции, выполните следующие действия:**

1. На **[портале Azure](https://portal.azure.com)** в области навигации слева щелкните значок **Azure Active Directory**. 

    ![Active Directory][1]

2. Перейдите к разделу **Корпоративные приложения**. Затем выберите **Все приложения**.

    ![ПРИЛОЖЕНИЯ][2]
    
3. Чтобы добавить новое приложение, в верхней части диалогового окна нажмите кнопку **Новое приложение**.

    ![ПРИЛОЖЕНИЯ][3]

4. В поле поиска введите **iLMS**.

    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_search.png)

5. На панели результатов выберите **iLMS** и нажмите кнопку **Добавить**, чтобы добавить приложение.

    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_addfromgallery.png)

##  <a name="configuring-and-testing-azure-ad-single-sign-on"></a>настройка и проверка единого входа в Azure AD.
В этом разделе описана настройка и проверка единого входа Azure AD в iLMS с использованием тестового пользователя Britta Simon.

Чтобы единый вход работал, в Azure AD необходимо указать, какой пользователь в iLMS соответствует пользователю в Azure AD. Иными словами, необходимо установить связь между пользователем Azure AD и соответствующим пользователем в iLMS.

Чтобы установить эту связь, следует назначить **имя пользователя** в Azure AD в качестве значения **имени пользователя** в iLMS.

Чтобы настроить и проверить единый вход Azure AD в iLMS, вам потребуется выполнить действия в следующих стандартных блоках:

1. **[Configuring Azure AD Single Sign-On](#configuring-azure-ad-single-sign-on)** необходима, чтобы пользователи могли использовать эту функцию.
2. **[Создание тестового пользователя Azure AD](#creating-an-azure-ad-test-user)** требуется для проверки работы единого входа в Azure AD от имени пользователя Britta Simon.
3. **[Создание тестового пользователя iLMS](#creating-an-ilms-test-user)** требуется для создания в iLMS пользователя Britta Simon, связанного с представлением этого же пользователя в Azure AD.
4. **[Назначение тестового пользователя Azure AD](#assigning-the-azure-ad-test-user)** необходимо, чтобы позволить Britta Simon использовать единый вход Azure AD;
5. **[Проверка единого входа](#testing-single-sign-on)** необходима, чтобы убедиться в корректной работе конфигурации.

### <a name="configuring-azure-ad-single-sign-on"></a>Настройка единого входа в Azure AD

В этом разделе описано, как включить единый вход Azure AD на портале Azure и настроить его в приложении iLMS.

**Чтобы настроить единый вход Azure AD в iLMS, выполните следующие действия:**

1. На портале Azure на странице интеграции с приложением **iLMS** щелкните **Единый вход**.

    ![Настройка единого входа][4]

2. В диалоговом окне **Единый вход** в разделе **Режим** выберите **Вход на основе SAML**, чтобы включить функцию единого входа.
 
    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_samlbase.png)

3. Если вы хотите настроить приложение в режиме, инициированном **поставщиком удостоверений**, то в разделе **Домены и URL-адреса приложения iLMS** выполните следующие действия:

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_url.png)

    a. В текстовое поле **Идентификатор** вставьте значение **идентификатора**, которое необходимо скопировать в разделе параметров SAML **Service Provider** (Поставщик услуг) на портале администрирования iLMS.

    Б. В текстовое поле **URL-адрес ответа** вставьте значение **URL-адреса конечной точки**, которое необходимо скопировать в разделе параметров SAML **Service Provider** (Поставщик услуг) на портале администрирования iLMS, в следующем виде `https://www.inspiredlms.com/Login/<instanceName>/consumer.aspx`

    >[!Note]
    >Значение "123456" указано в качестве примера идентификатора.

4. Установите флажок **Показать дополнительные параметры URL-адресов**, если вы хотите настроить приложение для работы в режиме, инициируемом **поставщиком услуг**.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_url1.png)

    В текстовое поле **URL-адрес входа** вставьте значение **URL-адреса конечной точки**, которое необходимо скопировать в разделе параметров SAML **Service Provider** (Поставщик услуг) на портале администрирования iLMS, в виде `https://www.inspiredlms.com/Login/<instanceName>/consumer.aspx`     

5. Чтобы выполнить JIT-подготовку, приложение iLMS ожидает утверждения SAML в определенном формате. Настройте следующие утверждения для этого приложения. Управлять значениями этих атрибутов можно в разделе **Атрибуты пользователя** на странице интеграции приложения. На следующем снимке экрана приведен пример.
    
    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/4.png)
    
    Создайте атрибуты **department, region** и **division** и добавьте их имена в iLMS. Все указанные выше атрибуты являются обязательными.  

    > [!NOTE] 
    > В iLMS необходимо установить флажок **Create Un-recognized User Account** (Создать учетную запись неопознанного пользователя) для сопоставления этих атрибутов. Следуйте указаниям, приведенным [здесь](http://support.inspiredelearning.com/customer/portal/articles/2204526), чтобы получить представление о конфигурации атрибутов.

6. В разделе **Атрибуты пользователя** диалогового окна **Единый вход** настройте атрибут токена SAML, как показано на рисунке выше, и выполните следующие действия:
    
    | Имя атрибута | Значение атрибута |
    | ---------------| --------------- |    
    | division | user.department |
    | region | user.state |
    | department | user.jobtitle |

    a. Щелкните **Добавить атрибут**, чтобы открыть диалоговое окно **Добавление атрибута**.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_04.png)

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_05.png)
    
    Б. В текстовом поле **Имя** введите имя атрибута, отображаемое для этой строки.
    
    c. В списке **Значение** выберите значение атрибута, отображаемое для этой строки.
    
    d. Нажмите кнопку **ОК**.

7. В разделе **Сертификат подписи SAML** щелкните **XML метаданных** и сохраните XML-файл на компьютере.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_certificate.png) 

8. Нажмите кнопку **Сохранить** .

    ![Настройка единого входа](./media/active-directory-saas-iLMS-tutorial/tutorial_general_400.png)

9. В другом окне браузера войдите на **портал администрирования iLMS** с правами администратора.

10. На вкладке **Settings** (Параметры) щелкните **SSO:SAML**, чтобы открыть параметры SAML, и выполните следующие действия:
    
    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/1.png) 

    a. Разверните раздел **Service Provider** (Поставщик услуг) и скопируйте значения **идентификатора** и **URL-адреса конечной точки**.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/2.png) 

    Б. В разделе **Identity Provider** (Поставщик удостоверений) установите переключатель **Import Metadata** (Импорт метаданных).
    
    c. Выберите файл **метаданных**, скачанный с портала Azure в разделе **Сертификат подписи SAML**.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_ssoconfig1.png) 

    d. Если вы хотите включить JIT-подготовку, чтобы создать учетные записи iLMS для неопознанных пользователей, выполните следующие действия:
        
       - Установите флажок **Create Un-recognized User Account** (Создать учетную запись неопознанного пользователя) для сопоставления этих атрибутов.
       
       ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_ssoconfig2.png)

       -  Сопоставьте атрибуты в Azure AD с атрибутами в iLMS. В столбце атрибутов укажите имена атрибутов или значение по умолчанию.

    д. Перейдите на вкладку **Business Rules** (Бизнес-правила) и выполните следующие действия: 
        
       ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/5.png)

       - Установите флажок **Create Un-recognized Regions, Divisions and Departments** (Создать неопознанные регионы, подразделения и отделы), чтобы создать регионы, подразделения и отделы, которые не существуют во время выполнения единого входа.
        
       - Установите флажок **Update User Profile During Sign-in** (Обновить профиль пользователя во время выполнения входа), чтобы профиль пользователя обновлялся во время каждого выполнения единого входа. 
        
       - Если установлен флажок **Update Blank Values for Non Mandatory Fields in User Profile** (Обновить пустые значения в необязательных полях в профиле пользователя), необязательные поля профиля пользователя, пустые во время выполнения входа, будут также пустыми в профиле пользователя iLMS.
        
       - Установите флажок **Send Error Notification Email** (Отправить уведомление об ошибке по электронной почте) и введите адрес электронной почты пользователя, на который будет отправлено уведомление об ошибке.

11. Нажмите кнопку **Сохранить**, чтобы сохранить изменения.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/save.png)

> [!TIP]
> Краткую версию этих инструкций теперь можно также прочитать на [портале Azure](https://portal.azure.com) во время настройки приложения.  После добавления этого приложения из раздела **Active Directory > Корпоративные приложения** просто выберите вкладку **Единый вход** и откройте встроенную документацию через раздел **Настройка** в нижней части страницы. Дополнительные сведения о встроенной документации см. в разделе [Встроенная документация Azure AD]( https://go.microsoft.com/fwlink/?linkid=845985).
    
### <a name="creating-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD
Цель этого раздела — создать на портале Azure тестового пользователя с именем Britta Simon.

![Создание пользователя Azure AD][100]

**Чтобы создать тестового пользователя в Azure AD, выполните следующие действия:**

1. На **портале Azure** в области навигации слева щелкните значок **Azure Active Directory**.

    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/create_aaduser_01.png) 

2. Перейдите в раздел **Пользователи и группы** и щелкните **Все пользователи**, чтобы отобразить список пользователей.
    
    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/create_aaduser_02.png) 

3. В верхней части диалогового окна щелкните **Добавить**, чтобы открыть диалоговое окно **Пользователь**.
 
    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/create_aaduser_03.png) 

4. На странице диалогового окна **Пользователь** выполните следующие действия.
 
    ![Создание тестового пользователя Azure AD](./media/active-directory-saas-ilms-tutorial/create_aaduser_04.png) 

    a. В текстовом поле **Имя** введите **BrittaSimon**.

    Б. В текстовом поле **Имя пользователя** введите **адрес электронной почты** учетной записи BrittaSimon.

    c. Выберите **Показать пароль** и запишите значение поля **Пароль**.

    d. Нажмите кнопку **Создать**.
 
### <a name="creating-an-ilms-test-user"></a>Создание тестового пользователя iLMS

Приложение поддерживает JIT-подготовку пользователей, поэтому после проверки подлинности пользователи будут созданы в приложении автоматически. Чтобы включить JIT-подготовку, установите флажок **Create Un-recognized User Account** (Создать учетную запись неопознанного пользователя) во время настройки конфигурации SAML на портале администрирования iLMS.

Если необходимо создать пользователя вручную, выполните следующие действия:

1. Войдите на веб-сайт iLMS компании в качестве администратора.

2. На вкладке **Users** (Пользователи) щелкните **Register User** (Регистрация пользователя), чтобы открыть страницу **регистрации пользователя**. 
   
   ![Добавление сотрудника](./media/active-directory-saas-ilms-tutorial/3.png)

3. На странице **Register User** (Регистрация пользователя) сделайте следующее:

    ![Добавление сотрудника](./media/active-directory-saas-ilms-tutorial/create_testuser_add.png)

    a. В текстовом поле **First Name** (Имя) введите имя Britta.
   
    Б. В текстовом поле **Last Name** (Фамилия) введите фамилию Simon.

    c. В текстовом поле **Email ID** (Электронная почта) введите адрес электронной почты учетной записи Britta Simon.

    d. В раскрывающемся списке **Region** (Регион) выберите регион.

    д. В раскрывающемся списке **Division** (Подразделение) выберите подразделение.

    f. В раскрывающемся списке **Department** (Отдел) выберите отдел.

    ж. Выберите команду **Сохранить**.

    > [!NOTE] 
    > Вы можете отправить пользователю сообщение о регистрации, установив флажок **Send Registration Mail** (Отправить регистрационное сообщение).

### <a name="assigning-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

В этом разделе описано, как предоставить пользователю Britta Simon доступ к iLMS, чтобы он мог использовать единый вход Azure.

![Назначение пользователя][200] 

**Чтобы назначить пользователя Britta Simon в iLMS, выполните следующие действия:**

1. На портале Azure откройте представление приложений, перейдите к представлению каталога, а затем выберите **Корпоративные приложения** и щелкните **Все приложения**.

    ![Назначение пользователя][201] 

2. В списке приложений выберите **iLMS**.

    ![Настройка единого входа](./media/active-directory-saas-ilms-tutorial/tutorial_ilms_app.png) 

3. В меню слева выберите **Пользователи и группы**.

    ![Назначение пользователя][202] 

4. Нажмите кнопку **Добавить**. Затем в диалоговом окне **Добавление назначения** выберите **Пользователи и группы**.

    ![Назначение пользователя][203]

5. В диалоговом окне **Пользователи и группы** в списке пользователей выберите **Britta Simon**.

6. В диалоговом окне **Пользователи и группы** нажмите кнопку **Выбрать**.

7. В диалоговом окне **Добавление назначения** нажмите кнопку **Назначить**.
    
### <a name="testing-single-sign-on"></a>Проверка единого входа

В этом разделе описано, как проверить конфигурацию единого входа Azure AD с помощью панели доступа.

Щелкнув плитку iLMS на панели доступа, вы автоматически войдете в приложение iLMS.

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Список учебников по интеграции приложений SaaS с Azure Active Directory](active-directory-saas-tutorial-list.md)
* [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](manage-apps/what-is-single-sign-on.md)



<!--Image references-->

[1]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_01.png
[2]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_02.png
[3]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_03.png
[4]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_04.png

[100]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_100.png

[200]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_200.png
[201]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_201.png
[202]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_202.png
[203]: ./media/active-directory-saas-ilms-tutorial/tutorial_general_203.png

