---
title: Объекты приложения и субъекта-службы в Azure Active Directory
description: Сведения о связи между объектами приложений и субъектов-служб в Azure Active Directory
documentationcenter: dev-center-name
author: CelesteDG
manager: mtillman
services: active-directory
editor: ''
ms.assetid: adfc0569-dc91-48fe-92c3-b5b4833703de
ms.service: active-directory
ms.component: develop
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 10/19/2017
ms.author: celested
ms.custom: aaddev
ms.openlocfilehash: e8e693355fb9b30e1a69b49f20d5044c531e2fcd
ms.sourcegitcommit: e14229bb94d61172046335972cfb1a708c8a97a5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2018
---
# <a name="application-and-service-principal-objects-in-azure-active-directory-azure-ad"></a>Объекты приложения и субъекта-службы в Azure Active Directory (Azure AD)
Иногда значение термина "приложение" может быть неправильно понято при использовании в контексте Azure AD. Цель этой статьи — прояснить концептуальные и практические аспекты интеграции приложения Azure AD, а также проиллюстрировать регистрацию [мультитенантного приложения](active-directory-dev-glossary.md#multi-tenant-application) и предоставление соответствующих разрешений.

## <a name="overview"></a>Обзор
Приложение, интегрированное с Azure AD, это более широкое понятие, чем просто компонент программного обеспечения. "Приложение" — это общий термин, который включает в себя не только программное обеспечение, но и процесс регистрации приложения в Azure AD и роль при обмене данными во время проверки подлинности и авторизации в среде выполнения. По определению приложение можно развернуть в роли [клиента](active-directory-dev-glossary.md#client-application) (потребление ресурсов), [сервера ресурсов](active-directory-dev-glossary.md#resource-server) (предоставление API для клиентов) или в обеих ролях. Протокол общения определяется [потоком предоставления кода авторизации OAuth 2.0](active-directory-dev-glossary.md#authorization-grant). Он используется для предоставления клиенту или ресурсу доступа к данным ресурса или разрешения на их защиту. Теперь давайте рассмотрим приложение Azure AD более детально и узнаем, что оно собой представляет в процессе разработки и во время выполнения. 

## <a name="application-registration"></a>Регистрация приложения
При регистрации приложения Azure AD на [портале Azure][AZURE-Portal] в клиенте Azure AD создаются два объекта: объект приложения и объект субъекта-службы.

#### <a name="application-object"></a>Объект приложения
Объект приложения представляет определение вашего приложения Azure AD. Единственный экземпляр объекта приложения размещается в главном клиенте Azure AD приложения (то есть в клиенте, в котором зарегистрировано приложение). Схема для свойств объекта приложения определяется в [сущности приложения][AAD-Graph-App-Entity] Azure AD Graph. 

#### <a name="service-principal-object"></a>Объект субъекта-службы
Чтобы получить доступ к ресурсам, которые защищены с помощью клиента Azure AD, сущность, которой требуется доступ, должна быть представлена субъектом безопасности. Это применимо и к пользователям (субъект-пользователь), и к приложениям (субъект-служба). Субъект безопасности определяет политику доступа и разрешения для пользователя или приложения в этом клиенте. Это обеспечивает базовые функции, включая аутентификацию пользователя или приложения во время входа, а также авторизацию во время получения доступа к ресурсам.

Когда приложение получает разрешение на доступ к ресурсам в клиенте (при регистрации или [предоставлении согласия](active-directory-dev-glossary.md#consent)), создается объект субъекта службы. Схема для свойств объекта субъекта-службы определяется в [сущности ServicePrincipal][AAD-Graph-Sp-Entity] Azure AD Graph. 

#### <a name="application-and-service-principal-relationship"></a>Отношение приложения и субъекта-службы
В некотором роде объект приложения является *глобальным* представлением вашего приложения (для использования во всех клиентах), а субъект-служба — *локальным* (для использования в определенных клиентах). Объект приложения служит шаблоном, который *определяет* общие свойства и свойства по умолчанию, используемые для создания соответствующих объектов субъекта-службы. Между объектом приложения и самим приложением устанавливается отношение "один к одному", а между объектом приложения и соответствующими субъектами-службами — отношение "один ко многим".

Субъект-службу необходимо создать в каждом клиенте, где будет использоваться приложение, чтобы установить поставщика удостоверений для входа в систему и доступа к ресурсам, защищенным с помощью клиента. Приложение с одним клиентом будет иметь только один субъект-службу (в своем домашнем клиенте). Создание субъекта-службы и предоставление разрешения на его использование выполняется во время регистрации приложения. Для мультитенантного веб-приложения или API также будет создан субъект-служба в каждом клиенте, пользователь которого даст согласие на его использование. 

> [!NOTE]
> Любые изменения объекта приложения также отражаются в объекте субъекта-службы, размещенном в главном клиенте приложения (то есть в клиенте, в котором зарегистрировано приложение). При использовании мультитенантных приложений изменения объекта приложения не отражаются в объектах субъекта-службы клиента-потребителя до тех пор, пока с [помощью панели доступа к приложениям](https://myapps.microsoft.com) доступ не будет отменен и предоставлен снова.
><br>  
> Обратите также внимание, что собственные приложения по умолчанию регистрируются как мультитенантные.
> 
> 

## <a name="example"></a>Пример
На следующей схеме показана связь между объектом приложения и соответствующими объектами субъекта-службы в контексте образца мультитенантного приложения под названием **Приложение по управлению персоналом**. В этом сценарии используются три клиента Azure AD. 

* **Adatum** — клиент, который использует компания, разработавшая **приложение по управлению персоналом**.
* **Contoso** — клиент, который использует компания Contoso, потребляющая **приложение по управлению персоналом**.
* **Fabrikam** — клиент, который использует компания Fabrikam, также потребляющая **приложение по управлению персоналом**.

![Связь между объектом приложения и объектом субъекта-службы](./media/active-directory-application-objects/application-objects-relationship.png)

На предыдущей схеме шаг 1 — это процесс создания объектов приложения и субъекта-службы в главном клиенте приложения.

На шаге 2 при согласии администраторов компании Contoso и Fabrikam в клиенте Azure AD компании создается объект субъекта-службы, и ему назначаются разрешения, предоставленные администратором. Обратите внимание, что приложение по управлению персоналом можно создать или настроить для отдельных пользователей.

На шаге 3 каждый из клиентов-потребителей приложения по управлению персоналом (Contoso и Fabrikam) имеет собственный объект субъекта-службы. И каждый из них представляет использование экземпляра приложения во время выполнения. Это использование зависит от разрешений, предоставленных соответствующим администратором.

## <a name="next-steps"></a>Дополнительная информация
Доступ к объекту приложения можно получить через API Azure AD Graph, с помощью редактора манифеста приложения на [портале Azure][AZURE-Portal] или с помощью [командлетов Azure AD PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0), как определено в [сущности приложения][AAD-Graph-App-Entity] OData.

Доступ к объекту субъекта-службы приложения можно получить через API Azure AD Graph или с помощью [командлетов Azure AD PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azureadps-2.0), как определено в [сущности субъекта-службы][AAD-Graph-Sp-Entity] OData.

[Проводник Azure AD Graph](https://graphexplorer.azurewebsites.net/) полезен для запросов как объектов приложения, так и объектов субъекта-службы.

<!--Image references-->

<!--Reference style links -->
[AAD-Graph-App-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#application-entity
[AAD-Graph-Sp-Entity]: https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity
[AZURE-Portal]: https://portal.azure.com
