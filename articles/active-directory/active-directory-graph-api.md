<properties
   pageTitle="API Graph Azure Active Directory | Microsoft Azure"
   description="Общие сведения и краткое руководство по API Graph, который обеспечивает программный доступ к Azure AD через конечные точки API-интерфейса REST."
   services="active-directory"
   documentationCenter=""
   authors="msmbaldwin"
   manager="mbaldwin"
   editor="mbaldwin" />
<tags
   ms.service="active-directory"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="identity"
   ms.date="09/16/2016"
   ms.author="mbaldwin" />

# API Graph Azure Active Directory

> [AZURE.IMPORTANT] Функциональные возможности API Azure AD Graph доступны также в [Microsoft Graph](https://graph.microsoft.io/) — едином API, который включает API из других служб Майкрософт, таких как Outlook, OneDrive, OneNote, Planner и Office Graph, для которых используется единая конечная точка и единый маркер доступа.

API Graph Azure Active Directory обеспечивает программный доступ к Azure AD через конечные точки API-интерфейса Rest Azure AD. Приложения могут использовать API Graph для выполнения операций создания, чтения, обновления и удаления (CRUD) с данными и объектами каталогов. Например, API Graph поддерживает следующие операции для объекта-пользователя.

- Создание нового пользователя в каталоге.

- Получение подробных свойств пользователя, например его группы.

- Обновление свойств пользователя, например его расположения и номера телефона, или изменение его пароля.

- Проверка членства в группах для доступа на основе ролей.

- Отключение или полное удаление учетной записи пользователя.

Вы можете выполнять с другими объектами, например группами или приложениями, те же операции, что и с объектами-пользователями. Чтобы вызвать API Graph в каталоге, приложение должно быть зарегистрировано в Azure AD и разрешать доступ к каталогу. Обычно это делается с помощью потока согласия пользователя или администратора.

Чтобы начать использовать API Graph Azure Active Directory ознакомьтесь с [кратким руководством по началу работы с API Graph](active-directory-graph-api-quickstart.md) или просмотрите [справочную документацию по API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).


## Функции

API Graph предоставляет следующие возможности.

- **Конечные точки API-интерфейса REST**. Служба API Graph соответствует ограничениям REST. Она состоит из конечных точек, доступ к которым можно получить с помощью стандартных HTTP-запросов. API Graph поддерживает содержимое в виде XML или нотаций объектов Javascript (JSON) для запросов и ответов. Дополнительные сведения см. в [справочнике по Azure AD Graph REST API](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).

- **Проверка подлинности с помощью Azure AD**. Каждый запрос API Graph должен пройти проверку подлинности путем добавления веб-маркеров JSON (JWT) в заголовок авторизации запроса. Чтобы получить этот токен, нужно отправить запрос к конечной точке токена Azure AD и предоставить действительные учетные данные. Чтобы получить токен для вызова Graph, можно использовать поток клиентских учетных данных OAuth 2.0 или поток предоставления кода авторизации. Дополнительные сведения см. в статье [OAuth 2.0 в Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx).

- **Ролевая авторизация (RBAC)**. Для реализации RBAC в API Graph используются группы безопасности. Например, чтобы определить, имеет ли пользователь доступ к определенному ресурсу, приложение может вызвать операцию [Проверка членства в группе (транзитивно)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive), которая возвращает значение true или false.

- **Дифференциальный запрос**. Если вы хотите проверить наличие изменений в каталоге в промежутке между двумя периодами времени, не отправляя частые запросы к API Graph, вы можете сделать дифференциальный запрос. Этот тип запроса возвращает только изменения, внесенные в промежутке между предыдущим дифференциальным запросом и текущим запросом. Дополнительные сведения см. в статье [Разностный запрос Azure AD Graph API](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).

- **Расширения каталогов**. Если вы разрабатываете приложение, которому требуется читать или записывать уникальные свойства объектов каталога, вы можете зарегистрировать и использовать значения расширений с помощью API Graph. Например, если приложению требуется свойство "идентификатор Skype" для каждого пользователя, вы можете зарегистрировать новое свойство в каталоге и оно будет доступно для каждого объекта-пользователя. Дополнительные сведения см. в статье [Расширения интерфейсов API схемы каталогов Azure AD Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).

- **Защита с помощью областей разрешений**: API Graph AAD предоставляет области разрешений, которые обеспечивают защищенный доступ к данным AAD по согласию и поддерживают различные типы клиентских приложений, включая:
 - приложения с пользовательским интерфейсом, которым предоставляется делегированный доступ к данным с помощью разрешения, получаемого от пользователя, выполнившего вход (делегирование);
  - приложения, использующие контроль доступа основе ролей, например клиенты службы или управляющей программы (роли приложений).

    Обе эти области разрешений (с делегированием и ролями приложений) представляют привилегию, предоставляемую API Graph, и могут запрашиваться клиентскими приложениями с помощью функций разрешений для зарегистрированных приложений [на классическом портале Azure](https://manage.windowsazure.com). Клиенты могут проверить предоставленные им области разрешений, изучив полученное в маркере доступа утверждение области ("scp") — для делегированных разрешений и утверждение ролей ("roles") — для разрешений роли приложения. Подробнее об этом: [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).


## Сценарии

API Graph поддерживает многие сценарии приложений. Ниже перечислены наиболее распространенные сценарии.

- **Бизнес-приложение (однотенантное)**. В этом сценарии разработчик работает на предприятие, у которого есть подписка Office 365. Разработчик создает веб-приложение, взаимодействующее с Azure AD для выполнения задач, таких как назначение лицензии пользователю. Эта задача требует доступа к API Graph, поэтому разработчик регистрирует одноклиентское приложение в Azure AD и настраивает разрешения чтения и записи для API GraphI. Затем приложение настраивается для использования собственных учетных данных или учетных данных пользователя, вошедшего в систему, чтобы получить маркер для вызова API Graph.

- **Программное обеспечение как приложение-служба (мультитенантное)**. В этом сценарии независимый поставщик программного обеспечения разрабатывает и размещенное мультитенантное веб-приложение, которое предоставляет пользователю функции управления для других организаций, использующих Azure AD. Для этих функций требуется доступ к объектам каталога, поэтому приложение должно вызвать API Graph. Разработчик регистрирует приложение в Azure AD, настраивает его, чтобы оно требовало разрешения чтения и записи для API Graph, а затем включает внешний доступ, чтобы другие организации могли соглашаться на использование приложения в своем каталоге. Когда пользователь в другой организации впервые проходит проверку подлинности в приложении, он видит диалоговое окно с разрешениями, которые запрашивает приложение. Если пользователь предоставит согласие, приложение получит запрошенные разрешения для API Graph в каталоге пользователя. Дополнительные сведения об инфраструктуре согласия см. в статье [Обзор инфраструктуры согласия](active-directory-integrating-applications.md).

## См. также

[Краткое руководство по API Graph Azure AD](active-directory-graph-api-quickstart.md)

[Документация REST для Graph AD](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)

[Руководство разработчика по Azure Active Directory](active-directory-developers-guide.md)

<!---HONumber=AcomDC_0921_2016-->