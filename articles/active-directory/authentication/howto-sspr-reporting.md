---
title: 'Azure Active Directory: отчеты о самостоятельном сбросе пароля'
description: Отчеты о событиях самостоятельного сброса пароля в Azure AD
services: active-directory
keywords: ''
documentationcenter: ''
author: MicrosoftGuyJFlo
manager: mtillman
ms.reviewer: sahenry
ms.assetid: ''
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2018
ms.author: joflore
ms.custom: it-pro;seohack1
ms.openlocfilehash: 616c80b55aee03234fed0b80b76c29cecada0b0d
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
---
# <a name="reporting-options-for-azure-ad-password-management"></a>Параметры отчетов для управления паролями Azure AD

После развертывания многие организации хотят знать, как использовать самостоятельный сброс пароля (SSPR) и действительно ли используется эта функция. Функция создания отчетов, предоставляемая Azure Active Directory (Azure AD), поможет ответить на вопросы с помощью готовых отчетов. При наличии соответствующей лицензии можно также создавать пользовательские запросы.

![Отчеты][Reporting]

Ответы на указанные ниже вопросы можно найти в отчетах на портале Azure (https://portal.azure.com/):).

> [!NOTE]
> Вы должны иметь права [глобального администратора](../active-directory-assign-admin-roles-azure-portal.md) и указать, что эти данные необходимо собирать от имени вашей организации. Чтобы дать согласие, необходимо по крайней мере один раз посетить вкладку **Отчеты** или просмотреть журналы аудита. Пока это не сделано, данные для вашей организации не собираются.
>

* Сколько пользователей зарегистрировалось для сброса пароля?
* Кто зарегистрировался для сброса пароля?
* Какие данные регистрируют пользователи?
* Сколько пользователей сбросило пароли за последние 7 дней?
* Каковы наиболее распространенные способы, применяемые пользователями или администраторами для сброса своих паролей?
* С какими наиболее распространенными проблемами сталкиваются пользователи или администраторы при попытке использовать сброс пароля?
* Какие администраторы часто сбрасывают свои пароли?
* Наблюдается ли какая-либо подозрительная активность по сбросу паролей?

## <a name="power-bi-content-pack"></a>Пакет содержимого Power BI

Если вы являетесь пользователем Power BI, то можете использовать пакет содержимого для Azure AD, который содержит простые в использовании отчеты для SSPR. Дополнительные сведения об использовании и развертывании пакета содержимого см. в статье [Как использовать пакет содержимого Azure Active Directory Power BI](../active-directory-reporting-power-bi-content-pack-how-to.md). С помощью этого пакета содержимого можно создавать собственные панели мониторинга и использовать их совместно с другими пользователями в организации.

## <a name="how-to-view-password-management-reports-in-the-azure-portal"></a>Как просмотреть отчеты об управлении паролями на портале Azure

На портале Azure мы реализовали более эффективный способ просмотра действий регистрации сброса пароля и собственно самого сброса пароля. Чтобы просмотреть эти события, сделайте следующее.

1. Перейдите на [портал Azure](https://portal.azure.com).
2. Выберите **Все службы** в левой области.
3. В списке служб найдите и выберите **Azure Active Directory**.
4. Выберите **Пользователи и группы**.
5. В меню **Пользователи и группы** выберите **Журналы аудита**. Здесь отображаются все события аудита, выполняемые в отношении всех пользователей в каталоге. Чтобы просмотреть все связанные с паролем события, это представление можно фильтровать.
6. Чтобы отфильтровать это представление по событиям, связанным со сбросом пароля, нажмите кнопку **Фильтр** в верхней части области.
7. В меню **Фильтр** в раскрывающемся списке **Категория** измените тип категории на **Self-service Password Management** (Самостоятельное управление паролями).
8. При необходимости этот список можно отфильтровать по определенному **действию**.

## <a name="how-to-retrieve-password-management-events-from-the-azure-ad-reports-and-events-api"></a>Как получить события об управлении паролями из API отчетов и событий Azure AD

API отчетов и событий Azure AD поддерживает извлечение всех сведений, включаемых в отчеты о сбросе пароля и отчеты о регистрации сброса пароля. Этот API позволяет скачивать отдельные события регистрации сброса пароля или события сброса пароля и использовать их для интеграции с выбранной технологией создания отчетов.

> [!IMPORTANT]
> Сейчас с помощью API отчетов и событий Azure AD вы можете получить до *75 000 отдельных событий* типа [SsprActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprActivityEvent) и [SsprRegistrationActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprRegistrationActivityEvent). Этот API позволяет охватить данные за последние 30 дней.
> 
> Если требуется получить или сохранить больший объем данных, мы рекомендуем поместить их во внешнюю базу данных и использовать API, чтобы запрашивать сведения о возникающих изменениях. Мы рекомендуем начать получение этих данных сразу же после внедрения SSPR в вашей организации. Сохраняйте их во внешнем хранилище и продолжайте отслеживать изменения с этого момента.
>

### <a name="how-to-get-started-with-the-reporting-api"></a>Как начать работу с API отчетов

Для доступа к этим данным необходимо создать небольшое приложение или сценарий получения этих данных с наших серверов. Дополнительные сведения см. в статье [Приступая к работе с API отчетов Azure Active Directory](../active-directory-reporting-api-getting-started-azure-portal.md).

После создания сценария вы сможете исследовать события сброса пароля и регистрации, которые можно получить в соответствии с вашими сценариями.

* [SsprActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprActivityEvent): получает список столбцов, доступных для событий сброса пароля.
* [SsprRegistrationActivityEvent](https://msdn.microsoft.com/library/azure/mt126081.aspx#BKMK_SsprRegistrationActivityEvent): получает список столбцов, доступных для событий регистрации сброса пароля.

## <a name="description-of-the-report-columns-in-the-azure-portal"></a>Описание столбцов отчета на портале Azure

В следующем списке подробно описан каждый из столбцов отчета на портале Azure.

* **Пользователь** — пользователь, который предпринял попытку регистрации сброса пароля.
* **Роль** — роль пользователя в каталоге.
* **Дата и время** — дата и время попытки.
* **Зарегистрированные данные** — какие данные для проверки подлинности предоставил пользователь в ходе регистрации сброса пароля.

## <a name="description-of-the-report-values-in-the-azure-portal"></a>Описание значений в отчете на портале Azure

В следующей таблице описаны различные значения, которые можно задать для каждого столбца на портале Azure.

| столбец | Допустимые значения и их описание |
| --- | --- |
| Зарегистрированные данные |**Альтернативный адрес электронной почты** — пользователь использовал для аутентификации альтернативный адрес электронной почты или адрес электронной почты для аутентификации.<p><p>**Рабочий телефон** — пользователь использовал для аутентификации рабочий телефон.<p>**Мобильный телефон** — пользователь использовал для аутентификации мобильный телефон или телефон для аутентификации.<p>**Контрольные вопросы** — пользователь использовал для аутентификации контрольные вопросы.<p>**Любое сочетание указанного выше (например, альтернативный адрес электронной почты и мобильный телефон)**  — отображается, если настроена двухфакторная политика. Показывает, какие два метода применил пользователь для аутентификации своего запроса на сброс пароля. |

## <a name="self-service-password-management-activity-types"></a>Типы действий самостоятельного управления паролями

Ниже приведены типы действий, которые отображаются после выбора категории событий аудита **Self-Service Password Management** (Самостоятельное управление паролями).

* [Blocked from self-service password reset](#activity-type-blocked-from-self-service-password-reset) (Блокировка самостоятельного сброса пароля). Указывает, что пользователь пытался сбросить пароль, использовать определенный шлюз или проверить телефонный номер более 5 раз подряд за 24 часа.
* [Change password (self-service)](#activity-type-change-password-self-service) (Изменение пароля (самостоятельное)). Указывает, что пользователь добровольно или принудительно (из-за истечения срока действия) изменил пароль.
* [Reset password (by admin)](#activity-type-reset-password-by-admin) (Сброс пароля (администратор)). Указывает, что администратор сбросил пароль от имени пользователя на портале Azure.
* [Reset password (self-service)](#activity-type-reset-password-self-service) (Сброс пароля (самостоятельный)). Указывает, что пользователь успешно сбросил пароль на [портале сброса пароля Azure AD](https://passwordreset.microsoftonline.com).
* [Self service password reset flow activity progress](#activity-type-self-serve-password-reset-flow-activity-progress) (Ход выполнения процесса самостоятельного сброса пароля). Указывает каждый этап, выполняемый пользователем в рамках процесса сброса пароля (например, прохождение определенного этапа аутентификации для сброса пароля).
* [Unlock user account (self-service)](#activity-type-unlock-user-account-self-service) (Разблокирование учетной записи пользователя (самостоятельное)). Указывает, что пользователь успешно разблокировал учетную запись Active Directory, не сбрасывая пароль на [портале сброса пароля Azure AD](https://passwordreset.microsoftonline.com), с помощью функции разблокирования учетной записи Active Directory без сброса пароля.
* [User registered for self-service password reset](#activity-type-user-registered-for-self-service-password-reset) (Регистрация пользователей для самостоятельного сброса пароля). Указывает, что пользователь зарегистрировал всю информацию, необходимую для сброса пароля в соответствии с указанной политикой сброса пароля клиента.

### <a name="activity-type-blocked-from-self-service-password-reset"></a>Тип действия: Blocked from self-service password reset (Блокировка самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает, что пользователь пытался сбросить пароль, использовать определенный шлюз или проверить телефонный номер более 5 раз подряд за 24 часа.
* **Субъект действия**. Пользователь, не имеющий прав на выполнение дополнительных операций сброса. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, не имеющий прав на выполнение дополнительных операций сброса. Это может быть пользователь или администратор.
* **Состояние действия**:
  * _Успешно_. Указывает, что пользователь не сможет выполнять дополнительные сбросы, применять любые дополнительные методы аутентификации и проверять любые дополнительные телефонные номера в течение следующих 24 часов.
* **Причина сбоя состояния действия**. Не применяется.

### <a name="activity-type-change-password-self-service"></a>Тип действия: Change password (self-service) (Изменение пароля (самостоятельное))

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает, что пользователь добровольно или принудительно (из-за истечения срока действия) изменил пароль.
* **Субъект действия**. Пользователь, изменивший свой пароль. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, изменивший свой пароль. Это может быть пользователь или администратор.
* **Состояния действия**:
  * _Успешно_. Указывает, что пользователь успешно изменил свой пароль.
  * _Сбой_. Указывает, что во время изменения пароля произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия).
* **Причина сбоя состояния действия**: 
  * _FuzzyPolicyViolationInvalidPassword_. Пользователь выбрал пароль, автоматически заблокированный функцией обнаружения запрещенных паролей Майкрософт (распространенных или ненадежных паролей).

### <a name="activity-type-reset-password-by-admin"></a>Тип действия: Reset password (by admin) (Сброс пароля (администратор))

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает, что администратор сбросил пароль от имени пользователя на портале Azure.
* **Субъект действия**. Администратор, сбросивший пароль от имени другого пользователя или администратора. Это должен быть глобальный администратор, администратор паролей, администратор пользователей или администратор службы технической поддержки.
* **Целевой объект действия**. Пользователь, чей пароль сброшен. Это может быть пользователь или другой администратор.
* **Состояния действия**:
  * _Успешно_. Указывает, что администратор успешно сбросил пароль пользователя.
  * _Сбой_. Указывает, что во время сброса администратором пароля произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия).

### <a name="activity-type-reset-password-self-service"></a>Тип действия: Reset password (self-service) (Сброс пароля (самостоятельный))

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает, что пользователь успешно сбросил пароль на [портале сброса пароля Azure AD](https://passwordreset.microsoftonline.com).
* **Субъект действия**. Пользователь, сбросивший свой пароль. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, сбросивший свой пароль. Это может быть пользователь или администратор.
* **Состояния действия**:
  * _Успешно_. Указывает, что пользователь успешно сбросил свой пароль.
  * _Сбой_. Указывает, что во время сброса собственного пароля произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия).
* **Причина сбоя состояния действия**: 
  * _FuzzyPolicyViolationInvalidPassword_. Администратор выбрал пароль, автоматически заблокированный функцией обнаружения запрещенных паролей Майкрософт (распространенных или ненадежных паролей).

### <a name="activity-type-self-serve-password-reset-flow-activity-progress"></a>Тип действия: Self serve password reset flow activity progress (Ход выполнения процесса самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает каждый этап, выполняемый пользователем в рамках процесса сброса пароля (например, прохождение определенного этапа аутентификации для сброса пароля).
* **Субъект действия**. Пользователь, сбросивший пароль. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, сбросивший пароль. Это может быть пользователь или администратор.
* **Состояния действия**:
  * _Успешно_. Указывает, что пользователь успешно завершил определенный этап сброса пароля.
  * _Сбой_. Указывает, что при выполнении определенного этапа сброса пароля произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия).
* **Причины состояния действия**. Ознакомьтесь со следующей таблицей, содержащей [все причины допустимых состояний действий сброса](#allowed-values-for-details-column).

### <a name="activity-type-unlock-a-user-account-self-service"></a>Тип действия: "Unlock user account (self-service)" (Разблокирование учетной записи пользователя (самостоятельное))

В приведенном ниже списке подробно описано это действие.

* **Activity description** (Описание действия). Указывает, что пользователь успешно разблокировал учетную запись Active Directory, не сбрасывая пароль на [портале сброса пароля Azure AD](https://passwordreset.microsoftonline.com), с помощью функции разблокирования учетной записи Active Directory без сброса пароля.
* **Субъект действия**. Пользователь, разблокировавший свою учетную запись, не сбрасывая пароль. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, разблокировавший свою учетную запись, не сбрасывая пароль. Это может быть пользователь или администратор.
* **Допустимые состояния действия**:
  * _Успешно_. Указывает, что пользователь успешно разблокировал свою учетную запись.
  * _Сбой_. Указывает, что во время разблокирования учетной записи произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия).

### <a name="activity-type-user-registered-for-self-service-password-reset"></a>Тип действия: User registered for self-service password reset (Регистрация пользователей для самостоятельного сброса пароля)

В приведенном ниже списке подробно описано это действие.

* **Описание действия**. Указывает, что пользователь зарегистрировал всю информацию, необходимую для сброса пароля в соответствии с указанной политикой сброса пароля клиента. 
* **Субъект действия**. Пользователь, зарегистрировавшийся для сброса пароля. Это может быть пользователь или администратор.
* **Целевой объект действия**. Пользователь, зарегистрировавшийся для сброса пароля. Это может быть пользователь или администратор.
* **Допустимые состояния действия**:
  * _Успешно_. Указывает, что пользователь успешно зарегистрировался для сброса пароля в соответствии с текущей политикой. 
  * _Сбой_. Указывает, что во время регистрации для сброса пароля произошел сбой. Чтобы узнать больше о причине сбоя, щелкните строку и просмотрите категорию **Activity Status Reason** (Причина состояния действия). 

     >[!NOTE]
     >Сбой не означает, что пользователь не может сбросить свой пароль. Он означает, что пользователь не завершил процесс регистрации. Если в учетной записи содержатся непроверенные, но правильные данные (например, непроверенный телефонный номер), их по-прежнему можно использовать для сброса пароля. Дополнительные сведения см. в разделе [Что происходит, когда пользователь проходит регистрацию?](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-learn-more#what-happens-when-a-user-registers)
     >

## <a name="next-steps"></a>Дополнительная информация

* [Как развернуть самостоятельный сброс пароля?](howto-sspr-deployment.md)
* [Сброс или изменение пароля](../active-directory-passwords-update-your-own-password.md)
* [Регистрация для самостоятельного сброса пароля](../active-directory-passwords-reset-register.md)
* [Требования к лицензированию самостоятельного сброса пароля в Azure AD](concept-sspr-licensing.md)
* [Какие данные используются для SSPR и какие сведения нужно указывать для пользователей](howto-sspr-authenticationdata.md)
* [Доступные пользователям методы проверки подлинности](concept-sspr-howitworks.md#authentication-methods)
* [Параметры политики для SSPR](concept-sspr-policy.md)
* [Что такое обратная запись паролей и каково ее назначение](howto-sspr-writeback.md)
* [Руководство по самостоятельному сбросу пароля в Azure AD](concept-sspr-howitworks.md).
* [Как устранить неполадки самостоятельного сброса пароля](active-directory-passwords-troubleshoot.md)
* [Вопросы, не вошедшие в другие статьи](active-directory-passwords-faq.md)

[Reporting]: ./media/howto-sspr-reporting/sspr-reporting.png "Пример журналов аудита действий SSPR в Azure AD"
