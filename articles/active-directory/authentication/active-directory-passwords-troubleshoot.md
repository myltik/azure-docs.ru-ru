---
title: 'Azure Active Directory: устранение неполадок с самостоятельным сбросом пароля'
description: Устранение неполадок самостоятельного сброса пароля в Azure AD
services: active-directory
ms.service: active-directory
ms.component: authentication
ms.topic: article
ms.date: 01/11/2018
ms.author: joflore
author: MicrosoftGuyJFlo
manager: mtillman
ms.reviewer: sahenry
ms.openlocfilehash: d3e43d3484d321c93b4ac3b0e2b947b69af5d2c6
ms.sourcegitcommit: 870d372785ffa8ca46346f4dfe215f245931dae1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2018
ms.locfileid: "33869960"
---
# <a name="troubleshoot-self-service-password-reset"></a>Как устранить неполадки самостоятельного сброса пароля

Возникают проблемы с самостоятельным сбросом пароля в Azure Active Directory (Azure AD)? Указанные ниже далее сведения могут помочь вам восстановить нормальную работу.

## <a name="troubleshoot-self-service-password-reset-errors-that-a-user-might-see"></a>Устранение ошибок самостоятельного сброса пароля, с которыми может столкнуться пользователь

| Ошибка | Сведения | Технические сведения |
| --- | --- | --- |
| TenantSSPRFlagDisabled = 9 | К сожалению, в настоящее время невозможно сбросить ваш пароль, так как администратор отключил сброс пароля для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы включить данную функцию. Чтобы узнать больше, см. раздел [Распространенные проблемы и способы их устранения](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-update-your-own-password#common-problems-and-their-solutions). | SSPR_0009: мы обнаружили, что функция сброса пароля не была включена администратором. Обратитесь к администратору, чтобы включить сброс пароля для своей организации. |
| WritebackNotEnabled = 10 |К сожалению, в настоящее время невозможно сбросить ваш пароль, так как администратор не включил необходимую службу для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору для проверки конфигурации вашей организации. Чтобы узнать больше об этой необходимой службе, см. раздел [Настройка компонента обратной записи паролей](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-writeback#configure-password-writeback). | SSPR_0010: мы обнаружили, что компонент обратной записи паролей не был включен. Обратитесь к администратору, чтобы включить компонент обратной записи паролей. |
| SsprNotEnabledInUserPolicy = 11 | К сожалению, в настоящее время невозможно сбросить ваш пароль, так как администратор не настроил сброс пароля для вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы настроить сброс пароля. Дополнительные сведения о настройке сброса пароля см. в статье [Быстрое развертывание самостоятельного сброса пароля в Azure AD](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-getting-started). | SSPR_0011: в вашей организации не определен политика сброса пароля. Обратитесь к администратору, чтобы определить политику сброса пароля. |
| UserNotLicensed = 12 | К сожалению, в настоящее время невозможно сбросить ваш пароль, так как у вашей организации нет необходимых лицензий. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору для проверки назначенных лицензий. Дополнительные сведения о лицензировании см. в статье [Требования к лицензированию самостоятельного сброса пароля в Azure AD](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-licensing). | SSPR_0012: у вашей организации нет лицензий, необходимых для выполнения сброса пароля. Обратитесь к администратору для проверки назначенных лицензий. |
| UserNotMemberOfScopedAccessGroup = 13 | К сожалению, в настоящее время невозможно сбросить ваш пароль, так как администратор не настроил сброс пароля для вашей учетной записи. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы настроить сброс пароля для своей учетной записи. Дополнительные сведения о настройке учетной записи для сброса пароля см. в статье [Как развернуть самостоятельный сброс пароля](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-best-practices). | SSPR_0012: вы не является участником группы, которой разрешен сброс пароля. Обратитесь к администратору и запросите добавление в такую группу. |
| UserNotProperlyConfigured = 14 | К сожалению, в настоящее время невозможно сбросить ваш пароль, так как в вашей учетной записи нет необходимых сведений. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору, чтобы сбросить пароль. После повторного получения доступа к учетной записи нужно зарегистрировать необходимые сведения. Для этого следуйте указаниям в статье [Регистрация для самостоятельного сброса пароля](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-reset-register). | SSPR_0014: для сброса пароля требуются дополнительные сведения о безопасности. Чтобы продолжить, обратитесь к администратору для сброса пароля. После получения доступа к учетной записи вы сможете зарегистрировать дополнительные сведения на странице https://aka.ms/ssprsetup. Администратор может добавить дополнительные сведения о безопасности в вашу учетную запись, следуя указаниям в разделе [Развертывание сброса пароля без регистрации пользователя](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-data#set-and-read-authentication-data-using-powershell). |
| OnPremisesAdminActionRequired = 29 | К сожалению, в настоящее время невозможно сбросить ваш пароль из-за проблемы в конфигурации сброса пароля вашей организации. Нет никаких дополнительных действий, которые можно выполнить для разрешения этой ситуации. Обратитесь к администратору для изучения данной проблемы. Дополнительные сведения о возможных проблемах см. в разделе [Устранение неполадок с обратной записью паролей](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-troubleshoot#troubleshoot-password-writeback). | SSPR_0029: не удалось сбросить пароль из-за ошибки в локальной конфигурации. Обратитесь к администратору для изучения данной проблемы. |
| OnPremisesConnectivityError = 30 | К сожалению, в настоящее время невозможно сбросить ваш пароль из-за проблем с подключением к вашей организации. Нет никаких действий, которые можно было бы предпринять прямо сейчас, но проблема может исчезнуть, если вы повторите попытку позже. Если проблема повторится, обратитесь к администратору для ее изучения. Дополнительные сведения о проблемах подключения см. в разделе [Устранение неполадок подключения обратной записи паролей](https://docs.microsoft.com/azure/active-directory/active-directory-passwords-troubleshoot#troubleshoot-password-writeback-connectivity). | SSPR_0030: невозможно сбросить ваш пароль из-за плохого подключения к вашей локальной среде. Обратитесь к администратору для изучения данной проблемы.|


## <a name="troubleshoot-the-password-reset-configuration-in-the-azure-portal"></a>Устранение неполадок в конфигурации сброса пароля на портале Azure

| Ошибка | Решение |
| --- | --- |
| Раздел **Сброс пароля** не отображается в области Azure AD на портале Azure. | Это может произойти, если администратору, выполняющему данную операцию, не назначена лицензия AAD Premium или AAD Basic. <br> <br> Назначьте лицензию для соответствующей учетной записи администратора. Следуйте инструкциям в разделе [Шаг 1. Назначение необходимых лицензий](../active-directory-licensing-group-assignment-azure-portal.md#step-1-assign-the-required-licenses).|
| Не отображается конкретный параметр конфигурации. | Многие элементы пользовательского интерфейса скрыты до тех пор, пока они не понадобятся. Попробуйте включить все параметры, если требуется просмотреть их все. |
| Вкладка **Интеграция с локальной средой** не отображается. | Этот параметр отображается, только если загружено средство Azure AD Connect и настроена обратная запись паролей. Дополнительные сведения см. в статье [Приступая к работе с Azure AD Connect с использованием стандартных параметров](./../connect/active-directory-aadconnect-get-started-express.md). |

## <a name="troubleshoot-password-reset-reporting"></a>Устранение неполадок регистрации для сброса паролей

| Ошибка | Решение |
| --- | --- |
| В категориях событий аудита **Self-Service Password Management** (Самостоятельное управление паролями) нет действий управления паролями. | Это может произойти, если администратору, выполняющему данную операцию, не назначена лицензия AAD Premium или AAD Basic. <br> <br> Эту проблему можно решить, назначив лицензию для соответствующей учетной записи администратора. Следуйте инструкциям в разделе [Шаг 1. Назначение необходимых лицензий](../active-directory-licensing-group-assignment-azure-portal.md#step-1-assign-the-required-licenses). |
| Регистрации пользователя отображаются несколько раз. | Сейчас при регистрации пользователя мы записываем каждый зарегистрированный фрагмент данных в журнал как отдельное событие. <br> <br> Если необходимо агрегировать эти данные и обеспечить гибкость при их просмотре, можно загрузить отчет и открыть данные в виде сводной таблицы в Excel.

## <a name="troubleshoot-the-password-reset-registration-portal"></a>Устранение неполадок с порталом регистрации сброса паролей

| Ошибка | Решение |
| --- | --- |
| Для каталога запрещен сброс пароля. **Администратор не включил для вас возможность использовать эту функцию.** | Переключите флажок **Self-service password reset enabled** (Разрешен самостоятельный сброс пароля) на значение **Выбрано** или **Все**, а затем нажмите кнопку **Сохранить**. |
| Пользователю не назначена лицензия Azure AD Premium или Basic. **Администратор не включил для вас возможность использовать эту функцию.** | Это может произойти, если администратору, выполняющему данную операцию, не назначена лицензия AAD Premium или AAD Basic. <br> <br> Эту проблему можно решить, назначив лицензию для соответствующей учетной записи администратора. Следуйте инструкциям в разделе [Шаг 1. Назначение необходимых лицензий](../active-directory-licensing-group-assignment-azure-portal.md#step-1-assign-the-required-licenses).|
| Ошибка при обработке запроса. | Это может быть вызвано множеством различных проблем, но обычно такая ошибка вызывается либо отказом службы, либо проблемой конфигурации. Если эта ошибка влияет на деятельность организации, обратитесь в службу поддержки Майкрософт за помощью. |

## <a name="troubleshoot-the-password-reset-portal"></a>Устранение неполадок с порталом сброса паролей

| Ошибка | Решение |
| --- | --- |
| Для каталога запрещен сброс пароля. | Переключите флажок **Self-service password reset enabled** (Разрешен самостоятельный сброс пароля) на значение **Выбрано** или **Все**, а затем нажмите кнопку **Сохранить**. |
| Пользователю не назначена лицензия Azure AD Premium или Basic. | Это может произойти, если администратору, выполняющему данную операцию, не назначена лицензия AAD Premium или AAD Basic. <br> <br> Эту проблему можно устранить, назначив лицензию для соответствующей учетной записи администратора. Следуйте инструкциям в разделе [Шаг 1. Назначение необходимых лицензий](../active-directory-licensing-group-assignment-azure-portal.md#step-1-assign-the-required-licenses). |
| Для каталога включен сброс паролей, но у пользователя отсутствуют или неправильно указаны сведения для проверки подлинности. | Убедитесь, что пользователь должным образом заполнил контактные данные при регистрации в каталоге, прежде чем продолжить. Дополнительные сведения см. в статье [Развертывание сброса пароля без регистрации пользователя](howto-sspr-authenticationdata.md). |
| Для каталога включен сброс паролей, но пользователь указал при регистрации только один элемент контактных данных, в то время как настройка политики требует два метода проверки. | Прежде чем продолжить, убедитесь, что у этого пользователя правильно настроены по крайней мере два способа связи. Например, мобильный *и* рабочий телефон. |
| Для каталога включен сброс паролей и пользователь настроен правильно, но с пользователем не удается связаться. | Это может быть результатом временной ошибки службы или неверно настроенных контактных данных, которые нам не удалось выявить. <br> <br> Если пользователь подождет 10 секунд, появятся ссылки "Повторить" и "Обратитесь к администратору". Если выбрать "Повторить", выполняется повторная отправка вызова. Если выбрать "Обратитесь к администратору", администратору будет отправлено электронное письмо с формой с запросом на сброс пароля для соответствующей учетной записи пользователя. |
| Пользователь не получает SMS или телефонного вызова для сброса пароля. | Это может быть результатом неправильно указанного в каталоге телефонного номера. Убедитесь, что номер телефона указан в формате “+ccc xxxyyyzzzzXeeee”. <br> <br> Обратите внимание, что функция сброса пароля не поддерживает расширения, даже если указать их в каталоге. Они удаляются перед отправкой вызова. Используйте номер без расширения или интегрируйте расширение в номер телефона на вашей частной ветви. |
| Пользователь не получает сообщения электронной почты для сброса пароля. | Наиболее распространенной причиной этой проблемы является отклонение сообщения фильтром нежелательной почты. Проверьте папку спама, нежелательной почты или удаленных писем в своем почтовом ящике. <br> <br> Кроме того, убедитесь, что вы проверяете правильный почтовый ящик. |
| Политика сброса паролей установлена, но когда учетная запись администратора использует сброс пароля, эта политика не применяется. | Корпорация Майкрософт управляет политикой сброса паролей администраторов, контролирует ее, обеспечивая максимально высокий уровень безопасности. |
| Пользователь предпринял слишком много попыток сброса пароля в день, и для него эта возможность была заблокирована. | Мы реализуем механизм автоматического регулирования для блокировки слишком большого числа попыток сброса пароля пользователями за короткий период времени. Это происходит в следующих случаях: <br><ul><li>В течение одного часа пользователь пытается проверить номер телефона пять раз.</li><li>В течение одного часа пользователь пытается использовать шлюз контрольных вопросов пять раз.</li><li>В течение одного часа пользователь пытается сбросить пароль для одной и той же учетной записи пять раз.</li></ul>Чтобы устранить эту проблему, попросите пользователя подождать 24 часа с момента последней попытки. Затем он сможет сбросить свой пароль. |
| Пользователь видит ошибку при проверке своего номера телефона. | Эта ошибка возникает, если введенный номер телефона не совпадает с номером, который был зарегистрирован. Убедитесь, что при попытке сбросить пароль с помощью телефона пользователь вводит номер телефона полностью, включая код региона и страны. |
| Ошибка при обработке запроса. | Это может быть вызвано множеством различных проблем, но обычно такая ошибка вызывается либо отказом службы, либо проблемой конфигурации. Если эта ошибка влияет на деятельность организации, обратитесь в службу поддержки Майкрософт за помощью. |

## <a name="troubleshoot-password-writeback"></a>Устранение неполадок с обратной записью паролей

| Ошибка | Решение |
| --- | --- |
| Служба сброса паролей не запускается на локальном компьютере. В журнале событий приложений на компьютере Azure AD Connect появляется ошибка 6800. <br> <br> После подключения федеративные пользователи и пользователи, применяющие сквозную аутентификацию либо синхронизацию хэшей паролей, не могут сбрасывать пароли. | Если включена обратная запись паролей, обработчик синхронизации вызывает библиотеку обратной записи, чтобы выполнить настройку (адаптацию), обратившись к облачной службе адаптации. Все ошибки, обнаруженные во время подключения или при запуске конечной точки Windows Communication Foundation (WCF) для обратной записи паролей, приведут к ошибкам в журнале событий компьютера Azure AD Connect. <br> <br> Если при перезапуске службы Azure AD Sync была настроена обратная запись, запускается конечная точка WCF. Однако если при запуске конечной точки произойдет сбой, мы запишем в журнал событие 6800 и разрешим запуск службы синхронизации. Наличие этого события означает, что конечная точка обратной записи паролей не была запущена. Подробные сведения в журнале об этом событии (6800) наряду с записями журнала событий, созданными компонентом PasswordResetService, покажут, почему конечную точку не удалось запустить. Просмотрите эти ошибки в журнале событий и попробуйте заново запустить Azure AD Connect, если обратная запись паролей все еще не работает. Если проблема сохранится, попробуйте отключить и повторно включить обратную запись паролей.
| Когда пользователь пытается сбросить пароль или разблокировать учетную запись с включенным компонентом обратной записи паролей, операция завершается ошибкой. <br> <br> Кроме того, после операции блокировки в журнале событий Azure AD Connect отображается событие со следующим сообщением: "Обработчик синхронизации вернул ошибку hr=800700CE, сообщение=Слишком длинное имя файла или расширение". | Найдите учетную запись Active Directory для Azure AD Connect и измените пароль так, чтобы он содержал не более 127 символов. Затем из меню **Пуск** запустите **службу синхронизации**. В разделе **Соединители** найдите **Соединитель Active Directory**. Выберите его, а затем щелкните **Свойства**. На странице **Учетные данные** введите новый пароль. Нажмите кнопку **ОК**, чтобы закрыть страницу. |
| На последнем шаге процесса установки Azure AD Connect появляется ошибка с сообщением о том, что обратную запись паролей не удалось настроить. <br> <br> Журнал событий приложения Azure AD Connect содержит ошибку 32009 с текстом "Ошибка при получении токена авторизации." | Эта ошибка возникает в следующих двух случаях: <br><ul><li>Введен неправильный пароль для учетной записи глобального администратора, указанной в начале установки Azure AD Connect.</li><li>Предпринята попытка использовать федеративного пользователя для учетной записи глобального администратора, указанной в начале установки Azure AD Connect.</li></ul> Чтобы устранить эту проблему, убедитесь в том, что вы не используете федеративную учетную запись для глобального администратора, указанного в начале процесса установки. Также убедитесь, что введен правильный пароль. |
| Журнал событий компьютера Azure AD Connect содержит ошибку 32002, выданную службой PasswordResetService. <br> <br> Текст сообщения об ошибке: "Ошибка подключения к служебной шине. Поставщику маркеров не удалось предоставить маркер безопасности." | Локальной среде не удалось подключиться к конечной точке служебной шины Azure в облаке. Эту ошибку обычно вызывает правило брандмауэра, блокирующее исходящее подключение к конкретному порту или веб-адресу. Дополнительные сведения см. в статье [Необходимые условия для Azure AD Connect](./../connect/active-directory-aadconnect-prerequisites.md). После обновления этих правил перезагрузите компьютер Azure AD Connect, и обратная запись паролей должна снова начать работать. |
| Поработав некоторое время, федеративные пользователи и пользователи, применяющие сквозную аутентификацию либо синхронизацию хэшей паролей, не могут сбросить свой пароль. | В некоторых редких случаях службе обратной записи паролей не удается перезапуститься после перезапуска Azure AD Connect. В этих случаях сначала проверьте, включена ли обратная запись паролей локально. Это можно сделать с помощью PowerShell или мастера Azure AD Connect (см. раздел практических руководств выше). Если эта функция выглядит включенной, попробуйте еще раз включить или отключить функцию через пользовательский интерфейс или PowerShell. Если это не поможет, попробуйте полностью удалить и заново установить Azure AD Connect. |
| Федеративные пользователи или пользователи, применяющие сквозную аутентификацию либо синхронизацию хэшей паролей, которые пытаются сбросить свои пароли, после попытки отправить пароль видят ошибку, указывающую, что возникла проблема со службой. <br ><br> Кроме того, во время операций сброса пароля вы можете увидеть ошибку, связанную с тем, что агенту управления было отказано в доступе к журналам событий в локальной системе. | Если эти ошибки отображаются в вашем журнале событий, убедитесь, что учетная запись Active Directory Management Agent (которая была указана в мастере во время настройки) обладает необходимыми разрешениями для обратной записи паролей. <br> <br> Обратите внимание, что после предоставления этого разрешения может потребоваться до 1 часа для распространения разрешений путем выполнения фоновой задачи `sdprop` на контроллере домена. <br> <br> Для работы сброса пароля разрешение необходимо установить на дескрипторе безопасности объекта пользователя, пароль которого сбрасывается. Пока это разрешение не отобразится на объекте пользователя, сброс пароля будет завершаться отказом в доступе. |
| Федеративные пользователи или пользователи, применяющие сквозную аутентификацию либо синхронизацию хэшей паролей, которые пытаются сбросить свои пароли, после отправки пароля видят ошибку, указывающую, что возникла проблема со службой. <br> <br> Кроме того, во время операций сброса пароля в журналах событий может появиться ошибка службы Azure AD Connect с сообщением "Объект не найден". | Эта ошибка обычно указывает, что обработчику синхронизации не удалось найти либо объект пользователя в пространстве соединителя Azure AD, либо связанный объект пространства соединителя метавселенной (MV) или Azure AD. <br> <br> Для решения этой проблемы убедитесь, что пользователь действительно синхронизирован из локальной среды в Azure AD через текущий экземпляр Azure AD Connect, и проверьте состояние объектов в пространствах соединителей и MV. Убедитесь, что объект Active Directory Certificate Services соединен с объектом MV через правило Microsoft.InfromADUserAccountEnabled.xxx.|
| Федеративные пользователи или пользователи, применяющие сквозную аутентификацию либо синхронизацию хэшей паролей, которые пытаются сбросить свои пароли, после отправки пароля видят ошибку, указывающую, что возникла проблема со службой. <br> <br> Кроме того, во время операций сброса пароля в журналах событий может появиться ошибка службы Azure AD Connect с сообщением "Найдено несколько соответствий". | Это означает, что обработчик синхронизации обнаружил, что объект MV подключен к нескольким объектам AD CS через "Microsoft.InfromADUserAccountEnabled.xxx". Это означает, что у пользователя включена учетная запись в нескольких лесах. Обратите внимание, что такой сценарий не поддерживается для обратной записи паролей. |
| Операции с паролем вызывают ошибку конфигурации. Журнал событий приложений содержит ошибку Azure AD Connect 6329 с текстом: "0x8023061f (Операция не удалась, поскольку для данного агента управления не включена синхронизация паролей)". | Это происходит, если вы изменяете конфигурацию Azure AD Connect для добавления нового леса Active Directory (или удаления и повторного добавления существующего леса) после включения функции обратной записи паролей. Операции с паролями для пользователей в недавно добавленных лесах завершаются ошибкой. Чтобы исправить эту проблему, отключите и повторно включите обратную запись паролей после изменения конфигурации леса. |

## <a name="password-writeback-event-log-error-codes"></a>Коды ошибок журнала событий обратной записи паролей

Рекомендуемой практикой при устранении неполадок с обратной записью паролей является проверка соответствующего журнала событий приложений на компьютере Azure AD Connect. Этот журнал событий содержит события из двух источников, представляющих интерес в плане обратной записи паролей. В источнике PasswordResetService описаны операции и вопросы, относящиеся к работе обратной записи паролей. В источнике ADSync описаны операции и проблемы, связанные с установкой паролей в среде Active Directory.

### <a name="if-the-source-of-the-event-is-adsync"></a>Источник событий — ADSync

| Код | Имя или сообщение | ОПИСАНИЕ |
| --- | --- | --- |
| 6329 | BAIL: MMS(4924) 0x80230619 — "Ограничение препятствует изменению пароля на текущий указанный." | Это событие возникает при попытке службы обратной записи паролей установить на ваш локальный каталог пароль, который не соответствует требованиям домена к сроку действия пароля, истории, сложности или фильтрации. <br> <br> Если установлен минимальный срок действия пароля и пароль был недавно изменен в пределах заданного окна времени, вы не сможете изменить пароль снова, пока не истечет определенный период времени в вашем домене. При тестировании установите для минимального срока действия паролей значение 0. <br> <br> Если включены требования к истории паролей, то необходимо выбрать пароль, который не использовался последние *N* раз, где *N* — настройка истории паролей. При выборе пароля, который использовался в последние *N* раз, в данном случае возникнет ошибка. При тестировании установите для журнала паролей значение 0. <br> <br> Если включены требования к сложности пароля, все они будут применяться при попытке пользователя изменить или сбросить пароль. <br> <br> Если включены фильтры паролей, а пользователь выбирает пароль, не соответствующий критериям фильтрации, операция сброса или изменения завершится ошибкой. |
| 6329 | MMS(3040): admaexport.cpp(2837): на сервере не включен элемент управления политикой паролей LDAP. | Эта проблема возникает, если элемент управления LDAP_SERVER_POLICY_HINTS_OID (1.2.840.113556.1.4.2066) не включен на контроллерах доменов. Чтобы использовать функцию обратной записи паролей, необходимо включить этот элемент управления. Для этого контроллеры доменов должны работать под управлением Windows Server 2008 (с последним пакетом обновления) или более поздней версии. Если контроллеры доменов используют версию Windows Server 2008, предшествующую R2, необходимо также применить [исправление KB2386717](http://support.microsoft.com/kb/2386717). |
| HR 8023042 | Обработчик синхронизации вернул ошибку hr=80230402 с сообщением: "Попытка получить объект завершилась ошибкой, так как существуют повторяющиеся записи с одной привязкой". | Это ошибка возникает, когда один идентификатор пользователя включен в нескольких доменах. Например, если идет синхронизация лесов учетных записей и ресурсов, и в каждом из них включен один и тот же идентификатор пользователя. <br> <br> Также эта ошибка может возникнуть, если вы используете атрибут неуникальной привязки (например, псевдоним или имя участника-пользователя) и два пользователя используют одинаковый атрибут привязки. <br> <br> Чтобы устранить эту проблему, убедитесь, что в пределах доменов нет повторяющихся пользователей и для каждого пользователя используется атрибут уникальной привязки. |

### <a name="if-the-source-of-the-event-is-passwordresetservice"></a>Источник событий — PasswordResetService

| Код | Имя или сообщение | ОПИСАНИЕ |
| --- | --- | --- |
| 31001 | PasswordResetStart | Это событие указывает, что локальная служба обнаружила исходящий из облака запрос на сброс пароля для федеративного пользователя или пользователя, применяющего сквозную аутентификацию либо синхронизацию хэшей паролей. Это событие является первым событием в каждой операции обратной записи сброса пароля. |
| 31002 | PasswordResetSuccess | Это событие указывает, что пользователь выбрал новый пароль во время операции сброса пароля. Мы определили, что пароль соответствует требованиям организации к паролю. Он был успешно записан обратно в локальную среду Active Directory. |
| 31003 | PasswordResetFail | Это событие указывает, что пользователь выбрал пароль, который был успешно передан в локальную среду. Однако при попытке установить его в локальной среде Active Directory произошел сбой. Это может произойти по нескольким причинам. <br><ul><li>Пароль пользователя не соответствует требованиям домена к сроку действия, истории, сложности или фильтрации. Чтобы устранить эту проблему, создайте пароль.</li><li>Учетная запись службы ADMA не имеет соответствующих разрешений на установку нового пароля для нужной учетной записи пользователя.</li><li>Учетная запись пользователя входит в защищенную группу (например, группу администраторов домена или предприятия), для которой операции установки пароля запрещены.</li></ul>|
| 31004 | OnboardingEventStart | Это событие возникает, если включена обратная запись паролей с помощью Azure AD Connect и начата адаптация вашей организации к веб-службе обратной записи паролей. |
| 31005 | OnboardingEventSuccess | Это событие указывает, что процесс адаптации прошел успешно и возможности обратной записи паролей готовы к использованию. |
| 31006 | ChangePasswordStart | Это событие указывает, что локальная служба обнаружила исходящий из облака запрос на изменение пароля для федеративного пользователя или пользователя, применяющего сквозную аутентификацию либо синхронизацию хэшей паролей. Это событие является первым событием в каждой операции обратной записи изменения пароля. |
| 31007 | ChangePasswordSuccess | Это событие указывает, что пользователь выбрал новый пароль во время операции изменения пароля, мы определили, что этот пароль соответствует требованиям организации к паролю, и он успешно был записан обратно в локальную среду Active Directory. |
| 31008 | ChangePasswordFail | Это событие указывает, что пользователь выбрал пароль, этот пароль успешно поступил в локальную среду, но при попытке установить его в локальной среде Active Directory произошел сбой. Это может произойти по нескольким причинам. <br><ul><li>Пароль пользователя не соответствует требованиям домена к сроку действия, истории, сложности или фильтрации. Чтобы устранить эту проблему, создайте пароль.</li><li>Учетная запись службы ADMA не имеет соответствующих разрешений на установку нового пароля для нужной учетной записи пользователя.</li><li>Учетная запись пользователя входит в защищенную группу (например, группу администраторов домена или предприятия), для которой операции установки пароля запрещены.</li></ul> |
| 31009 | ResetUserPasswordByAdminStart | Локальная служба обнаружила запрос на сброс пароля для федеративного пользователя или пользователя, применяющего сквозную аутентификацию либо синхронизацию хэшей паролей, исходящий от администратора от имени пользователя. Это событие является первым событием в каждой операции обратной записи для сброса пароля, инициированной администратором. |
| 31010 | ResetUserPasswordByAdminSuccess | Администратор выбрал новый пароль во время операции сброса пароля, инициированной администратором. Мы определили, что пароль соответствует требованиям организации к паролю. Он был успешно записан обратно в локальную среду Active Directory. |
| 31011 | ResetUserPasswordByAdminFail | Администратор выбрал пароль от имени пользователя. Этот пароль был успешно передан в локальную среду. Однако при попытке установить его в локальной среде Active Directory произошел сбой. Это может произойти по нескольким причинам. <br><ul><li>Пароль пользователя не соответствует требованиям домена к сроку действия, истории, сложности или фильтрации. Попробуйте устранить эту проблему, указав новый пароль.</li><li>Учетная запись службы ADMA не имеет соответствующих разрешений на установку нового пароля для нужной учетной записи пользователя.</li><li>Учетная запись пользователя входит в защищенную группу (например, группу администраторов домена или предприятия), для которой операции установки пароля запрещены.</li></ul>  |
| 31012 | OffboardingEventStart | Это событие возникает, если отключить обратную запись паролей с помощью Azure AD Connect, и указывает, что начата отмена адаптации вашей организации к веб-службе обратной записи паролей. |
| 31013| OffboardingEventSuccess| Это событие указывает, что процесс отмены адаптации прошел успешно и возможности обратной записи паролей успешно отключены. |
| 31014| OffboardingEventFail| Это событие указывает, что процесс отмены адаптации не был успешным. Это могло произойти из-за ошибки в облаке или локальной учетной записи администратора, указанной во время настройки. Она также могла возникнуть, если вы пытались использовать федеративного облачного глобального администратора при отключении обратной записи паролей. Чтобы устранить эту проблему, проверьте свои разрешения на администрирование и убедитесь, что вы не используете никакую федеративную учетную запись при настройке функции обратной записи паролей.|
| 31015| WriteBackServiceStarted| Это событие указывает, что служба обратной записи паролей успешно запущена. Она готова к приему запросов на управление паролями из облака.|
| 31016| WriteBackServiceStopped| Это событие указывает, что служба обратной записи паролей была остановлена. Любые запросы на управление паролями из облака не будут выполняться.|
| 31017| AuthTokenSuccess| Это событие указывает, что мы успешно получили токен авторизации для глобального администратора, указанного во время установки Azure AD Connect, для запуска процесса адаптации или отмены адаптации.|
| 31018| KeyPairCreationSuccess| Это событие указывает, что мы успешно создали ключ шифрования паролей. Он используется для шифрования паролей из облака для отправки в локальную среде.|
| 32000| UnknownError| Это событие указывает на неизвестную ошибку во время операции управления паролями. Просмотрите текст исключения в событии для получения дополнительных сведений. Если проблемы продолжаются, попробуйте отключить и повторно включить обратную запись паролей. Если это не помогло, включите копию журнала событий вместе с указанным внутри идентификатором отслеживания и отправьте сотруднику службы поддержки.|
| 32001| ServiceError| Это событие указывает, что произошла ошибка при подключении к облачной службе сброса паролей. Она обычно возникает, если локальной службе не удается подключиться к веб-службе сброса паролей.|
| 32002| ServiceBusError| Это событие указывает, что произошла ошибка при подключении к экземпляру шины обслуживания вашего клиента. Это может произойти, если в вашей локальной среде блокируются исходящие подключения. Проверьте, разрешены ли в брандмауэре подключения через TCP-порт 443 и к странице https://ssprsbprodncu-sb.accesscontrol.windows.net/, а затем повторите попытку. Если проблемы продолжаются, попробуйте отключить и повторно включить обратную запись паролей.|
| 32003| InPutValidationError| Это событие указывает, что входные данные, переданные в API нашей веб-службы, были недопустимыми. Попробуйте выполнить операцию заново.|
| 32004| DecryptionError| Это событие указывает, что произошла ошибка при расшифровке пароля, который поступил из облака. Это может быть из-за несовпадения ключей расшифровки между облачной службой и локальной средой. Чтобы решить эту проблему, отключите и снова включите обратную запись паролей в локальной среде.|
| 32005| ConfigurationError| Во время адаптации мы сохраняем сведения для конкретного клиента в файле конфигурации в локальной среде. Это событие указывает, что произошла ошибка при сохранении этого файла или при запуске службы произошла ошибка чтения файла. Чтобы устранить эту проблему, попробуйте отключить и повторно включить обратную запись паролей для принудительной перезаписи данного файла конфигурации.|
| 32007| OnBoardingConfigUpdateError| Во время адаптации мы отправляем данные из облака в локальную службу сброса паролей. Эти данные затем записываются в файл, размещенный в памяти, перед отправкой в службу синхронизации для безопасного хранения на диске. Это событие указывает на проблему при записи или обновлении таких данных в памяти. Чтобы устранить эту проблему, попробуйте отключить и повторно включить обратную запись паролей для принудительной перезаписи данного файла конфигурации.|
| 32008| ValidationError| Это событие указывает, что был получен недопустимый ответ от веб-службы сброса паролей. Чтобы устранить эту проблему, попробуйте отключить и повторно включить обратную запись паролей.|
| 32009| AuthTokenError| Это событие указывает, что нам не удалось получить токен авторизации для учетной записи глобального администратора, указанной во время установки Azure AD Connect. Эта ошибка может быть вызвана неверным именем пользователя или паролем, указанным для учетной записи глобального администратора. Она может возникнуть, если указанная учетная запись глобального администратора является федеративной. Чтобы устранить эту проблему, повторно запустите конфигурацию с правильными именем пользователя и паролем и убедитесь, что учетная запись администратора является управляемой (только облачной или с синхронизацией паролей).|
| 32010| CryptoError| Это событие указывает, что произошла ошибка при создании ключа шифрования пароля или при расшифровке пароля, поступившего из облачной службы. Скорее всего, эта ошибка указывает на возможную неполадку среды. Просмотрите подробности в журнале событий для получения дополнительных сведений об устранении этой проблемы. Вы также можете попробовать отключить и повторно включить службу обратной записи паролей.|
| 32011| OnBoardingServiceError| Это событие указывает, что локальной службе не удалось правильно связаться с веб-службой сброса паролей для запуска процесса адаптации. Это может произойти из-за правила брандмауэра или проблемы при получении маркера проверки подлинности для вашего клиента. Чтобы устранить эту проблему, проверьте, не блокируются ли исходящие подключения через TCP-порты 443 и 9350–9354 или к странице https://ssprsbprodncu-sb.accesscontrol.windows.net/. Кроме того, убедитесь в том, что учетная запись администратора Azure Active Directory, используемая для этого процесса, не федеративная.|
| 32013| OffBoardingError| Это событие указывает, что локальной службе не удалось правильно связаться с веб-службой сброса паролей для запуска процесса отмены адаптации. Это может быть из-за правил брандмауэра или проблемы при получении маркера авторизации для вашего клиента. Чтобы устранить эту проблему, проверьте, не блокируются ли исходящие подключения через TCP-порт 443 или к странице https://ssprsbprodncu-sb.accesscontrol.windows.net/. Кроме того, учетная запись администратора Azure Active Directory, используемая для этого процесса, не должна быть федеративной.|
| 32014| ServiceBusWarning| Это событие указывает, что нам необходимо было повторить попытку подключения к экземпляру шины обслуживания вашего клиента. В обычных условиях это не должно быть проблемой, однако если событие повторяется множество раз, рекомендуется проверить сетевое подключение к шине обслуживания, особенно в случае подключения с высокой задержкой или низкой пропускной способностью.|
| 32015| ReportServiceHealthError| Для мониторинга работоспособности службы обратной записи паролей мы отправляем сведения о пульсе в веб-службу сброса паролей каждые пять минут. Это событие указывает, что произошла ошибка при отправке такой информации о работоспособности обратно в облачную веб-службу. Такая информация о работоспособности не включает в себя данные объекта (OII) или персональные данные (PII) и представляет собой исключительно сигнал пульса и базовую статистику службы, позволяющую предоставлять сведения о состоянии службы в облаке.|
| 33001| ADUnKnownError| Это событие указывает, что возникла неизвестная ошибка, возвращенная службой Active Directory. Проверьте журнал событий сервера Azure AD Connect на наличие событий из источника ADSync для получения дополнительных сведений об ошибке.|
| 33002| ADUserNotFoundError| Это событие указывает, что пользователь, который пытается сбросить или изменить пароль, не найден в локальном каталоге. Это может произойти, если пользователь был удален локально, а не в облаке. Эта ошибка также может возникать при наличии проблемы с синхронизацией. Проверьте журналы синхронизации, а также подробности о последних нескольких запусках синхронизации для получения дополнительных сведений.|
| 33003| ADMutliMatchError| Если запрос на сброс или изменение пароля исходит из облака, мы используем облачную привязку, указанную в процессе установки Azure AD Connect, для определения способа связи этого запроса обратно с пользователем в локальной среде. Это событие указывает, что в локальном каталоге найдены два пользователя с одним и тем же атрибутом облачной привязки. Проверьте журналы синхронизации, а также подробности о последних нескольких запусках синхронизации для получения дополнительных сведений.|
| 33004| ADPermissionsError| Это событие указывает, что учетная запись Active Directory Management Agent (ADMA) не имеет соответствующих разрешений на запрашиваемую учетную запись, чтобы задать новый пароль. Убедитесь, что учетная запись ADMA в лесу пользователя имеет разрешения на сброс и изменение пароля для всех объектов в лесу. Дополнительные сведения о том, как это сделать, см. в разделе "Шаг 4. Настройка соответствующих разрешений Active Directory".|
| 33005| ADUserAccountDisabled| Это событие указывает, что мы пытались сбросить или изменить пароль для учетной записи, которая была отключена на локальном компьютере. Включите учетную запись и повторите попытку.|
| 33006| ADUserAccountLockedOut| Это событие указывает, что мы пытались сбросить или изменить пароль для учетной записи, которая была заблокирована на локальном компьютере. Блокировки могут происходить при слишком большом количестве попыток пользователя изменить или сбросить пароль за короткий период. Разблокируйте учетную запись и повторите попытку.|
| 33007| ADUserIncorrectPassword| Это событие указывает, что пользователь задал неверный текущий пароль при выполнении операции смены пароля. Укажите правильный текущий пароль и повторите попытку.|
| 33008| ADPasswordPolicyError| Это событие возникает при попытке службы обратной записи паролей установить на ваш локальный каталог пароль, который не соответствует требованиям домена к сроку действия пароля, истории, сложности или фильтрации. <br> <br> Если установлен минимальный срок действия пароля и пароль был недавно изменен в пределах заданного окна времени, вы не сможете изменить пароль снова, пока не истечет определенный период времени в вашем домене. При тестировании установите для минимального срока действия паролей значение 0. <br> <br> Если включены требования к истории паролей, то необходимо выбрать пароль, который не использовался последние *N* раз, где *N* — настройка истории паролей. При выборе пароля, который использовался в последние *N* раз, в данном случае возникнет ошибка. При тестировании установите для журнала паролей значение 0. <br> <br> Если включены требования к сложности пароля, все они будут применяться при попытке пользователя изменить или сбросить пароль. <br> <br> Если включены фильтры паролей, а пользователь выбирает пароль, не соответствующий критериям фильтрации, операция сброса или изменения завершится ошибкой.|
| 33009| ADConfigurationError| Это событие указывает, что возникла проблема при записи пароля обратно в локальный каталог из-за неполадки с конфигурацией в Active Directory. Проверьте журнал событий приложений компьютера Azure AD Connect на наличие сообщений от службы ADSync для получения дополнительных сведений о том, какая ошибка произошла.|

## <a name="troubleshoot-password-writeback-connectivity"></a>Устранение проблем с подключением при обратной записи паролей

Если при работе с компонентом обратной записи паролей Azure AD Connect наблюдаются нарушения работы службы, воспользуйтесь приведенным ниже рядом быстрых действий, которые можно предпринять для решения этой проблемы:

* [Проверка наличия сетевого подключения](#confirm-network-connectivity)
* [Перезапуск службы синхронизации Azure AD Connect](#restart-the-azure-ad-connect-sync-service)
* [Отключение и повторное включение функции обратной записи паролей](#disable-and-re-enable-the-password-writeback-feature)
* [Установка новейшей версии Azure AD Connect](#install-the-latest-azure-ad-connect-release)
* [Устранение неполадок с обратной записью паролей](#troubleshoot-password-writeback)

В общем, мы рекомендуем выполнить следующие действия в указанном выше порядке для максимально быстрого восстановления работы службы.

### <a name="confirm-network-connectivity"></a>Проверка наличия сетевого подключения

Наиболее распространенные точки отказа связаны с неправильной настройкой портов брандмауэра и прокси-сервера или времени ожидания до перехода в режим простоя. 

Для Azure AD Connect 1.1.443.0 и более поздних версий вам нужно обеспечить исходящий HTTPS-доступ к следующим сайтам:

   - passwordreset.microsoftonline.com
   - servicebus.windows.net.

Для более точного доступа см. обновленный список диапазонов IP-адресов центра обработки данных Microsoft Azure [здесь](https://www.microsoft.com/download/details.aspx?id=41653). Этот список обновляется каждую среду, а изменения вступают в силу в следующий понедельник.

Ознакомьтесь с необходимыми условиями для подключения в статье [Необходимые условия для Azure AD Connect](./../connect/active-directory-aadconnect-prerequisites.md), чтобы получить дополнительную информацию.



### <a name="restart-the-azure-ad-connect-sync-service"></a>Перезапуск службы синхронизации Azure AD Connect

Чтобы решить проблемы с подключением или другие временные проблемы со службой, перезапустите службу синхронизации Azure AD Connect.

   1. От имени администратора нажмите кнопку **Пуск** на сервере с запущенной службой Azure AD Connect.
   2. Введите **services.msc** в поле поиска и нажмите клавишу **ВВОД**.
   3. Найдите запись **Microsoft Azure AD Sync**.
   4. Щелкните запись службы правой кнопкой мыши, выберите команду **Перезапустить** и дождитесь завершения операции.

   ![Перезапуск службы Azure AD Sync][Service restart]

Эти шаги позволяют восстановить подключение к облачной службе и устранить возможные перебои в работе. Если перезапуск ADSync не решил проблему, мы рекомендуем попробовать отключить и повторно включить функцию обратной записи паролей.

### <a name="disable-and-re-enable-the-password-writeback-feature"></a>Отключение и повторное включение функции обратной записи паролей

Отключение и повторное включение функции обратной записи паролей может помочь устранить проблемы с подключением.

   1. От имени администратора откройте мастер настройки Azure AD Connect.
   2. В окне **Подключение к Azure AD** введите учетные данные глобального администратора Azure AD.
   3. В окне **Подключение к AD DS** введите учетные данные администратора доменных служб AD.
   4. В окне **Уникальная идентификация пользователей** нажмите кнопку **Далее**.
   5. В окне **Дополнительные компоненты** снимите флажок **Обратная запись паролей**.
   6. Нажимайте кнопку **Далее** на следующих страницах диалогового окна, ничего не изменяя, пока не перейдете на страницу **Ready to configure page** (Готово к настройке).
   7. Убедитесь, что на странице **Ready to configure page** (Готово к настройке) функция **обратной записи пароля** отображается **отключенной**. Затем нажмите зеленую кнопку **Настроить**, чтобы сохранить изменения.
   8. В окне **Завершение** снимите флажок **Синхронизировать сейчас**, а затем нажмите кнопку **Готово**, чтобы закрыть мастер.
   9. Повторно откройте мастер настройки Azure AD Connect.
   10. Повторите шаги 2–8, но сейчас **включите обратную запись пароля** на странице **Дополнительные возможности**, чтобы повторно включить службу.

Эти шаги позволяют восстановить подключение к нашей облачной службе и устранить возможные перебои в работе.

Если отключение и повторное включение функции обратной записи паролей не решило проблему, мы рекомендуем переустановить Azure AD Connect.

### <a name="install-the-latest-azure-ad-connect-release"></a>Установка новейшей версии Azure AD Connect

Так вы сможете устранить проблемы с конфигурацией и подключением между облачными службами и локальной средой Azure Active Directory.

Мы рекомендуем выполнять этот шаг только после выполнения первых двух действий, описанных выше.

> [!WARNING]
> Если вы изменили стандартные правила синхронизации, *создайте резервную копию правил, прежде чем продолжать обновление, а затем вручную повторно разверните их после завершения операции.*

   1. Скачайте последнюю версию Azure AD Connect в [Центре загрузки Майкрософт](http://go.microsoft.com/fwlink/?LinkId=615771).
   2. Так как вы уже установили Azure AD Connect, будет достаточно выполнить обновление на месте, чтобы обновить установленный пакет Azure AD Connect до новейшей версии.
   3. Запустите загруженный пакет и следуйте инструкциям на экране для обновления компьютера Azure AD Connect.

Шаги, описанные выше, позволяют восстановить подключение к нашей облачной службе и устранить возможные перебои в работе.

Если установка последней версии сервера Azure AD Connect не решила проблему, попробуйте отключить и повторно включить обратную запись паролей в качестве последнего шага после установки последнего выпуска.

## <a name="verify-that-azure-ad-connect-has-the-required-permission-for-password-writeback"></a>Проверка наличия у Azure AD Connect необходимого разрешения для обратной записи паролей

Чтобы выполнить обратную запись пароля, Azure AD Connect необходимо разрешение Active Directory **Сброс пароля**. Чтобы узнать, обладает ли Azure AD Connect необходимыми разрешениями для определенной локальной учетной записи Active Directory, можно использовать функцию действующих разрешений Windows:

   1. Войдите на сервер Azure AD Connect и запустите **Synchronization Service Manager**, выбрав **Запуск** > **Synchronization Service** (Служба синхронизации).
   2. На вкладке **Соединители** выберите локальный соединитель **доменных служб Active Directory**, а затем щелкните **Свойства**.  

   ![Шаг 2. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission01.png)  
  
   3. Во всплывающем окне выберите вкладку **Connect to Active Directory Forest** (Подключение к лесу Active Directory) и запишите свойство **Имя пользователя**. Это свойство является учетной записью AD DS, используемой службой Azure AD Connect для выполнения синхронизации каталогов. Чтобы Azure AD Connect выполнила обратную запись паролей, учетной записи AD DS нужно иметь разрешение на сброс пароля.  
   
   ![Шаг 3. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission02.png) 
  
   4. Войдите в локальный контроллер домена и запустите приложение **Пользователи и компьютеры Active Directory**.
   5. Выберите **Просмотр** и убедитесь, что параметр **Advanced Features** (Дополнительные функции) включен.  
   
   ![Шаг 5. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission03.png) 
  
   6. Найдите учетную запись Active Directory, которую необходимо проверить. Щелкните учетную запись правой кнопкой мыши и выберите **Свойства**.  
   
   ![Шаг 6. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission04.png) 

   7. Во всплывающем окне перейдите на вкладку **Безопасность** и выберите **Дополнительно**.  
   
   ![Шаг 7. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission05.png) 
   
   8. Во всплывающем окне **Advanced Security Settings for Administrator** (Дополнительные параметры безопасности для администратора) перейдите на вкладку **Действующие права доступа**.
   9. Щелкните **Выбрать пользователя** и выберите учетную запись AD DS, используемую службой Azure AD Connect (см. шаг 3), а затем выберите **Просмотреть действующие разрешения**.  
   
   ![Шаг 9. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission06.png) 
  
   10. Прокрутите список вниз и найдите **Сброс пароля**. Если возле записи установлен флажок, учетная запись AD DS имеет разрешение на сброс пароля выбранной учетной записи пользователя Active Directory.  
   
   ![Шаг 10. Действующее разрешение](./media/active-directory-passwords-troubleshoot/checkpermission07.png)  

## <a name="azure-ad-forums"></a>Форумы Azure AD

Если у вас есть общие вопросы об Azure AD и самостоятельном сбросе пароля, их можно задать участникам сообщества на [форумах Azure AD](https://social.msdn.microsoft.com/Forums/en-US/home?forum=WindowsAzureAD). В сообщество входят инженеры, менеджеры по продуктам, MVP и ИТ-специалисты.

## <a name="contact-microsoft-support"></a>Обратиться в службу поддержки Майкрософт

Если вам не удается найти решение проблемы, специалисты группы поддержки всегда готовы помочь.

Чтобы мы могли предоставить вам соответствующую помощь, укажите в запросе как можно больше подробностей. Они могут включать:

* **Общее описание ошибки.** В чем заключается ошибка? Как вела себя система? Как можно воспроизвести ошибку? Опишите проблему максимально подробно.
* **Страница.** На какой странице вы находились, когда произошла ошибка? По возможности предоставьте URL-адрес страницы и снимок экрана.
* **Код поддержки.** Какой код поддержки был сформирован, когда пользователь увидел ошибку?
    * Чтобы найти его, воспроизведите ошибку, затем щелкните ссылку **Код поддержки** внизу экрана и отправьте специалисту службы поддержки идентификатор GUID, который отобразится в результате.

    ![Поиск кода поддержки в нижней части экрана][Support code]

    * Если вы находитесь на странице, внизу которой отсутствует код поддержки, нажмите клавишу F12 и поищите SID и CID, после чего отправьте два найденных результата специалисту службы поддержки.
* **Дата, время и часовой пояс.** Укажите точную дату и время возникновения ошибки, а также *часовой пояс*.
* **Идентификатор пользователя.** Какой пользователь увидел ошибку? Например, *user@contoso.com*.
    * Это федеративный пользователь?
    * Это пользователь, применяющий сквозную аутентификацию?
    * Это пользователь с синхронизацией хэшей паролей?
    * Это облачный пользователь?
* **Лицензирование.** Какая лицензия назначена пользователю (Azure AD Premium или Azure AD Basic)?
* **Журнал событий приложений.** Если используется обратная запись паролей и код ошибки находится в вашей локальной инфраструктуре, отправьте архив с копией журнала событий приложений с сервера Azure AD Connect.



[Service restart]: ./media/active-directory-passwords-troubleshoot/servicerestart.png "Перезапуск службы Azure AD Sync"
[Support code]: ./media/active-directory-passwords-troubleshoot/supportcode.png "Код поддержки находится в правой нижней части окна"

## <a name="next-steps"></a>Дополнительная информация

Дополнительные сведения о сбросе пароля с помощью Azure AD см. в следующих статьях:

* [Как развернуть самостоятельный сброс пароля?](howto-sspr-deployment.md)
* [Сброс или изменение пароля](../active-directory-passwords-update-your-own-password.md)
* [Регистрация для самостоятельного сброса пароля](../active-directory-passwords-reset-register.md)
* [Требования к лицензированию самостоятельного сброса пароля в Azure AD](concept-sspr-licensing.md)
* [Какие данные используются для SSPR и какие сведения нужно указывать для пользователей](howto-sspr-authenticationdata.md)
* [Доступные пользователям методы проверки подлинности](concept-sspr-howitworks.md#authentication-methods)
* [Параметры политики для SSPR](concept-sspr-policy.md)
* [Что такое обратная запись паролей и каково ее назначение](howto-sspr-writeback.md)
* [Как сообщать о действиях в SSPR](howto-sspr-reporting.md)
* [Обзор всех параметров SSPR и их значение](concept-sspr-howitworks.md)
* [Вопросы, не вошедшие в другие статьи](active-directory-passwords-faq.md)
