---
title: Импорт и экспорт в службе "База данных Azure для MySQL"
description: В этой статье описываются распространенные способы импорта и экспорта баз данных в базе данных Azure для MySQL с помощью средств, таких как MySQL Workbench.
services: mysql
author: ajlam
ms.author: andrela
manager: kfile
editor: jasonwhowell
ms.service: mysql-database
ms.topic: article
ms.date: 03/20/2018
ms.openlocfilehash: 74b8c6afc5167225414f467f76f08c0e53bbade5
ms.sourcegitcommit: 48ab1b6526ce290316b9da4d18de00c77526a541
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2018
---
# <a name="migrate-your-mysql-database-by-using-import-and-export"></a>Перенос базы данных MySQL с помощью импорта и экспорта
В этой статье описываются два обычных подхода к импорту и экспорту данных в базе данных Azure для сервера MySQL с помощью MySQL Workbench. 

## <a name="before-you-begin"></a>Перед началом работы
Прежде чем приступить к выполнению этого руководства, необходимы следующие компоненты:
- База данных Azure для сервера MySQL. Дополнительные сведения см. в статье [Создание базы данных Azure для сервера MySQL с помощью портала Azure](quickstart-create-mysql-server-database-using-azure-portal.md).
- [Скачанный](https://dev.mysql.com/downloads/workbench/) MySQL Workbench или другое средство MySQL для импорта и экспорта.

## <a name="use-common-tools"></a>Использование распространенных инструментов
Используйте распространенные инструменты, такие как MySQL Workbench, Toad или Navicat, для удаленного подключения и импорта или экспорта данных в базу данных Azure для MySQL. 

Используйте эти инструменты на своем клиентском компьютере, подключенном к Интернету, чтобы подключиться к базе данных Azure для MySQL. Для обеспечения безопасности используйте подключение с SSL-шифрованием, как описано [этой статье](concepts-ssl-connection-security.md).

При переносе в базу данных Azure для MySQL не нужно перемещать файлы импорта и экспорта в особое облачное расположение. 

## <a name="create-a-database-on-the-azure-database-for-mysql-server"></a>Создание базы данных в службе базы данных Azure для сервера MySQL
Создайте пустую базу данных в базе данных Azure для сервера MySQL, куда необходимо перенести данные. Для этого используйте средство MySQL Workbench, Toad или Navicat. База данных может иметь то же имя, что и база данных, которая содержит данные дампа. Вы также можете создать базу данных с другим именем.

Чтобы подключиться, найдите сведения о подключении на странице **Обзор** базы данных Azure для MySQL.

![Поиск сведений о подключении на портале Azure](./media/concepts-migrate-import-export/1_server-overview-name-login.png)

Добавьте сведения о подключении MySQL Workbench.

![Строка подключения MySQL Workbench](./media/concepts-migrate-import-export/2_setup-new-connection.png)

## <a name="determine-when-to-use-import-and-export-techniques-instead-of-a-dump-and-restore"></a>Как определить, когда использовать методы импорта и экспорта вместо дампа и восстановления
Используйте средства MySQL для импорта и экспорта баз данных в базу данных MySQL в Azure в следующих сценариях. В других сценариях можно получить преимущество при использовании [дампа и восстановления](concepts-migrate-dump-restore.md) вместо этого подхода. 

- Если вам нужно выбрать несколько таблиц для импорта из имеющейся базы данных MySQL в базу данных Azure, лучше всего использовать метод импорта и экспорта.  Таким образом, можно пропустить все ненужные таблицы в процессе переноса, чтобы сэкономить время и ресурсы. Например, используйте параметр `--include-tables` или `--exclude-tables` с [mysqlpump](https://dev.mysql.com/doc/refman/5.7/en/mysqlpump.html#option_mysqlpump_include-tables) и параметр `--tables` с [mysqldump](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_tables).
- При перемещении объектов, отличных от таблиц, явно создайте эти объекты. Включите ограничения (первичный ключ, внешний ключ, индексы), представления, функции, процедуры, триггеры и другие объекты базы данных, которые требуется перенести.
- При перемещении данных из внешних источников данных, отличных от базы данных MySQL, создайте неструктурированные файлы и импортируйте их с помощью команды [mysqlimport](https://dev.mysql.com/doc/refman/5.7/en/mysqlimport.html).

Убедитесь, что все таблицы в базе данных используют подсистему хранилища InnoDB при загрузке данных в базу данных Azure для MySQL. База данных Azure для MySQL поддерживает только подсистему хранилища InnoDB и не поддерживает другие подсистемы хранилища. Если таблицам требуются другие подсистемы хранилища, преобразуйте их для использования с форматом ядра InnoDB перед миграцией в базу данных Azure для MySQL. 

Например, при наличии WordPress или веб-приложения, которое использует ядро MyISAM, сначала преобразуйте таблицы путем переноса данных в таблицы InnoDB. Затем восстановите базу данных Azure для MySQL. Используйте предложение `ENGINE=INNODB`, чтобы задать ядро для создания таблицы, а затем передайте данные в совместимую таблицу перед переносом. 

   ```sql
   INSERT INTO innodb_table SELECT * FROM myisam_table ORDER BY primary_key_columns
   ```

## <a name="performance-recommendations-for-import-and-export"></a>Рекомендации по повышению производительности импорта и экспорта
-   Создайте кластеризованные индексы и первичные ключи перед загрузкой данных. Загружайте данные в порядке первичных ключей. 
-   Отложите создание вторичных индексов до завершения загрузки данных. Создайте все вторичные индексы после загрузки. 
-   Отключите ограничения внешнего ключа перед загрузкой. Отключение проверки внешнего ключа обеспечивает значительный прирост производительности. Включите ограничения и проверьте данные после загрузки, чтобы обеспечить целостность данных.
-   Загружайте данные в параллельном режиме. Не выполняйте слишком много параллельных операций, так как ресурсы при этом могут кончиться. Отслеживайте ресурсы с помощью метрик, доступных на портале Azure. 
-   Используйте секционированные таблицы, когда это необходимо.

## <a name="import-and-export-by-using-mysql-workbench"></a>Импорт и экспорт с помощью MySQL Workbench
Имеется два способа экспорта и импорта данных в MySQL Workbench, каждый из которых предназначен для различных целей. 

### <a name="table-data-export-and-import-wizards-from-the-object-browsers-context-menu"></a>Мастера экспорта и импорта данных таблиц в контекстном меню обозревателя объектов
![Мастера MySQL Workbench в контекстном меню обозревателя объектов](./media/concepts-migrate-import-export/p1.png)

Мастера для данных таблиц поддерживают операции импорта и экспорта с использованием файлов типа CSV и JSON. В них предусмотрено несколько параметров конфигурации, таких как разделители, выбор столбцов и кодировки. Операции каждого мастера можно выполнять на локальных или удаленно подключенных серверах MySQL. Операция импорта включает сопоставление таблиц, столбцов и типов. 

Доступ к этим мастерам можно получить из контекстного меню обозревателя объектов, щелкнув правой кнопкой мыши таблицу, а затем выбрав **Table Data Export Wizard** (Мастер экспорта данных таблиц) или **Table Data Import Wizard** (Мастер импорта данных таблиц). 

#### <a name="table-data-export-wizard"></a>Мастер экспорта данных таблиц
В следующем примере данные таблицы экспортируются в CSV-файл: 
1. Щелкните правой кнопкой мыши таблицу базы данных, которую необходимо экспортировать. 
2. Выберите **Table Data Export Wizard** (Мастер экспорта данных таблиц). Выберите столбцы, которые необходимо экспортировать, смещение строки (при необходимости) и количество (при необходимости). 
3. На странице **Select data for export** (Выбор данных для экспорта) щелкните **Далее**. Выберите путь к файлу, тип файла CSV или JSON. Также выберите разделитель строк, метод включения строк и разделитель полей. 
4. На странице **Select output file location** (Выбор расположения выходного файла) щелкните **Далее**. 
5. На странице **Экспорт данных** щелкните **Далее**.

#### <a name="table-data-import-wizard"></a>Мастер импорта данных таблиц
В следующем примере данные таблицы импортируются из CSV-файла:
1. Щелкните правой кнопкой мыши таблицу базы данных, которую необходимо импортировать. 
2. Найдите CSV-файл, который необходимо импортировать, выберите его, а затем щелкните **Далее**. 
3. Выберите таблицу назначения (новую или имеющуюся) и установите флажок **Truncate table before import** (Усечение таблицы перед импортом) или снимите его. Нажмите кнопку **Далее**.
4. Выберите кодировку и какие столбцы необходимо импортировать и щелкните **Далее**. 
5. На странице **Импорт данных** щелкните **Далее**. Мастер импортирует данные соответствующим образом.

### <a name="sql-data-export-and-import-wizards-from-the-navigator-pane"></a>Мастера экспорта и импорта данных SQL из области навигации
Используйте этот мастер для экспорта или импорта данных SQL, созданных в MySQL Workbench или с помощью команды mysqldump. Получите доступ к этим мастерам в области **Навигатор**, или выбрав **Сервер** в главном меню. Затем выберите **Экспорт данных** или **Импорт данных**. 

#### <a name="data-export"></a>Экспорт данных
![Экспорт данных MySQL Workbench с помощью области навигатора](./media/concepts-migrate-import-export/p2.png)

Используйте вкладку **Экспорт данных** для экспорта данных MySQL. 
1. Выберите все схемы, которые необходимо экспортировать. При необходимости выберите из каждой схемы конкретные объекты или таблицы и выполните экспорт. Параметры конфигурации позволяют выполнить экспорт в папку проекта или в самодостаточный файл SQL, выполните дамп сохраненных процедур и событий или пропустите данные таблицы. 
 
   В качестве альтернативы можно использовать команду **Export a Result Set** (Экспортировать результирующий набор), чтобы выполнить экспорт конкретного результирующего набора из редактора SQL в другой формат, например CSV, JSON, HTML или XML. 
3. Выберите объекты базы данных, которые необходимо экспортировать, и настройте связанные параметры.
4. Щелкните **Refresh** (Обновить), чтобы загрузить текущие объекты.
5. При необходимости откройте вкладку **Дополнительные параметры**, чтобы точнее настроить операцию экспорта. Например, можно добавить блокировки таблиц, использовать инструкцию replace вместо insert и заключить идентификаторы в кавычки в виде обратного апострофа.
6. Щелкните **Start Export** (Начать экспорт), чтобы начать процесс экспорта.


#### <a name="data-import"></a>Импорт данных
![Импорт данных в MySQL Workbench с помощью Management Navigator](./media/concepts-migrate-import-export/p3.png)

Вкладку **Импорт данных** можно использовать для импорта или восстановления экспортированных данных из операции данных или из команды mysqldump. 
1. Выберите папку проекта или самодостаточный файл SQL, выберите схему, в которую будут импортированы данные, или выберите **Создать**, чтобы определить новую схему. 
2. Щелкните **Start Import** (Начать импорт), чтобы начать процесс импорта.

## <a name="next-steps"></a>Дополнительная информация
Дополнительные сведения о другом способе переноса см. в статье [Перенос базы данных MySQL в базу данных Azure для MySQL с помощью дампа и восстановления](concepts-migrate-dump-restore.md). 
