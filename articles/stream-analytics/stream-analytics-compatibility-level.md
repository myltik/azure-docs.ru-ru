---
title: Общие сведения об уровне совместимости заданий Azure Stream Analytics. | Документация Майкрософт
description: Узнайте, как установить уровень совместимости для задания Azure Stream Analytics и основные изменения в последнем уровне совместимости.
keywords: Уровень совместимости, потоковая передача данных
documentationcenter: ''
services: stream-analytics
author: SnehaGunda
manager: kfile
ms.assetid: ''
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 01/03/2018
ms.author: sngun
ms.openlocfilehash: 6f7f2314d225aa02be28fa817151f8f245478cf0
ms.sourcegitcommit: 34e0b4a7427f9d2a74164a18c3063c8be967b194
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2018
---
# <a name="compatibility-level-for-azure-stream-analytics-jobs"></a>Уровень совместимости заданий Azure Stream Analytics
 
Уровень совместимости относится к поведению различных выпусков службы Analysis Services. Azure Stream Analytics — это управляемая служба с регулярными обновлениями компонентов и улучшениями производительности. Обычно обновления автоматически становятся доступны пользователям. Однако некоторые новые функции могут вносить существенные изменения, такие как изменения в поведении имеющегося задания, изменения процессов, потребляющих данные этих заданий, и т. д. Уровень совместимости используется для отображения значительного изменения, представленного в Stream Analytics. Значительные изменения всегда вводятся с новым уровнем совместимости. 

Уровень совместимости гарантирует, что имеющиеся задания выполняются без ошибок. Рекомендуем создавать задание Stream Analytics с использованием последнего доступного уровня совместимости. 
 
## <a name="set-a-compatibility-level"></a>Установка уровня совместимости 

Уровень совместимости управляет поведением во время выполнения задания Stream Analytics. Для задания Stream Analytics можно задать уровень совместимости, используя портал или [создав вызов REST API задания](https://docs.microsoft.com/rest/api/streamanalytics/stream-analytics-job). Azure Stream Analytics в настоящее время поддерживает два уровня совместимости — 1.0 и 1.1. По умолчанию уровню совместимости задано значение 1.0, введенное в общедоступной версии Azure Stream Analytics. Чтобы обновить значение по умолчанию, перейдите к заданию Stream Analytics, выберите параметр **Уровень совместимости** в разделе **Настройка** и измените значение. 

Перед обновлением уровня совместимости убедитесь, что задание остановлено. Если задание выполняется, уровень совместимости обновить не удастся. 

![Уровень совместимости на портале](media\stream-analytics-compatibility-level/image1.png)

 
При обновлении уровня совместимости компилятор T-SQL проверяет задание с помощью синтаксиса, отвечающего выбранному уровню совместимости. 

## <a name="major-changes-in-the-latest-compatibility-level-11"></a>Важные изменения в последнем уровне совместимости (1.1)

На уровне совместимости 1.1 представлены следующие основные изменения:

* **Формат служебной шины XML**  

  * **Предыдущие версии.** Azure Stream Analytics использует DataContractSerializer, поэтому в содержимое сообщения включены XML-теги. Например: 
    
   @\u0006string\b3http://schemas.microsoft.com/2003/10/Serialization/\u0001{ "SensorId":"1", "Temperature":64\}\u0001 

  * **Текущая версия.** Содержимое сообщения напрямую содержит поток без дополнительных тегов. Например: 
  
   { “SensorId”:”1”, “Temperature”:64} 
 
* **Учет регистра в именах полей**  

  * **Предыдущие версии.** Имена полей изменялись в нижний регистр при обработке Azure Stream Analytics. 

  * **Текущая версия.** В именах полей учитывается регистр при обработке в Azure Stream Analytics. 

  > [!NOTE] 
  > Возможность учета регистра еще не доступна для заданий Stream Analytics, размещенных с использованием среды IoT Edge. Поэтому, если задание размещено в IoT Edge, все имена полей преобразуются в нижний регистр. 

* **FloatNaNDeserializationDisabled**  

  * **Предыдущие версии.** Команда CREATE TABLE не фильтрует события со значением NaN (не число, например Infinity, -Infinity) в типе столбца FLOAT, так как они не соответствуют задокументированному диапазону этих номеров.

  * **Текущая версия.** CREATE TABLE позволяет задать жесткую схему. Обработчик Stream Analytics проверяет соответствие данных этой схеме. С помощью этой модели команда может фильтровать события со значениями NaN. 

* **Отключение автоматического использования восходящего приведения типа для строки даты и времени в JSON**  

  * **Предыдущие версии.** Анализатор JSON выполнял автоматическое восходящее приведение типа строковых значений с информацией о дате, времени, часовом поясе до типа DateTime, а затем преобразовывал его в UTC. Это приводило к потере данных о часовом поясе.

  * **Текущая версия.** Автоматическое восходящее приведение типа строковых значений с информацией о дате, времени, часовом поясе до типа DateTime больше не используется. В результате информация о часовом поясе сохраняется. 

## <a name="next-steps"></a>Дополнительная информация
* [Руководство по устранению неполадок для Azure Stream Analytics](stream-analytics-troubleshooting-guide.md)
* [Колонка работоспособности ресурсов Stream Analytics](stream-analytics-resource-health.md)