---
title: Шифрование неактивных данных базы данных в Azure Cosmos DB | Документы Майкрософт
description: Сведения о шифровании всех данных по умолчанию в Azure Cosmos DB.
services: cosmos-db
author: voellm
manager: kfile
ms.service: cosmos-db
ms.devlang: na
ms.topic: conceptual
ms.date: 05/23/2017
ms.author: voellm
ms.openlocfilehash: ab22cc64265efe3948256d81f964796b6d21d3d5
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34611030"
---
# <a name="azure-cosmos-db-database-encryption-at-rest"></a>Шифрование неактивных данных базы данных в Azure Cosmos DB

При шифровании неактивных данных обычно шифруются данные на устройствах долговременного хранения, например твердотельных накопителях (SSD) и жестких дисках (HDD). Основные базы данных хранятся в Cosmos DB на твердотельных накопителях. Мультимедийные вложения и резервные копии хранятся в хранилище BLOB-объектов Azure, как правило, на основе жестких дисков. С реализацией возможности шифрования неактивных данных Cosmos DB вы можете шифровать все базы данных, мультимедийные вложения и резервные копии. Шифруются как передаваемые данные (по сети), так и неактивные (долговременное хранение), обеспечивая непрерывное шифрование.

Решение Cosmos DB, которое является службой PaaS, очень просто в использовании. Так как все данные пользователей, хранящиеся в Cosmos DB, шифруются как при хранении, так и при передаче, не нужно предпринимать никаких действий. Другими словами, шифрование неактивных данных включено по умолчанию. Элементов управления для его включения и отключения нет. Мы предоставляем эту функцию в соответствии с нашими [соглашениями об уровне обслуживания в отношении доступности и производительности](https://azure.microsoft.com/support/legal/sla/cosmos-db).

## <a name="implementation-of-encryption-at-rest-for-azure-cosmos-db"></a>Реализация шифрования при хранении для Azure Cosmos DB

Шифрование неактивных данных реализуется с применением различных технологий обеспечения безопасности, включая безопасные системы хранения ключей, зашифрованные сети и криптографические API. Системы расшифровки и обработки данных должны взаимодействовать с системами управления ключами. На схеме показано, как разделено хранение зашифрованных данных и управление ключами. 

![Схема структуры](./media/database-encryption-at-rest/design-diagram.png)

Запрос пользователя выполняется и обрабатывается следующим образом:
- Учетная запись базы данных пользователя подготавливается, а ключи к хранилищу данных извлекаются по запросу к поставщику ресурсов службы управления.
- Пользователь создает подключение к Cosmos DB с помощью протокола HTTPS или безопасного транспортного протокола. (Пакеты SDK абстрагируют подробные сведения.)
- Пользователь отправляет документ JSON для сохранения, используя ранее созданное безопасное подключение.
- Документ JSON индексируется, если пользователь не отключил эту возможность.
- Документ JSON и данные индекса записываются в безопасное хранилище.
- Время от времени данные считываются из безопасного хранилища и архивируются в зашифрованное хранилище BLOB-объектов Azure.

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="q-how-much-more-does-azure-storage-cost-if-storage-service-encryption-is-enabled"></a>Вопрос. Насколько дороже обходится служба хранилища Azure с включенным шифрованием службы хранилища?
Ответ. Дополнительные затраты не требуются.

### <a name="q-who-manages-the-encryption-keys"></a>Вопрос. Кто управляет ключами шифрования?
Ответ. Ключами управляет корпорация Майкрософт.

### <a name="q-how-often-are-encryption-keys-rotated"></a>Вопрос. Как часто меняются ключи шифрования?
Ответ. В корпорации Майкрософт есть ряд внутренних правил касательно смены ключей шифрования, которым следует Cosmos DB. Эти правила не публикуются. Однако корпорация Майкрософт публикует [жизненный цикл разработки защищенных приложений (SDL)](https://www.microsoft.com/sdl/default.aspx), который представляет собой часть внутренних рекомендаций и содержит полезные указания для разработчиков.

### <a name="q-can-i-use-my-own-encryption-keys"></a>Вопрос. Можно ли использовать собственные ключи шифрования?
Ответ. Cosmos DB — это служба PaaS. Мы сделали все возможное, чтобы максимально упростить работу с ней. Мы заметили, что этот вопрос часто задают при обсуждении соответствия требованиям, например PCI-DSS. Разрабатывая эту функцию, мы совместно с аудиторами соответствия старались создать для клиентов такие условия, в которых они могли бы использовать Cosmos DB в соответствии со своими требованиями без необходимости управлять ключами самостоятельно.

### <a name="q-what-regions-have-encryption-turned-on"></a>Вопрос. В каких регионах включено шифрование?
Ответ. Шифрование пользовательских данных включено во всех регионах Azure Cosmos DB.

### <a name="q-does-encryption-affect-the-performance-latency-and-throughput-slas"></a>Вопрос. Влияет ли шифрование на пропускную способность и задержку производительности, определенные соглашениями об уровне обслуживания?
Ответ. Нет, не влияет, так как шифрование при хранении включено для всех имеющихся или новых учетных записей. Дополнительные сведения об актуальных гарантиях см. на странице [соглашения об уровне обслуживания для Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db).

### <a name="q-does-the-local-emulator-support-encryption-at-rest"></a>Вопрос. Поддерживает ли локальный эмулятор шифрование при хранении?
Ответ. Эмулятор — это изолированное средство разработки и тестирования, которое не использует службы управления ключами, применяемые управляемой службой Cosmos DB. Мы советуем включить BitLocker на дисках, где хранятся конфиденциальные тестовые данные эмулятора. [Эмулятор поддерживает изменение каталога данных по умолчанию](local-emulator.md), а также использование известного расположения.

## <a name="next-steps"></a>Дополнительная информация

Общие сведения о системе безопасности и последних усовершенствованиях Cosmos DB см. в статье [Безопасность базы данных в Azure Cosmos DB](database-security.md).
Дополнительные сведения о сертификатах Майкрософт см. в [центре управления безопасностью Azure](https://azure.microsoft.com/support/trust-center/).
