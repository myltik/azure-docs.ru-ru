---
title: Метрики SQL-запросов для API SQL в Azure Cosmos DB | Документация Майкрософт
description: Дополнительные сведения об инструментировании и отладке производительности SQL-запросов в базе данных Azure Cosmos DB.
keywords: синтаксис SQL, запрос SQL, язык запросов JSON, понятия баз данных и запросы SQL, статистические функции
services: cosmos-db
author: SnehaGunda
manager: kfile
ms.service: cosmos-db
ms.component: cosmosdb-sql
ms.devlang: na
ms.topic: conceptual
ms.date: 11/02/2017
ms.author: sngun
ms.openlocfilehash: 4ed0008f4b574691387d6e0ee0300b5f05f1ec1b
ms.sourcegitcommit: 6116082991b98c8ee7a3ab0927cf588c3972eeaa
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/05/2018
ms.locfileid: "34798701"
---
# <a name="tuning-query-performance-with-azure-cosmos-db"></a>Настройка производительности запросов в Azure Cosmos DB

Azure Cosmos DB предоставляет [API SQL для запроса данных](sql-api-sql-query.md) без использования схемы или вторичных индексов. В этой статье содержатся следующие сведения для разработчиков:

* общие сведения о выполнении SQL-запросов в Azure Cosmos DB;
* сведения о заголовках запросов и ответов и параметры клиентского пакета SDK;
* советы и рекомендации по повышению производительности запросов.
* Примеры того, как использовать статистику выполнения SQL для отладки производительности запросов

## <a name="about-sql-query-execution"></a>Сведения о выполнении SQL-запросов

В Azure Cosmos DB данные хранятся в контейнерах, для которых можно увеличивать [пропускную способность запросов или размер хранилища](partition-data.md). Azure Cosmos DB эффективно масштабирует данные по физическим секциям, чтобы справляться с ростом объема данных или увеличивать пропускную способность. Вы можете выполнять SQL-запросы к любому контейнеру с помощью REST API или одного из поддерживаемых [пакетов SDK для SQL](sql-api-sdk-dotnet.md).

Рассмотрим пример секционирования. Вы определяете ключ секции, например city, который определяет, каким образом данные разделяются на физические секции. Данные, относящиеся к одному ключу секции (например, "city" = "Seattle"), хранятся в физической секции, но обычно одна физическая секция содержит несколько ключей секций. Когда секция достигает размера хранилища, служба просто разделяет ее на две новые секции и равномерно делит ключ между этими секциями. Так как секции являются временными, API-интерфейсы используют абстракцию "диапазона ключей секций", который обозначает диапазон хэшей ключей секций. 

При выполнении запроса к базе данных Azure Cosmos DB пакет SDK выполняет следующие логические действия.

* Анализ SQL-запроса для определения плана выполнения запроса. 
* Если запрос содержит фильтр в ключе секции, например `SELECT * FROM c WHERE c.city = "Seattle"`, он направляется в одну секцию. Если запрос не имеет фильтра в ключе секции, то он выполняется во всех секциях, а затем результаты объединяются на стороне клиента.
* Запрос выполняется в каждой секции последовательно или параллельно в зависимости от конфигурации клиента. В каждой секции запрос может совершить один или несколько циклов приема-передачи в зависимости от сложности запроса, выбранного размера страницы и подготовленной пропускной способности коллекции. Каждое выполнение возвращает число [единиц запроса](request-units.md), используемых выполнением запроса, и при необходимости статистику выполнения запроса. 
* Пакет SDK выполняет суммирование результатов запросов в секциях. Например, если запрос включает предложение ORDER BY в секциях, тогда результаты из отдельных секций сортируются слиянием для возвращения результатов в глобально отсортированном виде. Если запрос является агрегированием, например `COUNT`, счетчики отдельных секций суммируются в общий счетчик.

Пакеты SDK предоставляют различные параметры выполнения запросов. Например, в .NET эти параметры доступны в классе `FeedOptions`. В следующей таблице описаны эти параметры и их влияние на время выполнения запроса. 

| Параметр | ОПИСАНИЕ |
| ------ | ----------- |
| `EnableCrossPartitionQuery` | Необходимо присвоить значение true для любого запроса, который требуется выполнить более чем в одной секции. Это явный параметр, позволяющий сознательно понизить производительность во время разработки. |
| `EnableScanInQuery` | Должно быть присвоено значение true, если вы отказались от индексирования, но все равно хотите выполнить запрос с помощью сканирования. Применяется, только если индексирование для запрашиваемого пути фильтра отключено. | 
| `MaxItemCount` | Максимальное количество элементов, возвращаемых на сервер за круговой путь. Если установить значение "-1", можно позволить серверу управлять количеством элементов. Также можно уменьшить это значение, чтобы извлечь только небольшое количество элементов за цикл обработки. 
| `MaxBufferedItemCount` | Это клиентский параметр, который используется для ограничения потребления памяти при выполнении запроса ORDER BY между секциями. Более высокое значение помогает сократить задержку сортировки между секциями. |
| `MaxDegreeOfParallelism` | Возвращает или задает число параллельных операций, выполняемых на стороне клиента во время выполнения параллельных запросов в службу базы данных Azure Cosmos DB. Положительное значение свойства ограничивает число параллельных операций до заданного значения. Если оно имеет значение меньше 0, система автоматически определяет число параллельных операций для выполнения. |
| `PopulateQueryMetrics` | Дает возможность подробного ведения журнала статистики времени, затраченного на различных этапах выполнения запроса, например времени компиляции, цикла индекса и загрузки документа. Вы можете предоставить выходные данные статистики запросов в команду поддержки Azure для диагностики проблем с производительностью запросов. |
| `RequestContinuation` | Вы можете возобновить выполнение запроса путем передачи маркера непрозрачного продолжения, возвращаемого любым запросом. Маркер продолжения инкапсулирует все состояния, необходимые для выполнения запроса. |
| `ResponseContinuationTokenLimitInKb` | Можно ограничить максимальный размер маркеров продолжения, возвращаемых сервером. Может потребоваться установить этот параметр, если узел приложения имеет ограничения относительно размера заголовка ответа. Установка этого параметра может увеличить общую длительность и количество ЕЗ, используемых для запроса.  |

Рассмотрим пример запроса ключа секции, отправленного к коллекции с использованием `/city` в качестве ключа секции и подготовленного с пропускной способностью 100 000 единиц запросов в секунду. Выполните этот запрос с помощью `CreateDocumentQuery<T>` в .NET, как показано ниже:

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        PopulateQueryMetrics = true, 
        MaxItemCount = -1, 
        MaxDegreeOfParallelism = -1, 
        EnableCrossPartitionQuery = true 
    }).AsDocumentQuery();

FeedResponse<dynamic> result = await query.ExecuteNextAsync();
```

Фрагмент кода пакета SDK, показанного выше, соответствует следующему запросу REST API:

```
POST https://arramacquerymetrics-westus.documents.azure.com/dbs/db/colls/sample/docs HTTP/1.1
x-ms-continuation: 
x-ms-documentdb-isquery: True
x-ms-max-item-count: -1
x-ms-documentdb-query-enablecrosspartition: True
x-ms-documentdb-query-parallelizecrosspartitionquery: True
x-ms-documentdb-query-iscontinuationexpected: True
x-ms-documentdb-populatequerymetrics: True
x-ms-date: Tue, 27 Jun 2017 21:52:18 GMT
authorization: type%3dmaster%26ver%3d1.0%26sig%3drp1Hi83Y8aVV5V6LzZ6xhtQVXRAMz0WNMnUuvriUv%2b4%3d
x-ms-session-token: 7:8,6:2008,5:8,4:2008,3:8,2:2008,1:8,0:8,9:8,8:4008
Cache-Control: no-cache
x-ms-consistency-level: Session
User-Agent: documentdb-dotnet-sdk/1.14.1 Host/32-bit MicrosoftWindowsNT/6.2.9200.0
x-ms-version: 2017-02-22
Accept: application/json
Content-Type: application/query+json
Host: arramacquerymetrics-westus.documents.azure.com
Content-Length: 52
Expect: 100-continue

{"query":"SELECT * FROM c WHERE c.city = 'Seattle'"}
```

Каждая страница выполнения запроса соответствует REST API `POST` с заголовком `Accept: application/query+json` и SQL-запросом в тексте. Каждый запрос совершает один или несколько циклов переходов к серверу с помощью маркера `x-ms-continuation`, который выводится между клиентом и сервером, чтобы возобновить выполнение. Параметры конфигурации в FeedOptions передаются на сервер в виде заголовков запроса. Например, `MaxItemCount` соответствует `x-ms-max-item-count`. 

Запрос возвращает следующий ответ (усеченный для удобства чтения):

```
HTTP/1.1 200 Ok
Cache-Control: no-store, no-cache
Pragma: no-cache
Transfer-Encoding: chunked
Content-Type: application/json
Server: Microsoft-HTTPAPI/2.0
Strict-Transport-Security: max-age=31536000
x-ms-last-state-change-utc: Tue, 27 Jun 2017 21:01:57.561 GMT
x-ms-resource-quota: documentSize=10240;documentsSize=10485760;documentsCount=-1;collectionSize=10485760;
x-ms-resource-usage: documentSize=1;documentsSize=884;documentsCount=2000;collectionSize=1408;
x-ms-item-count: 2000
x-ms-schemaversion: 1.3
x-ms-alt-content-path: dbs/db/colls/sample
x-ms-content-path: +9kEANVq0wA=
x-ms-xp-role: 1
x-ms-documentdb-query-metrics: totalExecutionTimeInMs=33.67;queryCompileTimeInMs=0.06;queryLogicalPlanBuildTimeInMs=0.02;queryPhysicalPlanBuildTimeInMs=0.10;queryOptimizationTimeInMs=0.00;VMExecutionTimeInMs=32.56;indexLookupTimeInMs=0.36;documentLoadTimeInMs=9.58;systemFunctionExecuteTimeInMs=0.00;userFunctionExecuteTimeInMs=0.00;retrievedDocumentCount=2000;retrievedDocumentSize=1125600;outputDocumentCount=2000;writeOutputTimeInMs=18.10;indexUtilizationRatio=1.00
x-ms-request-charge: 604.42
x-ms-serviceversion: version=1.14.34.4
x-ms-activity-id: 0df8b5f6-83b9-4493-abda-cce6d0f91486
x-ms-session-token: 2:2008
x-ms-gatewayversion: version=1.14.33.2
Date: Tue, 27 Jun 2017 21:59:49 GMT
```

Из запроса возвращаются следующие заголовки ответа ключа:

| Параметр | ОПИСАНИЕ |
| ------ | ----------- |
| `x-ms-item-count` | Число элементов, возвращенных в ответе. Зависит от предоставленного значения `x-ms-max-item-count`, количества элементов, которое может уместиться, исходя из максимального размера полезных данных ответа, подготовленной пропускной способности и времени выполнения запроса. |  
| `x-ms-continuation:` | Маркер продолжения для возобновления выполнения запроса, если доступны дополнительные результаты. | 
| `x-ms-documentdb-query-metrics` | Статистика запросов для выполнения. Это строка с разделителями, содержащая статистику времени, затраченного на различных этапах выполнения запроса. Возвращается, если `x-ms-documentdb-populatequerymetrics` имеет значение `True`. | 
| `x-ms-request-charge` | Число [единиц запросов](request-units.md), использованных запросом. | 

Сведения о заголовках запросов и параметрах интерфейса REST API см. в статье [Querying Azure Cosmos DB resources using the REST API](https://docs.microsoft.com/rest/api/cosmos-db/querying-cosmosdb-resources-using-the-rest-api) (Запрос ресурсов Azure Cosmos DB с помощью REST API).

## <a name="best-practices-for-query-performance"></a>Рекомендации по повышению производительности запросов
Ниже приведены наиболее распространенные факторы, влияющие на производительность запросов в Azure Cosmos DB. Мы подробно рассмотрим каждую из этих тем в этой статье.

| Коэффициент | Подсказка | 
| ------ | -----| 
| Подготовленная пропускная способность | Измерьте единицы запроса на запрос и убедитесь в наличии необходимой подготовленной пропускной способности для запросов. | 
| Секционирование и ключи секций | Отдайте предпочтение запросам со значением ключа секции в предложении фильтра, чтобы обеспечить низкую задержку. |
| Параметры пакета SDK и запроса | Следуйте рекомендациям по работе с пакетами SDK, таким как прямое подключение, а также настройте параметры выполнения запросов на стороне клиента. |
| Задержки сети | Учтите в измерении нагрузку на сетевые ресурсы и используйте интерфейсы API множественной адресации для считывания из ближайшего региона. |
| Политика индексации | Проверьте наличие необходимых путей и политик индексирования запросов. |
| Метрики выполнения запросов | Проанализируйте метрики выполнения запросов, чтобы определить потенциальные перезаписи запросов и форм данных.  |

### <a name="provisioned-throughput"></a>Подготовленная пропускная способность
В Cosmos DB контейнеры данных создаются c зарезервированной пропускной способностью, выраженной в единицах запроса (ЕЗ) в секунду. Считывание документа размером 1 КБ равняется 1 ЕЗ, а каждая операция (включая запросы) нормализуется до фиксированного количества ЕЗ в зависимости от сложности. Например, при наличии 1000 ЕЗ в секунду, подготовленных для контейнера, и запроса, например `SELECT * FROM c WHERE c.city = 'Seattle'`, который использует 5 ЕЗ, можно выполнить 200 таких запросов в секунду ((1000 ЕЗ/с) / (5 ЕЗ/запрос) = 200 ЕЗ). 

Если вы отправляете более 200 запросов в секунду, служба применяет ограничение скорости входящих запросов. Пакеты SDK автоматически выполняют задержки и повторы, чтобы вы могли заметить большее время задержки таких запросов. Увеличение подготовленной пропускной способности до требуемого значения улучшит задержку при обработке запросов и пропускную способность. 

Дополнительные сведения о единицах запроса см. в статье [Единицы запросов в базе данных Azure Cosmos DB](request-units.md).

### <a name="partitioning-and-partition-keys"></a>Секционирование и ключи секций
Обычно в Azure Cosmos DB запросы выполняются в следующем порядке, от самых быстрых или самых эффективных к медленным и менее эффективным: 

* запросы GET к одному ключу секции и ключу элемента;
* запрос с предложением фильтра к одному ключу секции;
* запрос без равенства или предложения диапазона фильтра для любого свойства;
* запрос без фильтров.

Запросам, которым необходимо обратиться ко всем секциям, требуется большая задержка и они могут использовать больше ЕЗ. Так как каждая секция имеет автоматическое индексирование всех свойств, то запрос будет эффективно обрабатываться с помощью индекса. Можно создать запросы, быстрее охватывающие секции, с помощью параметров параллелизма.

Если вы хотите узнать больше о секционировании и ключах секций, ознакомьтесь со статьей [Секционирование и масштабирование в базе данных Azure Cosmos DB](partition-data.md).

### <a name="sdk-and-query-options"></a>Параметры пакета SDK и запроса
Чтобы узнать, как обеспечить оптимальную производительность на стороне клиента в Azure Cosmos DB, перейдите к статьям [Советы по повышению производительности для Azure Cosmos DB](performance-tips.md) и [Проверка производительности и масштабирования с помощью Azure Cosmos DB](performance-testing.md). Сюда входит использование последних пакетов SDK, настройка конфигурации для конкретной платформы, например количество подключений по умолчанию, частота сбора мусора и использование возможностей упрощенного подключения, например Direct и TCP. 


#### <a name="max-item-count"></a>Максимальное количество элементов
Значение параметра `MaxItemCount` может оказать значительное влияние на полное время обработки запроса. Число элементов, возвращаемых за каждый круговой путь к серверу, не больше заданного для параметра `MaxItemCount` (по умолчанию 100 элементов). Если задать большее значение (максимальное и рекомендуемое: -1), общая длительность выполнения запроса увеличится, но ограничится количество круговых путей между сервером и клиентом, особенно для запросов с большими результирующими наборами.

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        MaxItemCount = -1, 
    }).AsDocumentQuery();
```

#### <a name="max-degree-of-parallelism"></a>Максимальная степень параллелизма
Настройте `MaxDegreeOfParallelism` для запросов, чтобы определить оптимальные конфигурации для приложения, особенно если выполняются запросы между секциями (без фильтра в значении ключа секции). Параметр `MaxDegreeOfParallelism` определяет максимальное число параллельных задач, т. е. максимальное количество секций, посещаемых одновременно. 

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        MaxDegreeOfParallelism = -1, 
        EnableCrossPartitionQuery = true 
    }).AsDocumentQuery();
```

Предположим следующее:
* D — максимальное число параллельных задач, используемое по умолчанию (т. е. общее количество процессоров на компьютере клиента);
* P — определенное пользователем максимальное число параллельных задач;
* N — количество секций, которые необходимо посетить для получения ответов на запросы.

Возможны следующие сценарии поведения параллельных запросов при различных значениях P:
* (P == 0) => последовательный режим;
* (P == 1) => не более одной задачи;
* (P > 1) => минимум (P, N) параллельных задач; 
* (P < 1) => минимум (N, D) параллельных задач.

Заметки о выпуске пакета SDK и сведения о реализованных классах и методах см. в статье [Пакет SDK для Azure Cosmos DB .NET: скачивание и заметки о выпуске для API SQL](sql-api-sdk-dotnet.md).

### <a name="network-latency"></a>Задержки сети
Сведения о том, как настроить глобальное распространение и подключиться к ближайшему региону, см. в статье [Как настроить глобальное распределение Azure Cosmos DB с помощью API DocumentDB](tutorial-global-distribution-sql-api.md). Задержки сети оказывают значительное влияние на производительность запросов, если вам нужно сделать несколько циклов приема-передачи или получить большой результирующий набор в запросе. 

Из раздела о метриках выполнения запросов вы узнаете, как получить информацию о времени выполнения запросов на сервере (`totalExecutionTimeInMs`). Это поможет различать время, затраченное на выполнение запроса и на передачу по сети.

### <a name="indexing-policy"></a>Политика индексации
Чтобы узнать о путях индексирования, типах, режимах и их влиянии на выполнение запроса, перейдите к статье [Как работает индексирование данных в Azure Cosmos DB?](indexing-policies.md). По умолчанию политика индексирования использует хэш-индексирование строк, что эффективно для запросов равенства, но не для запросов в диапазоне и запросов Order By. Если вам требуется выполнить запросы в диапазоне для строк, рекомендуется для всех строк указать тип индекса Range. 

## <a name="query-execution-metrics"></a>Метрики выполнения запросов
Подробные метрики выполнения запроса можно получить, передав необязательный заголовок `x-ms-documentdb-populatequerymetrics` (`FeedOptions.PopulateQueryMetrics` в пакете SDK для .NET). Значение, возвращаемое в `x-ms-documentdb-query-metrics`, имеет следующие пары "ключ — значение", предназначенные для дополнительной диагностики выполнения запроса. 

```cs
IDocumentQuery<dynamic> query = client.CreateDocumentQuery(
    UriFactory.CreateDocumentCollectionUri(DatabaseName, CollectionName), 
    "SELECT * FROM c WHERE c.city = 'Seattle'", 
    new FeedOptions 
    { 
        PopulateQueryMetrics = true, 
    }).AsDocumentQuery();

FeedResponse<dynamic> result = await query.ExecuteNextAsync();

// Returns metrics by partition key range Id
IReadOnlyDictionary<string, QueryMetrics> metrics = result.QueryMetrics;

```

| Метрика | Единица измерения | ОПИСАНИЕ | 
| ------ | -----| ----------- |
| `totalExecutionTimeInMs` | Миллисекунды | Время выполнения запроса | 
| `queryCompileTimeInMs` | Миллисекунды | Время компиляции запроса  | 
| `queryLogicalPlanBuildTimeInMs` | Миллисекунды | Время на создание логического плана запроса | 
| `queryPhysicalPlanBuildTimeInMs` | Миллисекунды | Время на создание физического плана запроса | 
| `queryOptimizationTimeInMs` | Миллисекунды | Время, затраченное на оптимизацию запроса | 
| `VMExecutionTimeInMs` | Миллисекунды | Время, затраченное в среде выполнения запроса | 
| `indexLookupTimeInMs` | Миллисекунды | Время, затраченное на физическом уровне индекса | 
| `documentLoadTimeInMs` | Миллисекунды | Время, затраченное на загрузку документов  | 
| `systemFunctionExecuteTimeInMs` | Миллисекунды | Общее время, затраченное на выполнение (встроенных) функций системы (в миллисекундах)  | 
| `userFunctionExecuteTimeInMs` | Миллисекунды | Общее время, затраченное на выполнение определяемых пользователем функций (в миллисекундах) | 
| `retrievedDocumentCount` | count | Общее число полученных документов  | 
| `retrievedDocumentSize` | Байты | Общий размер полученных документов в байтах  | 
| `outputDocumentCount` | count | Количество выходных документов | 
| `writeOutputTimeInMs` | Миллисекунды | Время выполнения запроса в миллисекундах | 
| `indexUtilizationRatio` | Коэффициент (<=1) | Отношение числа документов, соответствующих фильтру, к количеству загруженных документов  | 

Клиентские пакеты SDK внутренне могут выполнять несколько операций запроса, чтобы обработать запрос в каждой секции. Клиент осуществляет более одного вызова в каждой секции, если общие результаты превышают `x-ms-max-item-count`, если запрос превышает подготовленную пропускную способность секции, если полезные данные запроса достигают максимального размера для страницы или если запрос достигает предела выделенного времени ожидания системы. Каждое частичное выполнение запроса возвращает `x-ms-documentdb-query-metrics` такой страницы. 

Ниже приведены некоторые примеры запросов и интерпретации некоторых метрик, возвращаемые из выполнения запроса. 

| Запрос | Образец метрики | ОПИСАНИЕ | 
| ------ | -----| ----------- |
| `SELECT TOP 100 * FROM c` | `"RetrievedDocumentCount": 101` | Количество полученных документов составляет 100+1 для соответствия предложению TOP. Время запроса главным образом тратится на `WriteOutputTime` и `DocumentLoadTime`, так как он выполняет сканирование. | 
| `SELECT TOP 500 * FROM c` | `"RetrievedDocumentCount": 501` | RetrievedDocumentCount теперь выше (500+1 для соответствия предложению TOP). | 
| `SELECT * FROM c WHERE c.N = 55` | `"IndexLookupTime": "00:00:00.0009500"` | Около 0,9 мс затрачивается IndexLookupTime на поиск ключа, так как это поиск по индексу `/N/?`. | 
| `SELECT * FROM c WHERE c.N > 55` | `"IndexLookupTime": "00:00:00.0017700"` | Немного больше времени (1,7 мс) затрачивается IndexLookupTime на сканирование диапазона, так как это поиск по индексу `/N/?`. | 
| `SELECT TOP 500 c.N FROM c` | `"IndexLookupTime": "00:00:00.0017700"` | На `DocumentLoadTime` затрачивается то же время, что и в предыдущих запросах, но с меньшим `WriteOutputTime`, так как мы отображаем только одно свойство. | 
| `SELECT TOP 500 udf.toPercent(c.N) FROM c` | `"UserDefinedFunctionExecutionTime": "00:00:00.2136500"` | Около 213 мс затрачивается `UserDefinedFunctionExecutionTime` на выполнение определяемой пользователем функции для каждого значения `c.N`. |
| `SELECT TOP 500 c.Name FROM c WHERE STARTSWITH(c.Name, 'Den')` | `"IndexLookupTime": "00:00:00.0006400", "SystemFunctionExecutionTime": "00:00:00.0074100"` | Около 0,6 мс затрачивается `IndexLookupTime` на `/Name/?`. Большая часть времени выполнения запроса (~7 мс) затрачивается на `SystemFunctionExecutionTime`. |
| `SELECT TOP 500 c.Name FROM c WHERE STARTSWITH(LOWER(c.Name), 'den')` | `"IndexLookupTime": "00:00:00", "RetrievedDocumentCount": 2491,  "OutputDocumentCount": 500` | Запрос выполняется как операция сканирования, так как он использует `LOWER`, и 500 из 2491 полученных документов возвращаются. |


## <a name="next-steps"></a>Дополнительная информация
* Дополнительные сведения о поддерживаемых ключевых словах и операторах SQL-запросов см. в статье [SQL-запросы для API DocumentDB в Azure Cosmos DB](sql-api-sql-query.md). 
* Дополнительные сведения о единицах запроса см. в статье [Единицы запросов в базе данных Azure Cosmos DB](request-units.md).
* Дополнительные сведения о политике индексирования см. в статье [Как работает индексирование данных в Azure Cosmos DB?](indexing-policies.md) 


