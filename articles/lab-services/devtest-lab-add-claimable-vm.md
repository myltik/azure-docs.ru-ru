---
title: Создание запрашиваемой виртуальной машины и управление ею в лаборатории Azure DevTest Labs | Документация Майкрософт
description: Узнайте, как добавить запрашиваемую виртуальную машину в лабораторию в Azure DevTest Labs
services: devtest-lab,virtual-machines
documentationcenter: na
author: spelluru
manager: ''
editor: ''
ms.assetid: f671e66e-9630-4e30-a131-a6bad9ed9c11
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/01/2018
ms.author: spelluru
ms.openlocfilehash: 669dfab75f34a0d1f997dc34f600402d3c10669b
ms.sourcegitcommit: e221d1a2e0fb245610a6dd886e7e74c362f06467
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
ms.locfileid: "33781753"
---
# <a name="create-and-manage-claimable-vms-in-azure-devtest-labs"></a>Создание запрашиваемой виртуальной машины и управление ею в лаборатории Azure DevTest Labs
Добавление запрашиваемой виртуальной машины в лабораторию аналогично [добавлению стандартной виртуальной машины](devtest-lab-add-vm.md). Оно выполняется *на базе* [пользовательского образа](devtest-lab-create-template.md), [формулы](devtest-lab-manage-formulas.md) или [образа Marketplace](devtest-lab-configure-marketplace-images.md). В этой статье описывается добавление запрашиваемой виртуальной машины в лабораторию в DevTest Labs с помощью портала Azure, а также действия пользователя для резервирования или освобождения виртуальной машины.

## <a name="steps-to-add-a-claimable-vm-to-a-lab-in-azure-devtest-labs"></a>Процедура добавления запрашиваемой виртуальной машины в лабораторию в Azure DevTest Labs
1. Войдите на [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).
1. Щелкните **Все службы** и выберите в списке **DevTest Labs**.
1. Из списка лабораторий выберите ту, в которой необходимо создать запрашиваемую виртуальную машину .  
1. В области **Обзор** выберите **+ Добавить**.  

    ![Кнопка добавления виртуальной машины](./media/devtest-lab-add-vm/devtestlab-home-blade-add-vm.png)

1. В области **Выбор основы** выберите основу для виртуальной машины.
1. В области **Виртуальная машина** введите имя для новой виртуальной машины в текстовое поле **Имя виртуальной машины**.

    ![Область виртуальной машины в лаборатории](./media/devtest-lab-add-vm/devtestlab-lab-vm-blade.png)

1. Введите **имя пользователя**, которому будут предоставлены права администратора на виртуальной машине.  
1. Если вы хотите использовать пароль, хранящийся в [хранилище секретов](https://azure.microsoft.com/updates/azure-devtest-labs-keep-your-secrets-safe-and-easy-to-use-with-the-new-personal-secret-store), тогда выберите **Use a saved secret** (Использовать сохраненный секрет) и укажите значение ключа, которое соответствует секрету (пароль). В противном случае — просто введите пароль в текстовое поле, в котором указано **Введите значение**.
1. **Virtual machine disk type** (Тип диска виртуальной машины) определяет, какой тип диска хранилища поддерживается для виртуальных машин в лаборатории.
1. Щелкните **Размер виртуальной машины** и выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины.
1. Щелкните **Артефакты**, а затем выберите из списка и настройте артефакты, которые нужно добавить в базовый образ. Если вы незнакомы с DevTest Labs или настройкой артефактов, перейдите к разделу, описывающему [добавление существующего артефакта к виртуальной машине](devtest-lab-add-vm.md#add-an-existing-artifact-to-a-vm), а затем вернитесь к этой статье.
1. Чтобы настроить сетевые параметры виртуальной машины и срок ее действия, выберите **Дополнительные параметры**. В разделе **Claim options** (Параметры запроса) нажмите кнопку **Да**, чтобы сделать машину запрашиваемой.

  ![Нажмите кнопку, чтобы сделать виртуальную машину запрашиваемой.](./media/devtest-lab-add-vm/devtestlab-claim-VM-option.png)

1. Если вы хотите просмотреть или скопировать шаблон Azure Resource Manager, перейдите к разделу [Сохранение шаблона Azure Resource Manager](devtest-lab-add-vm.md#save-azure-resource-manager-template), а по завершении вернитесь сюда.
1. Щелкните **Создать** , чтобы добавить в лабораторию указанную виртуальную машину.

   Состояние создания виртуальной машины принимает значение **Создается**, а после запуска виртуальной машины — **Выполняется**.

> [!NOTE]
> Если вы развертываете лабораторные виртуальные машины с помощью [шаблонов Azure Resource Manager](devtest-lab-create-environment-from-arm.md), вы можете создать запрашиваемые виртуальные машины, задав в разделе свойств для свойства **allowClaim** значение true.
>
>

## <a name="using-a-claimable-vm"></a>Использование запрашиваемой виртуальной машины

Пользователь может запросить любую виртуальную машину из списка "Claimable virtual machines" ("Запрашиваемые виртуальные машины"), выполнив одно из действий, описанных ниже.

* В нижней части панели "Обзор" в лаборатории щелкните правой кнопкой мыши одну из виртуальных машин, представленных в списке "Виртуальные машины, для которых разрешены заявки на доступ" и выберите **Отправить заявку на доступ к виртуальной машине**.

 ![Запрос определенной запрашиваемой виртуальной машины](./media/devtest-lab-add-vm/devtestlab-claim-VM.png)


* В верхней части панели "Обзор" выберите вариант **Отправить заявку на доступ к любой**. Из списка запрашиваемых виртуальных машин будет назначена случайная виртуальная машина.

 ![Запрос любой запрашиваемой виртуальной машины](./media/devtest-lab-add-vm/devtestlab-claim-any.png)


Выбранная пользователем запрашиваемая виртуальная машина перемещается в список раздела "My virtual machines" (Мои виртуальные машины). Ее не могут повторно запрашивать другие пользователи.

## <a name="unclaim-a-vm"></a>Освобождение виртуальной машины

Когда пользователь закончит использовать зарезервированную виртуальную машину, он может освободить ее для доступа других пользователей. Чтобы вернуть виртуальную машину в список доступных для запроса, выполните одно из следующих действий.

- В списке "Мои виртуальные машины" щелкните правой кнопкой мыши одну из виртуальных машин или значок многоточия (...) и выберите действие **Освободить**.

  ![Освобождение виртуальной машины в списке виртуальных машин](./media/devtest-lab-add-vm/devtestlab-unclaim-VM2.png)

- В списке "Мои виртуальные машины" выберите виртуальную машину, чтобы открыть для нее панель управления, а затем в верхнем меню выберите действие **Освободить**.

  ![Действие освобождения на панели управления виртуальной машиной](./media/devtest-lab-add-vm/devtestlab-unclaim-VM.png)

Когда пользователь освобождает виртуальную машину, он теряет все права на этот конкретный экземпляр виртуальной машины лаборатории.

### <a name="transferring-the-data-disk"></a>Передача диска данных
Если к запрашиваемой виртуальной машине подключен диск данных, то при освобождении виртуальной машины диск данных остается подключенным к ней. Когда другой пользователь отправит заявку на эту виртуальную машину, он одновременно получит и подключенный диск данных.

Этот процесс называется "передача диска данных". Переданный диск данных появляется в списке **Мои диски данных** нового пользователя, где он может управлять этим диском.

![Освобождение дисков данных](./media/devtest-lab-add-vm/devtestlab-unclaim-datadisks.png)



## <a name="next-steps"></a>Дополнительная информация
* После создания виртуальной машины вы можете подключиться к ней, выбрав **Подключиться** на соответствующей панели управления.
* Изучите [коллекцию шаблонов быстрого запуска для Azure Resource Manager в DevTest Labs](https://github.com/Azure/azure-devtestlab/tree/master/Samples).
