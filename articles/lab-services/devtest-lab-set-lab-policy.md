---
title: Управление политиками лаборатории в Azure DevTest Labs | Документация Майкрософт
description: Узнайте, как определить политики лаборатории, такие как размеры виртуальных машин, максимальное количество виртуальных машин для каждого пользователя и автоматизация завершения работы.
services: devtest-lab,virtual-machines,lab-services
documentationcenter: na
author: spelluru
manager: femila
ms.assetid: 7756aa64-49ca-45a0-9f90-0fd101c7be85
ms.service: lab-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/17/2018
ms.author: spelluru
ms.openlocfilehash: 212afbd605e3a16da7be2c04492ec41875ff5b75
ms.sourcegitcommit: e221d1a2e0fb245610a6dd886e7e74c362f06467
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
ms.locfileid: "33781883"
---
# <a name="manage-all-policies-for-a-lab-in-azure-devtest-labs"></a>Управление всеми политиками лаборатории в Azure DevTest Labs

Azure DevTest Labs позволяет контролировать расходы и свести к минимуму излишние траты в лабораториях с помощью управления политиками (параметрами) для каждой лаборатории. В этой статье описываются пошаговые действия по настройке каждой политики.  

## <a name="set-allowed-virtual-machine-sizes"></a>Настройка допустимых размеров виртуальных машин
Политика для настройки допустимых размеров виртуальных машин помогает сократить издержки, позволяя указывать, какие размеры виртуальных машин допускаются в лаборатории. Если эта политика включена, для создания виртуальных машин можно использовать размеры виртуальных машин только из этого списка.

1. На [портале Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040) выберите лабораторию, а затем выберите **Конфигурация и политики**.

    ![Открытие области "Конфигурация и политики" лаборатории](./media/devtest-lab-set-lab-policy/policies-menu.png)

1. В области **Конфигурация и политики** лаборатории выберите **Allowed virtual machines sizes** (Допустимые размеры виртуальных машин).
   
    ![Allowed virtual machines sizes](./media/devtest-lab-set-lab-policy/allowed-vm-sizes.png)

1. Щелкните **On** (Вкл.), чтобы включить эту политику, или **Off** (Выкл.), чтобы отключить ее.

1. Если эта политика включена, выберите один или несколько размеров виртуальных машин, которые могут быть созданы в лаборатории.

1. Щелкните **Сохранить**.

## <a name="set-virtual-machines-per-user"></a>Настройка количества виртуальных машин на пользователя
Политика для **Виртуальных машин на пользователя** позволяет указать максимальное число виртуальных машин, которые может создать отдельный пользователь. Если пользователь пытается создать или запросить виртуальную машину в случае достижения ограничения для пользователя, то выводится сообщение об ошибке, информирующее о невозможности создания или запроса виртуальной машины. 

1. В области **Конфигурация и политики** лаборатории выберите **Виртуальных машин на пользователя**.
   
    ![Virtual machines per user](./media/devtest-lab-set-lab-policy/max-vms-per-user.png)

1. Выберите **Да**, чтобы ограничить количество виртуальных машин на пользователя. Если вы не хотите ограничивать это количество, то выберите **Нет**. Если вы выбрали **Да**, то введите максимальное количество виртуальных машин, которые может создать или запросить пользователь. 

1. Выберите **Да**, чтобы ограничить количество виртуальных машин, которые могут использовать твердотельный накопитель (SSD). Если вы не хотите ограничивать это количество, то выберите **Нет**. Если вы выбрали **Да**, то введите максимальное количество виртуальных машин, которые можно создать с помощью SSD. 

1. Щелкните **Сохранить**.

## <a name="set-virtual-machines-per-lab"></a>Настройка количества виртуальных машин на лабораторию
Политика для **Виртуальных машин на лабораторию** позволяет указать максимальное число виртуальных машин, которые можно создать для текущей лаборатории. Если пользователь пытается создать виртуальную машину в случае достижения ограничения для лаборатории, то выводится сообщение об ошибке, информирующее о невозможности создания виртуальной машины. 

1. В области **Конфигурация и политики** лаборатории выберите **Виртуальных машин на лабораторию**.
   
    ![Virtual machines per lab](./media/devtest-lab-set-lab-policy/max-vms-per-lab.png)

1. Выберите **Да**, чтобы ограничить количество виртуальных машин на лабораторию. Если вы не хотите ограничивать это количество, то выберите **Нет**. Если вы выбрали **Да**, то введите максимальное количество виртуальных машин, которые может создать или запросить пользователь. 

1. Выберите **Да**, чтобы ограничить количество виртуальных машин, которые могут использовать твердотельный накопитель (SSD). Если вы не хотите ограничивать это количество, то выберите **Нет**. Если вы выбрали **Да**, то введите максимальное количество виртуальных машин, которые можно создать с помощью SSD. 

1. Щелкните **Сохранить**.

## <a name="set-auto-shutdown"></a>Настройка автоматического завершения работы
Политика автоматического завершения работы помогает сократить издержки, позволяя указать время завершения работы виртуальных машин в этой лаборатории.

1. В области **Конфигурация и политики** лаборатории выберите **Автозавершение работы**.
   
    ![Auto-shutdown](./media/devtest-lab-set-lab-policy/auto-shutdown.png)

1. Щелкните **On** (Вкл.), чтобы включить эту политику, или **Off** (Выкл.), чтобы отключить ее.

1. Если эта политика включена, то укажите время (и часовой пояс) завершения работы всех виртуальных машин в текущей лаборатории.

1. Укажите значение **Да** или **Нет** для параметра отправки уведомления за 15 минут до времени автоматического завершения работы. Выбрав **Да**, укажите конечную точку в виде URL-адреса веб-перехватчика, где будут публиковаться уведомления, или адрес электронной почты, на который будут отправляться такие уведомления. При получении уведомления пользователь получает возможность отложить завершение работы.

   Дополнительные сведения об объектах webhook см. в статье [Создание функции Azure объекта webhook или API](../azure-functions/functions-create-a-web-hook-or-api-function.md). 

1. Щелкните **Сохранить**.

По умолчанию после включения эта политика применяется ко всем виртуальным машинам в текущей лаборатории. Чтобы удалить этот параметр из конкретной виртуальной машины, откройте область управления виртуальной машины и измените значение параметра **Автозавершение работы**.

## <a name="set-auto-start"></a>Настройка автоматического запуска
Политика автоматического запуска позволяет указать время запуска виртуальных машин в текущей лаборатории.  

1. В колонке **Конфигурация и политики** лаборатории выберите **Автозапуск**.
   
    ![Auto-start](./media/devtest-lab-set-lab-policy/auto-start.png)

2. Щелкните **On** (Вкл.), чтобы включить эту политику, или **Off** (Выкл.), чтобы отключить ее.

3. Если вы включили эту политику, то укажите время запланированного запуска, часовой пояс и дни недели, к которым применяется это время. 

4. Щелкните **Сохранить**.

После включения эта политика не применяется автоматически к виртуальным машинам в текущей лаборатории. Чтобы применить этот параметр к конкретной виртуальной машине, откройте область управления виртуальной машины и измените значение параметра **Автозапуск**.

## <a name="set-expiration-date"></a>Задание срока действия
Вы можете задать дату истечения срока действия при [создании виртуальной машины](devtest-lab-add-vm.md). В разделе **Дополнительные параметры** щелкните значок календаря и укажите дату, в которую виртуальная машина должна быть автоматически удалена. По умолчанию виртуальная машина является бессрочной.

[!INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

## <a name="next-steps"></a>Дополнительная информация
После определения и применения различных параметров политики виртуальных машин для лаборатории можно выполнить следующие задачи.

* [Общие IP-адреса в Azure DevTest Labs](devtest-lab-shared-ip.md). Объясняется, как с помощью общих IP-адресов в DevTest Labs минимизировать количество общедоступных IP-адресов, необходимых для подключения к виртуальным машинам лаборатории.
* [Настройка управления затратами.](devtest-lab-configure-cost-management.md) Показано, как использовать диаграмму **Monthly Estimated Cost Trend** (Помесячная тенденция изменения оценочной стоимости),  
  чтобы просматривать стоимость на данный момент в текущем календарном месяце и прогнозируемую стоимость на конец месяца.
* [Создание пользовательского образа.](devtest-lab-create-template.md) При создании виртуальной машины необходимо указать базовый образ виртуальной машины, который может представлять собой пользовательский образ или образ из Marketplace. В этой статье показано, как создать настраиваемый образ из VHD-файла.
* [Настройка образов Marketplace.](devtest-lab-configure-marketplace-images.md) Azure DevTest Labs поддерживает создание виртуальных машин на основе образов Azure Marketplace. В этой статье показано, как определить, какие образы Azure Marketplace (если таковые имеются) можно использовать при создании виртуальных машин в лаборатории.
* [Добавление виртуальной машины в лабораторию в Azure DevTest Labs](devtest-lab-add-vm.md) — из этой статьи вы узнаете, как создать виртуальную машину из базового образа (пользовательского или из Marketplace) и как работать с артефактами в виртуальной машине.

