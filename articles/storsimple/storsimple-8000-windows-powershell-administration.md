---
title: Управление устройством StorSimple с помощью PowerShell | Документация Майкрософт
description: Узнайте, как использовать Windows PowerShell для StorSimple для управления своим устройством StorSimple.
services: storsimple
documentationcenter: NA
author: alkohli
manager: jeconnoc
editor: ''
ms.assetid: ''
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: TBD
ms.date: 01/09/2018
ms.author: alkohli@microsoft.com
ms.openlocfilehash: 291de21d3d98bf9eb65adc7d506f3549171ee0a0
ms.sourcegitcommit: 9292e15fc80cc9df3e62731bafdcb0bb98c256e1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2018
ms.locfileid: "27743730"
---
# <a name="use-windows-powershell-for-storsimple-to-administer-your-device"></a>Администрирование устройства с помощью Windows PowerShell для StorSimple

## <a name="overview"></a>Обзор

Windows PowerShell для StorSimple — это интерфейс командной строки, который можно использовать для управления устройством Microsoft Azure StorSimple. Как видно из названия, данный интерфейс командной строки основан на Windows PowerShell и встроен в ограниченное пространство выполнения. Пользователь командной строки видит ограниченное пространство выполнения как сокращенную версию Windows PowerShell. Данный интерфейс не только поддерживает некоторые основные функции Windows PowerShell, но и включает дополнительные командлеты, предназначенные специально для управления устройством Microsoft Azure StorSimple.

В этой статье описываются функции Windows PowerShell для StorSimple и приводятся инструкции по подключению к этому интерфейсу, а также ссылки на пошаговые руководства по рабочим процессам, которые можно выполнять с помощью этого интерфейса. В число таких рабочих процессов входят: регистрация устройства, настройка сетевого интерфейса на устройстве, установка обновлений, для которых устройство необходимо перевести в режим обслуживания, изменение состояния устройства и устранение возможных неполадок.

Прочитав эту статью, вы сможете выполнять следующие действия.

* Подключиться к устройству StorSimple с помощью Windows PowerShell для StorSimple.
* Администрировать устройство StorSimple с помощью Windows PowerShell для StorSimple.
* Получить справку по Windows PowerShell для StorSimple.

> [!NOTE]
> * Командлеты Windows PowerShell для StorSimple позволяют управлять устройствами StorSimple через последовательную консоль или удаленно с помощью удаленного взаимодействия Windows PowerShell. Дополнительные сведения о каждом отдельном командлете, который можно использовать в этом интерфейсе, см. в [справочнике по командлетам Windows PowerShell для StorSimple](https://technet.microsoft.com/library/dn688168.aspx).
> * Командлеты Azure PowerShell для StorSimple — это другая коллекция командлетов, которые позволяют автоматизировать задачи обновления и миграции StorSimple с помощью командной строки. Дополнительные сведения о командлетах Azure PowerShell для StorSimple см. в [справочной документации по командлетам Azure StorSimple](https://docs.microsoft.com/powershell/servicemanagement/azure.storsimple/v3.1.0/azure.storsimple).


Получить доступ к Windows PowerShell для StorSimple можно одним из следующих способов.

* [Подключение к последовательной консоли устройства StorSimple](#connect-to-windows-powershell-for-storsimple-via-the-device-serial-console)
* [Удаленное подключение к StorSimple с помощью Windows PowerShell](#connect-remotely-to-storsimple-using-windows-powershell-for-storsimple)

## <a name="connect-to-windows-powershell-for-storsimple-via-the-device-serial-console"></a>Подключение к Windows PowerShell для StorSimple через последовательную консоль устройства

Для подключения к Windows PowerShell для StorSimple можно [скачать PuTTY](http://www.putty.org/) или другую программу эмуляции терминала. Настройте PuTTY на доступ к устройству Microsoft Azure StorSimple. В следующих разделах содержатся подробные инструкции по настройке PuTTY и подключению к устройству, а также описаны различные параметры меню последовательной консоли.

### <a name="putty-settings"></a>Параметры PuTTY

Для подключения к интерфейсу Windows PowerShell из последовательной консоли используйте указанные ниже параметры PuTTY.

#### <a name="to-configure-putty"></a>Настройка PuTTY

1. В области **Category** (Категория) диалогового окна **Reconfiguration** (Перенастройка) PuTTY выберите пункт **Keyboard** (Клавиатура).
2. В данном разделе должны быть выбраны указанные ниже параметры (при создании нового сеанса они устанавливаются по умолчанию).
   
   | Клавиша | Выберите пункт |
   | --- | --- |
   | BACKSPACE |Control-? (127) |
   | Клавиши HOME и END |Стандартная |
   | Функциональные клавиши и дополнительная клавиатура |ESC[n~ |
   | Начальное состояние клавиш управления курсором |В обычном режиме |
   | Начальное состояние числовой клавиатуры |В обычном режиме |
   | Включение компонентов на дополнительной клавиатуре |Control-Alt отличается от AltGr |
   
    ![Поддерживаемые параметры PuTTY](./media/storsimple-windows-powershell-administration/IC740877.png)
3. Нажмите кнопку **Применить**.
4. В области **Category** (Категория) выберите пункт **Translation** (Перевод).
5. В поле **Remote character set** (Удаленный набор знаков) выберите пункт **UTF-8**.
6. В разделе **Handling of line drawing characters** (Обработка знаков рисования линии) выберите пункт **Use Unicode line drawing code points** (Использовать кодовые точки графических объектов Юникод). Правильный выбор параметров PuTTY показан на снимке экрана ниже.
   
    ![Параметры UTF PuTTY](./media/storsimple-windows-powershell-administration/IC740878.png)
7. Нажмите кнопку **Применить**.

Теперь PuTTY можно использовать для подключения к последовательной консоли устройства, выполнив указанные ниже действия.

[!INCLUDE [storsimple-use-putty](../../includes/storsimple-use-putty.md)]

### <a name="about-the-serial-console"></a>О последовательной консоли

При обращении к интерфейсу Windows PowerShell устройства StorSimple через последовательную консоль отображается заглавное сообщение, а затем параметры меню.

Заглавное сообщение содержит основные сведения об устройстве StorSimple, такие как модель, имя, версия установленного программного обеспечения и состояние контроллера, к которому производится доступ. Пример заглавного сообщения приведен ниже.

![Заглавное сообщение в последовательной консоли](./media/storsimple-windows-powershell-administration/IC741098.png)

> [!IMPORTANT]
> С помощью заглавного сообщения можно определить, _активен_ или _пассивен_ контроллер, к которому вы подключаетесь.

Ниже показаны различные параметры выполнения, доступные в меню последовательной консоли.

![Регистрация устройства 2](./media/storsimple-windows-powershell-administration/IC740906.png)

Вы можете выбрать один из следующих параметров.

1. **Войти в систему с полным доступом**: позволяет подключиться к пространству выполнения **SSAdminConsole** на локальном контроллере (если указаны соответствующие учетные данные). (Локальный контроллер — это контроллер, к которому вы обращаетесь через последовательную консоль устройства StorSimple.) Этот параметр позволяет также разрешить службе поддержки Майкрософт доступ к неограниченному пространству выполнения (сеанс поддержки) с целью поиска и устранения возможных неполадок устройства. Дополнительные сведения см. в статье [Запуск сеанса поддержки](storsimple-8000-contact-microsoft-support.md#start-a-support-session-in-windows-powershell-for-storsimple).
   
2. **Войти в систему однорангового контроллера с полным доступом**: работает как параметр 1, но (при условии, что указаны соответствующие учетные данные) позволяет подключиться к пространству выполнения **SSAdminConsole** на одноранговом контроллере. Поскольку устройство StorSimple является устройством высокой доступности с двумя контроллерами в активно-пассивной конфигурации, одноранговым считается контроллер устройства, к которому вы обращаетесь через последовательную консоль.
   Данный параметр, как и параметр 1, позволяет также предоставить службе поддержки Майкрософт доступ к неограниченному пространству выполнения на одноранговом контроллере.

3. **Подключиться с ограниченным доступом** : используется для доступа к интерфейсу Windows PowerShell в ограниченном режиме. Учетные данные для доступа не запрашиваются. Данный параметр подключается к более ограниченному пространству выполнения, чем параметры 1 и 2.  Примеры задач, которые доступны при подключении с параметром 1 и **не могут* быть решены в таком пространстве выполнения:
   
   * сброс до заводских настроек;
   * изменение пароля;
   * включение или отключение доступа для службы поддержки;
   * установка обновлений;
   * установка исправлений.

    > [!NOTE]
    > Этот параметр рекомендуется использовать, если вы забыли пароль администратора устройства и не можете подключиться с параметром 1 или 2.

4. **Изменить язык** : позволяет изменить язык интерфейса Windows PowerShell. Поддерживаются следующие языки: английский, японский, русский, французский, южнокорейский, испанский, итальянский, немецкий, китайский и португальский (Бразилия).

## <a name="connect-remotely-to-storsimple-using-windows-powershell-for-storsimple"></a>Удаленное подключение к StorSimple с помощью Windows PowerShell для StorSimple

Для подключения к устройству StorSimple можно использовать удаленное взаимодействие Windows PowerShell. При таком способе подключения меню не отображается. (Меню появляется только при подключении к устройству с помощью последовательной консоли. При удаленном подключении осуществляется переход к эквиваленту "Вариант 1 — полный доступ" на последовательной консоли.) При использовании удаленного взаимодействия Windows PowerShell вы подключаетесь к конкретному пространству выполнения. Также можно указать язык интерфейса.

Язык интерфейса не зависит от языка, выбранного с помощью параметра **Изменить язык** в меню последовательной консоли. Если язык не задан, удаленный сеанс PowerShell автоматически выберет языковой стандарт устройства, к которому вы подключаетесь.

> [!NOTE]
> При работе с виртуальными узлами Microsoft Azure и облачными устройствами StorSimple можно использовать удаленное взаимодействие Windows PowerShell и виртуальный узел для подключения к облачному устройству. Если вы настроили общую папку на главном компьютере, где будут храниться данные из сеанса Windows PowerShell, помните, что субъект _Все_ включает только пользователей, прошедших проверку подлинности. Таким образом, если вы настроили общий ресурс, чтобы разрешить доступ _всем_ пользователям, и подключились без указания учетных данных, программа использует анонимный субъект без проверки подлинности и выдаст сообщение об ошибке. Чтобы решить эту проблему, активируйте в общем ресурсе гостевую учетную запись и предоставьте ей полный доступ к общему ресурсу либо укажите действительные учетные данные вместе с соответствующим командлетом Windows PowerShell.


Для подключения с использованием удаленного взаимодействия Windows PowerShell можно использовать HTTP или HTTPS. Соответствующие инструкции см. в следующих учебниках.

* [Подключение по протоколу HTTP](storsimple-8000-remote-connect.md#connect-through-http)
* [Подключение по протоколу HTTPS](storsimple-8000-remote-connect.md#connect-through-https)

## <a name="connection-security-considerations"></a>Вопросы безопасности подключения

Выбирая способ подключения к Windows PowerShell для StorSimple, примите во внимание следующие аспекты.

* Прямое подключение к последовательной консоли устройства является безопасным, а подключение к последовательной консоли через сетевые коммутаторы — нет. При подключении к последовательной консоли устройства через сетевые коммутаторы учитывайте угрозы для безопасности.
* Подключение через сеанс HTTP может быть более безопасным, чем подключение через последовательную консоль по сети. Хотя это не самый безопасный метод, его можно использовать в доверенных сетях.
* Наиболее безопасным и рекомендуемым способом подключения является подключение через сеанс HTTPS.

## <a name="administer-your-storsimple-device-using-windows-powershell-for-storsimple"></a>Администрировать устройство StorSimple с помощью Windows PowerShell для StorSimple.

В следующей таблице собраны все стандартные задачи управления и сложные рабочие процессы, которые могут быть выполнены в интерфейсе Windows PowerShell устройства StorSimple. Чтобы получить дополнительные сведения о каждом рабочем процессе, щелкните соответствующую запись в таблице.

#### <a name="windows-powershell-for-storsimple-workflows"></a>Рабочие процессы Windows PowerShell для StorSimple

| Если вы хотите... | Используйте эту процедуру. |
| --- | --- |
| Зарегистрировать устройство |[Настройка и регистрация устройства средствами Windows PowerShell для StorSimple](storsimple-8000-deployment-walkthrough-u2.md#step-3-configure-and-register-the-device-through-windows-powershell-for-storsimple) |
| Настроить веб-прокси</br>Посмотреть параметры веб-прокси |[Настройка веб-прокси для устройства StorSimple](storsimple-8000-configure-web-proxy.md) |
| Изменить параметры сетевого интерфейса DATA 0 на устройстве StorSimple |[Изменение сетевого интерфейса DATA 0 на устройстве StorSimple](storsimple-8000-modify-data-0.md) |
| Остановить контроллер  </br> Перезагрузка или завершение работы контроллера </br> Завершение работы устройства</br>Восстановление на устройстве заводских настроек |[Управление контроллерами устройства](storsimple-8000-manage-device-controller.md) |
| Установка обновлений и исправлений в режиме обслуживания |[Обновление устройства](storsimple-update-device.md) |
| Перейти в режим обслуживания </br>Выйти из режима обслуживания |[Режимы устройств StorSimple](storsimple-8000-device-modes.md) |
| Создать пакет поддержки</br>Расшифровать и изменить пакет поддержки |[Создание пакетов поддержки и управление ими](storsimple-8000-create-manage-support-package.md) |
| Запуск сеанса поддержки</br> |[Запуск сеанса поддержки в Windows PowerShell для StorSimple](storsimple-8000-create-manage-support-package.md#create-a-support-package) |

## <a name="get-help-in-windows-powershell-for-storsimple"></a>Получить справку по Windows PowerShell для StorSimple

В Windows PowerShell для StorSimple доступна справка по командлетам. Существует также актуальная онлайн-справка, которую можно использовать для обновления справки на компьютере.

Получить справку в этом интерфейсе можно точно так же, как в Windows PowerShell; большинство командлетов справки здесь работают. Справку по Windows PowerShell см. в библиотеке TechNet: [Работа со сценариями в Windows PowerShell](http://go.microsoft.com/fwlink/?LinkID=108518).

Ниже приводится краткое описание типов справки для данного интерфейса Windows PowerShell с указанием способов обновления.

### <a name="to-get-help-for-a-cmdlet"></a>Справка по командлетам

* Чтобы получить справку по какому-либо командлету или функции, используйте следующую команду: `Get-Help <cmdlet-name>`.
* Чтобы получить онлайн-справку по какому-либо командлету, используйте предыдущий командлет с таким параметром`-Online`: `Get-Help <cmdlet-name> -Online`.
* Для получения полной справки можно использовать параметр `–Full`, а для получения примеров — параметр `–Examples`.

### <a name="to-update-help"></a>Обновление справки

Справка легко обновляется через интерфейс Windows PowerShell. Для обновления справки в системе выполните указанные ниже действия.

#### <a name="to-update-cmdlet-help"></a>Обновление справки по командлетам
1. Запустите Windows PowerShell с параметром **Запуск от имени администратора** .
2. В командной строке введите следующий текст: `Update-Help`.
3. Будут установлены обновленные файлы справки.
4. После установки файлов справки введите следующий текст: `Get-Help Get-Command`. Появится список командлетов, для которых доступна справка.

> [!NOTE]
> Чтобы получить список всех доступных командлетов в пространстве выполнения, войдите в соответствующий пункт меню и выполните командлет `Get-Command`.


## <a name="next-steps"></a>Дополнительная информация

Если при выполнении одного из указанных выше рабочих процессов возникнут проблемы с устройством StorSimple, см. раздел [Средства для устранения неполадок в развертываниях StorSimple](storsimple-8000-troubleshoot-deployment.md#tools-for-troubleshooting-storsimple-deployments).

