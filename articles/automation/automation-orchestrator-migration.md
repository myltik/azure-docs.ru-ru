---
title: Миграция из Orchestrator в службу автоматизации Azure
description: Описывает способ миграции пакетов Runbook и пакетов интеграции из System Center Orchestrator в службу автоматизации Azure.
services: automation
ms.service: automation
ms.component: process-automation
author: georgewallace
ms.author: gwallace
ms.date: 03/16/2018
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: f7050a034bea3a92376afbebb3b1489e61382a83
ms.sourcegitcommit: eb75f177fc59d90b1b667afcfe64ac51936e2638
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2018
ms.locfileid: "34194994"
---
# <a name="migrating-from-orchestrator-to-azure-automation-beta"></a>Миграция из Orchestrator в службу автоматизации Azure (бета-версия)
Модули Runbook в [System Center Orchestrator](http://technet.microsoft.com/library/hh237242.aspx) основаны на действиях из пакетов интеграции, которые созданы специально для Orchestrator, а модули Runbook службы автоматизации Azure основаны на рабочих процессах Windows PowerShell.  [Графические модули Runbook](automation-runbook-types.md#graphical-runbooks) в службе автоматизации Azure имеют сходный вид с модулями Runbook в Orchestrator, при этом действия представляют собой командлеты PowerShell, зависимые модули Runbook и ресурсы-контейнеры.

[System Center Orchestrator Migration Toolkit](http://www.microsoft.com/download/details.aspx?id=47323&WT.mc_id=rss_alldownloads_all) содержит средства для преобразования модулей Runbook из Orchestrator в модули службы автоматизации Azure.  Кроме преобразования самих модулей Runbook, необходимо преобразовать пакеты интеграции с действиями, которые в них используются, в модули интеграции с командлетами Windows PowerShell.  

Ниже приведен базовый процесс преобразования модулей Runbook для Orchestrator в модули Runbook службы автоматизации Azure.  Каждое из этих действий подробно описано в следующих разделах.

1. Загрузите [набор инструментов для миграции System Center Orchestrator](http://www.microsoft.com/download/details.aspx?id=47323&WT.mc_id=rss_alldownloads_all) , который содержит средства и модули, описанные в этой статье.
2. Импортируйте [модуль стандартных действий](#standard-activities-module) в службу автоматизации Azure.  В него входят преобразованные версии стандартных действий Orchestrator, которые могут использоваться в преобразованных модулях Runbook.
3. Импортируйте [модули интеграции System Center Orchestrator](#system-center-orchestrator-integration-modules) в службу автоматизации Azure для пакетов интеграции, используемых в модулях Runbook с доступом к System Center.
4. Преобразовывайте пользовательские и сторонние пакеты интеграции при помощи средства [Преобразователь пакета интеграции](#integration-pack-converter) и импортируйте их в службу автоматизации Azure.
5. Преобразовывайте модели Runbook Orchestrator при помощи средства [Runbook Converter](#runbook-converter) и устанавливайте их в службе автоматизации Azure.
6. Создавайте обязательные активы Orchestrator в службе автоматизации Azure вручную, так как преобразователь модулей Runbook не преобразует такие ресурсы.
7. Настройте [гибридный компонент Runbook Worker](#hybrid-runbook-worker) в локальном центре обработки данных для запуска преобразованных модулей Runbook, которым будет предоставлен доступ к локальным ресурсам.

## <a name="service-management-automation"></a>Автоматизация управления службами
[Автоматизация управления службами](http://technet.microsoft.com/library/dn469260.aspx) (SMA) сохраняет и запускает модули Runbook в локальном центре обработки данных, как и Orchestrator, и использует те же модули интеграции в качестве службы автоматизации Azure. [Runbook Converter](#runbook-converter) преобразует модули Runbook для Orchestrator в графические модули Runbook, которые, однако, не поддерживаются в SMA.  Вы все еще сможете установить [модуль стандартных действий](#standard-activities-module) и [модули интеграции System Center Orchestrator](#system-center-orchestrator-integration-modules) в SMA, однако [модули Runbook придется перезаписать вручную](http://technet.microsoft.com/library/dn469262.aspx).

## <a name="hybrid-runbook-worker"></a>гибридный компонент Runbook Worker
Модули Runbook для Orchestrator сохраняются на сервере базы данных и работают на серверах модулей Runbook, которые оба размещаются в вашем локальном центре обработки данных.  Модули Runbook в службе автоматизации Azure сохраняются в облаке Azure и могут работать в локальном центре обработки данных при помощи [гибридного компонента Runbook Worker](automation-hybrid-runbook-worker.md).  Именно так вы обычно будете запускать модули Runbook, преобразованные из Orchestrator, поскольку они разработаны для запуска на локальных серверах.

## <a name="integration-pack-converter"></a>Преобразователь пакета интеграции
Средство преобразования пакетов интеграции преобразует пакеты интеграции, созданные при помощи набора инструментов [Orchestrator Integration Toolkit (OIT)](http://technet.microsoft.com/library/hh855853.aspx) , в модули интеграции, основанные на Windows PowerShell, которые могут импортироваться в службу автоматизации Azure или в средство автоматизации управления службами.  

При запуске преобразователя пакетов интеграции отобразится мастер, который позволит выбрать файл пакета (OIP) интеграции.  После этого мастер выведет список действий, включенных в этот пакет интеграции, и позволит вам выбрать действия, миграцию которых требуется осуществить.  После завершения работы мастера создается модуль интеграции, содержащий соответствующий командлет для каждого действия в исходном пакете интеграции.

### <a name="parameters"></a>Параметры
Все свойства действия в пакете интеграции преобразуются в параметры соответствующих командлетов в модуле интеграции.  У командлетов Windows PowerShell есть набор [общих параметров](http://technet.microsoft.com/library/hh847884.aspx) , который может использоваться со всеми командлетами.  Например, параметр -Verbose позволяет выводить подробные сведения о выполнении командлета.  Ни один командлет не может иметь параметр с тем же именем, что и общий параметр.  Если действие имеет свойство с тем же именем, как и у общего параметра, мастер предложит пользователю ввести другое имя параметра.

### <a name="monitor-activities"></a>Действия Monitor
Модули Runbook для Monitor в Orchestrator начинаются с [действия Monitor](http://technet.microsoft.com/library/hh403827.aspx) и работают постоянно, пока они не будут вызваны определенным событием.  Служба автоматизации Azure не поддерживает модули Runbook для Monitor, поэтому все действия Monitor в пакете интеграции не будут преобразованы.  Вместо этого в модуле интеграции создается командлет-местозаполнитель действия Monitor.  Этот командлет не имеет функционального назначения, однако позволяет установить любой преобразованный модуль Runbook, который использует его.  Этот модуль Runbook больше не сможет выполняться в службе автоматизации Azure, однако его можно установить так, чтобы вы могли его изменить.

### <a name="integration-packs-that-cannot-be-converted"></a>Пакеты интеграции, которые не могут быть преобразованы
Пакеты интеграции, которые не были созданы с OIT, не могут быть преобразованы с помощью этого средства. Кроме того, на данный момент оно не может преобразовывать некоторые пакеты интеграции, предоставляемые Майкрософт.  Преобразованные версии этих пакетов интеграции [доступны для загрузки](#system-center-orchestrator-integration-modules) , а значит могут быть установлены в службе автоматизации Azure или в средстве автоматизации управления службами.

## <a name="standard-activities-module"></a>модуль стандартных действий
Orchestrator содержит набор [стандартных действий](http://technet.microsoft.com/library/hh403832.aspx) , не включенных в пакет интеграции, которые, однако, используются во многих модулях Runbook.  Модуль стандартных действий представляет собой модуль интеграции, содержащий эквивалентный командлет для каждого из этих действий.  Перед импортом любых преобразованных модулей Runbook, использующих стандартные действия, необходимо установить этот модуль интеграции службы автоматизации Azure.

В дополнение к поддержке преобразованных модулей Runbook командлеты в модуле стандартных действий могут использоваться любым пользователем, знакомым с Orchestrator, для построения новых модулей Runbook службы автоматизации Azure.  В то время как функциональные возможности всех стандартных действий могут быть реализованы при помощи командлетов, они могут работать по-другому.  Командлеты в преобразованном модуле стандартных действий будут работать точно так же, как и соответствующие действия, с использованием тех же параметров.  Это может помочь существующему автору модуля Runbook для Orchestrator при переходе на модули Runbook для службы автоматизации Azure.

## <a name="system-center-orchestrator-integration-modules"></a>модули интеграции System Center Orchestrator
Корпорация Майкрософт предоставляет [пакеты интеграции](http://technet.microsoft.com/library/hh295851.aspx) для создания модулей Runbook для автоматизации компонентов System Center и других продуктов.  Некоторые из этих пакетов в настоящее время основаны на OIT, но не могут быть преобразованы в модули интеграции ввиду известных проблем.  [Модули интеграции System Center Orchestrator](https://www.microsoft.com/download/details.aspx?id=49555) включают преобразованные версии этих пакетов интеграции, которые можно импортировать в службу автоматизации Azure и в средство автоматизации управления службами.  

В RTM-версии этого средства будут опубликованы обновленные версии пакетов интеграции на основе OIT, поддерживаемые преобразователем пакетов интеграции.  Кроме того, в нее будет включено руководство по преобразованию модулей Runbook с применением действий из пакетов интеграции, не основанных на OIT.

## <a name="runbook-converter"></a>Runbook Converter
Данный инструмент преобразует модули Runbook для Orchestrator в [графические модули Runbook](automation-runbook-types.md#graphical-runbooks), которые можно импортировать в службу автоматизации Azure.  

Преобразователь модулей Runbook реализуется как модуль PowerShell с командлетом **ConvertFrom-SCORunbook** , который выполняет преобразование.  После установки средство создаст ярлык для сеанса PowerShell, загружающий командлет.   

Ниже приведен базовый процесс преобразования модулей Runbook для Orchestrator и их импорта в службу автоматизации Azure.  В следующих разделах приводятся подробные сведения о работе с данным инструментом и преобразованными модулями Runbook.

1. Экспортируйте один или несколько модулей Runbook в Orchestrator.
2. Получите модули интеграции для всех действий в модуле Runbook.
3. Преобразуйте модули Runbook Orchestrator в экспортированном файле.
4. Проверьте результаты преобразования по журналам и определите, нужно ли выполнить какие-либо задачи вручную.
5. Импортируйте преобразованные модули Runbook в службу автоматизации Azure.
6. Создайте все необходимые средства в службе автоматизации Azure.
7. Измените модули Runbook в службе автоматизации Azure, скорректировав все необходимые действия.

### <a name="using-runbook-converter"></a>Использование преобразователя модулей Runbook
Синтаксис команды **ConvertFrom-SCORunbook** выглядит следующим образом:

    ConvertFrom-SCORunbook -RunbookPath <string> -Module <string[]> -OutputFolder <string>

* RunbookPath — путь к файлу экспорта, содержащему модули Runbook для преобразования.
* Модуль — список модулей интеграции, разделенных запятыми, с указанием действий, содержащихся в модулях Runbook.
* OutputFolder — путь к папке для создания преобразованных графических модулей Runbook.

Например, следующая команда преобразует модули Runbook в файл экспорта с именем **MyRunbooks.ois_export**.  В этих модулях используются пакеты интеграции Active Directory и Data Protection Manager.

    ConvertFrom-SCORunbook -RunbookPath "c:\runbooks\MyRunbooks.ois_export" -Module c:\ip\SystemCenter_IntegrationModule_ActiveDirectory.zip,c:\ip\SystemCenter_IntegrationModule_DPM.zip -OutputFolder "c:\runbooks"


### <a name="log-files"></a>Файлы журналов
В том же расположении, где находится преобразованный модуль Runbook, преобразователь модулей Runbook создаст указанные ниже файлы журналов.  Если файлы уже существуют, они будут перезаписаны данными из последнего преобразования.

| Файл | Оглавление |
|:--- |:--- |
| Преобразователь модулей Runbook — Progress.log |Подробные шаги преобразования, включая сведения о каждом успешно преобразованном действии и предупреждения о каждом непреобразованном действии. |
| Преобразователь модулей Runbook — Summary.log |Результаты последнего преобразования, включая все предупреждения и дополнительные задачи, такие как создание переменной, необходимой для преобразованного модуля Runbook. |

### <a name="exporting-runbooks-from-orchestrator"></a>Экспорт модулей Runbook из Orchestrator
Преобразователь модулей Runbook работает с файлом экспорта из Orchestrator, содержащим один или несколько модулей Runbook.  Для каждого модуля Runbook Orchestrator в файле экспорта он создаст соответствующий модуль Runbook в службе автоматизации Azure.  

Чтобы экспортировать модуль Runbook из Orchestrator, щелкните имя модуля в конструкторе модулей Runbook правой кнопкой мыши и выберите команду **Экспорт**.  Чтобы экспортировать все модули Runbook в папке, щелкните имя папки правой кнопкой мыши и выберите команду **Экспорт**.

### <a name="runbook-activities"></a>Действия Runbook
Преобразователь модулей Runbook преобразует каждое действие в модуле Runbook Orchestrator в соответствующее действие в службе автоматизации Azure.  Для действий, которые не могут быть преобразованы: в модуле Runbook создается действие-заполнитель с текстом предупреждения.  После импорта преобразованного модуля Runbook в службу автоматизации Azure все эти действия необходимо заменить на допустимые действия, выполняющие необходимые функции.

Все действия Orchestrator в [модуле стандартных действий](#standard-activities-module) будут преобразованы.  В то же время некоторые стандартные действия Orchestrator не входят в этот модуль и не подвергаются преобразованию.  Например, событие **отправить платформу** не имеет эквивалента в службе автоматизации Azure, поскольку характерно только для Orchestrator.

[Действия отслеживания](https://technet.microsoft.com/library/hh403827.aspx) не преобразуются, поскольку не имеют эквивалента в службе автоматизации Azure.  Исключение составляют действия отслеживания в [преобразованных пакетах интеграции](#integration-pack-converter) , которые будут преобразованы в действие-заполнитель.

Любое действие в [преобразованном пакете интеграции](#integration-pack-converter) будет преобразовано, если вы указали путь к модулю интеграции с параметром **модули** .  Для пакетов интеграции System Center можно использовать [модули интеграции System Center Orchestrator](#system-center-orchestrator-integration-modules).

### <a name="orchestrator-resources"></a>Ресурсы Orchestrator
Преобразователь модулей Runbook преобразует только модули Runbook, но не другие ресурсы Orchestrator, такие как счетчики, переменные или подключения.  Счетчики в службе автоматизации Azure не поддерживаются.  Переменные и подключения поддерживаются, но должны создаваться вручную.  Файлы журналов покажут, требуют ли ваши модули Runbook таких ресурсов, и сообщат, какие ресурсы необходимо создать в службе автоматизации Azure для правильной работы преобразованного модуля Runbook.

Например, в модуле Runbook можно использовать переменную для заполнения определенного значения в действии.  Преобразованный модуль Runbook преобразует действие и укажет переменный актив в службе автоматизации Azure с таким же именем, как у переменной Orchestrator.  Он будет указан в файле **Runbook Converter – Summary.log** , созданном после преобразования.  Прежде чем использовать модуль Runbook, вручную создайте переменный актив в службе автоматизации Azure.

### <a name="input-parameters"></a>Входные параметры
Модули Runbook в Orchestrator принимают входные параметры с помощью действия **инициализации данных** .  Если преобразуемый модуль Runbook включает такое действие, для каждого параметра этого действия в модуле Runbook в службе автоматизации Azure создается [входной параметр](automation-graphical-authoring-intro.md#runbook-input-and-output) .  В преобразованном модуле Runbook создается действие [управления сценарием рабочего процесса](automation-graphical-authoring-intro.md#activities) , извлекающее и возвращающее каждый параметр.  Результаты выполнения этого действия используются всеми действиями в модуле Runbook, использующими входной параметр.

Эта стратегия применяется потому, что максимально отражает функциональность модуля Runbook.  Действия в новых графических модулях Runbook не должны ссылаться на входные параметры непосредственно через источник входных данных модуля Runbook.

### <a name="invoke-runbook-activity"></a>Действие вызова модуля Runbook
Модуль Runbook в Orchestrator запускает другие модули Runbook с помощью действия **вызова модулей Runbook** . Если преобразованный модуль Runbook включает это действие и выбран параметр **Ожидать завершения** , в преобразованном модуле Runbook для него создается действие.  Если параметр **Ожидать завершения** не выбран, создается действие сценария рабочего процесса с командлетом **Start-AzureAutomationRunbook**, запускающим модуль Runbook.  После импорта преобразованного модуля Runbook в службу автоматизации Azure измените это действие с учетом указанной в этом действии информации.

## <a name="related-articles"></a>Связанные статьи
* [System Center 2012 — Orchestrator](http://technet.microsoft.com/library/hh237242.aspx)
* [Автоматизация управления службами](https://technet.microsoft.com/library/dn469260.aspx)
* [Гибридный компонент Runbook Worker](automation-hybrid-runbook-worker.md)
* [Стандартные действия Orchestrator](http://technet.microsoft.com/library/hh403832.aspx)
* [Скачивание набора средств для миграции System Center Orchestrator](https://www.microsoft.com/en-us/download/details.aspx?id=47323)
