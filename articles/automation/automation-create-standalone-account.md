---
title: Создание автономной учетной записи службы автоматизации Azure
description: В этой статье приводятся пошаговые инструкции по созданию и тестированию, а также пример проверки подлинности с помощью субъекта безопасности в службе автоматизации Azure.
services: automation
ms.service: automation
ms.component: process-automation
author: georgewallace
ms.author: gwallace
ms.date: 03/15/2018
ms.topic: conceptual
manager: carmonm
ms.openlocfilehash: 77d766358135f5cdabfe7e9b62e54513c2604ed3
ms.sourcegitcommit: eb75f177fc59d90b1b667afcfe64ac51936e2638
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/16/2018
ms.locfileid: "34193572"
---
# <a name="create-a-standalone-azure-automation-account"></a>Создание автономной учетной записи службы автоматизации Azure

В этой статье объясняется, как создать учетную запись службы автоматизации на портале Azure. Вы можете использовать учетную запись службы автоматизации на портале, чтобы оценить и изучить службу автоматизации Azure, не прибегая к дополнительным решениям по управлению или интеграции с Azure Log Analytics. В дальнейшем эти решения по управлению можно добавить или интегрировать с Log Analytics для расширенного мониторинга заданий Runbook.

С использованием учетной записи службы автоматизации можно проверять подлинность ресурсов управления модулями Runbook в модели Azure Resource Manager или в классической модели развертывания.

При создании учетной записи службы автоматизации на портале Azure автоматически создаются следующие учетные записи.

* **Учетная запись запуска от имени**. Она выполняет следующие задачи:
  * создает субъект-службу в Azure Active Directory (Azure AD);
  * создает сертификат;
  * назначает управление доступом на основе ролей участника (RBAC), используемое для управления ресурсами Azure Resource Manager с помощью модулей Runbook.
* **Классическая учетная запись запуска от имени**. Она отправляет сертификат управления, который управляет классическими ресурсами с помощью модулей Runbook.

С помощью этих учетных записей вы можете быстро начать создание и развертывание модулей Runbook для решения конкретных задач автоматизации.

## <a name="permissions-required-to-create-an-automation-account"></a>Разрешения, необходимые для создания учетной записи службы автоматизации

Чтобы создать или обновить учетную запись службы автоматизации и выполнить задачи, приведенные в этой статье, вам потребуются указанные ниже привилегии и разрешения.

* Для создания учетной записи службы автоматизации необходимо добавить учетную запись пользователя Azure AD к роли с разрешениями, аналогичными разрешениям для роли владельца ресурсов  **службы автоматизации Майкрософт**. Дополнительные сведения см. в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).
* На портале Azure выберите **Azure Active Directory** > **Управление** > **Регистрация приложений**. Если для **этого параметра** установлено значение **Да**, то пользователи без прав администратора могут [зарегистрировать приложения Active Directory](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions) в клиенте Azure AD. Если для параметра **Регистрация приложений** задано значение **Нет**, пользователю потребуются права глобального администратора в Azure AD, чтобы выполнить это действие.

Если пользователь, которому назначают роль глобального администратора или соадминистратора подписки, не является участником экземпляра подписки Active Directory, он будет добавлен в Active Directory в качестве гостя. В этом случае на странице **добавления учетной записи службы автоматизации** появится сообщение: You do not have permissions to create (У вас нет разрешений на создание).

Пользователей, которым впервые назначается роль соадминистратора или глобального администратора, можно удалить из экземпляра подписки Active Directory, а затем повторно добавить, чтобы предоставить им права полного доступа к Active Directory.

Чтобы проверить роли пользователей, сделайте следующее:

1. На портале Azure перейдите на панель **Azure Active Directory**.
1. Выберите **Пользователи и группы**.
1. Выберите **Все пользователи**.
1. После выбора конкретного пользователя выберите **Профиль**. Значение атрибута **Тип пользователя** в профиле пользователя не должно соответствовать значению **Гость**.

## <a name="create-a-new-automation-account-in-the-azure-portal"></a>Создание учетной записи службы автоматизации на портале Azure

Чтобы создать учетную запись службы автоматизации Azure на портале Azure, выполните следующие действия:

1. Войдите на портал Azure с помощью учетной записи, добавленной в качестве участника роли "Администраторы" подписки и соадминистратора подписки.
1. Выберите действие **+ Создать ресурс**.
1. Введите в строку поиска **Служба автоматизации**. В результатах поиска выберите **Автоматизация**.

   ![Поиск и выбор предложения "Автоматизация и управление" в Azure Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)

1. На следующем экране выберите **Создать**.
  ![Добавление учетной записи службы автоматизации](media/automation-create-standalone-account/automation-create-automationacct-properties.png)

  > [!NOTE]
  > Если учетная запись не является участником роли "Администраторы подписки" и соадминистратором подписки, в колонке **Добавление учетной записи службы автоматизации** отобразится следующее сообщение.
  >
  > ![Предупреждение в области "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-without-perms.png)
  >
1. В области **Добавление учетной записи службы автоматизации** в поле **Имя** введите имя новой учетной записи службы автоматизации.
1. Если у вас несколько подписок, в поле **Подписки** укажите подписку, которую нужно использовать для новой учетной записи.
1. В поле **Группа ресурсов** укажите или выберите новую или имеющуюся группу ресурсов.
1. В поле **Расположение** выберите расположение центра обработки данных Azure.
1. Убедитесь, что для параметра **Создать учетную запись запуска от имени** установлено значение **Да**, а затем выберите **Создать**.

  > [!NOTE]
  > Если вы решили не создавать учетную запись запуска от имени и выбрали значение **Нет** для параметра **Создать учетную запись запуска от имени**, в области **Добавление учетной записи службы автоматизации** появится сообщение. Хотя учетная запись и создается на портале Azure, она не содержит соответствующее удостоверение проверки подлинности в службе каталогов подписки классической модели развертывания или подписки Azure Resource Manager. Поэтому у учетной записи службы автоматизации не будет доступа к ресурсам в вашей подписке. Из-за этого модули Runbook, ссылающиеся на эту учетную запись, не смогут проходить проверку подлинности и выполнять задачи, используя ресурсы в соответствующих моделях развертывания.
  >
  > ![Предупреждение в области "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)
  >
  > Если субъект-служба не создан, роль участника не назначается.
  >

1. Чтобы отслеживать ход создания учетной записи службы автоматизации, выберите **Уведомления** в меню.

### <a name="resources-included"></a>Создаваемые ресурсы

После создания учетной записи службы автоматизации автоматически создаются несколько ресурсов. После их создания модули runbook можно спокойно удалить, если вы не хотите сохранить их. Чтобы выполнить аутентификацию для вашей учетной записи в модуле runbook, можно использовать учетные записи запуска от имени. Вы можете не удалять их, если не собираетесь создавать новую учетную запись или если они еще могут потребоваться. В следующей таблице перечислены ресурсы для учетной записи запуска от имени.

| Ресурс | ОПИСАНИЕ |
| --- | --- |
| Модуль Runbook AzureAutomationTutorial |Пример графического модуля Runbook, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| Модуль Runbook AzureAutomationTutorialScript |Пример модуля Runbook PowerShell, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| AzureAutomationTutorialPython2 Runbook |Пример модуля Runbook Python, в котором показано, как выполнить аутентификацию с помощью учетной записи запуска от имени. Модуль Runbook отображает список групп ресурсов для указанной подписки. |
| AzureRunAsCertificate |Ресурс сертификатов, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью приведенного ниже сценария PowerShell для имеющейся учетной записи. Этот сертификат позволяет пройти проверку подлинности в Azure, что дает возможность управлять ресурсами Azure Resource Manager с помощью модулей Runbook. Срок действия этого сертификата — один год. |
| AzureRunAsConnection |Ресурс подключений, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью сценария PowerShell для имеющейся учетной записи. |

В следующей таблице перечислены ресурсы для классической учетной записи запуска от имени.

| Ресурс | ОПИСАНИЕ |
| --- | --- |
| Модуль Runbook AzureClassicAutomationTutorial |Пример графического модуля Runbook. Он получает доступ ко всем классическим виртуальным машинам в подписке с помощью классической учетной записи запуска от имени (сертификата), а затем выводит имя и состояние виртуальной машины. |
| Модуль Runbook AzureClassicAutomationTutorialScript |Пример модуля Runbook PowerShell. Он получает доступ ко всем классическим виртуальным машинам в подписке с помощью классической учетной записи запуска от имени (сертификата), а затем выводит имя и состояние виртуальной машины. |
| AzureClassicRunAsCertificate |Автоматически созданный ресурс сертификатов. Он позволяет пройти проверку подлинности в Azure, что дает возможность управлять классическими ресурсами Azure с помощью модулей Runbook. Срок действия этого сертификата — один год. |
| AzureClassicRunAsConnection |Автоматически созданный ресурс подключения. Он позволяет пройти проверку подлинности в Azure, что дает возможность управлять классическими ресурсами Azure с помощью модулей Runbook. |

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о графической разработке см. [в этой статье](automation-graphical-authoring-intro.md).
* Сведения о том, как начать работу с модулями Runbook, см. в статье [Мой первый модуль Runbook PowerShell](automation-first-runbook-textual-powershell.md).
* Чтобы приступить к работе с модулями Runbook рабочих процессов PowerShell, обратитесь к статье [Первый Runbook рабочего процесса PowerShell](automation-first-runbook-textual.md).
* См. дополнительные сведения о начале работы с [модулями runbook Python2](automation-first-runbook-textual-python2.md).
