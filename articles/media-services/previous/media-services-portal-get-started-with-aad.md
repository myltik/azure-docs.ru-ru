---
title: Приступая к работе с аутентификацией Azure AD с помощью портала Azure | Документация Майкрософт
description: Узнайте, как использовать аутентификацию Azure Active Directory (Azure AD) для работы с API служб мультимедиа Azure с помощью портала Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: cfowler
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: juliako
ms.openlocfilehash: 6267dd8dca4c932d4a4d96b34a8eaa26f6a59c20
ms.sourcegitcommit: e221d1a2e0fb245610a6dd886e7e74c362f06467
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/07/2018
ms.locfileid: "33785803"
---
# <a name="get-started-with-azure-ad-authentication-by-using-the-azure-portal"></a>Приступая к работе с аутентификацией Azure AD с помощью портала Azure

Узнайте, как использовать аутентификацию Azure Active Directory (Azure AD) для доступа к API служб мультимедиа Azure с помощью портала Azure.

## <a name="prerequisites"></a>предварительным требованиям

- Учетная запись Azure. Если у вас нет учетной записи Azure, начните с получения [бесплатной пробной версии](https://azure.microsoft.com/pricing/free-trial/). 
- Учетная запись служб мультимедиа. Дополнительные сведения см. в статье [Создание учетной записи служб мультимедиа Azure с помощью портала Azure](media-services-portal-create-account.md).
- Обязательно ознакомьтесь с разделом [Доступ к API служб мультимедиа Azure с помощью аутентификации Azure AD](media-services-use-aad-auth-to-access-ams-api.md). 

При использовании аутентификации Azure AD со службами мультимедиа Azure доступны два метода аутентификации.

- **Аутентификация пользователя**. Аутентификация пользователя, который использует приложение для взаимодействия с ресурсами служб мультимедиа. Интерактивное приложение должно сначала запросить у пользователя учетные данные. Примером может послужить приложение консоли управления, которое используется авторизованными пользователями для мониторинга заданий кодирования или потоковой трансляции. 
- **Аутентификация субъекта-службы**. Аутентификация службы. Этот метод аутентификации обычно используют приложения, которые выполняют службы управляющей программы, службы среднего уровня или запланированные задания: веб-приложения, приложения-функции, приложения логики, интерфейсы API или микрослужбы.

> [!IMPORTANT]
> Службы мультимедиа в настоящее время поддерживают модель аутентификации с помощью службы контроля доступа Azure. Тем не менее авторизация посредством службы контроля доступа будет объявлена устаревшей 1 июня 2018 года. Мы рекомендуем как можно быстрее перейти на использование модели аутентификации Azure AD.

## <a name="select-the-authentication-method"></a>Выбор метода аутентификации

1. На [портале Azure](https://portal.azure.com/) выберите свою учетную запись служб мультимедиа.
2. Выберите способ подключения к API служб мультимедиа.

    ![Страница выбора способа подключения](./media/media-services-portal-get-started-with-aad/media-services-portal-get-started01.png)

## <a name="user-authentication"></a>Аутентификация пользователей

Для подключения к API служб мультимедиа с помощью аутентификации пользователя клиентскому приложению требуется запросить маркер Azure AD со следующими параметрами:  

* Конечная точка клиента Azure AD.
* Универсальный код ресурса (URI) для ресурса служб мультимедиа.
* Идентификатор клиента (собственного) приложения служб мультимедиа. 
* Универсальный код ресурса (URI) перенаправления (собственного) приложения служб мультимедиа. 
* Универсальный код ресурса (URI) для ресурса REST служб мультимедиа.

Значения этих параметров можно получить на странице **Подключение к API служб мультимедиа с помощью проверки подлинности пользователя**. 

![Страница подключения с помощью аутентификации пользователя](./media/media-services-portal-get-started-with-aad/media-services-portal-get-started02.png)

При подключении к API служб мультимедиа с помощью пакета SDK служб мультимедиа для Microsoft .NET требуемые значения доступны в самом пакете SDK. Дополнительные сведения см. в разделе [Использование аутентификации Azure AD для доступа к API служб мультимедиа Azure с помощью .NET](media-services-dotnet-get-started-with-aad.md).

Если вы не используете клиентский пакет SDK служб мультимедиа для .NET, то вам необходимо вручную создать запрос маркера Azure AD, указав параметры, описанные ранее. Дополнительные сведения см. в разделе [Библиотеки проверки подлинности Azure Active Directory](../../active-directory/develop/active-directory-authentication-libraries.md).

## <a name="service-principal-authentication"></a>Проверка подлинности субъекта-службы

Для подключения к API служб мультимедиа в режиме аутентификации субъекта-службы приложению среднего уровня (веб-API или веб-приложению) требуется запросить маркер Azure AD со следующими параметрами:  

* Конечная точка клиента Azure AD.
* Универсальный код ресурса (URI) для ресурса служб мультимедиа. 
* Универсальный код ресурса (URI) для ресурса REST служб мультимедиа.
* Значения приложения Azure AD: **идентификатор клиента** и **секрет клиента**.

Значения этих параметров можно получить на странице **Подключение к API служб мультимедиа с помощью субъекта-службы**. На этой странице создайте новое приложение Azure AD или выберите существующее. После выбора приложения Azure AD можно получить идентификатор клиента (идентификатор приложения) и сформировать значения секрета клиента (ключа). 

![Страница подключения с помощью субъекта-службы](./media/media-services-portal-get-started-with-aad/media-services-portal-get-started04.png)

Когда откроется колонка **Субъект-служба**, в ней будет выбрано первое приложение Azure AD, которое удовлетворяет следующим требованиям:

- оно зарегистрировано в Azure AD;
- ему назначены разрешения участника или владельца для учетной записи (управление доступом на основе ролей).

После создания или выбора приложения Azure AD можно создать и скопировать секрет клиента (ключ) и идентификатор клиента (идентификатор приложения). Для получения маркера доступа в этом сценарии требуются секрет клиента и идентификатор клиента.

Если разрешения на создание приложений Azure AD в вашем домене отсутствуют, элементы управления приложением Azure AD в колонке не отображаются и выводится предупреждающее сообщение.

Подключение к API служб мультимедиа с помощью пакета SDK служб мультимедиа для .NET описывается в разделе [Использование аутентификации Azure AD для доступа к API служб мультимедиа Azure с помощью .NET](media-services-dotnet-get-started-with-aad.md).

Если вы не используете клиентский пакет SDK служб мультимедиа для .NET, то вам необходимо вручную создать запрос маркера Azure AD, указав параметры, описанные ранее. Дополнительные сведения см. в разделе [Библиотеки проверки подлинности Azure Active Directory](../../active-directory/develop/active-directory-authentication-libraries.md).

### <a name="get-the-client-id-and-client-secret"></a>Получение идентификатора клиента и секрета клиента

После выбора существующего приложения Azure AD или параметра для создания нового приложения отображаются показанные ниже кнопки.

![Кнопки "Управление разрешениями" и "Управление приложением"](./media/media-services-portal-get-started-with-aad/media-services-portal-manage.png)

Чтобы открыть колонку приложения Azure AD, нажмите кнопку **Управление приложением**. В колонке **Управление приложением** можно получить идентификатор клиента для приложения (идентификатор приложения). Чтобы создать секрет клиента (ключ), щелкните **Ключи**.

![Параметр "Ключи" в колонке "Управление приложением"](./media/media-services-portal-get-started-with-aad/media-services-portal-get-started06.png) 

### <a name="manage-permissions-and-the-application"></a>Управление разрешениями и приложением

После выбора приложения Azure AD можно управлять им и разрешениями. Чтобы настроить приложение Azure AD для доступа к другим приложениям, нажмите кнопку **Управление разрешениями**. Чтобы выполнить такие задачи управления, как изменение ключей, URL-адресов ответа или манифеста приложения, нажмите кнопку **Управление приложением**.

### <a name="edit-the-apps-settings-or-manifest"></a>Изменение параметров или манифеста приложения

Чтобы изменить параметры или манифест приложения, нажмите кнопку **Управление приложением**.

![Страница "Управление приложением"](./media/media-services-portal-get-started-with-aad/media-services-portal-get-started05.png)

## <a name="next-steps"></a>Дополнительная информация

Приступите к [передаче файлов в учетную запись](media-services-portal-upload-files.md).
