---
title: Аутентификация и разрешения пользователей в службах Azure Analysis Services | Документация Майкрософт
description: Узнайте о проверке подлинности и разрешениях пользователя в службах Azure Analysis Services.
author: minewiskan
manager: kfile
ms.service: azure-analysis-services
ms.topic: conceptual
ms.date: 04/12/2018
ms.author: owend
ms.reviewer: minewiskan
ms.openlocfilehash: 47846af015bf02940da7a7b8a4154113aab57b08
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34597636"
---
# <a name="authentication-and-user-permissions"></a>Аутентификация и разрешения пользователей
Azure Analysis Services использует Azure Active Directory (Azure AD) для управления удостоверениями и проверки подлинности пользователей. У любого пользователя, который создает сервер Azure Analysis Services, управляет им или подключается к нему, должно быть допустимое удостоверение пользователя в [клиенте Azure AD](../active-directory/active-directory-administer.md) в той же подписке.

Azure Analysis Services поддерживает [службу совместной работы Azure AD B2B](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md). С помощью B2B можно пригласить пользователей вне организации как гостевых пользователей в каталог Azure AD. Гости могут принадлежать другому каталогу клиента Azure AD или иметь любой допустимый адрес электронной почты. Если вы пригласили пользователя и он принимает приглашение, отправленное по электронной почте от Azure, удостоверение пользователя добавляется в каталог клиента. Затем эти удостоверения можно добавить в группы безопасности либо как участников роли администратора сервера или роли базы данных.

![Архитектура проверки подлинности Azure Analysis Services](./media/analysis-services-manage-users/aas-manage-users-arch.png)

## <a name="authentication"></a>Authentication
Все клиентские приложения и средства используют одну или несколько [клиентских библиотек](analysis-services-data-providers.md) Analysis Services (AMO, MSOLAP, ADOMD) для подключения к серверу. 

Все три клиентские библиотеки поддерживают интерактивный поток Azure AD и неинтерактивные методы проверки подлинности. Два неинтерактивных метода (проверку подлинности Active Directory и встроенную аутентификацию Active Directory) можно использовать в приложениях с применением AMOMD и MSOLAP. При использовании этих двух методов никогда не отображаются всплывающие диалоговые окна.

Вы можете обновить до последней версии такие клиентские приложения, как Excel и Power BI Desktop, а также такие средства, как SSMS и SSDT, чтобы установить последние версии библиотек. Power BI Desktop, SSMS и SSDT обновляются каждый месяц. Excel можно [обновить с помощью Office 365](https://support.office.com/en-us/article/When-do-I-get-the-newest-features-in-Office-2016-for-Office-365-da36192c-58b9-4bc9-8d51-bb6eed468516). Обновления Office 365 случаются реже, и некоторые организации используют отложенный канал, что означает задержку обновлений на период до трех месяцев.

В зависимости от того, какое вы используете клиентское приложение или средство, тип проверки подлинности и способ входа могут отличаться. Каждое приложение может поддерживать различные функции подключения к таким облачным службам, как Azure Analysis Services.

Power BI Desktop, SSDT и SSMS поддерживают универсальную проверку подлинности Active Directory, интерактивный метод, который также поддерживает службу "Многофакторная идентификация Azure" (MFA). Azure MFA помогает защитить доступ к данным и приложениям, при этом не усложняя процесс входа пользователей в систему. MFA обеспечивает надежную аутентификацию с использованием ряда вариантов проверки посредством телефонного звонка, текстового сообщения, смарт-карты с ПИН-кодом или уведомления в мобильном приложении. Интерактивная MFA с использованием Azure AD может привести к появлению всплывающего диалогового окна для реализации проверки. **Рекомендуется использовать универсальную проверку подлинности**.

Если при входе в Azure с помощью учетной записи Windows не выбрать универсальную проверку подлинности или она не доступна (Excel), потребуются [службы федерации Active Directory (AD FS)](../active-directory/connect/active-directory-aadconnect-azure-adfs.md). При использовании служб федерации пользователи Azure AD и Office 365 проходят проверку подлинности с помощью локальных учетных данных и могут обращаться к ресурсам Azure.

### <a name="sql-server-management-studio-ssms"></a>SQL Server Management Studio (SSMS);
Серверы Azure Analysis Services поддерживают подключения [SSMS V17.1](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) и более поздних версий с помощью проверки подлинности Windows, проверки пароля Active Directory и универсальной проверки подлинности Active Directory. В целом мы рекомендуем использовать универсальную проверку подлинности Active Directory, так она предоставляет следующую поддержку:

*  поддерживает интерактивные и неинтерактивные методы проверки подлинности.

*  Поддерживает гостевых пользователей Azure B2B, приглашенных в клиент Azure AS. При подключении к серверу гостевые пользователи должны выбрать универсальную проверку подлинности Active Directory.

*  Поддерживает Многофакторную идентификацию (MFA). Azure MFA помогает обеспечить безопасность доступа к данным и приложениям с помощью ряда вариантов проверки: посредством телефонного звонка, текстового сообщения, смарт-карт с ПИН-кодом или уведомления мобильного приложения. Интерактивная MFA с использованием Azure AD может привести к появлению всплывающего диалогового окна для реализации проверки.

### <a name="sql-server-data-tools-ssdt"></a>SQL Server Data Tools (SSDT)
SSDT подключается к Azure Analysis Services с помощью универсальной проверки подлинности Active Directory с поддержкой Многофакторной идентификации. Пользователям предлагается выполнить вход в Azure при первом развертывании. Пользователи должны войти в Azure с помощью учетной записи с разрешениями администратора сервера на соответствующем сервере. При первом входе в Azure назначается маркер. SSDT кэширует маркер в памяти для последующих повторных подключений.

### <a name="power-bi-desktop"></a>Power BI Desktop
Power BI Desktop подключается к Azure Analysis Services с помощью универсальной проверки подлинности Active Directory с поддержкой Многофакторной идентификации. Пользователям предлагается выполнить вход в Azure при первом подключении. Пользователям необходимо войти в Azure с помощью учетной записи, включенной в роли администратора сервера или пользователя базы данных.

### <a name="excel"></a>Excel
Пользователи Excel могут подключаться к серверу с помощью учетной записи Windows, идентификатора организации (адреса электронной почты) или внешнего адреса электронной почты. Внешние удостоверения электронной почты должны существовать в Azure AD в качестве гостевых пользователей.

## <a name="user-permissions"></a>Разрешения пользователя

**Администраторы сервера** относятся к экземпляру сервера Azure Analysis Services. Они подключаются с помощью таких средств, как портал Azure, SSMS и SSDT, для выполнения таких задач, как добавление баз данных и управление ролями пользователей. По умолчанию пользователь, который создает сервер, автоматически добавляется как администратор сервера Analysis Services. Других администраторов можно добавить с помощью портала Azure или SSMS. У администраторов сервера должна быть учетная запись в клиенте Azure AD в одной подписке. Дополнительные сведения см. в статье [Управление администраторами сервера](analysis-services-server-admins.md). 

**Пользователи базы данных** подключаются к шаблонам баз данных с помощью таких клиентских приложений, как Excel или Power BI. Пользователей нужно добавить в роли базы данных. Роли базы данных определяют администратора, процесс или разрешения на чтение для базы данных. Важно понимать, что пользователи базы данных с разрешениями администратора и администраторы сервера — это не одно и тоже. Тем не менее, по умолчанию администраторы сервера также являются администраторами базы данных. Дополнительные сведения см. в статье [Управление ролями и пользователями базы данных](analysis-services-database-users.md).

**Владельцы ресурса Azure**. Владельцы ресурса управляют ресурсами подписки Azure. Владельцы ресурса могут добавить удостоверения пользователей Azure AD к ролям владельца или участника в подписке с помощью **управления доступом** на портале Azure или шаблонов Azure Resource Manager. 

![Управление доступом на портале Azure](./media/analysis-services-manage-users/aas-manage-users-rbac.png)

Роли на этом уровне применяются к пользователям или учетным записям, которым необходимо выполнить задачи на портале или с помощью шаблонов Azure Resource Manager. Дополнительные сведения см. в статье об [управлении доступом на основе ролей](../role-based-access-control/overview.md). 


## <a name="database-roles"></a>Роли базы данных

 Роли, определенные для табличной модели, являются ролями базы данных. То есть, роли содержат участников, которые включают пользователей Azure AD и группы безопасности. У них есть специальные разрешения, определяющие действия, которые эти участники могут выполнять в отношении шаблона базы данных. Роль базы данных создается как отдельный объект в базе данных и применяется только к базе данных, в которой она создана.   
  
 По умолчанию при создании нового проекта табличной модели этот проект не содержит никакие роли. Роли можно определить с помощью диалогового окна диспетчера ролей в SSDT. При определении ролей во время разработки проекта модели они применяются только к базе данных рабочей области модели. Когда модель развернута, те же роли применяются к развернутой модели. После развертывания модели администраторы сервера и базы данных могут управлять ролями и участниками с помощью SSMS. Дополнительные сведения см. в статье [Управление ролями и пользователями базы данных](analysis-services-database-users.md).
  


## <a name="next-steps"></a>Дополнительная информация

[Управление доступом к ресурсам с помощью групп Azure Active Directory](../active-directory/active-directory-manage-groups.md)   
[Управление ролями и пользователями базы данных](analysis-services-database-users.md)  
[Управление администраторами сервера](analysis-services-server-admins.md)  
[Управление доступом на основе ролей](../role-based-access-control/overview.md)  