---
title: Создание настраиваемых панелей мониторинга в Azure Application Insights | Документация Майкрософт
description: Руководство по созданию настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights.
keywords: ''
services: application-insights
author: mrbullwinkle
ms.author: mbullwin
ms.date: 09/20/2017
ms.service: application-insights
ms.custom: mvc
ms.topic: tutorial
manager: carmonm
ms.openlocfilehash: 50d2545d5145f1d93a1ea9fed3e4f98b474d41b2
ms.sourcegitcommit: b32d6948033e7f85e3362e13347a664c0aaa04c1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/13/2018
ms.locfileid: "29178203"
---
# <a name="create-custom-kpi-dashboards-using-azure-application-insights"></a>Создание настраиваемых панелей мониторинга ключевых показателей эффективности с помощью Azure Application Insights

Вы можете создать несколько панелей мониторинга на портале Azure, каждая из которых будет включать плитку, визуализирующую данные из нескольких ресурсов Azure в разных группах ресурсов и подписках.  Вы можете закрепить различные диаграммы и представления Azure Application Insights для создания пользовательских панелей мониторинга, предоставляющих полную картину работоспособности и производительности приложения.  В этом руководстве описано создание пользовательской панели мониторинга, которая включает несколько типов данных и визуализации из Azure Application Insights.  Вы узнаете, как выполнять следующие задачи:

> [!div class="checklist"]
> * Создание настраиваемой панели мониторинга в Azure.
> * Добавление плитки из коллекции плиток.
> * Добавление стандартных метрик Application Insights на панель мониторинга. 
> * Добавление пользовательской диаграммы метрики Application Insights на панель мониторинга.
> * Добавление результатов запроса аналитики на панель мониторинга. 



## <a name="prerequisites"></a>предварительным требованиям

Для работы с этим руководством:

- Разверните приложение .NET в Azure и [включите пакет SDK для Application Insights](app-insights-asp-net.md). 

## <a name="log-in-to-azure"></a>Вход в Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="create-a-new-dashboard"></a>Создание панели мониторинга
Одна панель мониторинга может содержать ресурсы из нескольких приложений, групп ресурсов и подписок.  Начните работу с руководством с создания панели мониторинга для приложения.  

2.  На главном экране портала выберите **Новая панель мониторинга**.

    ![Новая панель мониторинга](media/app-insights-tutorial-dashboards/new-dashboard.png)

3. Введите имя для панели мониторинга.
4. Ознакомьтесь с **коллекцией плиток** для различных плиток, которые можно добавить на панель мониторинга.  Помимо добавления плиток из галереи можно закрепить диаграммы и другие представления непосредственно из Application Insights на панели мониторинга.
5. Найдите плитку **Markdown** и перетащите ее на панель мониторинга.  Эта плитка позволяет добавлять форматированный текст в разметку, которая отлично подходит для добавления описательного текста для панели мониторинга.
6. Добавьте текст в свойства плитки и измените его размер на холсте панели мониторинга.
    
    ![Изменение разметки плитки](media/app-insights-tutorial-dashboards/edit-markdown.png)

6. Щелкните **Done customizing** (Настройка завершена) в верхней части экрана, чтобы выйти из режима настройки плитки, а затем выберите **Опубликовать изменения**, чтобы сохранить изменения.

    ![Панель мониторинга с разметкой плитки](media/app-insights-tutorial-dashboards/dashboard-01.png)


## <a name="add-health-overview"></a>Добавление общих сведений о работоспособности
Панель мониторинга только со статическим текстом не очень интересна, поэтому добавьте плитку из Application Insights для отображения информации о приложении.  Можно добавить плитку Application Insights из коллекции плитки или закрепить ее напрямую с экранов Application Insights.  Это позволяет настроить диаграммы и представления, с которыми вы уже знакомы, перед закреплением их на панели мониторинга.  Начните с добавления стандартного обзора работоспособности приложения.  Это не требует настройки и предоставляет минимальные настройки на панели мониторинга.


1. Выберите **Application Insights** в меню Azure, а затем выберите свое приложение.
2. На панели **Временная шкала обзора** выберите контекстное меню и щелкните **Закрепить на панели мониторинга**.  После этого плитка будет добавлена на последнюю просмотренную панель мониторинга.  

    ![Закрепление временной шкалы обзора](media/app-insights-tutorial-dashboards/pin-overview-timeline.png)
 
3. В верхней части экрана щелкните **Просмотреть панель мониторинга**, чтобы вернуться к панели мониторинга.
4. Теперь временная шкала обзора добавлена на панель мониторинга.  Щелкните и перетащите ее в нужное место, а затем щелкните **Done customizing** (Настройка завершена) и **Опубликовать изменения**.  Теперь на панели мониторинга есть плитка с полезной информацией.

    ![Панель мониторинга с временной шкалой обзора](media/app-insights-tutorial-dashboards/dashboard-02.png)



## <a name="add-custom-metric-chart"></a>Добавление пользовательской диаграммы метрики
Панель **Метрики** позволяет графически отображать метрики, собранные Application Insights, с помощью дополнительных фильтров и группировки.  Как и все остальное в Application Insights, эту диаграмму можно добавить на панель мониторинга.  Для этого необходимо сначала выполнить небольшую настройку.

1. Выберите **Application Insights** в меню Azure, а затем выберите свое приложение.
1. Выберите **Метрики**.  
2. Пустая диаграмма уже создана. Вам будет предложено ввести метрику.  Добавьте метрику на диаграмму, при необходимости можно добавить фильтры и группировку.  В приведенном ниже примере показано количество запросов к серверу, сгруппированных по успешности.  Это предоставляет постоянное представление об успешных и неуспешных запросах.

    ![Добавление метрики](media/app-insights-tutorial-dashboards/metrics-chart.png)

4. Выберите контекстное меню для диаграммы и выберите **Закрепить на панели мониторинга**.  После этого представление будет добавлено на последнюю панель мониторинга, с которой вы работали.

    ![Закрепление диаграммы метрики](media/app-insights-tutorial-dashboards/pin-metrics-chart.png)

3. В верхней части экрана щелкните **Просмотреть панель мониторинга**, чтобы вернуться к панели мониторинга.

4. Теперь диаграмма метрик временной шкалы добавлена на панель мониторинга. Щелкните и перетащите ее в нужное место, а затем щелкните **Done customizing** (Настройка завершена) и **Опубликовать изменения**. 

    ![Панель мониторинга с метриками](media/app-insights-tutorial-dashboards/dashboard-03.png)


## <a name="metrics-explorer"></a>Обозреватель метрик
**Обозреватель метрик** аналогичен метрикам, хотя он предоставляет значительно больше дополнительных настроек при добавлении панели мониторинга.  Вариант, используемый для создания графа метрик, зависит от конкретных предпочтений и требований.

1. Выберите **Application Insights** в меню Azure, а затем выберите свое приложение.
1. Выберите **Обозреватель метрик**. 
2. Щелкните, чтобы изменить диаграмму и выбрать одну или несколько метрик и, при необходимости, подробную конфигурацию.  В примере показан график отслеживания среднего времени ответа страницы.
3. Щелкните значок закрепления справа вверху, чтобы добавить диаграмму на панель мониторинга, и перетащите ее в нужное место.

    ![Обозреватель метрик](media/app-insights-tutorial-dashboards/metrics-explorer.png)

4. Плитка обозревателя метрик предоставляет дополнительные настройки после добавления на панель мониторинга.  Щелкните правой кнопкой мыши плитку и выберите **Изменить заголовок**, чтобы добавить пользовательский заголовок.  При необходимости продолжайте и выполните другие настройки.

    ![Панель мониторинга с обозревателем метрик](media/app-insights-tutorial-dashboards/dashboard-04a.png)

5. Теперь диаграмма обозревателя метрик добавлена на панель мониторинга.

    ![Панель мониторинга с обозревателем метрик](media/app-insights-tutorial-dashboards/dashboard-04.png)

## <a name="add-analytics-query"></a>Добавление запроса аналитики
Аналитика Azure Application Insights предоставляет полнофункциональный язык запросов, позволяющий анализировать все данные, собранные Application Insights.  Так же, как диаграммы и другие представления, выходные данные запроса аналитики можно добавить на панель мониторинга.   

Так как Azure Applications Insights Analytics является отдельной службой, необходимо предоставить общий доступ к панели мониторинга для включения запросов Analytics.  При предоставлении общего доступа к панели мониторинга Azure она будет опубликована в качестве ресурса Azure, который может сделать ее доступной другим пользователям и ресурсам.  

1. В верхней части экрана панели мониторинга щелкните **Доступ**.

    ![Публикация панели мониторинга](media/app-insights-tutorial-dashboards/publish-dashboard.png)

2. Сохраните **имя панели мониторинга** без изменений и выберите **Имя подписки**, чтобы предоставить общий доступ к панели мониторинга.  Щелкните **Опубликовать**.  Панель мониторинга теперь доступна для других служб и подписок.  При необходимости можно задать определенных пользователей, которые будут иметь доступ к панели мониторинга.
1. Выберите **Application Insights** в меню Azure, а затем выберите свое приложение.
2. Нажмите кнопку **Аналитика** в верхней части экрана, чтобы открыть портал аналитики.

    ![Запуск аналитики](media/app-insights-tutorial-dashboards/start-analytics.png)

3. Введите следующий запрос, который возвращает 10 наиболее часто запрашиваемых страниц и их число запросов:

    ```
    requests
    | summarize count() by name
    | sort by count_ desc
    | take 10 
    ```

4. Щелкните **Вперед** для проверки результатов запроса.
5. Щелкните значок закрепления и выберите имя своей панели мониторинга.  Причина, по которой в этом варианте была выбрана панель мониторинга, в отличие от предыдущих шагов, когда использовалась последняя панель мониторинга, заключается в том, что консоль аналитики является отдельной службой и выбирает панель мониторинга из всех общедоступных.

    ![Закрепление запроса аналитики](media/app-insights-tutorial-dashboards/analytics-pin.png)

5. Прежде чем вернуться к панели мониторинга, добавьте другой запрос, но теперь отобразите его в виде диаграммы, чтобы видеть разные способы визуализации запроса аналитики на панели мониторинга.  Начните со следующего запроса, который обобщит 10 лучших операций с наибольшим количеством исключений.

    ```
    exceptions
    | summarize count() by operation_Name
    | sort by count_ desc
    | take 10 
    ```

6. Выберите **Диаграмма**, а затем измените ее на **Кольцевая**, чтобы визуализировать выходные данные.

    ![Диаграмма аналитики](media/app-insights-tutorial-dashboards/analytics-chart.png)

6. Щелкните значок закрепления, чтобы закрепить диаграмму на панели мониторинга, и в этот раз выберите ссылку для возвращения на панель мониторинга.
4. Теперь результаты запросов будут добавлены на панель мониторинга в выбранном формате.  Щелкните и перетащите каждый из них в нужное место и щелкните **Закончить редактирование**.
5. Щелкните правой кнопкой мыши каждую плитку и выберите **Изменить заголовок**, чтобы присвоить им описательный заголовок.

    ![Панель мониторинга с аналитикой](media/app-insights-tutorial-dashboards/dashboard-05.png)

5. Щелкните **Публикация изменений**, чтобы зафиксировать изменения на панели мониторинга, которая теперь включает различные диаграммы и визуализации из Application Insights.


## <a name="next-steps"></a>Дополнительная информация
Теперь, когда вы узнали, как создавать настраиваемые панели мониторинга, ознакомьтесь с остальной документацией по Application Insights, включая пример внедрения.

> [!div class="nextstepaction"]
> [Углубленная диагностика для веб-приложений и служб с помощью Application Insights](app-insights-devops.md)
