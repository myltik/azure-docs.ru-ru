---
title: "Исследование метрик в Application Insights | Документация Майкрософт"
description: "Способ интерпретации диаграмм в обозревателе метрик и настройки колонок обозревателя метрик."
services: application-insights
documentationcenter: 
author: alancameronwills
manager: douge
ms.assetid: 1f471176-38f3-40b3-bc6d-3f47d0cbaaa2
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 03/08/2017
ms.author: awills
translationtype: Human Translation
ms.sourcegitcommit: 8a531f70f0d9e173d6ea9fb72b9c997f73c23244
ms.openlocfilehash: ee759149df038ac08f0d5987c3577454a81999db
ms.lasthandoff: 03/10/2017


---
# <a name="exploring-metrics-in-application-insights"></a>Исследование метрик в Application Insights
Метрики в [Application Insights][start] — это измеренные значения и счетчики событий, которые передаются как данные телеметрии из приложения. Они помогают обнаруживать проблемы производительности и отслеживать тенденции в использовании приложения. Существует широкий спектр стандартных метрик, и можно также создавать собственные пользовательские метрики и события.

Метрики и счетчики событий отображаются в диаграммах агрегированных значений, например как сумма, среднее или количество.

Вот пример набора диаграмм:

![](./media/app-insights-metrics-explorer/01-overview.png)

Диаграммы метрик повсеместно используются на портале Application Insights. В большинстве случаев их можно настраивать, а также добавлять в колонку дополнительные диаграммы. В колонке "Обзор" щелкните более подробные диаграммы (которые имеют заголовки, такие как "Сервер") или воспользуйтесь **обозревателем метрик**, чтобы открыть новую колонку, в которой можно создавать настраиваемые диаграммы.

## <a name="time-range"></a>Диапазон времени
В любой колонке можно изменить диапазон времени, охватываемый диаграммами или сетками.

![Откройте колонку обзора приложения на портале Azure](./media/app-insights-metrics-explorer/03-range.png)

Если ожидаются некоторые данные, которые еще не отобразились, нажмите кнопку "Обновить". Диаграммы самостоятельно обновляются через определенные интервалы, однако интервалы становятся длиннее при использовании более крупных временных отрезков. Может потребоваться некоторое время, чтобы данные были переданы через конвейер анализа в диаграмму.

Чтобы увеличить часть диаграммы, перетащите ее:

![Перетащите часть диаграммы.](./media/app-insights-metrics-explorer/12-drag.png)

Чтобы восстановить первоначальный масштаб, нажмите кнопку Undo Zoom (Отменить изменение масштаба).

## <a name="granularity-and-point-values"></a>Детализация и значения точек
Наведите указатель мыши на диаграммы для отображения значений метрик в той точке.

![Наведите указатель мыши на диаграмму](./media/app-insights-metrics-explorer/02-focus.png)

Значение метрики в определенной точке определяется как результат статистического вычисления за предыдущий интервал выборки.

Интервал выборки, или «степень детализации», отображается в верхней части колонки.

![Заголовок колонки.](./media/app-insights-metrics-explorer/11-grain.png)

Степень детализации можно настроить в колонке временного диапазона:

![Заголовок колонки.](./media/app-insights-metrics-explorer/grain.png)

Доступные степени детализации зависят от выбранного интервала времени. Вместо автоматической степени детализации для интервала времени можно выбрать явную степень детализации.


## <a name="editing-charts-and-grids"></a>Изменение диаграмм и сеток
Добавление новой диаграммы в колонку:

![В обозревателе метрик выберите "Добавить диаграмму"](./media/app-insights-metrics-explorer/04-add.png)

Вы можете **изменить** существующую или создать новую диаграмму для редактирования отображаемых данных.

![Выберите одну или несколько метрик](./media/app-insights-metrics-explorer/08-select.png)

Можно отобразить более одной метрики на диаграмме, хотя существуют ограничения по сочетаниям, которые могут отображаться одновременно. Когда выбрана одна метрика, некоторые другие становятся недоступными.

Если [пользовательские метрики][track] были добавлены в код приложения (вызовы TrackMetric и TrackEvent), то они будут перечислены здесь.

## <a name="segment-your-data"></a>Сегментация данных
Можно разделить метрику по свойствам — например, для сравнения просмотров страниц на клиентах с разными операционными системами.

Выберите диаграмму или сетку, переключитесь на группировку и выберите свойство для группировки:

![Выберите "Объекты группировки", затем выберите свойство в списке "Группировать по"](./media/app-insights-metrics-explorer/15-segment.png)

> [!NOTE]
> При использовании группирования диаграммы с областями и линейчатые диаграммы отображают данные с накоплением. Это удобно, когда методом агрегирования является "Сумма". Но если методом агрегирования является "Среднее", выберите отображение линий или сетки.
>
>

Если [пользовательские метрики][track] были добавлены в код приложения и включают значения свойств, то в списке можно будет выбрать соответствующее свойство.

Диаграмма слишком мала для сегментации данных? Измените ее высоту:

![Отрегулируйте положение ползунка](./media/app-insights-metrics-explorer/18-height.png)

## <a name="aggregation-types"></a>Типы агрегата
В условных обозначениях сбоку по умолчанию отображается значение, вычисленное для периода диаграммы. При наведении указателя мыши на какую-либо точку диаграммы отображается значение в этой точке.

Каждая точка данных на диаграмме вычисляется на основе значений данных, полученных на предыдущем интервале выборки (степени детализации). Степень детализации отображается в верхней части колонки и зависит от общей шкалы времени диаграммы.

Метрики можно вычислять различными способами.

* **Count** — счетчик событий, полученных в интервале выборки. Используется для событий, таких как запросы. Изменения высоты диаграммы указывают на изменения частоты, с которой происходят события. Но обратите внимание, что числовое значение изменяется при изменении интервала выборки.
* **Сумма** : суммирование значений всех точек данных, полученных в течение интервала выборки (периода диаграммы).
* **Среднее** : деление значения "Сумма" на количество точек данных, полученных в течение интервала.
* **Уникальные** : использование счетчиков для подсчета количества пользователей и учетных записей. На рисунке показано количество различных пользователей, обнаруженных в течение интервала выборки (периода диаграммы).
* **%** — версии со значением каждого агрегата в процентах применяются только в сегментированных диаграммах. Общее значение всегда равно 100 %, а на диаграмме отображается относительный вклад каждого компонента.

    ![Процентный агрегат](./media/app-insights-metrics-explorer/percentage-aggregation.png)

### <a name="change-the-aggregation-type"></a>Изменение типа агрегата

![Измените диаграмму, а затем выберите агрегат](./media/app-insights-metrics-explorer/05-aggregation.png)

При создании диаграммы или при отмене выбора всех метрик отображается метод по умолчанию для каждой метрики.

![Отмените выбор всех метрик, чтобы отобразить значения по умолчанию.](./media/app-insights-metrics-explorer/06-total.png)

## <a name="pin-y-axis"></a>Закрепление оси Y 
По умолчанию на диаграмме отображаются значения оси Y от нуля до максимального значения в диапазоне данных, чтобы наглядно представить квант времени значений. Но в некоторых случаях незначительные изменения в значениях могут представлять больший интерес для исследования, чем весь квант времени. Для подобных настроек используется функция изменения диапазона оси Y, позволяющая закрепить ее минимальное или максимальное значение в нужном месте.
Установите флажок "Дополнительные параметры", чтобы открыть параметры диапазона оси Y.

![Щелкните "Дополнительные параметры", выберите "Настраиваемый диапазон" и укажите минимальное и максимальное значения.](./media/app-insights-metrics-explorer/y-axis-range.png)

## <a name="filter-your-data"></a>Фильтрация данных
Просмотр метрик только для выбранного набора значений свойства

![Щелкните "Фильтр", разверните свойство и проверьте некоторые значения](./media/app-insights-metrics-explorer/19-filter.png)

Если не выбирать какие-либо значения для конкретного свойства, это будет аналогично выбору их всех: нет фильтра по этому свойству.

Обратите внимание на счетчики событий рядом с каждым значением свойства. При выборе значений одного свойства счетчики, находящиеся рядом со значениями других свойств, корректируются.

Фильтры применяются ко всем диаграммам в колонке. Если требуется применить разные фильтры к различным диаграммам, отдельно создайте и сохраните соответствующие колонки метрик. Если необходимо, вы можете закрепить диаграммы из разных колонок на панели мониторинга, чтобы их можно было видеть вместе.

### <a name="remove-bot-and-web-test-traffic"></a>Исключение программ-роботов и веб-тест трафика
Используйте фильтр **Реальный или искусственный трафик** и установите флажок **Реальный**.

Также можно фильтровать по **источнику искусственного трафика**.

### <a name="to-add-properties-to-the-filter-list"></a>Добавление свойств в список фильтров
Вам необходимо фильтровать данные телеметрии по выбранным вами категориям? Например, вы распределили пользователей по различным категориям и хотели бы сегментировать данные по этим категориям.

[Создайте собственное свойство](app-insights-api-custom-events-metrics.md#properties). Задайте его в [инициализаторе телеметрии](app-insights-api-custom-events-metrics.md#defaults) , чтобы оно было включено во все данные телеметрии, включая стандартные данные телеметрии, отправляемые различными модулями SDK.

## <a name="edit-the-chart-type"></a>Изменение типа диаграммы
Обратите внимание, что можно переключаться между сетками и диаграммами.

![Выберите сетку или диаграмму, затем выберите тип диаграммы](./media/app-insights-metrics-explorer/16-chart-grid.png)

## <a name="save-your-metrics-blade"></a>Сохранение колонки метрик
После создания диаграммы ее можно сохранить в список избранного. При использовании учетной записи организации можно выбрать, будут ли другие члены команды иметь к ней доступ.

![Выберите "Избранное"](./media/app-insights-metrics-explorer/21-favorite-save.png)

Чтобы снова увидеть эту колонку, **перейдите в колонку "Обзор"** и откройте "Избранное":

![В колонке "Обзор" выберите "Избранное"](./media/app-insights-metrics-explorer/22-favorite-get.png)

Если выбрать относительный диапазон времени при сохранении, колонка будет обновлена с использованием последних метрик. Если выбрать абсолютного диапазона времени, каждый раз будут отображаться те же данные.

## <a name="reset-the-blade"></a>Сброс настроек колонки
Если после изменения колонки требуется вернуться к исходному  сохраненному набору параметров, просто нажмите кнопку сброса.

![В кнопках верхней части обозревателя метрик](./media/app-insights-metrics-explorer/17-reset.png)

## <a name="live-metrics-stream"></a>Live Metrics Stream

Чтобы получить мгновенное представление телеметрии, откройте [Live Stream](app-insights-live-stream.md). Отображение большинства метрик занимает несколько минут из-за процесса агрегирования. В противоположность этому динамические метрики оптимизированы для отображения с малой задержкой. 

## <a name="set-alerts"></a>Задание предупреждений
Чтобы получать уведомления по электронной почте о нетипичных значениях любой метрики, добавьте предупреждение. Можно выбрать отправку либо по электронной почте администраторам учетной записи, либо на указанный электронный адрес.

![В обозревателе метрик выберите последовательно «Правила предупреждений», «Добавить предупреждение»](./media/app-insights-metrics-explorer/appinsights-413setMetricAlert.png)

[Дополнительные сведения об оповещениях][alerts].


## <a name="continuous-export"></a>Непрерывный экспорт
Если необходимо постоянно экспортировать данные для внешней обработки, используйте [непрерывный экспорт](app-insights-export-telemetry.md).

### <a name="power-bi"></a>Power BI
Если вам нужны представления данных с еще большими возможностями, данные можно [экспортировать в Power BI](http://blogs.msdn.com/b/powerbi/archive/2015/11/04/explore-your-application-insights-data-with-power-bi.aspx).

## <a name="analytics"></a>Аналитика
[Аналитика](app-insights-analytics.md) является более гибким способом анализа телеметрии с помощью мощного языка запросов. Используйте ее, если требуется объединить или вычислить результаты метрик либо тщательно изучить последние данные производительности приложения. 

На диаграмме с метриками можно щелкнуть значок "Аналитика", чтобы перейти непосредственно к эквивалентному запросу "Аналитика".

## <a name="troubleshooting"></a>Устранение неполадок
*Данные не отображаются на диаграмме.*

* Фильтры применяются ко всем диаграммам в колонке. Убедитесь, что, рассматривая какую-либо диаграмму, вы не задали фильтр, исключающий все данные на другой диаграмме.

    Если вы хотите задать разные фильтры для различных диаграмм, создайте их на разных колонках и по отдельности сохраните в избранное. Если необходимо, вы можете закрепить их на панели мониторинга, чтобы их можно было видеть вместе.
* Если сгруппировать диаграмму по свойству, которое не определено в метрике, то на диаграмме ничего не отобразится. Попробуйте убрать группировку или выберите другое свойство для группировки.
* Данные о производительности (ЦП, скорость ввода-вывода и т. д.) доступны для веб-служб Java, классических приложений Windows, [веб-приложений и служб IIS, если установлен монитор состояния](app-insights-monitor-performance-live-website-now.md), а также [облачных служб Azure](app-insights-azure.md). Такие данные для веб-сайтов Azure недоступны.

## <a name="next-steps"></a>Дальнейшие действия
* [Отслеживание использования Application Insights.](app-insights-overview-usage.md)
* [Использование диагностического поиска](app-insights-diagnostic-search.md)

<!--Link references-->

[alerts]: app-insights-alerts.md
[start]: app-insights-overview.md
[track]: app-insights-api-custom-events-metrics.md

