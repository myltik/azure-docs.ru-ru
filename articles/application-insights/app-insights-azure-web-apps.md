---
title: Мониторинг производительности веб-приложения Azure | Документация Майкрософт
description: Мониторинг производительности веб-приложений Azure. Диаграммы времени загрузки и ответа, информация о зависимостях и настройка оповещений о производительности.
services: application-insights
documentationcenter: .net
author: mrbullwinkle
manager: carmonm
ms.assetid: 0b2deb30-6ea8-4bc4-8ed0-26765b85149f
ms.service: application-insights
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/05/2017
ms.author: mbullwin
ms.openlocfilehash: 9de6ca48db98d7691310199b90bf7414f07547fd
ms.sourcegitcommit: d78bcecd983ca2a7473fff23371c8cfed0d89627
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2018
---
# <a name="monitor-azure-web-app-performance"></a>Мониторинг производительности веб-приложения Azure
На [портале Azure](https://portal.azure.com) можно настроить мониторинг производительности [веб-приложений Azure](../app-service/app-service-web-overview.md). [Azure Application Insights](app-insights-overview.md) инструментируют ваше приложение для отправки данных телеметрии о действиях в службу Application Insights, где эти данные хранятся и анализируются. В этой службе диаграммы метрик и инструменты поиска могут использоваться для диагностики неисправностей, улучшения производительности и анализа использования приложения.

## <a name="run-time-or-build-time"></a>Инструментирование во время выполнения и во время сборки
Вы можете настроить параметры мониторинга с помощью инструментирования приложения одним из следующих способов:

* **Во время выполнения.** Вы можете добавить расширение для мониторинга производительности уже во время работы вашего веб-приложения. Для этого не обязательно выполнять повторную сборку или установку приложения. Вы получаете стандартный набор пакетов для отслеживания времени отклика, частоты успешных выполнений, исключений, зависимостей и т. д. 
* **Во время сборки.** Вы можете добавить пакет в код своего приложения на этапе разработки. Этот способ является более гибким решением. Помимо установки стандартных пакетов, вы можете написать код для настройки данных телеметрии либо для отправки пользовательской телеметрии. Вы можете вести журнал действий или регистрировать события в соответствии с семантикой домена вашего приложения. 

## <a name="run-time-instrumentation-with-application-insights"></a>Инструментирование во время выполнения с помощью Application Insights
Если вы уже используете веб-приложения в Azure, то наверняка получили определенные сведения мониторинга, касающиеся частоты запросов и ошибок. Добавьте Application Insights, чтобы получить дополнительные сведения и возможности, такие как время отклика, мониторинг вызовов зависимостей, интеллектуальное обнаружение и мощный язык запросов Log Analytics. 

1. На панели управления Azure **выберите Application Insights** для веб-приложения.
   
    ![В разделе "Мониторинг" выберите пункт Application Insights](./media/app-insights-azure-web-apps/05-extend.png)
   
   * Нажмите переключатель "Создать новый ресурс", если вы еще не настроили ресурс Application Insights для этого приложения другим способом.
2. **Выполните инструментирование веб-приложения** после установки Application Insights. 
   
    ![Инструментирование веб-приложения](./media/app-insights-azure-web-apps/restart-web-app-for-insights.png)

   **Включите мониторинг на стороне клиента** для получения сведений о просмотрах страниц и данных телеметрии пользователя.

   * Выберите элементы "Параметры > Параметры приложения".
   * В разделе "Параметры приложения" добавьте новую пару "ключ — значение": 
   
    Ключ: `APPINSIGHTS_JAVASCRIPT_ENABLED`. 
    
    Значение: `true`
   * **Сохраните** параметры и **перезапустите** приложение.
3. **Отслеживайте работу приложения**.  [Просмотрите данные](#explore-the-data).

Позже при необходимости можно создать приложение с помощью Application Insights.

*Как удалить Application Insights или отправлять данные на другой ресурс?*

* Откройте колонку управления веб-приложением в Azure и в категории "Средства разработки" выберите **Расширения**. Удалите расширение Application Insights. Затем в разделе "Мониторинг" выберите пункт Application Insights и создайте или выберите нужный ресурс.

## <a name="build-the-app-with-application-insights"></a>Создание приложения с поддержкой Application Insights
Установите пакет SDK в свое приложение, чтобы воспользоваться более подробными сведениями телеметрии Application Insights. В частности, можно собирать журналы трассировки, [написать код пользовательской телеметрии](app-insights-api-custom-events-metrics.md) и получать более подробные отчеты об исключениях.

1. **В Visual Studio** (2013 года с обновлением 2 или более поздней версии) настройте Application Insights для проекта.

    Щелкните веб-проект правой кнопкой мыши и выберите **Добавить > Application Insights** или **Настроить Application Insights**.
   
    ![Щелкните правой кнопкой мыши веб-проект и выберите добавление или настройку Application Insights.](./media/app-insights-azure-web-apps/03-add.png)
   
    Если отобразится предложение войти, воспользуйтесь данными вашей учетной записи Azure.
   
    Операция выполняет два действия:
   
   1. Создает ресурс Application Insights, в котором выполняется отображение, хранение и анализ данных телеметрии.
   2. Добавляет пакет NuGet Application Insights в код (если его еще нет) и настраивает его для отправки данных телеметрии в ресурс Azure.
2. **Проверьте данные телеметрии**, запустив приложение на компьютере разработки (F5).
3. **Опубликуйте приложение** в Azure обычным способом. 

*Как отправлять данные на другой ресурс Application Insights?*

* В Visual Studio щелкните проект правой кнопкой мыши, выберите **Настроить Application Insights**, а затем выберите нужный ресурс. После этого вы сможете создать, заново собрать или повторно развернуть ресурс.

## <a name="explore-the-data"></a>Просмотр данных
1. На панели управления веб-приложения в колонке Application Insights отображаются динамические метрики со сведениями о количестве сбоев и запросов в секунду (или несколько секунд). Эти отображаемые данные очень полезны в случае повторной публикации приложения, так как любые проблемы можно увидеть немедленно.
2. Щелкните для перехода к полному представлению ресурса Application Insights.

    ![Щелкните](./media/app-insights-azure-web-apps/view-in-application-insights.png)

    Вы также можете перейти непосредственно по ссылке из ресурсов навигации Azure.

1. Щелкните любую диаграмму, чтобы получить более подробные сведения.
   
    ![В колонке "Обзор" Application Insights щелкните диаграмму](./media/app-insights-azure-web-apps/07-dependency.png)
   
    Вы можете [настроить колонки метрик](app-insights-metrics-explorer.md).
2. Вы можете щелкнуть отдельные события, чтобы просмотреть сведения о них и их свойства.
   
    ![Щелкните тип события, по которому нужно отфильтровать результаты поиска](./media/app-insights-azure-web-apps/08-requests.png)
   
    Если щелкнуть знак многоточия, откроются все свойства.
   
    Вы можете [настроить поисковые запросы](app-insights-diagnostic-search.md).

Для более эффективного поиска по данным телеметрии используйте [язык запросов Log Analytics](app-insights-analytics-tour.md).

## <a name="more-telemetry"></a>Дополнительные данные телеметрии

* [Данные о загрузке веб-страницы](app-insights-javascript.md)
* [Пользовательская телеметрия](app-insights-api-custom-events-metrics.md)

## <a name="video"></a>Видео

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a>Дополнительная информация
* [Запуск профилировщика в живом приложении](app-insights-profiler.md).
* [Функции Azure.](https://github.com/christopheranderson/azure-functions-app-insights-sample) Отслеживайте функции Azure с помощью Application Insights.
* [Включите отправку данных диагностики Azure](app-insights-azure-diagnostics.md) в Application Insights.
* [Отслеживайте метрики состояния службы](../monitoring-and-diagnostics/insights-how-to-customize-monitoring.md), чтобы убедиться, что служба доступна и отвечает на запросы.
* [Получайте уведомления](../monitoring-and-diagnostics/insights-receive-alert-notifications.md) при возникновении операционных событий или превышении пороговых значений метрик.
* Используйте [расширение Application Insights для приложений JavaScript и веб-страниц](app-insights-javascript.md), чтобы получать данные телеметрии клиентов из браузеров, которые используются для открытия веб-страницы.
* [Настройте веб-тесты доступности](app-insights-monitor-web-app-availability.md), чтобы получать уведомления о сбоях в работе сайта.

