.<properties 
	pageTitle="Интеграция SCOM с Application Insights | Microsoft Azure" 
	description="Если вы используете SCOM, примените Application Insights для мониторинга производительности и диагностики. Подробные панели мониторинга, смарт-оповещения, мощные средства диагностики и аналитические запросы." 
	services="application-insights" 
    documentationCenter=""
	authors="alancameronwills" 
	manager="douge"/>

.<tags 
	ms.service="application-insights" 
	ms.workload="tbd" 
	ms.tgt_pltfrm="ibiza" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="08/12/2016" 
	ms.author="awills"/>
 
# Мониторинг производительности приложений с помощью Application Insights для SCOM

Если для управления серверами вы используете System Center Operations Manager (SCOM), мониторинг производительности и диагностику проблем можно выполнять с помощью [Visual Studio Application Insights](app-insights-asp-net.md). Application Insights отслеживает входящие запросы вашего веб-приложения, исходящие вызовы REST и SQL, а также исключения и трассировку журналов. Вы можете использовать панели мониторинга с диаграммами метрик и смарт-оповещениями, а также мощные средства диагностического поиска и аналитических запросов для работы с данными телеметрии.

Мониторинг Application Insights можно включить с помощью пакета управления SCOM.

## Перед началом работы

Предполагается следующий сценарий:

* Вы уже знакомы с SCOM и используете SCOM 2012 R2 или 2016 для управления веб-серверами IIS.
* Вы уже установили на серверах веб-приложение, которое будет отслеживаться средствами Application Insights.
* Используется платформа .NET версии 4.5 и выше.
* У вас есть подписка [Microsoft Azure](https://azure.com) и доступ к [порталу Azure](https://portal.azure.com). Если у вашей организации есть такая подписка, вы можете добавить к ней свою учетную запись Майкрософт.

(Команда разработчиков может встроить в веб-приложение [пакет SDK Application Insights](app-insights-asp-net.md). Этот инструментарий, подключаемый во время сборки, делает процесс написания пользовательской телеметрии более гибким. Но это необязательно: описанные здесь действия можно выполнять как с установленным пакетом SDK, так и без него.)

## (Однократно) Установка пакета управления Application Insights

Выполните эти действия на компьютере, на котором выполняется Operations Manager.

2. Удалите все старые версии пакета управления.
 1. В Operations Manager откройте меню "Администрирование", щелкните "Пакеты управления".
 2. Затем удалите старую версию.
1. Загрузите из каталога и установите пакет управления.
2. Перезапустите Operations Manager.


## Создание пакета управления

1. В Operations Manager откройте **Разработка**, **.NET...with Application Insights** (.NET... с Application Insights), **Мастер добавления объекта мониторинга**, а затем снова выберите **.NET...with Application Insights** (.NET... с Application Insights).

    .![](./media/app-insights-scom/020.png)

2. Присвойте конфигурации имя, соответствующее вашему приложению. (Инструментарий добавляется отдельно для каждого приложения.)
    
    ![](./media/app-insights-scom/030.png)

3. На той же странице мастера создайте новый пакет управления или выберите пакет, созданный ранее для Application Insights.

     ([Пакет управления](https://technet.microsoft.com/library/cc974491.aspx) Application Insights — это шаблон, на основе которого можно создать экземпляр. Этот экземпляр затем можно использовать повторно.)


    .![На вкладке "Общие свойства" введите имя приложения. Нажмите кнопку "Создать" и введите имя пакета управления. Нажмите кнопку "ОК", а затем — "Далее".](./media/app-insights-scom/040.png)

4. Выберите одно приложение, которое будет отслеживаться. Функция поиска помогает найти нужное приложение среди установленных на ваших серверах.

    ![На вкладке "What to Monitor" (Что отслеживать) нажмите кнопку "Добавить", затем введите часть имени приложения, нажмите "Поиск", выберите нужное приложение и нажмите "Добавить", а затем щелкните "ОК".](./media/app-insights-scom/050.png)

    Необязательное поле "Область мониторинга" позволяет указать подмножество серверов, если вы хотите отслеживать приложение не на всех серверах.

5. На следующей странице мастера введите учетные данные для входа в Microsoft Azure.

    На этой странице выберите ресурс Application Insights, на котором будут анализироваться и отображаться данные телеметрии.

 * Если при разработке приложение было настроено для использования с Application Insights, выберите существующий ресурс.
 * В противном случае создайте ресурс с именем приложения. Если система состоит из нескольких приложений, поместите эти приложения в одну группу ресурсов, чтобы вам было удобнее управлять доступом к телеметрии.

    Эти параметры можно изменить позже.

    .![На вкладке параметров Application Insights нажмите кнопку "Войти" и укажите учетные данные учетной записи Майкрософт для Azure. Затем выберите подписку, группу ресурсов и ресурс.](./media/app-insights-scom/060.png)

6. Завершите работу мастера.

    .![Нажмите кнопку "Создать"](./media/app-insights-scom/070.png)
    
Повторите эту процедуру для каждого приложения, которое нужно отслеживать.

Если позже вы захотите изменить эти параметры, снова откройте окно свойств монитора из окна "Разработка".

![В разделе "Создание" выберите ".NET Application Performance Monitoring with Application Insights" (Мониторинг производительности приложений .NET с помощью Application Insights), укажите монитор и щелкните "Свойства".](./media/app-insights-scom/080.png)

## Проверка мониторинга

Установленный монитор будет искать нужное приложение на всех серверах. Найдя приложение, он настроит монитор состояний Application Insights для отслеживания приложения. При необходимости монитор состояния сначала будет установлен на сервере.

Вы можете проверить, какие экземпляры приложения были найдены:

![В разделе "Мониторинг" откройте Application Insights.](./media/app-insights-scom/100.png)


## Просмотр данных телеметрии в Application Insights

На [портале Azure](https://portal.azure.com) перейдите к ресурсу для вашего приложения. Вы увидите [диаграммы телеметрии](app-insights-dashboards.md) для этого приложения. (Если они еще не отображаются на главной странице, щелкните "Live Metrics Stream" (Динамический поток метрик).)


## Дальнейшие действия

* [Настройка панели мониторинга](app-insights-dashboards.md) для объединения важнейших диаграмм мониторинга этого и других приложений.
* [Дополнительная информация о метриках](app-insights-metrics-explorer.md)
* [Настройка оповещений](app-insights-alerts.md)
* [Диагностика проблем с производительностью](app-insights-detect-triage-diagnose.md)
* [Мощные аналитические запросы](app-insights-analytics.md)
* [Доступность веб-тестов](app-insights-monitor-web-app-availability.md)

<!---HONumber=AcomDC_0817_2016-->