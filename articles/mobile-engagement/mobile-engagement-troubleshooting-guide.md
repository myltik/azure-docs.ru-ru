---
title: Руководства по устранению неполадок в Службах мобильного взаимодействия Azure
description: Руководство по устранению неполадок в Службах мобильного взаимодействия Azure
services: mobile-engagement
documentationcenter: ''
author: piyushjo
manager: erikre
editor: ''
ms.assetid: 31134a29-a513-4e5e-b626-f6cf6fe04769
ms.service: mobile-engagement
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: mobile-multiple
ms.workload: mobile
ms.date: 08/19/2016
ms.author: piyushjo
ms.openlocfilehash: 1242b2b796821856561a82d4a585b26693aadadd
ms.sourcegitcommit: 34e0b4a7427f9d2a74164a18c3063c8be967b194
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2018
---
# <a name="azure-mobile-engagement---troubleshooting-guide"></a>Руководство по устранению неполадок Служб мобильного взаимодействия Azure
> [!IMPORTANT]
> Срок действия Служб мобильного взаимодействия истекает 31.03.2018. Вскоре после этого страница будет удалена.
> 

## <a name="introduction"></a>Введение
Это руководство по устранению неполадок поможет вам найти причины некоторых наиболее распространенных проблем и устранить их самостоятельно. 

## <a name="general"></a>Общие сведения
В общем, следует проверить следующее.

1. Убедитесь, что вы выполнили все необходимые для интеграции шаги, приведенные в наших [руководствах по началу работы](mobile-engagement-windows-store-dotnet-get-started.md)
2. Вы используете последнюю версию платформ SDK. 
3. Тестирование выполняется на настоящем устройстве и эмуляторе, так как некоторые проблемы характерны только для эмулятора. 
4. Вы не нарушаете никакие ограничения и регулирования Служб мобильного взаимодействия, приведенные [здесь](../azure-subscription-service-limits.md)
5. Если не удается подключиться к серверной части Служб мобильного взаимодействия или какие-либо данные никак не получается скачать, убедитесь в отсутствии текущих проблем со службами [здесь](https://azure.microsoft.com/status/)

## <a name="monitor-issues"></a>Проблемы на вкладке «Монитор»
### <a name="i-am-not-seeing-my-device-showing-up-on-the-monitor-tab"></a>Мое устройство не отображается на вкладке «Монитор»
На вкладке «Монитор» в режиме реального времени отображаются устройства, подключенные к вашей платформе Служб мобильного взаимодействия. Во время отладки на эмуляторе и устройстве вы должны видеть здесь по крайней мере один сеанс. Если приложение распределено, вы увидите датчик активных сеансов с отображением устройств, которые подключены к платформе, в режиме реального времени. 

Если же вы не видите свое устройство на вкладке «Монитор», проблема, скорее всего, связана с интеграцией пакета SDK. Ниже приведены некоторые основные действия по устранению неполадок.

1. Убедитесь, что в мобильном приложении используется правильная строка подключения из раздела ключей пакета SDK, а не раздела ключей API. Строка подключения подключает мобильное приложение к экземпляру приложения Служб мобильного взаимодействия, в котором вы увидите свое устройство на вкладке «Монитор». 
2. Если во время работы на платформе Windows страница переопределяет метод `OnNavigatedTo`, необходимо обязательно вызвать `base.OnNavigatedTo(e)`.
3. Если Службы мобильного взаимодействия интегрируются в существующее мобильное приложение, убедитесь, что вы не пропустили ни одного из необходимых дополнительных шагов интеграции, приведенных [здесь](mobile-engagement-windows-store-integrate-engagement.md)
4. Не забудьте отправить по крайней мере один экран или действие посредством переопределения страницы с EngagementActivity в зависимости от вашей рабочей платформы. Дополнительные сведения см. в статье [Приступая к работе с Azure Mobile Engagement для универсальных приложений для Windows](mobile-engagement-windows-store-dotnet-get-started.md).

### <a name="i-am-seeing-the-monitor-tab-showing-a-session-even-when-i-have-disconnected-or-closed-my-app-emulator"></a>Я вижу вкладку «Монитор» с отображением сеанса даже после отключения или закрытия приложения или эмулятора
Если в данный момент к платформе подключены только вы и вы открываете приложение с помощью эмулятора, скорее всего, таковы особенности его работы. В общем, сеанс приложения всегда нужно отключать на начальном экране приложения в эмуляторе. Кроме того, на платформе Windows во время отладки в Visual Studio может потребоваться перейти в меню **События жизненного цикла** и щелкнуть **Приостановить**, чтобы действительно закрыть сеанс. Дополнительные сведения см. в статье [Приступая к работе с Azure Mobile Engagement для универсальных приложений для Windows](mobile-engagement-windows-store-dotnet-get-started.md). 

## <a name="analytics-issues"></a>Проблемы на вкладке «Аналитика»
### <a name="i-am-not-seeing-any-data-refreshed-data-on-analytics-tab"></a>На вкладке «Аналитика» не отображаются данные (или обновленные данные)
Данные аналитики регулярно пересчитываются, и их обновление может длиться до 24 часов. Эти данные не подаются в режиме реального времени. Они обновляются раз в сутки и отображают 24-часовой период времени.
Тем не менее не забудьте отправить хотя бы один экран или действие на сервер платформы посредством переопределения по крайней мере одной страницы с `EngagementActivity` или явным вызовом `SendActivity`. 

### <a name="i-am-seeing-incorrectly-captured-datetime-for-a-device-on-the-analytics-tab"></a>Неправильные дата и время устройства на вкладке «Аналитика»
Период времени для аналитики основан на дате из параметров устройства пользователя. Поэтому убедитесь, что дата на устройстве установлена правильно. 

## <a name="segment-issues"></a>Проблемы, связанные с сегментом
### <a name="i-created-a-segment-and-it-is-showing-up-as-greyed-out-or-not-showing-any-data"></a>После создания сегмент отображается серым (является неактивным) или данные совсем не отображаются
В данный момент сегмент не создается в режиме реального времени. Он вычисляется одновременно со сбором данных аналитики, поэтому этот процесс может занять до 24 часов. Следовательно, сегмент будет создан позже. Тем временем следует убедиться, что мобильные приложения на самом деле отправляют данные, на основании которых создаются сегменты. (например, Если, допустим, событие foo не отправлено ни одним мобильным устройством, не будет никаких данных для создания сегмента с помощью EventName = foo в качестве критерия. Кроме этого, проверьте интеграцию SDK, чтобы убедиться, что мобильное приложение отправляет данные правильно. 

## <a name="reach-or-push-notifications-issues"></a>Проблемы, связанные с вкладкой «Охват» или push-уведомлениями
### <a name="my-push-messages-are-not-being-delivered"></a>Мои push-уведомления не доставляются
1. Сначала попробуйте отправить уведомления на тестовое устройство. Так вы убедитесь, что все компоненты (мобильное приложение, пакет SDK и служба) подключены правильно и могут доставлять push-уведомления. 
2. Сначала всегда отправляйте простое «уведомление вне приложения» через незапланированную кампанию без задания каких-либо критериев для аудитории. Так вы убедитесь, что подключение для отправки уведомлений работает правильно. 
3. Если возникают проблемы с доставкой уведомлений в приложении, следует попробовать отправить уведомление вне приложения. 
4. Убедитесь, что системные push-уведомления для мобильного приложения настроены правильно. В зависимости от используемой платформы требуются ключи (Android, Windows) или сертификаты (iOS). См. статью [Управление глобальными параметрами приложения](mobile-engagement-user-interface-settings.md).
5. Уведомления вне приложения может заблокировать пользователь с помощью мобильной ОС. Убедитесь, что они не заблокированы. 
6. Убедитесь, что не установлен параметр *Ignore Audience, push will be sent to users via the API* (Не учитывать аудиторию, push-уведомления будут отправляться пользователям через API) в разделе **Кампания** рекламной кампании. Иначе push-уведомления смогут отправляться только через API. 
7. Обязательно протестируйте кампанию push-уведомлений на устройстве, когда оно подключено через Wi-Fi и сеть мобильного оператора, чтобы исключить сетевое подключение как возможный источник проблем.
8. Убедитесь, что системные дата и время на вашем устройстве или эмуляторе установлены правильно, так как любое несинхронизированное устройство также будет препятствовать доставке уведомлений службой push-уведомлений. 

Дополнительные инструкции по устранению неполадок на конкретной платформе приведены ниже.

1. **iOS** 
   
   * Убедитесь, что сертификаты для push-уведомлений iOS являются действительными и действующими. 
   * Убедитесь, что сертификат *Рабочая среда* в приложении Служб мобильного взаимодействия настроен правильно. 
   * Убедитесь, что тестирование выполняется на *реальном физическом устройстве*. Симулятор iOS не может обрабатывать push-сообщения.
   * Убедитесь, что идентификатор пакета в мобильном приложении настроен правильно. Следуйте приведенным [здесь](https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html#//apple_ref/doc/uid/TP40012582-CH26-SW6)
   * При тестировании используйте параметр распространения «Ad Hoc» в профиле подготовки мобильных устройств. Вы не сможете получать уведомления, если приложение будет скомпилировано с помощью параметра «Debug».
2. **Android**
   
   * Убедитесь, что указан правильный номер проекта в файле AndroidManifest.xml мобильного приложения, за которым следует символ \n. 
     
           <meta-data android:name="engagement:gcm:sender" android:value="************\n" />
   * Убедитесь, что в файле манифеста Android есть все разрешения и они правильно настроены. 
   * Убедитесь, что номер проекта, добавляемый в клиентское приложение, из той же учетной записи, из которой взят ключ сервера GCM. Если это разные учетные записи, это помешает отправке ваших push-уведомлений. 
   * Если вы получаете системные уведомления, но не получаете уведомления в приложении, см. статью [Приступая к работе с Azure Mobile Engagement для приложений Android](mobile-engagement-android-get-started.md). Скорее всего, вы выбираете неправильный значок в файле манифеста Android. 
   * Если вы отправляете уведомление BigPicture, при наличии серверов внешних изображений убедитесь, что они поддерживают HTTP-запросы GET и HEAD.
3. **Windows**
   
   * Убедитесь, что приложение связано с допустимым приложением Магазина Windows. В Visual Studio щелкните правой кнопкой мыши проект и выберите параметр «Связать приложение с Магазином», а затем выберите приложение, созданное в Магазине Windows. Это должно быть приложение Магазина Windows, из которого взяты учетные данные системных push-уведомлений для настройки на портале Служб мобильного взаимодействия.
   * Если вы получаете push-уведомления из-за пределов приложения, но не получаете уведомления в приложении с интеграцией `EngagementOverlay`, убедитесь в наличии корневого элемента Grid на странице. EngagementOverlay использует первый элемент Grid, найденный в XAML-файле, для добавления двух веб-представлений на страницу. Расположение веб-представлений можно определить, задав сетку с именем EngagementGrid, как показано в примере ниже. Тем не менее необходимо убедиться, что высоты и ширины достаточно для расположения двух последовательных веб-представлений, которые будут отображать уведомление и следующее объявление как уведомления в приложении.
     
           <Grid x:Name="EngagementGrid"></Grid>

### <a name="i-created-a-push-notificationannouncement-campaign-and-even-after-it-sent-me-the-notification-it-is-showing-as-active-what-does-it-mean"></a>После создания push-уведомления, объявления или кампании и даже после отправки ими мне уведомления оно отображается как «Активное». Что это означает?
**Кампания**, созданная в Службах мобильного взаимодействия, так называется потому, что по сути является долговременным push-уведомлением, отправляемым по мере подключения новых устройств к платформе Служб мобильного взаимодействия. Им будут автоматически отправляться настроенные здесь уведомления до тех пор, пока они будут отвечать критерию, который вы задали в кампании. Настройка таких уведомлений отличается от настройки однократных уведомлений. Вам нужно будет вручную нажать кнопку **Готово**, чтобы завершить кампанию и прекратить отправку уведомлений. 

### <a name="i-created-a-push-campaign-and-i-am-receiving-notifications-successfully-however-whenever-i-open-up-the-app-i-get-the-same-notification-even-when-i-had-actioned-it-before"></a>После создания кампании push-уведомлений я успешно получаю уведомления. Тем не менее при каждом открытии приложения я получаю одно и то же уведомление, даже если это действие выполнялось ранее.
Это может произойти во время тестирования и при использовании эмуляторов или некоторых платформ тестирования наподобие TestFlight. Почему при каждом запуске экземпляра приложения он получает новый DeviceID и отправляет его на наш сервер, после чего платформа Служб мобильного взаимодействия считает его новым устройством и отправляет уведомление? 

## <a name="getting-support"></a>Получение технической поддержки
Если не удается устранить проблему самостоятельно, попробуйте выполнить следующее.

1. Поищите свою проблему в существующих обсуждениях на форуме StackOverflow и [форуме MSDN](https://social.msdn.microsoft.com/Forums/windows/en-US/home?forum=azuremobileengagement). Если решение найти не удалось, попросите о помощи на форуме. 
2. Если вы заметили отсутствие функции, добавьте запрос или проголосуйте за существующий на нашем [форуме UserVoice](https://feedback.azure.com/forums/285737-mobile-engagement/)
3. При наличии поддержки Майкрософт отправьте обращение за поддержкой, предоставив следующие сведения: 
   * идентификатор подписки Azure;
   * платформа (например iOS, Android и т. д.);
   * Идентификатор приложения API.
   * идентификатор кампании (для неполадок, связанных с push-уведомлениями);
   * Идентификатор устройства.
   * версия пакета SDK для Служб мобильного взаимодействия (например, Android SDK 2.1.0);
   * сведения об ошибке с текстом сообщения и сценарием.

