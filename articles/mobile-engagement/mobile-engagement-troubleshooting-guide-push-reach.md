---
title: Руководство по устранению неполадок в Службах мобильного взаимодействия Azure — push-уведомления и рекламные кампании
description: Устранение неполадок взаимодействия с пользователем и проблемы с уведомлениями в Службах мобильного взаимодействия Azure
services: mobile-engagement
documentationcenter: ''
author: piyushjo
manager: erikre
editor: ''
ms.assetid: 3f1886b7-1fdd-47f4-b6b0-d79f158d5ef3
ms.service: mobile-engagement
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: mobile-multiple
ms.workload: mobile
ms.date: 08/19/2016
ms.author: piyushjo
ms.openlocfilehash: bc94353e60288ba1acfb1855b3a7b416a03e73bc
ms.sourcegitcommit: 34e0b4a7427f9d2a74164a18c3063c8be967b194
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2018
---
# <a name="troubleshooting-guide-for-push-and-reach-issues"></a>Руководство по устранению неисправностей функций push-уведомлений и рекламных кампаний
> [!IMPORTANT]
> Срок действия Служб мобильного взаимодействия истекает 31.03.2018. Вскоре после этого страница будет удалена.
> 

Ниже представлены проблемы, которые могут возникнуть в связи со способом отправки информации пользователям, реализованным в Службах мобильного взаимодействия Azure.

## <a name="push-failures"></a>Сбои push-уведомлений
### <a name="issue"></a>Проблема
* Push-уведомления не работают (в приложении, вне приложения или и там и там).

### <a name="causes"></a>Причины
* Многократный сбой push-уведомлений свидетельствует о том, что Службы мобильного взаимодействия Azure, функция рекламных кампаний или другая дополнительная функция этой службы интегрированы неправильно или что требуется обновить пакет SDK, чтобы устранить известную проблему новой ОС или платформы устройства.
* Протестируйте push-уведомление в приложении и вне приложения, чтобы определить, связана ли проблема с приложением или нет.
* В качестве шага по устранению неполадки протестируйте push-уведомление в пользовательском интерфейсе и интерфейсе API, чтобы просмотреть дополнительную информацию об ошибке в обоих интерфейсах.
* Push-уведомления вне приложения не будут работать, если в пакет SDK не интегрированы Службы мобильного взаимодействия Azure и функция рекламных кампаний.
* Push-уведомления не будут работать, если сертификаты недействительны или неправильно используются рабочий сертификат и сертификат разработки (только в iOS). (**Примечание.** Push-уведомления вне приложения могут не доставляться в iOS, если у вас одновременно установлены как версия для разработки (DEV), так и рабочая версия (PROD) вашего приложения на одном и том же устройстве, поскольку маркер безопасности, связанный с вашим сертификатом, может быть сочтен недействительным компанией Apple. Чтобы устранить эту проблему, удалите обе версии приложения DEV и PROD и переустановите на ваше устройство только одну из версий.)
* Счетчики push-уведомлений вне приложения обрабатываются по-разному в зависимости от платформы (в iOS отображается меньше информации, чем в Android, если системные push-уведомления отключены на устройстве, а API может предоставлять больше информации о статистике push-уведомлений, чем пользовательский интерфейс).
* Клиенты могут заблокировать push-уведомления вне приложения на уровне операционной системы (в iOS и Android).
* При неправильной интеграции push-уведомления вне приложения будут отображаться в отключенном состоянии в пользовательском интерфейсе Служб мобильного взаимодействия Azure и могут незаметно завершиться ошибкой в интерфейсе API.
* Push-уведомления в приложении не будут работать, если в пакет SDK не интегрированы Службы мобильного взаимодействия Azure и функция рекламных кампаний.
* Push-уведомления GCM и ADM не будут работать, если Службы мобильного взаимодействия Azure и определенный сервер не интегрированы в пакет SDK (только в Android).
* Push-уведомления в приложении и вне приложения необходимо тестировать отдельно, чтобы определить, с чем связана проблема: с функцией push-уведомлений или рекламной кампании.
* Для принятия push-уведомлений в приложении требуется, чтобы приложение было открыто.
* Для push-уведомлений в приложении часто настроена фильтрация по тегу информации о приложении, определяющему принятие или отклонение.
* При использовании настраиваемой категории для отображения уведомлений в приложении в разделе "Рекламные кампании" необходимо обеспечить правильный жизненный цикл уведомления, иначе уведомление не будет удалено, когда пользователь его закроет.
* Если вы запустите кампанию без даты окончания и устройство получит уведомление в приложении, но не успеет его отобразить, пользователь все равно получит уведомление при следующем входе в приложение, даже если вы завершите кампанию вручную.
* В случае возникновения проблем с API push-уведомлений необходимо убедиться, что вам действительно нужно использовать API push-уведомлений, а не Reach API (так как последний используется чаще) и что вы не перепутали параметры полезных данных и средства уведомлений.
* Протестируйте кампанию push-уведомлений на устройстве, когда оно подключено через Wi-Fi и 3G, чтобы исключить сетевое подключение как возможный источник проблем.

## <a name="push-testing"></a>Тестирование push-уведомлений
### <a name="issue"></a>Проблема
* Push-уведомления можно отправлять на определенное устройство, используя его идентификатор.

### <a name="causes"></a>Причины
* Тестовые устройства настраиваются для каждой платформы по-разному, однако вы можете найти идентификатор своего устройства для всех платформ одним способом — инициируйте событие в приложении на тестовом устройстве, а затем найдите идентификатор своего устройства на портале.
* Тестовые устройства работают по-разному с IDFA и с IDFV (только iOS).

## <a name="push-customization"></a>Пользовательская настройка push-уведомлений
### <a name="issue"></a>Проблема
* Дополнительный элемент содержимого push-уведомления не работает (индикатор событий, сигнал, вибровызов, изображение и т. д.).
* Ссылки в push-уведомлениях не работают (вне приложения, в приложении, ссылка на веб-сайт или на расположение в приложении).
* В статистике push-уведомлений указано, что push-уведомление не было отправлено ожидаемому количеству пользователей (слишком много или недостаточно).
* Push-уведомление было продублировано и получено два раза.
* Не удается зарегистрировать тестовое устройство для приема push-уведомлений Служб мобильного взаимодействия Azure (в собственном рабочем приложении или приложении разработки).

### <a name="causes"></a>Причины
* Чтобы перейти по ссылке в конкретное расположение в приложении, требуются категории (только в Android).
* Схемы глубоких связей перенаправления пользователей в другие местоположения после щелчка push-уведомления должны создаваться и управляться вашим приложением и ОС устройства, а не напрямую Службами мобильного взаимодействия. (**Примечание.** Уведомления вне приложений не могут напрямую подключаться к местоположениям в приложении в iOS подобно тому, как это происходит в Android.)
* Чтобы push-уведомления с большими изображениями работали, требуется, чтобы внешние серверы изображений поддерживали использование операций HTTP GET и HEAD (только для Android).
* Код можно настроить таким образом, чтобы агент Служб мобильного взаимодействия Azure отключался при открытой клавиатуре и повторно активировался после закрытия клавиатуры, чтобы ее работа не влияла на отображение уведомлений (только для iOS).
* Некоторые элементы не работают при моделировании тестирования, а работают только в реальных кампаниях (индикатор событий, сигнал, вибровызов, изображение и т. д.).
* Если вы используете кнопку для тестирования push-уведомлений, данные на стороне сервера не записываются. Они записываются только для реальных кампаний push-уведомлений.
* Чтобы обнаружить проблему, выполните шаги по устранению неполадок с помощью тестирования, моделирования и реальной кампании, так как все эти режимы работают немного по-разному.
* Запланированные сроки проведения кампаний "в приложении" и "в любое время" могут отражаться на показателях доставки, поскольку кампания будет доставляться пользователям, которые находятся "в приложении", в то время, пока кампания запущена (а также пользователям, настроившим свои устройства на получение уведомлений "вне приложений").
* Различия между способом обработки уведомлений вне приложений iOS и Android усложняют прямое сравнение статистики push-операций в версиях вашего приложения для Android и iOS. Android предоставляет больше уведомлений на уровне ОС в отличие от iOS. Android сообщает о получении специализированного уведомления, о щелчке по нему или о его удалении из центра уведомлений, а iOS не предоставляет этих данных до тех пор, пока пользователь не щелкнет уведомление. 
* Главная причина того, что количество переданных push-уведомлений отличается от количества доставленных уведомлений для рекламных кампаний, состоит в том, что уведомления "в приложении" и "вне приложения" считаются по-разному. Уведомления "в приложении" обрабатываются Службами мобильного взаимодействия, однако уведомления "вне приложения" обрабатываются центром уведомлений ОС вашего устройства.

## <a name="push-targeting"></a>Отслеживание push-уведомлений
### <a name="issue"></a>Проблема
* Встроенное отслеживание не работает должным образом.
* Отслеживание по тегам информации о приложении не работает должным образом.
* Отслеживание по GPS-расположению не работает должным образом.
* Языковые параметры не работают должным образом.

### <a name="causes"></a>Причины
* Убедитесь, что вы загрузили теги информации о приложении через пользовательский интерфейс или API Служб мобильного взаимодействия Azure.
* Регулирование скорости отправки push-уведомлений или квоты на push-уведомления на уровне приложения или ограничение аудитории на уровне кампании может предотвратить получение пользователем определенного push-уведомления, даже если оно удовлетворяет другим условиям отслеживания. 
* Отслеживание на основе параметра "Язык" отличается от отслеживания на основе страны или языкового стандарта, что также отличается от отслеживания на основе географического расположения по расположению телефона или GPS-расположению.
* Сообщение на "языке по умолчанию" отправляется любому клиенту, на устройстве которого не настроен ни один из дополнительно заданных языков.

## <a name="push-scheduling"></a>Планирование отправки push-уведомлений
### <a name="issue"></a>Проблема
* Планирование отправки push-уведомлений не работает должным образом (уведомления отправляются слишком рано или с задержкой).

### <a name="causes"></a>Причины
* Часовые пояса могут приводить к проблемам с планированием, особенно при использовании часового пояса конечных пользователей.
* Дополнительные функции push-уведомлений могут вызывать задержку при отправке push-уведомлений.
* Отслеживание на основе параметров телефона (вместо тегов информации о приложении) может привести к задержке отправки push-уведомлений, так как перед отправкой push-уведомления Службы мобильного взаимодействия Azure могут запросить данные с телефона в реальном времени.
* Кампании, созданные без даты окончания, хранят push-уведомления на устройстве локально и отображают их при следующем входе в приложение, даже если кампания завершена вручную.
* Если запустить более чем одну кампанию одновременно, сканирование базы пользователей может занять больше времени (попробуйте запустить только одну кампанию за раз при максимальном количестве четырех, взяв за цель только активных пользователей, чтобы не нужно было сканировать старых пользователей).
* При использовании параметра "Не учитывать аудиторию, push-уведомления будут отправляться пользователям через API" в разделе кампаний рекламной кампании кампания НЕ будет отправляться автоматически. Ее необходимо отправлять вручную через Reach API.
* При использовании настраиваемой категории для отображения уведомлений в приложении в разделе "Рекламные кампании" необходимо обеспечить правильный жизненный цикл уведомления, иначе уведомление не будет удалено, когда пользователь его закроет.

