---
title: Контроль прав доступа для создания запросов в службу поддержки и управления ими с помощью управления доступом на основе ролей (RBAC) Azure | Документация Майкрософт
description: Контроль прав доступа для создания запросов в службу поддержки и управления ими с помощью управления доступом на основе ролей (RBAC) Azure
author: ganganarayanan
ms.author: gangan
ms.date: 1/31/2017
ms.topic: article
ms.service: microsoft-docs
ms.assetid: 58a0ca9d-86d2-469a-9714-3b8320c33cf5
ms.openlocfilehash: c3557d54b9fb3fd0173eec1e327050ac7cc80fc2
ms.sourcegitcommit: 9cdd83256b82e664bd36991d78f87ea1e56827cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
ms.locfileid: "31392907"
---
# <a name="azure-role-based-access-control-rbac-to-control-access-rights-to-create-and-manage-support-requests"></a>Контроль прав доступа для создания запросов в службу поддержки и управления ими с помощью управления доступом на основе ролей (RBAC) Azure

[Управление доступом на основе ролей (RBAC)](https://docs.microsoft.com/azure/role-based-access-control/overview) обеспечивает точный контроль доступа в Azure.
Модель RBAC Azure используется при создании запросов на поддержку на портале Azure ([portal.azure.com](https://portal.azure.com)) для предоставления прав на создание таких запросов и управление ими.
Доступ предоставляется путем назначения соответствующей роли RBAC пользователям, группам и приложениям в определенной области. Это может быть подписка, группа ресурсов или ресурс.

Рассмотрим такой пример: владелец группы ресурсов с разрешениями на чтение в области действия подписки может управлять всеми ресурсами в этой группе, в том числе веб-сайтами, виртуальными машинами и подсетями.
Тем не менее при попытке создать запрос на техническую поддержку для ресурса виртуальной машины произойдет следующая ошибка:

![Ошибка подписки](./media/create-manage-support-requests-using-access-control/subscription-error.png)

Для управления запросами на поддержку необходимо разрешение на запись или роль, для которой в области действия подписки задано действие поддержки Microsoft.Support/*, которое дает возможность создавать запросы на поддержку и управлять ими.

В следующей статье объясняется, как можно использовать управление доступом на основе ролей (RBAC) для создания запросов на поддержку на портале Azure и управления ими.

## <a name="getting-started"></a>Приступая к работе

Если возникла такая ситуация, как в описанном выше примере, вы можете создать запрос на поддержку для ресурса, если владелец подписки назначил вам пользовательские роли RBAC.
[Настраиваемые роли RBAC](https://azure.microsoft.com/documentation/articles/role-based-access-control-custom-roles/) можно создавать с помощью Azure PowerShell, интерфейса командной строки (CLI) Azure и интерфейса REST API.

Свойство Actions пользовательской роли определяет операции Azure, к которым эта роль предоставляет доступ.
Чтобы создать пользовательскую роль для управления запросами на поддержку, для нее потребуется действие Microsoft.Support/*.

Ниже приведен пример пользовательской роли, которую можно использовать для создания запросов на поддержку и управления ими.
Мы назвали ее "Участник с правом создавать запросы на поддержку" и будем использовать это название в данной статье.

``` Json
{
    "Name":  "Support Request Contributor",
    "Id":  "1f2aad59-39b0-41da-b052-2fb070bd7942",
    "IsCustom":  true,
    "Description":  "Lets you create and manage support tickets.",
    "Actions":  [
                    "Microsoft.Support/*"
                ],
    "NotActions":  [
                   ],
    "AssignableScopes":  [
                             "/"
                         ]
}
```

Выполните шаги, описанные [в этом видео](https://www.youtube.com/watch?v=-PaBaDmfwKI), чтобы научиться создавать пользовательские роли для подписки.

## <a name="create-and-manage-support-requests-in-the-azure-portal"></a>Создание запросов на поддержку и управление ими на портале Azure

Рассмотрим такой пример: предположим, вы являетесь владельцем подписки "Подписка MSDN для Visual Studio".
Ваш коллега Дмитрий — владелец ресурсов в нескольких группах ресурсов этой подписки, у которого есть для нее разрешение на чтение.
Вы хотите предоставить ему возможность создавать запросы в службу поддержки и управлять ими для ресурсов в рамках данной подписки.

1. Первым делом следует перейти к подписке. В поле "Параметры" отобразится список пользователей. Выберите пользователя по имени Дмитрий, у которого есть доступ для чтения в рамках этой подписки, и назначьте ему новую пользовательскую роль.

    ![Добавление роли](./media/create-manage-support-requests-using-access-control/add-role.png)

2. В колонке "Пользователи" щелкните "Добавить". Выберите в списке ролей пользовательскую роль "Участник с правом создавать запросы на поддержку".

    ![Добавление роли участника с доступом к службе поддержки](./media/create-manage-support-requests-using-access-control/add-support-contributor-role.png)

3. Выбрав имя роли, щелкните "Добавить пользователей" и введите учетные данные электронной почты Дмитрия. Нажмите "Выбрать".

    ![Добавление пользователей](./media/create-manage-support-requests-using-access-control/add-users.png)

4. Нажмите кнопку "ОК", чтобы продолжить.

    ![Предоставление доступа](./media/create-manage-support-requests-using-access-control/add-access.png)

5. Вы увидите пользователя с добавленной для него новой пользовательской ролью "Участник с правом создавать запросы на поддержку" в рамках подписки, владельцем которой вы являетесь.

    ![Добавлен пользователь](./media/create-manage-support-requests-using-access-control/user-added.png)

    Когда Дмитрий войдет на портал, он увидит подписку, в которую он был добавлен.

7. Если он нажмет "Новый запрос в службу поддержки" в колонке "Справка и поддержка", то сможет создать запросы на поддержку для Visual Studio Ultimate с подпиской MSDN.

    ![Новый запрос на техническую поддержку](./media/create-manage-support-requests-using-access-control/new-support-request.png)

8. Щелкнув "Все запросы на поддержку", Дмитрий может просмотреть список запросов на поддержку, созданных для этой подписки. ![Представление сведений об обращении](./media/create-manage-support-requests-using-access-control/case-details-view.png)

## <a name="remove-support-request-access-in-the-azure-portal"></a>Отзыв прав доступа для создания запросов на поддержку на портале Azure

Пользователю можно не только предоставить доступ для создания запросов на поддержку и управление ими, но и отозвать право на такой доступ.
Чтобы запретить создание запросов на поддержку и управление ими, перейдите к подписке, щелкните "Параметры" и выберите пользователя (в данном случае это Дмитрий).
Щелкните правой кнопкой мыши имя роли "Участник с правом создавать запросы на поддержку" и выберите "Удалить".

![Отзыв доступа для создания запросов на поддержку](./media/create-manage-support-requests-using-access-control/remove-support-request-access.png)

Когда Дмитрий войдет на портал и попытается создать запрос на поддержку, произойдет следующая ошибка:

![Ошибка подписки 2](./media/create-manage-support-requests-using-access-control/subscription-error-2.png)

Дмитрий не сможет просмотреть запросы на поддержку, щелкнув "Все запросы на поддержку".

![Представление сведений об обращении 2](./media/create-manage-support-requests-using-access-control/case-details-view-2.png)
