---
title: API выставления счетов Azure | Документация Майкрософт
description: Сведения об интерфейсах API использования и RateCard для выставления счетов Azure, которые применяются для получения ценных сведений о потреблении ресурсов Azure и соответствующих тенденциях.
services: ''
documentationcenter: ''
author: tonguyen
manager: tonguyen
editor: ''
tags: billing
ms.assetid: 3e817b43-0696-400c-a02e-47b7817f9b77
ms.service: billing
ms.devlang: na
ms.topic: reference
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 5/10/2018
ms.author: mobandyo
ms.openlocfilehash: e26d8ad1f08eb711dc22b45d48f8dc326d8c17c7
ms.sourcegitcommit: d78bcecd983ca2a7473fff23371c8cfed0d89627
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/14/2018
ms.locfileid: "34164981"
---
# <a name="use-azure-billing-apis-to-programmatically-get-insight-into-your-azure-usage"></a>Использование API выставления счетов Azure для программного получения ценных сведений об использовании Azure
Используйте API выставления счетов Azure для извлечения данных об использовании и ресурсах в предпочитаемые средства анализа данных. API использования ресурсов и RateCard в Azure позволяют точно прогнозировать расходы и управлять ими. Интерфейсы API реализованы в виде поставщика ресурсов и относятся к семейству API, предоставляемых Azure Resource Manager.  

## <a name="azure-invoice-download-api-preview"></a>API для скачивания счетов Azure (предварительная версия)
Один раз [предоставив согласие](billing-manage-access.md#opt-in), вы можете скачивать счета с помощью предварительной версии [API счетов](/rest/api/billing). Доступны следующие функции:

* **Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным об использовании в рамках подписки. Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности. Добавьте вызывающий объект в роль читателя счетов, читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.
* **Фильтрация дат** — используйте параметр `$filter` для получения всех счетов в обратном хронологическом порядке по дате окончания расчетного периода. 

> [!NOTE]
> Эта функция находится на первом этапе предварительной версии, поэтому для нее может не обеспечиваться обратная совместимость. Сейчас она недоступна для определенных предложений подписки (не поддерживаются EA, CSP, AIO), а также в Azure для Германии.

## <a name="azure-resource-usage-api-preview"></a>API использования ресурсов Azure (предварительная версия)
Применяйте [API использования ресурсов](https://msdn.microsoft.com/library/azure/mt219003) Azure для получения оценочных данных об уровне потребления Azure. API включает в себя следующие функции:

* **Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным об использовании в рамках подписки. Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности. Добавьте вызывающий объект в роль читателя счетов, читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.
* **Hourly or Daily Aggregations** (Агрегирование по часам или по дням) — вызывающие объекты могут указать, требуется ли получать данные об использовании Azure сегментами за каждый час или за каждый день. По умолчанию используется получение сегментов за каждый день.
* **Instance metadata (includes resource tags)** (Метаданные экземпляров, включая теги ресурсов). Сведения уровня экземпляра, например полный URI-код ресурса (/subscriptions/{идентификатор подписки}/..), информация о группе ресурсов и теги ресурсов. Эти метаданные помогут вам детерминированно и программно распределять использование по тегам для таких вариантов использования, как перекрестное выставление счетов.
* **Resource metadata** (Метаданные ресурсов). Сведения о ресурсах, такие как имя индикатора, категория индикатора, подкатегория индикатора, единица измерения и регион, позволяющие клиентам получить более полное представление о потребленных ресурсах. Мы также работаем над согласованием терминологии метаданных для портала Azure, файлов сведений об использовании Azure, файлов сведений о выставлении счетов по EA и других общедоступных механизмов, чтобы разрешить вам соотносить данные из разных областей.
* **Использование для разных видов предложений.** Данные об использовании доступны для таких видов предложений, как оплата по мере использования, MSDN, денежные обязательства, денежный кредит и EA, кроме [CSP](https://docs.microsoft.com/azure/cloud-solution-provider/billing/azure-csp-invoice#retrieve-usage-data-for-a-specific-subscription).

## <a name="azure-resource-ratecard-api-preview"></a>API RateCard по ресурсам Azure (предварительная версия)
Используйте [API RateCard по ресурсам Azure](https://msdn.microsoft.com/library/azure/mt219005) для получения списка доступных ресурсов Azure, а также примерной стоимости каждого из них. API включает в себя следующие функции:

* **Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным RateCard. Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности. Добавьте вызывающий объект в роль читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.
* **Поддержка оплаты по мере использования, MSDN, денежных обязательств, денежного кредита, EA и [CSP](https://docs.microsoft.com/azure/cloud-solution-provider/billing/azure-csp-pricelist#get-prices-by-using-the-azure-rate-card) не поддерживается.** Этот API предоставляет сведения о тарифах Azure на уровне предложений.  Вызывающий объект этого API должен передать сведения о предложении, чтобы получить информацию о ресурсах и тарифы. Так как в рамках EA действуют специальные тарифы для каждой регистрации, в настоящее время мы не можем предоставить сведения о тарифах для EA. 

## <a name="scenarios"></a>Сценарии
Ниже приведено несколько сценариев, которые становятся возможными благодаря сочетанию API использования и RateCard.

* **Azure spend during the month** (Затраты на Azure в течение месяца). Используйте сочетание API использования и RateCard, чтобы получить более ценные сведения о затратах на облако в течение месяца. Вы можете анализировать данные оценки использования и затрат сегментами за каждый час или за каждый день.
* **Set up alerts** (Настройка оповещений). API использования и RateCard можно использовать для получения оценочных показателей потребления облака и издержек, а также настройки оповещений на основе ресурсов или денежных средств.
* **Predict bill** (Прогнозирование счета). Получите оценочные показатели потребления и издержек для облака и примените алгоритмы машинного обучения, чтобы спрогнозировать сумму счета в конце цикла выставления счетов.
* **Pre-consumption cost analysis** (Анализ затрат до потребления). Используйте API RateCard, чтобы спрогнозировать размер счета для ожидаемого использования в случае переноса рабочих нагрузок в Azure. При наличии имеющихся рабочих нагрузок в других облаках и частных облаках можно также сопоставить использование с тарифами Azure, чтобы точнее определить расходы Azure. Данная оценка предоставляет возможность получения сводки по предложению, а также сравнения и противопоставления разных типов предложений, выходящих за рамки оплаты по мере использования, таких как денежные обязательства и денежный кредит. API также позволяют оценить разницу в затратах по регионам, в результате чего становится возможен анализ "что если", необходимый для принятия решений о развертывании.
* **What-if analysis** -
  
  * Вы можете определить, выгоднее ли выполнять рабочие нагрузки в другом регионе или с другой конфигурацией ресурсов Azure. Стоимость ресурсов Azure может отличаться в зависимости от используемого региона Azure.
  * Вы также можете определить, предоставляет ли другое предложение Azure более выгодный тариф на ресурс Azure.
  
## <a name="partner-solutions"></a>Решения партнеров
В статье [Интеграция Cloud Cruiser и API выставления счетов Microsoft Azure](billing-usage-rate-card-partner-solution-cloudcruiser.md) описано, как [пакет Cloud Cruiser Express для Azure](http://www.cloudcruiser.com/partners/microsoft/) работает непосредственно с портала Windows Azure Pack (WAP). Вы можете легко управлять рабочими и финансовыми аспектами частного или общедоступного облака Microsoft Azure из единого пользовательского интерфейса.   

## <a name="next-steps"></a>Дополнительная информация
* Вы можете ознакомиться с примерами кода в GitHub:
  * [Пример кода API счетов](https://go.microsoft.com/fwlink/?linkid=845124)

  * [Пример кода API использования](https://github.com/Azure-Samples/billing-dotnet-usage-api)

  * [Пример кода API RateCard](https://github.com/Azure-Samples/billing-dotnet-ratecard-api)

* Дополнительные сведения о Azure Resource Manager см. в статье [Обзор Azure Resource Manager](../azure-resource-manager/resource-group-overview.md). 



