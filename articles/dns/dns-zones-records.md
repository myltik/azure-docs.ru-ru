---
title: "Обзор зон и записей DNS в службе DNS Azure | Документация Майкрософт"
description: "Общие сведения о поддержке размещения зон и записей DNS в Microsoft Azure DNS."
services: dns
documentationcenter: na
author: jtuliani
manager: carmonm
editor: 
ms.assetid: be4580d7-aa1b-4b6b-89a3-0991c0cda897
ms.service: dns
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.custom: H1Hack27Feb2017
ms.workload: infrastructure-services
ms.date: 12/05/2016
ms.author: jonatul
translationtype: Human Translation
ms.sourcegitcommit: 119275f335344858cd20b6a17ef87e3ef32b6e12
ms.openlocfilehash: 4e25ec1ece6017dc58c24ce593802293b7fc12b8
ms.lasthandoff: 03/01/2017

---

# <a name="overview-of-dns-zones-and-records"></a>Обзор зон и записей DNS

В этой статье описываются основные понятия доменов, зон и записей DNS, а также наборов записей и их поддержка в Azure DNS.

## <a name="domain-names"></a>Имена доменов

Система доменных имен — это иерархия доменов. Иерархия начинается с корневого домена с именем **.**.  Ниже находятся домены верхнего уровня, такие как com, net, org, uk и jp.  Под ними расположены домены второго уровня, например org.uk и co.jp. Эти домены в иерархии DNS глобально распределены на DNS-серверах по всему миру.

Регистратор доменных имен — это организация, которая позволяет приобрести доменное имя, например contoso.com.  Купив доменное имя, вы получаете право управлять иерархией DNS под этим именем, например настроить перенаправление на веб-сайт вашей компании при вводе адреса www.contoso.com. Регистратор может размещать домен на своих собственных серверах доменных имен от вашего имени, либо вы можете указать альтернативные серверы доменных имен.

Azure DNS предоставляет глобально распределенную инфраструктуру серверов доменных имен высокого уровня доступности, которую можно использовать для размещения вашего домена. Размещая домены в Azure DNS, вы можете управлять своими записями DNS с помощью тех же учетных данных, API, инструментов, выставления счетов и поддержки, что и в других службах Azure.

Azure DNS в настоящее время не поддерживает приобретение доменных имен. Если необходимо приобрести доменное имя, требуется использовать регистратор доменных имен стороннего поставщика. Регистратор обычно взимает небольшую годовую плату. Затем вы сможете разместить домены в Azure DNS, чтобы управлять записями DNS. Дополнительные сведения см. в статье [Делегирование домена в Azure DNS](dns-domain-delegation.md).

## <a name="dns-zones"></a>Зоны DNS

[!INCLUDE [dns-create-zone-about](../../includes/dns-create-zone-about-include.md)]

## <a name="dns-records"></a>Записи DNS

[!INCLUDE [dns-about-records-include](../../includes/dns-about-records-include.md)]

### <a name="time-to-live"></a>Срок жизни

Срок жизни или TTL указывает продолжительность кэширования каждой записи клиентами до повторного запроса. В приведенном выше примере TTL равен 3600 секундам или 1 часу.

В Azure DNS TTL указывается для набора записей, а не для каждой записи, поэтому одно значение используется для всех записей в рамках набора записей.  Вы можете указать любое значение TTL — от 1 до 2 147 483 647 секунд.

### <a name="wildcard-records"></a>Записи с подстановочными знаками

Azure DNS поддерживает [записи с подстановочными знаками](https://en.wikipedia.org/wiki/Wildcard_DNS_record). Эти записи возвращаются в ответ на любой запрос с совпадающим именем (пока не найдется еще более близкое совпадение из набора записей без подстановочных знаков). Azure DNS поддерживает наборы записей с подстановочными знаками для всех типов записей, за исключением NS и SOA.

Чтобы создать набор записей с подстановочными знаками, используйте знак \* вместо имени набора записей. Кроме того, можно использовать имя со знаком \* как крайнюю метку слева, например \*.foo.

### <a name="cname-records"></a>Записи CNAME

Наборы записей типа CNAME не могут сосуществовать с другими наборами записей с тем же именем. Например, невозможно одновременно создать набор записей CNAME и запись A с относительными именами www.

Так как вершина зоны (имя = @) всегда содержит наборы записей типа NS и SOA, созданные при создании зоны, невозможно создать набор записей CNAME на вершине зоны.

Это связано со стандартами DNS, а не ограничениями Azure DNS.

### <a name="ns-records"></a>Записи NS

Набор записей NS автоматически создается на вершине каждой зоны (имя = @) и автоматически удаляется при удалении зоны (его нельзя удалить отдельно).  Вы можете изменить значение TTL этого набора записей, но не можете изменить записи, которые предварительно настроены для указания серверов доменных имен Azure DNS, назначенных этой зоне.

Вы можете создавать и удалять другие записи NS в зоне, но не на ее вершине.  Таким образом, вы можете настраивать дочерние зоны (см. раздел [Делегирование поддоменов в Azure DNS](dns-domain-delegation.md#delegating-sub-domains-in-azure-dns)).

### <a name="soa-records"></a>Записи SOA

Набор записей SOA автоматически создается на вершине каждой зоны (имя = @) и автоматически удаляется при удалении зоны.  Записи SOA невозможно создать или удалить отдельно.

Вы можете изменять все свойства записи SOA, за исключением свойства host, которое предварительно настроено для указания первичного сервера доменных имен, предоставленного Azure DNS.

### <a name="spf-records"></a>Записи SPF

Записи инфраструктуры политики отправителей (SPF) используются для указания почтовых серверов, которым разрешено отправлять электронную почту от имени заданного доменного имени.  Правильная конфигурация записей SPF очень важна, чтобы получатели не помечали ваши сообщения электронной почты как "Нежелательная почта".

В RFC DNS новый тип записи SPF был изначально представлен для поддержки этого сценария. Для поддержки старых серверов доменных имен в них также может использоваться тип записи TXT, чтобы указывать записи SPF.  Эта неоднозначность привела к путанице, которую удалось устранить с помощью документа [RFC 7208](http://tools.ietf.org/html/rfc7208#section-3.1).  В нем указывается, что записи SPF следует создавать только с помощью записи типа TXT, а использовать фактические записи типа SPF не рекомендуется.

**Записи SPF поддерживаются в Azure DNS, и их следует создавать с помощью записи типа TXT.** Устаревший тип записи SPF не поддерживается. Во время [импорта файла зоны DNS](dns-import-export.md) все записи SPF, созданные с помощью типа SPF, преобразуются в записи типа TXT.

### <a name="srv-records"></a>Записи SRV

Различные службы используют [записи SRV](https://en.wikipedia.org/wiki/SRV_record), чтобы указать расположения сервера. Указание записи SRV в Azure DNS

* *Службу* и *протокол* необходимо указать как часть имени набора записей, начинающуюся с символа подчеркивания.  Например, \_sip.\_tcp.name.  В имени записи на вершине зоны не нужно указывать @, вместо этого можно просто использовать службу и протокол, например \_sip.\_tcp.
* *Приоритет*, *вес*, *порт* и *целевое значение* указываются в качестве параметров каждой записи в наборе записей.

### <a name="txt-records"></a>Записи типа TXT

Записи типа TXT используются для сопоставления доменных имен с произвольными текстовыми строками. Они используются в разных приложениях, в частности в тех, которые относятся к конфигурации электронной почты, например [инфраструктура политики отправителей (SPF)](https://en.wikipedia.org/wiki/Sender_Policy_Framework) и [DomainKeys Identified Mail (DKIM)](https://en.wikipedia.org/wiki/DomainKeys_Identified_Mail).

По стандартам DNS одна запись типа TXT может содержать несколько строк, в каждой из которых может быть до 254 знаков. При использовании нескольких строк они объединяются клиентами и рассматриваются в качестве одной строки.

При вызове REST API Azure DNS необходимо указать каждую строку TXT отдельно.  Используя портал Azure, PowerShell или интерфейс командной строки, следует указать одну строку в записи, которая при необходимости автоматически разделяется на сегменты по 254 знака.

Не следует путать несколько строк в записи DNS с несколькими записями типа TXT в наборе записей типа TXT.  Набор записей типа TXT может содержать несколько записей, *каждая из которых* может содержать несколько строк.  Azure DNS поддерживает общую длину строки не более 1024 знаков в каждом наборе записей типа TXT (во всех записях). 

## <a name="tags-and-metadata"></a>Теги и метаданные

### <a name="tags"></a>Теги

Теги — это список пар "имя — значение", которые используются Azure Resource Manager для пометки ресурсов.  Azure Resource Manager использует теги, чтобы обеспечить отфильтрованные представления счетов Azure, а также позволяет задать политику, для которой необходимы теги. Дополнительные сведения о тегах см. в статье [Использование тегов для организации ресурсов в Azure](../azure-resource-manager/resource-group-using-tags.md).

Azure DNS поддерживает использование тегов Azure Resource Manager в ресурсах зоны DNS.  Эта служба не поддерживает использование тегов в наборе записей DNS, хотя в качестве альтернативы в наборе записей DNS поддерживаются метаданные, как описано ниже.

### <a name="metadata"></a>Метаданные

В качестве альтернативы тегам наборов записей Azure DNS поддерживает создание заметок к наборам записей с помощью метаданных.  Так же как и теги, метаданные позволяют связывать пары "имя — значение" с каждым набором записей.  К примеру, это может пригодиться для записи назначения каждого набора записей.  В отличие от тегов метаданные нельзя использовать, чтобы обеспечить отфильтрованное представление счетов Azure, и указывать в политике Azure Resource Manager.

## <a name="etags"></a>Теги Etag

Предположим, что два человека или два процесса пробуют изменить запись DNS одновременно. У какого из них это получится? И будет ли этот человек или процесс знать, что они заменили изменения кого-то другого?

Служба Azure DNS использует теги Etag для безопасной обработки параллельных изменений одного ресурса. Теги ETag не связаны с [тегами Azure Resource Manager](#tags). С каждым ресурсом DNS (зоной или набором записей) связан Etag. При извлечении ресурса также передается его значение Etag. При обновлении ресурса вы можете вернуть Etag, чтобы служба Azure DNS могла сопоставить его с Etag на сервере. Так как каждое обновление ресурса приводит к повторному созданию Etag, несовпадение Etag указывает на параллельное изменение. Теги Etag можно также использовать при создании ресурса для проверки того, что ресурс не существует.

По умолчанию PowerShell для Azure DNS использует теги Etag для блокировки одновременных изменений зон и наборов записей. С помощью необязательного параметра *-Overwrite* можно отключить проверки тегов Etag. В этом случае все одновременные изменения перезаписываются.

На уровне API REST службы Azure DNS теги Etag указываются с помощью заголовков HTTP.  Их поведение описывается в следующей таблице:

| Заголовок | Поведение |
| --- | --- |
| None |PUT всегда завершается успешно (без проверки Etag) |
| If-match <etag> |PUT завершается успешно, только если ресурс существует и Etag соответствует |
| If-match * |PUT завершается успешно, только если ресурс существует |
| If-none-match* |PUT завершается успешно, только если ресурс не существует |


## <a name="limits"></a>Ограничения

При использовании Azure DNS применяются приведенные ниже ограничения по умолчанию.

[!INCLUDE [dns-limits](../../includes/dns-limits.md)]

## <a name="next-steps"></a>Дальнейшие действия

* Чтобы начать работу с Azure DNS, узнайте, как [создать зону DNS](dns-getstarted-create-dnszone-portal.md) и [записи DNS](dns-getstarted-create-recordset-portal.md).
* Чтобы перенести имеющуюся зону DNS, узнайте, как [импортировать и экспортировать файл зоны DNS](dns-import-export.md).


