---
title: Интеграция Azure DNS с ресурсами Azure | Документация Майкрософт
description: Сведения об использовании Azure DNS, а также указание DNS для ресурсов Azure.
services: dns
documentationcenter: na
author: KumudD
manager: jeconnoc
ms.service: dns
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 1/19/2018
ms.author: kumud
ms.openlocfilehash: cbc769cd7356b3057fd2aae295071b04d2e40d91
ms.sourcegitcommit: 1fbaa2ccda2fb826c74755d42a31835d9d30e05f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2018
ms.locfileid: "27994388"
---
# <a name="use-azure-dns-to-provide-custom-domain-settings-for-an-azure-service"></a>Использование Azure DNS для указания параметров личного домена для службы Azure

Azure DNS предоставляет DNS для личного домена любому из ресурсов Azure, который поддерживает личные домены или имеет полное доменное имя (FQDN). Например, у вас есть веб-приложение Azure и вы хотите, чтобы пользователи получали к нему доступ, вводя полное доменное имя contoso.com или www.contoso.com. В этой статье описывается настройка службы Azure с Azure DNS для использования личных доменов.

## <a name="prerequisites"></a>предварительным требованиям

Чтобы использовать Azure DNS для личного домена, сначала нужно делегировать домен в Azure DNS. Дополнительные сведения о настройке делегирования в серверах имен см. в статье [Делегирование домена в Azure DNS](./dns-delegate-domain-azure-dns.md). После делегирования домена в зону Azure DNS можно настроить необходимые записи DNS.

Вы можете настроить личный или пользовательский домен для [приложений-функций Azure](#azure-function-app), [общедоступных IP-адресов](#public-ip-address), [службы приложений (веб-приложений)](#app-service-web-apps), [хранилища BLOB-объектов](#blob-storage) и [Azure CDN](#azure-cdn).

## <a name="azure-function-app"></a>Приложение-функция Azure

Для настройки личного домена для приложения-функции Azure, создается запись CNAME, а также конфигурации самого приложения-функции.
 
Перейдите к **Другие** > **Приложение-функция** и выберите приложение-функцию. Щелкните вкладку **Функции платформы** и в разделе **Сетевые подключения** щелкните **Личные домены**.

![колонка приложения-функции](./media/dns-custom-domain/functionapp.png)

Запишите текущий URL-адрес в колонке **Личные домены**. Этот адрес используется в качестве псевдонима для создания записи DNS.

![колонка личного домена](./media/dns-custom-domain/functionshostname.png)

Перейдите к зоне DNS и щелкните **+ Набор записей**. Введите следующие сведения в колонке **Добавление набора записей** и нажмите кнопку **ОК**.

|Свойство  |Значение  |ОПИСАНИЕ  |
|---------|---------|---------|
|ИМЯ     | myFunctionApp        | Это значение вместе с меткой доменного имени является полным доменным именем личного домена.        |
|type     | CNAME        | Воспользуйтесь записью CNAME, если используется псевдоним.        |
|Срок жизни     | 1        | 1 используется для обозначения 1 часа.        |
|Единица срока жизни     | Часы        | В качестве единицы измерения времени используется час.         |
|Alias     | adatumfunction.azurewebsites.net        | DNS-именем, для которого создается псевдоним, в этом примере является DNS-имя по умолчанию adatumfunction.azurewebsites.net, предоставляемое приложением-функцией.        |

Перейдите обратно в приложение-функцию, щелкните **Функции платформы**, в разделе **Сетевые подключения** щелкните **Личные домены**, а затем в поле **Имена узлов** щелкните **+ Добавить имя узла**.

В колонке **Добавить имя узла** введите запись CNAME в текстовое поле **Имя узла** и нажмите кнопку **Проверить**. Если запись удалось найти, появляется кнопка **Добавить имя узла**. Нажмите кнопку **Добавить имя узла**, чтобы добавить псевдоним.

![колонка приложения-функции, кнопка "Добавить имя узла"](./media/dns-custom-domain/functionaddhostname.png)

## <a name="public-ip-address"></a>Общедоступный IP-адрес

Чтобы настроить личный домен для служб, которые используют ресурс общедоступного IP-адреса, например шлюз приложений, балансировщик нагрузки, облачная служба, виртуальные машины Resource Manager и классические виртуальные машины, используется запись CNAME.

Перейдите на вкладку **Сетевые подключения** > **Общедоступный IP-адрес**, выберите ресурс общедоступного IP-адреса и щелкните **Конфигурация**. Запишите показанный IP-адрес.

![колонка "Общедоступный IP-адрес"](./media/dns-custom-domain/publicip.png)

Перейдите к зоне DNS и щелкните **+ Набор записей**. Введите следующие сведения в колонке **Добавление набора записей** и нажмите кнопку **ОК**.


|Свойство  |Значение  |ОПИСАНИЕ  |
|---------|---------|---------|
|ИМЯ     | MyWebServer        | Это значение вместе с меткой доменного имени является полным доменным именем личного домена.        |
|type     | A        | Используется запись А, так как ресурсом является IP-адрес.        |
|Срок жизни     | 1        | 1 используется для обозначения 1 часа.        |
|Единица срока жизни     | Часы        | В качестве единицы измерения времени используется час.         |
|IP-адрес     | <your ip address>       | Общедоступный IP-адрес.|

![создание записи A](./media/dns-custom-domain/arecord.png)

После создания записи A запустите `nslookup`, чтобы проверить, что запись разрешается.

![поиск DNS с общедоступным IP-адресом](./media/dns-custom-domain/publicipnslookup.png)

## <a name="app-service-web-apps"></a>Служба приложений (веб-приложения)

Здесь рассматривается, как выполнить настройку личного домена для веб-приложения службы приложений.

Перейдите на вкладку **Интернет и мобильные устройства** > **Служба приложений**, выберите ресурс, для которого выполняется настройка личного доменного имени, и щелкните **Личные домены**.

Запишите текущий URL-адрес в колонке **Личные домены**. Этот адрес используется в качестве псевдонима для создания записи DNS.

![колонка "Личные домены"](./media/dns-custom-domain/url.png)

Перейдите к зоне DNS и щелкните **+ Набор записей**. Введите следующие сведения в колонке **Добавление набора записей** и нажмите кнопку **ОК**.


|Свойство  |Значение  |ОПИСАНИЕ  |
|---------|---------|---------|
|ИМЯ     | MyWebServer        | Это значение вместе с меткой доменного имени является полным доменным именем личного домена.        |
|type     | CNAME        | Воспользуйтесь записью CNAME, если используется псевдоним. Если ресурсом является IP-адрес, будет использоваться запись А.        |
|Срок жизни     | 1        | 1 используется для обозначения 1 часа.        |
|Единица срока жизни     | Часы        | В качестве единицы измерения времени используется час.         |
|Alias     | webserver.azurewebsites.net        | DNS-именем, для которого создается псевдоним, в этом примере является DNS-имя webserver.azurewebsites.net, предоставляемое по умолчанию для веб-приложения.        |


![создание записи CNAME](./media/dns-custom-domain/createcnamerecord.png)

Перейдите обратно к службе приложений, настроенной для имени личного домена. Щелкните **Личные домены**, а затем **Имена узлов**. Чтобы добавить созданную запись CNAME, щелкните **+ Добавить имя узла**.

![Рисунок 1](./media/dns-custom-domain/figure1.png)

После завершения процесса запустите **nslookup**, чтобы убедиться, что разрешение имени работает.

![Рисунок 1](./media/dns-custom-domain/finalnslookup.png)

Дополнительные сведения о сопоставлении личного домена со службой приложений см. в статье [Сопоставление существующего настраиваемого DNS-имени с веб-приложениями Azure](../app-service/app-service-web-tutorial-custom-domain.md?toc=%dns%2ftoc.json).

Если необходимо приобрести личный домен, ознакомьтесь со статьей [Приобретение и настройка имени личного домена для службы приложений Azure](../app-service/custom-dns-web-site-buydomains-web-app.md).

## <a name="blob-storage"></a>Хранилище BLOB-объектов

Здесь рассматривается, как выполнить настройку записи CNAME для учетной записи хранилища BLOB-объектов с помощью метода asverify. Этот метод гарантирует отсутствие простоев.

Перейдите на вкладку **Хранилище** > **Учетные записи хранения**, выберите учетную запись хранения и щелкните **Личный домен**. Запишите полное доменное имя из шага 2. Это значение используется для создания первой записи CNAME.

![личный домен для хранилища BLOB-объектов](./media/dns-custom-domain/blobcustomdomain.png)

Перейдите к зоне DNS и щелкните **+ Набор записей**. Введите следующие сведения в колонке **Добавление набора записей** и нажмите кнопку **ОК**.


|Свойство  |Значение  |ОПИСАНИЕ  |
|---------|---------|---------|
|ИМЯ     | asverify.mystorageaccount        | Это значение вместе с меткой доменного имени является полным доменным именем личного домена.        |
|type     | CNAME        | Воспользуйтесь записью CNAME, если используется псевдоним.        |
|Срок жизни     | 1        | 1 используется для обозначения 1 часа.        |
|Единица срока жизни     | Часы        | В качестве единицы измерения времени используется час.         |
|Alias     | asverify.adatumfunctiona9ed.blob.core.windows.net        | DNS-именем, для которого создается псевдоним, в этом примере является DNS-имя asverify.adatumfunctiona9ed.blob.core.windows.net, предоставляемое по умолчанию для учетной записи хранения.        |

Перейдите назад к учетной записи хранения, щелкнув **Хранилище** > **Учетные записи хранения**, выберите учетную запись хранения и щелкните **Личный домен**. В текстовом поле введите созданный псевдоним без префикса asverify, установите флажок **Использовать непрямую проверку CNAME**, а затем нажмите кнопку **Сохранить**. После завершения этого шага вернитесь в зону DNS и создайте запись CNAME без префикса asverify.  После этого можно безопасно удалить запись CNAME с префиксом cdnverify.

![личный домен для хранилища BLOB-объектов](./media/dns-custom-domain/indirectvalidate.png)

Проверьте разрешение DNS, выполнив `nslookup`.

Дополнительные сведения о сопоставлении личного домена с конечной точкой хранилища BLOB-объектов см. в статье [Настройка пользовательского доменного имени для конечной точки хранилища BLOB-объектов](../storage/blobs/storage-custom-domain-name.md?toc=%dns%2ftoc.json).

## <a name="azure-cdn"></a>Azure CDN

Здесь рассматривается, как настроить запись CNAME для конечной точки CDN с помощью метода cdnverify. Этот метод гарантирует отсутствие простоев.

Перейдите на вкладку **Сетевые подключения** > **Профили CDN**, выберите профиль CDN и в колонке **Общие** щелкните **Конечные точки**.

Выберите конечную точку, с которой вы работаете и щелкните **+ Личный домен**. Запишите **имя узла конечной точки**, так как это запись, на которую указывает запись CNAME.

![личный домен CDN](./media/dns-custom-domain/endpointcustomdomain.png)

Перейдите к зоне DNS и щелкните **+ Набор записей**. Введите следующие сведения в колонке **Добавление набора записей** и нажмите кнопку **ОК**.

|Свойство  |Значение  |ОПИСАНИЕ  |
|---------|---------|---------|
|ИМЯ     | cdnverify.mycdnendpoint        | Это значение вместе с меткой доменного имени является полным доменным именем личного домена.        |
|type     | CNAME        | Воспользуйтесь записью CNAME, если используется псевдоним.        |
|Срок жизни     | 1        | 1 используется для обозначения 1 часа.        |
|Единица срока жизни     | Часы        | В качестве единицы измерения времени используется час.         |
|Alias     | cdnverify.adatumcdnendpoint.azureedge.net        | DNS-именем, для которого создается псевдоним, в этом примере является DNS-имя cdnverify.adatumcdnendpoint.azureedge.net, предоставляемое по умолчанию для учетной записи хранения.        |

Перейдите к конечной точке CDN. Для этого щелкните **Сетевые подключения** > **Профили CDN** и выберите ваш профиль CDN. Щелкните **+ Личный домен**, введите свой псевдоним записи CNAME без префикса cdnverify и щелкните **Добавить**.

После завершения этого шага вернитесь в зону DNS и создайте запись CNAME без префикса cdnverify.  После этого можно безопасно удалить запись CNAME с префиксом cdnverify. Дополнительные сведения о CDN и о настройке личных доменов без промежуточного шага регистрации см. в статье [Сопоставление содержимого Azure CDN с пользовательским доменом](../cdn/cdn-map-content-to-custom-domain.md?toc=%dns%2ftoc.json).

## <a name="next-steps"></a>Дополнительная информация

Узнайте, как [настроить обратный просмотр DNS для размещенных в Azure служб](dns-reverse-dns-for-azure-services.md).