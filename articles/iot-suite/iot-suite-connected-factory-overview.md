---
title: "Общие сведения о решении подключенной фабрики Azure | Документация Майкрософт"
description: "Описание предварительно настроенного решения для подключенной фабрики Azure IoT Suite."
services: 
suite: iot-suite
documentationcenter: 
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 
ms.service: iot-suite
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/27/2017
ms.author: dobett
ms.openlocfilehash: 7fbb47390b6b1d918cbef0770ce1822591341866
ms.sourcegitcommit: dfd49613fce4ce917e844d205c85359ff093bb9c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/31/2017
---
# <a name="get-started-with-the-connected-factory-preconfigured-solution"></a>Начало работы с предварительно настроенным решением для подключенной фабрики

Набор [предварительно настроенных решений][lnk-preconfigured-solutions] Интернета вещей Azure включает несколько служб Интернета вещей Azure, используемых при создании комплексных решений для реализации распространенных бизнес-сценариев Интернета вещей. Предварительно настроенное решение для *подключенной фабрики* подключается к промышленным устройствам и отслеживает их работу. Это решение можно использовать для анализа потока данных с устройств и повышения штатной работоспособности и рентабельности.

В этом руководстве показано, как подготовить предварительно настроенное решение для подключенной фабрики. Кроме того, здесь описываются основные функции этого решения. Многие функции доступны на *панели мониторинга* решения, которая развертывается вместе с предварительно настроенным решением.

![Панель мониторинга предварительно настроенного решения для подключенной фабрики][img-cf-home]

Для работы с этим руководством требуется активная подписка Azure.

> [!NOTE]
> Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в статье о [бесплатной пробной версии Azure][lnk_free_trial].
> 
> 

## <a name="provision-the-solution"></a>Подготовка решения

1. Войдите на сайт azureiotsuite.com с помощью учетных данных Azure и щелкните **+**, чтобы создать решение.
2. На плитке **Connected factory** (Подключенная фабрика) щелкните **Выбрать**.
3. Укажите **имя** для предварительно настроенного решения подключенной фабрики.
4. Выберите **регион** и **подписку**, которые вы хотите использовать для подготовки решения.
5. Щелкните **Создать решение** , чтобы начать процесс подготовки. Этот процесс обычно занимает несколько минут.

### <a name="while-you-wait-for-the-provisioning-process-to-complete"></a>Дождитесь завершения процесса подготовки.

1. Щелкните плитку решения с состоянием **Подготовка**.
2. Следите за **состояниями подготовки** по мере развертывания служб Azure в рамках подписки Azure.
3. Когда подготовка будет завершена, состояние изменится на **Готово**.
4. Щелкните плитку, чтобы просмотреть подробные сведения о решении на правой панели.

> [!NOTE]
> Если при развертывании предварительно настроенного решения возникают проблемы, см. статьи [Разрешения на сайте azureiotsuite.com][lnk-permissions] и [Frequently asked questions for IoT Suite connected factory preconfigured solution](iot-suite-faq-cf.md) (Часто задаваемые вопросы о предварительно настроенном решении подключенной фабрики IoT Suite). Если проблемы не удается устранить, отправьте запрос в службу поддержки на [портале][lnk-portal].

Есть ли сведения, которые вы ожидали увидеть и которые не указаны для вашего решения? Сообщите нам о своих предложениях на сайте [User Voice](https://feedback.azure.com/forums/321918-azure-iot).

## <a name="scenario-overview"></a>Обзор сценария

Развертывание предварительно настроенного решения для подключенной фабрики уже содержит ресурсы, которые позволяют выполнять распространенный промышленный сценарий. В этом сценарии несколько фабрик, подключенных к решению, передают значения данных, необходимых для расчета общей эффективности оборудования и ключевых показателей эффективности. В следующих разделах описано, как:

* Выполнять мониторинг фабрик, производственных линий, общей эффективности оборудования узла и значений ключевых показателей эффективности.
* Анализировать данные телеметрии, полученные с этих устройств с помощью Azure Time Series Insights.
* Реагировать на оповещения, чтобы устранить неполадки.

Ключевой особенностью этого сценария является возможность удаленно выполнять все эти действия с помощью панели мониторинга решения. Физический доступ к устройствам не обязателен.

## <a name="view-the-solution-dashboard"></a>Просмотр панели мониторинга решения

Панель мониторинга решения позволяет управлять развернутым решением. Это иерархическое представление глобальной конфигурации фабрик. Например, вы можете просматривать значения общей эффективности оборудования и ключевых показателей эффективности, публиковать новые узлы для передачи телеметрии и оповещений о действиях.

1. Когда подготовка завершится и на плитке предварительно настроенного решения появится надпись **Готово**, нажмите кнопку **Запустить**. Портал решения подключенной фабрики откроется в новой вкладке.

    ![Запуск предварительно настроенного решения][img-launch-solution]

1. По умолчанию на портале решения отображается *панель мониторинга*. Чтобы перейти к другим областям портала, используйте меню в левой части страницы.

    ![Панель мониторинга предварительно настроенного решения для подключенной фабрики][cf-img-menu]

На панели мониторинга отображаются следующие сведения:

* На панели **Factory list** (Список фабрик) отображается состояние, расположение и текущая рабочая конфигурация решения. При первом запуске решения отобразятся несколько виртуальных устройств, реализованных в виде веб-заданий Azure. Имитация производственной линии состоит из трех физических серверов на основе унифицированной архитектуры OPC на каждую производственную линию, имитирующую задачи и обменивающуюся данными. Дополнительные сведения об OPC UA см. в статье [Часто задаваемые вопросы о предварительно настроенном решении для подключенной фабрики IoT Suite](iot-suite-faq-cf.md).
* **Карта**, на которой показано расположение каждого устройства, подключенного к решению. Для отображения сведений на карте в решении используется интерфейс API для Карт Bing. Если в вашей подписке включен Enterprise API для Карт Bing, этот компонент будет использоваться автоматически. В противном случае см. статью [Часто задаваемые вопросы об IoT Suite][lnk-faq], в которой содержатся сведения о том, как сделать карту динамической.
* На панели **Оповещения** отображаются оповещения, создаваемые, когда значения телеметрии, общей эффективности оборудования или ключевых показателей эффективности превышают указанное пороговое значение.
* На панели **Overall Equipment Efficiency** (Общая эффективность оборудования) отображаются соответствующие значения для всего предприятия, фабрики, производственной линии или станции, которые вы просматриваете. Это значение агрегируется из представления узла с представлением уровня предприятия. Показатель общей эффективности оборудования и его составные элементы в дальнейшем можно проанализировать.
* На панели **Key Performance Indicators** (Ключевые показатели эффективности) отображается количество произведенной продукции и количество энергии, потребляемой всем предприятием, фабрикой, производственной линией или станцией, которые вы просматриваете. Эти значения агрегируются из представления станции с уровнем предприятия.

## <a name="view-factories"></a>Просмотр фабрик

На панели *Factories* (Фабрики) отображается географическое расположение всех фабрик в решении, их состояние и текущая рабочая конфигурация. В списке расположений можно перейти на другие уровни в иерархии решения. Строки в списке являются гиперссылками с привязкой сведений строк к производственным линиям в этом расположении. Вы можете перейти к подробным сведениям о производственной линии до уровня представления станции. Кроме того, к списку можно применить фильтр.

![Фабрики в предварительно настроенном решении для подключенной фабрики][cf-img-factories] 

1. На **панели фабрик** отображается список фабрик в этом решении.

2. Изначально в списке отображается шесть фабрик, созданных в ходе подготовки. Вы можете добавить в решение дополнительные виртуальные и физические устройства.

3. Для просмотра сведений о фабрике щелкните ее строку в списке.

4. Для просмотра сведений о производственной линии щелкните ее строку в списке.

5. Для просмотра опубликованных узлов станции на основе унифицированной архитектуры OPC щелкните строку в списке.

6. Для просмотра подробных сведений об определенном узле станции щелкните строку в списке. При этом запускается контекстная панель с визуализациями Time Series Insights. Щелкните эти графики для дальнейшего анализа в среде обозревателя Time Series Insights.

## <a name="view-map"></a>Просмотр карты

Если ваша подписка имеет доступ к API для Карт Bing, на карте *фабрик* отобразится географическое расположение и состояние всех фабрик в решении. Щелкните расположение на карте, чтобы просмотреть подробную информацию о нем.

![Карта предварительно настроенного решения для подключенной фабрики][cf-img-map]

## <a name="view-alerts"></a>Просмотр оповещений

На панели **оповещений** отображаются оповещения о сообщаемом или вычисленном значении общей эффективности оборудования или ключевых показателей эффективности, превышающем заданное пороговое значение. На этой панели отображаются оповещения на каждом уровне иерархии, от уровня представления станции до глобального представления. Оповещения содержат описание оповещения, дату, время, расположение и число повторений. Вы можете проанализировать данные, вызвавшие оповещение, используя данные Time Series Insights, которые по возможности визуализируются в оповещении. При возникновении оповещений администратор может предпринять следующие действия по умолчанию.

* Закрыть оповещение.
* Подтвердить оповещение.

При необходимости можно предпринять действия посложнее. Например, для узла давления производственной линии на основе унифицированной архитектуры OPC можно выполнить следующее:

* Открыть веб-страницу в новом окне браузера, чтобы отобразить справочные сведения.
* Вызвать метод OPC UA на устройстве, чтобы устранить причину возникновения оповещения.
* Сделать действия по умолчанию недоступными.

    ![Оповещения предварительно настроенного решения для подключенной фабрики][cf-img-alerts]

> [!NOTE]
> Эти оповещения создаются по правилам, указанным в файле конфигурации предварительно настроенного решения. Они могут создавать оповещения, если значения общей эффективности оборудования, ключевых показателей эффективности или значения узлов на основе унифицированной архитектуры OPC превышают заданное пороговое значение.

1. **Панель оповещений** содержит оповещения, созданные в этом решении.

2. Чтобы просмотреть дополнительные сведения об оповещении, щелкните его на панели "Оповещения".

3. Для дальнейшего анализа данных оповещения щелкните диаграмму на панели "Оповещения", чтобы открыть среду обозревателя Time Series Insights.

4. Чтобы устранить причину оповещения, можно выполнить ряд действий, указанных на панели оповещений. Выберите соответствующий параметр и нажмите кнопку "Выполнить".

## <a name="view-overall-equipment-efficiency"></a>Просмотр общей эффективности оборудования

Значение общей эффективности оборудования определяет эффективность производственного процесса с помощью ключевых параметров работоспособности. Общая эффективность оборудования является стандартной рабочей мерой, которая вычисляется путем умножения значений уровня доступности, производительности и качества (общая эффективность оборудования = доступность x качество x производительность).

![Общая эффективность оборудования предварительно настроенного решения для подключенной фабрики][cf-img-oee]

1. Чтобы просмотреть общую эффективность оборудования для любого уровня в иерархии, перейдите к необходимому представлению. Общая эффективность оборудования для этого представления отображается на панели вместе с каждым из элементов, составляющим процентное выражение этого показателя.

2. Для дальнейшего анализа общей эффективности оборудования на любом уровне в иерархии данных щелкните показатель общей эффективности оборудования, доступности, производительности или качества. Отобразится контекстная панель с визуализациями Time Series Insights, на которых можно просмотреть данные за последний час, последние 24 часа и за последние 7 дней.

    ![Визуализация Time Series Insights предварительно настроенного решения для подключенной фабрики][cf-img-tsi-visualization]

3. Для дальнейшего анализа данных оповещения щелкните диаграмму на панели "Оповещения". В результате откроется среда обозревателя Time Series Insights.

    ![Обозреватель Time Series Insights предварительно настроенного решения для подключенной фабрики][cf-img-tsi-explorer]

## <a name="view-key-performance-indicators"></a>Просмотр ключевых показателей эффективности

В решении предусмотрено два ключевых показателя эффективности: *единицы в час* и *расход энергии в кВт*.

![Ключевой показатель эффективности предварительно настроенного решения для подключенной фабрики][cf-img-kpi]

1. Чтобы просмотреть количество единиц в час или расход энергии для любого уровня в иерархии, перейдите к необходимому представлению. На панели отобразится количество единиц в час или расход энергии.

2. Для анализа числа единиц в час или расхода энергии на любом уровне в иерархии щелкните датчик на панели **Ключевые показатели эффективности**. Отобразится контекстная панель с визуализациями Time Series Insights, на которых можно просмотреть данные за последний час, последние 24 часа и за последние 7 дней.

## <a name="scenario-review"></a>Разбор сценария

В этом сценарии вы отслеживали значения общей эффективности оборудования или ключевых показателей эффективности фабрики на панели мониторинга. Затем использовали Time Series Insights, чтобы получить дополнительные сведения о данных телеметрии касательно общей эффективности оборудования и ключевых показателей эффективности для обнаружения аномалий. Вы также использовали панель оповещений для просмотра проблем на фабриках и использовали доступные действия для устранения причин оповещений.

## <a name="other-features"></a>Другие возможности

В следующих разделах рассмотрены некоторые дополнительные возможности решения для подключенной фабрики, не описанные в предыдущем сценарии.

## <a name="apply-filters"></a>Применение фильтров

1. Щелкните значок **шеврона** для отображения списка доступных фильтров на панели расположения фабрик или на панели оповещений.

2. Автоматически отобразится панель фильтров. 

    ![Фильтры предварительно настроенного решения для подключенной фабрики][cf-img-alert-filter]

3. Выберите нужный фильтр. Можно также ввести произвольный текст в поля фильтра.

4. Фильтр применяется автоматически. Состояние фильтра также можно увидеть на панели мониторинга, использовав значок воронки, отображающийся в таблицах фабрик и оповещений.

    ![Фильтры предварительно настроенного решения для подключенной фабрики][cf-img-alert-filter-funnel]

    > [!NOTE]
    > Активный фильтр не влияет на отображаемые значения общей эффективности оборудования и ключевых показателей эффективности. Он просто фильтрует содержимое списка.

5. Чтобы очистить фильтр, щелкните значок воронки и фильтр на контекстной панели. В таблицах фабрик и оповещений отобразится надпись **Все**.

## <a name="browse-an-opc-ua-server"></a>Просмотр сервера на основе унифицированной архитектуры OPC

При развертывании предварительно настроенного решения автоматически выполняется подготовка имитации серверов на основе унифицированной архитектуры OPC, которые можно просмотреть с помощью обозревателя решений. Эти серверы являются *имитациями серверов на основе унифицированной архитектуры OPC*. Имитированные серверы позволяют легко экспериментировать с предварительно настроенным решением без развертывания физических серверов. Если вы хотите подключить к решению физический сервер на основе унифицированной архитектуры OPC, см. руководство [Connect your OPC UA device to the connected factory preconfigured solution][lnk-connect-cf] (Подключение устройства на основе унифицированной архитектуры OPC к предварительно настроенному решению для подключенной фабрики).

1. Щелкните **значок фабрики** на панели навигации панели мониторинга.

    ![Обозреватель сервера предварительно настроенного решения для подключенной фабрики][cf-img-server-browser]

2. Выберите один из серверов из предварительно настроенного списка. В списке отображаются серверы, которые развертываются в предварительно настроенном решении.

    ![Выбор сервера предварительно настроенного решения для подключенной фабрики][cf-img-server-choice]

3. Щелкните **Подключиться**. Отобразится диалоговое окно. При работе с имитацией устройства лучше щелкнуть **Продолжить**.

4. Щелкните любой из узлов в дереве сервера, чтобы развернуть его. Рядом с узлами, публикующими данные телеметрии, отображаются деления.

    ![Дерево серверов предварительно настроенного решения для подключенной фабрики][cf-img-server-tree]

5. Щелкните правой кнопкой мыши элемент для чтения, записи, публикации или вызова этого узла. Доступные действия зависят от разрешений и атрибутов узла. Параметр "Чтение" отображает контекстную панель, показывая значение определенного узла. Параметр "Запись" отображает контекстную панель, в которой можно ввести новое значение. Параметр "Вызов" отображает узел, в котором можно ввести параметры вызова.

## <a name="publish-a-node"></a>Публикация узла

При просмотре *имитаций серверов на основе унифицированной архитектуры OPC* также можно опубликовать новые узлы. С помощью этих узлов в решении можно проанализировать данные телеметрии. Эти *имитации серверов на основе унифицированной архитектуры OPC* позволяют экспериментировать с предварительно настроенным решением без необходимости развертывать физические устройства.

1. Перейдите к узлу в дереве обозревателя сервера на основе унифицированной архитектуры OPC, который необходимо опубликовать.

2. Щелкните узел правой кнопкой мыши.

3. Выберите **Опубликовать**.

    ![Публикация узла подключенной фабрики][cf-img-publish-node]

4. Отобразится контекстная панель. Это означает, что публикация выполнена успешно. Рядом с узлом в представлении уровня станции отображается флажок.

    ![Успешная публикация предварительно настроенного решения для подключенной фабрики][cf-img-publish-success]

## <a name="command-and-control"></a>Команды и управление

Подключенная фабрика позволяет контролировать производственное оборудование прямо из облака. Эту функцию можно использовать, чтобы реагировать на оповещения устройства. Например, устройству можно отправлять команды из облака. Доступные команды можно найти в узле **StationCommands** в дереве обозревателя серверов на основе унифицированной архитектуры OPC. В этом случае откроется клапан сброса давления на станции сборки производственной линии в Мюнхене. Роль **администратора** для развертывания предварительно настроенных решений позволяет использовать функции контроля и управления.

1. Перейдите в узел **StationCommands** дерева обозревателя сервера на основе унифицированной архитектуры OPC.

2. Выберите требуемую команду.

3. Щелкните узел правой кнопкой мыши.

4. Выберите **Вызов**.

    ![Вызов команды предварительно настроенного решения для подключенной фабрики][cf-img-call-command]

5. После этого появится контекстная панель, на которой можно узнать, какой метод вы собираетесь вызывать, а также просмотреть все сведения о применяемых параметрах.

6. Выберите **Вызов**.

    ![Контекстная панель вызова в предварительно настроенном решении для подключенной фабрики][cf-img-call-context]

7. На контекстной панели появится оповещение об успешном вызове метода. Это можно проверить по значению узла давления, обновленному в результате вызова.

    ![Успешный вызов предварительно настроенного решения для подключенной фабрики][cf-img-call-success]


## <a name="behind-the-scenes"></a>Сопутствующие ресурсы

При развертывании предварительно настроенного решения создается несколько ресурсов в выбранной подписке Azure. Эти ресурсы можно просмотреть на [портале Azure][lnk-portal]. Имя **группы ресурсов** , создаваемой при развертывании, зависит от имени, выбранного для предварительно настроенного решения.

![Предварительно настроенное решение на портале Azure][img-cf-portal]

Параметры каждого ресурса можно просмотреть, выбрав его в списке в группе ресурсов.

Можно также просмотреть исходный код предварительно настроенного решения. Исходный код предварительно настроенного решения для подключенной фабрики находится в репозитории GitHub [azure-iot-connected-factory][lnk-cfgithub].

Завершив работу, можно удалить предварительно настроенное решение из подписки Azure на сайте [azureiotsuite.com][lnk-azureiotsuite]. На этом сайте можно легко удалить все ресурсы, подготовленные при создании предварительно настроенного решения.

> [!NOTE]
> Полностью удалить все ресурсы, связанные с предварительно настроенным решением, можно на сайте [azureiotsuite.com][lnk-azureiotsuite]. Не удаляйте группу ресурсов на портале.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы развернули рабочее предварительно настроенное решение, вы можете продолжить знакомство с IoT Suite. См. следующие статьи.

* [Пошаговое руководство по работе с настроенным решением для удаленного мониторинга][lnk-rm-walkthrough]
* [Connect your device to the Connected factory preconfigured solution][lnk-connect-cf] (Подключение устройства к предварительно настроенному решению для подключенной фабрики)
* [Разрешения на сайте azureiotsuite.com][lnk-permissions]

[img-cf-home]:media/iot-suite-connected-factory-overview/cf-dashboard.png
[img-launch-solution]: media/iot-suite-connected-factory-overview/launch-cf.png
[cf-img-menu]: media/iot-suite-connected-factory-overview/cf-dashboard-menu.png
[cf-img-factories]:media/iot-suite-connected-factory-overview/cf-dashboard-factory.png
[cf-img-map]:media/iot-suite-connected-factory-overview/cf-dashboard-map.png
[cf-img-alerts]:media/iot-suite-connected-factory-overview/cf-dashboard-alerts.png
[cf-img-oee]:media/iot-suite-connected-factory-overview/cf-dashboard-oee.png
[cf-img-kpi]:media/iot-suite-connected-factory-overview/cf-dashboard-kpi.png
[cf-img-tsi-visualization]:media/iot-suite-connected-factory-overview/cf-dashboard-tsi.png
[cf-img-tsi-explorer]:media/iot-suite-connected-factory-overview/tsi-explorer.png
[cf-img-server-browser]: media/iot-suite-connected-factory-overview/cf-dashboard-browser.png
[cf-img-server-choice]: media/iot-suite-connected-factory-overview/cf-select-server.png
[cf-img-server-tree]:media/iot-suite-connected-factory-overview/cf-server-tree.png
[cf-img-publish-node]:media/iot-suite-connected-factory-overview/cf-publish-node1.png
[cf-img-publish-success]:media/iot-suite-connected-factory-overview/cf-publish-success.png
[cf-img-call-command]:media/iot-suite-connected-factory-overview/cf-command-and-control-call.png
[cf-img-call-context]:media/iot-suite-connected-factory-overview/cf-command-and-control-call-button.png
[cf-img-call-success]:media/iot-suite-connected-factory-overview/cf-command-and-control-succeed.png
[img-cf-portal]:media/iot-suite-connected-factory-overview/cf-resource-group.png
[cf-img-alert-filter]:media/iot-suite-connected-factory-overview/cf-filter.png
[cf-img-alert-filter-funnel]:media/iot-suite-connected-factory-overview/cf-filter-funnel.png

[lnk_free_trial]: http://azure.microsoft.com/pricing/free-trial/
[lnk-preconfigured-solutions]: iot-suite-what-are-preconfigured-solutions.md
[lnk-azureiotsuite]: https://www.azureiotsuite.com
[lnk-portal]: http://portal.azure.com/
[lnk-cfgithub]: https://github.com/Azure/azure-iot-connected-factory
[lnk-rm-walkthrough]: iot-suite-connected-factory-sample-walkthrough.md
[lnk-connect-cf]: iot-suite-connected-factory-gateway-deployment.md
[lnk-permissions]: iot-suite-permissions.md
[lnk-faq]: iot-suite-faq.md