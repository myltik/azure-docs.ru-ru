---
title: "Включение сходства сеансов с помощью набора средств Azure для Eclipse"
description: "Узнайте, как включить сходство сеансов с помощью набора средств Azure для Eclipse."
services: 
documentationcenter: java
author: rmcmurray
manager: erikre
editor: 
ms.assetid: 88c595ec-7d85-40bd-9078-8d6be7b3f0fa
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: multiple
ms.devlang: Java
ms.topic: article
ms.date: 11/01/2016
ms.author: robmcm
translationtype: Human Translation
ms.sourcegitcommit: 2ea002938d69ad34aff421fa0eb753e449724a8f
ms.openlocfilehash: a7320a7e5052ffb4171307bc8636182447ddfc50


---
# <a name="enable-session-affinity"></a>Включение сходства сеансов
В наборе средств Azure для Eclipse вы можете включить для ролей сходство сеансов HTTP (называемое также прикрепленным сеансами). На следующем рисунке показано диалоговое окно свойств **Балансировка нагрузки** , используемое для включения функции сходства сеансов:

![][ic719492]

## <a name="to-enable-session-affinity-for-your-role"></a>Включение сходства сеансов для роли
1. Щелкните правой кнопкой мыши роль в обозревателе проектов Eclipse, выберите пункт **Azure**, а затем щелкните **Балансировка нагрузки**.
2. В диалоговом окне **Properties for WorkerRole1 Load Balancing** (Свойства для балансировки нагрузки WorkerRole1) выполните следующие действия.
   1. Установите флажок **Enable HTTP session affinity (sticky sessions) for this role**
   2. Для параметра **Input endpoint to use** (Используемая входная конечная точка) выберите используемую входную конечную точку, например **http (public:80, private:8080)**. Ваше приложение должно использовать эту конечную точку в качестве своей конечной точки HTTP. Вы можете включить для роли несколько конечных точек, однако лишь одну из них можно выбрать для поддержки прикрепленных сеансов.
   3. Перестройте приложение.

Если после включения используется несколько экземпляров роли, HTTP-запросы, поступающие от конкретного клиента, будут по-прежнему обрабатываться в том же экземпляре роли.

Набор средств Eclipse позволяет реализовать это путем установки специального модуля IIS — маршрутизация запросов приложений (ARR) — в каждом из экземпляров роли. Модуль ARR перенаправляет HTTP-запросы в соответствующий экземпляр роли. Набор средств автоматически перенастраивает выбранную конечную точку, чтобы входящий HTTP-трафик сначала перенаправлялся в программное обеспечение ARR. Набор средств также создает новую внутреннюю конечную точку, на прослушивание которой настроен ваш сервер Java. Это конечная точка, используемая ARR для перенаправления HTTP-трафика в соответствующий экземпляр роли. Таким образом, каждый экземпляр роли в развертывании с несколькими экземплярами служит в качестве обратного прокси-сервера для всех других экземпляров, реализуя функцию прикрепленных сеансов.

## <a name="notes-about-session-affinity"></a>Заметки о сходстве сеансов
* Сходство сеансов не работает в эмуляторе вычислений. Соответствующие параметры можно применить в эмуляторе вычислений, не затрагивая процесс сборки или работу эмулятора вычислений, однако сама эта функция в эмуляторе вычислений не работает.
* Включение сходства сеансов приведет к увеличению пространства на диске, занимаемого вашим развертыванием в Azure, так как будет скачано дополнительное программное обеспечение, устанавливаемое в экземплярах роли при запуске службы в облаке Azure.
* Инициализация каждой роли будет занимать больше времени.
* Добавляется внутренняя конечная точка, служащая для перенаправления трафика, как было указано выше.

Пример сохранения данных сеанса при включенном сходстве сеансов см. в [центре разработчиков Java][Сохранение данных сеанса с использованием сходства сеансов].

## <a name="see-also"></a>См. также
[Набор средств Azure для Eclipse][Набор средств Azure для Eclipse]

[Создание приложения Hello World для Azure в Eclipse][Создание приложения Hello World для Azure в Eclipse]

[Установка набора средств Azure для Eclipse][Установка набора средств Azure для Eclipse] 

[Сохранение данных сеанса с использованием сходства сеансов][Сохранение данных сеанса с использованием сходства сеансов]

Дополнительные сведения об использовании Azure с Java можно найти в [центре разработчиков Java для Azure][Центре разработчиков Java для Azure].

<!-- URL List -->

[Центре разработчиков Java для Azure]: http://go.microsoft.com/fwlink/?LinkID=699547
[Набор средств Azure для Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699529
[Создание приложения Hello World для Azure в Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699533
[Сохранение данных сеанса с использованием сходства сеансов]: http://go.microsoft.com/fwlink/?LinkID=699539
[Установка набора средств Azure для Eclipse]: http://go.microsoft.com/fwlink/?LinkId=699546

<!-- IMG List -->

[ic719492]: ./media/azure-toolkit-for-eclipse-enable-session-affinity/ic719492.png

<!-- Legacy MSDN URL = https://msdn.microsoft.com/library/azure/hh690950.aspx -->



<!--HONumber=Nov16_HO3-->


