---
title: "Управление присоединенными к домену кластерами HDInsight | Документация Майкрософт"
description: "Узнайте, как управлять присоединенными к домену кластерами HDInsight"
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: 6ebc4d2f-2f6a-4e1e-ab6d-af4db6b4c87c
ms.service: hdinsight
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 10/25/2016
ms.author: saurinsh
translationtype: Human Translation
ms.sourcegitcommit: dcda8b30adde930ab373a087d6955b900365c4cc
ms.openlocfilehash: 78382cf83ed5e94507854d41293a95fd529964c1


---
# <a name="manage-domain-joined-hdinsight-clusters-preview"></a>Управление присоединенными к домену кластерами HDInsight (предварительная версия)
Узнайте, что такое пользователи и роли в кластерах HDInsight, присоединенных к домену, и как управлять присоединенными к домену кластерами HDInsight.

## <a name="users-of-domain-joined-hdinsight-clusters"></a>Пользователи в присоединенном к домену кластере HDInsight.
Кластер HDInsight, который находится вне домена, имеет две учетные записи пользователя, которые создаются вместе с кластером.

* **Администратор Ambari**: эта учетная запись называется также *Пользователь Hadoop* или *Пользователь HTTP*. Эта учетная запись используется для входа на Ambari по адресу https://&lt;имя_кластера >.azurehdinsight.net. Ее также можно использовать для выполнения запросов по представлениям Ambari, выполнения заданий с помощью внешних средств (PowerShell, Templeton, Visual Studio и т. п.) и для проверки подлинности с помощью драйвера Hive ODBC и средств бизнес-аналитики (Excel, PowerBI или Tableau).
* **Пользователь SSH**: эта учетная запись позволяет создать SSH-подключение и выполнять команды sudo. Она имеет привилегии администратора для виртуальных машин Linux.

Для кластера HDInsight, присоединенного к домену, в дополнение к администратору Ambari и пользователю SSH создаются еще три пользователя.

* **Администратор Ranger**: это локальная учетная запись администратора Apache Ranger. Она не является пользователем домена Active Directory. Эту учетную запись можно использовать для настройки политик, создания других пользователей-администраторов или делегированных администраторов (чтобы они могли управлять политиками). По умолчанию используется имя пользователя *admin* и такой же пароль, как для администратора Ambari. Этот пароль можно изменить на странице настроек в Ranger.
* **Пользователь домена и администратор кластера**: это пользователь домена Active Directory, который является администратором кластера Hadoop, а также служб Ambari и Ranger. Учетные данные этого пользователя нужно предоставить во время создания кластера. Этот пользователь имеет следующие права.

  * Присоединение компьютеров к домену и помещение их в определенное подразделение, которое указывается во время создания кластера.
  * Создание субъектов-служб в определенном подразделении, которое указывается во время создания кластера.
  * Создание обратных записей DNS.

    Обратите внимание, что эти права есть и у других пользователей AD.

    В пределах кластера существуют некоторые конечные точки (например, Templeton), которые не управляются службой Ranger, и следовательно не являются безопасными. Такие конечные точки закрываются для всех пользователей, за исключением пользователя домена и администратора кластера.
* **Обычный**: во время создания кластера можно указать несколько групп Active Directory. Пользователи в эти группах будут синхронизированы с Ranger и Ambari. Эти пользователи являются пользователями домена и будут иметь доступ только к конечным точкам, которые управляются службой Ranger (например, Hiveserver2). Для этих пользователей применяются все политики RBAC и правила аудита.

## <a name="roles-of-domain-joined-hdinsight-clusters"></a>Роли в присоединенном к домену кластере HDInsight
В домене HDInsight существуют следующие роли:

* администратор кластера;
* оператор кластера;
* администратора служб;
* оператор службы;
* пользователь кластера.

**Просмотр разрешений для этих ролей**

1. Откройте пользовательский интерфейс управления Ambari.  См. раздел [Вход в пользовательский интерфейс управления Ambari](#open-the-ambari-management-ui).
2. В меню слева щелкните **Роли**.
3. Щелкните синий вопросительный знак, чтобы просмотреть разрешения.

    ![Роли в присоединенном к домену кластере HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-roles-permissions.png)

## <a name="open-the-ambari-management-ui"></a>Вход в пользовательский интерфейс управления Ambari
1. Выполните вход на [портал Azure](https://portal.azure.com).
2. Откройте колонку для кластера HDInsight. См. раздел [Отображение кластеров](hdinsight-administer-use-management-portal.md#list-and-show-clusters).
3. В меню сверху щелкните **Панель мониторинга**, чтобы открыть Ambari.
4. Войдите в Ambari, используя имя пользователя и пароль пользователя домена и администратора кластера.
5. Щелкните раскрывающееся меню **Администратор** в правом верхнем углу, затем нажмите кнопку **Управление Ambari**.

    ![Управление Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-manage-ambari.png)

    Пользовательский интерфейс выглядит примерно так:

    ![Интерфейс управления Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-ambari-management-ui.png)

## <a name="list-the-domain-users-synchronized-from-your-active-directory"></a>Список пользователей домена, синхронизированных из Active Directory
1. Откройте пользовательский интерфейс управления Ambari.  См. раздел [Вход в пользовательский интерфейс управления Ambari](#open-the-ambari-management-ui).
2. В меню слева щелкните **Users**(Пользователи). Вы увидите всех пользователей, синхронизированных в кластер HDInsight из Active Directory.

    ![Список пользователей в интерфейсе управления Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-ambari-management-ui-users.png)

## <a name="list-the-domain-groups-synchronized-from-your-active-directory"></a>Список групп домена, синхронизированных из Active Directory
1. Откройте пользовательский интерфейс управления Ambari.  См. раздел [Вход в пользовательский интерфейс управления Ambari](#open-the-ambari-management-ui).
2. В меню слева щелкните **Группы**. Вы увидите все группы, синхронизированные в кластер HDInsight из Active Directory.

    ![Список групп в интерфейсе управления Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-ambari-management-ui-groups.png)

## <a name="configure-hive-views-permissions"></a>Настройка разрешений для представлений Hive
1. Откройте пользовательский интерфейс управления Ambari.  См. раздел [Вход в пользовательский интерфейс управления Ambari](#open-the-ambari-management-ui).
2. В меню слева щелкните **Представления**.
3. Щелкните **HIVE**, чтобы открыть подробную информацию.

    ![Представления Hive в интерфейсе управления Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-ambari-management-ui-hive-views.png)
4. Щелкните ссылку **Представление Hive**, чтобы настроить представления Hive.
5. Выполните прокрутку вниз до раздела **Разрешения**.

    ![Настройка разрешений для представлений Hive в интерфейсе управления Ambari для присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-manage/hdinsight-domain-joined-ambari-management-ui-hive-views-permissions.png)
6. Щелкните **Добавить пользователя** или **Добавить группу**, а затем укажите пользователей или группы, которые могут использовать представления Hive.

## <a name="configure-users-for-the-roles"></a>Настройка ролей для пользователей
 Список ролей и разрешений см. в разделе [Роли в присоединенном к домену кластере HDInsight](#roles-of-domain---joined-hdinsight-clusters).

1. Откройте пользовательский интерфейс управления Ambari.  См. раздел [Вход в пользовательский интерфейс управления Ambari](#open-the-ambari-management-ui).
2. В меню слева щелкните **Роли**.
3. Щелкните **Добавить пользователя** или **Добавить группу**, чтобы назначить роли для пользователей и групп.

## <a name="next-steps"></a>Дальнейшие действия
* Сведения о настройке присоединенного к домену кластера HDInsight см. в [этой статье](hdinsight-domain-joined-configure.md).
* Сведения о настройке политик Hive и выполнении запросов Hive для присоединенного к домену кластера HDInsight см. [здесь](hdinsight-domain-joined-run-hive.md).
* Сведения о выполнении запросов Hive с помощью SSH в присоединенных к домену кластерах HDInsight см. в статье [Использование SSH с Hadoop на основе Linux в HDInsight из Linux, Unix или OS X](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).



<!--HONumber=Feb17_HO3-->


