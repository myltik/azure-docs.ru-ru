---
title: Использование сообщений X12 для интеграции с предприятием B2B в Azure Logic Apps | Документация Майкрософт
description: Обмен сообщениями X12 в формате EDI для интеграции с предприятием B2B с помощью Azure Logic Apps
services: logic-apps
documentationcenter: .net,nodejs,java
author: padmavc
manager: jeconnoc
editor: ''
ms.assetid: 7422d2d5-b1c7-4a11-8c9b-0d8cfa463164
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/31/2017
ms.author: LADocs; padmavc
ms.openlocfilehash: b269a5171dcb8867f7ea40215d6b8a75d5d918bc
ms.sourcegitcommit: 6f6d073930203ec977f5c283358a19a2f39872af
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "35299085"
---
# <a name="exchange-x12-messages-for-enterprise-integration-with-logic-apps"></a>Обмен сообщениями X12 для интеграции с предприятием с помощью приложений логики

Прежде чем вы начнете обмениваться сообщениями X12 с помощью Azure Logic Apps, нужно создать соглашение X12 и сохранить его в вашей учетной записи интеграции. Ниже описаны действия по созданию соглашения X12.

> [!NOTE]
> В этой статье описываются функции X12 в Azure Logic Apps. Дополнительные сведения см. в статье [Обмен сообщениями EDIFACT с помощью приложений логики](logic-apps-enterprise-integration-edifact.md).

## <a name="before-you-start"></a>Перед началом работы

Вам понадобится следующее:

* [учетная запись интеграции](logic-apps-enterprise-integration-create-integration-account.md), которая уже определена и связана с подпиской Azure;
* как минимум два [партнера](../logic-apps/logic-apps-enterprise-integration-partners.md), определенные в учетной записи интеграции и настроенные с идентификатором X12 в разделе **бизнес-идентификаторов**;    
* требуемая [схема](../logic-apps/logic-apps-enterprise-integration-schemas.md), которую можно отправить в учетную запись интеграции.

После [создания учетной записи интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md), [добавления партнеров](logic-apps-enterprise-integration-partners.md) и добавления [схемы](../logic-apps/logic-apps-enterprise-integration-schemas.md), которую необходимо использовать, вы можете создать соглашение X12, следуя действиям в разделе ниже.

## <a name="create-an-x12-agreement"></a>Создание соглашения X12

1. Войдите на [портал Azure](http://portal.azure.com "Портал Azure"). 

2. В главном меню Azure выберите **Все службы**. Введите в поле поиска "интеграция" и выберите **Учетные записи интеграции**.  

   ![Поиск учетной записи интеграции](./media/logic-apps-enterprise-integration-x12/account-1.png)

   > [!TIP]
   > Если раздел **Все службы** не отображается, разверните меню. В верхней области свернутого меню выберите **Показать меню**.

3. В разделе **Учетные записи интеграции** выберите учетную запись интеграции, в которую нужно добавить соглашение.

   ![Выбор учетной записи интеграции для создания соглашения](./media/logic-apps-enterprise-integration-x12/account-3.png)

4. Выберите **Обзор**, а затем щелкните плитку **Соглашения**. Если плитка "Соглашения" отсутствует, добавьте ее. 

   ![Выбор плитки "Соглашения"](./media/logic-apps-enterprise-integration-as2/agreement-1.png)

5. В разделе **Соглашения** щелкните **Добавить**.

   ![Кнопка "Добавить"](./media/logic-apps-enterprise-integration-as2/agreement-2.png)     

6. В колонке **Добавить** введите **имя** соглашения. Для типа соглашения выберите **X12**. Заполните поля **Главный партнер**, **Главный идентификатор**, **Гостевой партнер** и **Гостевой идентификатор**. Дополнительные сведения о свойствах см. в таблице ниже.

    ![Сведения о соглашении](./media/logic-apps-enterprise-integration-x12/x12-1.png)  

    | Свойство | ОПИСАНИЕ |
    | --- | --- |
    | ИМЯ |Имя соглашения |
    | Тип соглашения | Здесь должен быть указан тип X12 |
    | "Host Partner" (Главный партнер) |Для соглашения нужно указать главного партнера и партнера-гостя. Главный партнер представляет организацию, которая настраивает соглашение. |
    | "Host Identity" (Идентификатор главного партнера) |Идентификатор главного партнера. |
    | "Guest Partner" (Партнер-гость) |Для соглашения нужно указать главного партнера и партнера-гостя. Партнер-гость представляет организацию, которая имеет деловые отношения с главным партнером. |
    | Guest Identity |Идентификатор гостевого партнера |
    | "Receive Settings" (Параметры получения) |Эти свойства применяются ко всем сообщениям, получаемым посредством соглашения. |
    | "Send Settings" (Параметры отправки) |Эти свойства применяются ко всем сообщениям, отправляемым посредством соглашения. |  

  > [!NOTE]
  > Разрешение соглашения X12 определяется сопоставлением квалификаторов и идентификаторов отправителя и получателя, определенных в свойствах партнеров и входящем сообщении. Если эти значения изменены для партнера, нужно обновить соглашение.

## <a name="configure-how-your-agreement-handles-received-messages"></a>Настройка обработки полученных сообщений соглашением

После определения свойств соглашения вы можете настроить идентификацию и обработку входящих сообщений, полученных от партнера, с помощью этого соглашения.

1.  В колонке **Добавить** выберите **Настройки получения**.
Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваться сообщениями. Ниже приведены таблицы с описанием свойств раздела настроек отправки.

    **Настройки получения** состоят из следующих разделов: "Идентификаторы", Acknowledgment (Подтверждение), "Схемы", "Конверты", "Контрольные номера", "Проверки" и "Внутренние параметры".

2. После выполнения описанных выше действий нажмите кнопку **ОК**, чтобы сохранить заданные параметры.

Ваше соглашение готово к обработке входящих сообщений, соответствующих выбранным параметрам.

### <a name="identifiers"></a>"Identifiers" (Идентификаторы)

![Настройка свойств идентификатора](./media/logic-apps-enterprise-integration-x12/x12-2.png)  

| Свойство | ОПИСАНИЕ |
| --- | --- |
| ISA1 (Authorization Qualifier) (ISA1 (квалификатор авторизации)) |Выберите значение квалификатора авторизации из раскрывающегося списка. |
| ISA2 |Необязательный элемент. Введите сведения об авторизации. Если указанное для ISA1 значение отличается от 00, то введите от одной до десяти букв или цифр. |
| ISA3 (Security Qualifier) (ISA3 (квалификатор безопасности)) |Выберите значение квалификатора безопасности из раскрывающегося списка. |
| ISA4 |Необязательный элемент. Введите сведения о безопасности. Если указанное для ISA3 значение отличается от 00, то введите от одной до десяти букв или цифр. |

### <a name="acknowledgment"></a>Acknowledgment (Подтверждение)

![Настройка свойств подтверждения](./media/logic-apps-enterprise-integration-x12/x12-3.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| TA1 expected (Ожидается TA1) |Возвращает техническое подтверждение отправителю сообщения |
| FA expected (Ожидается функциональное подтверждение) |Возвращает функциональное подтверждение отправителю сообщения. Выберите подтверждения 997 или 999 в зависимости от версии используемой схемы. |
| Include AK2/IK2 Loop (Включить цикл AK2/IK2) |Разрешает создание циклов AK2 в функциональных подтверждениях для допустимых наборов транзакций |

### <a name="schemas"></a>Схемы

Выберите схему для каждого типа транзакции (ST1) и приложения отправителя (GS2). Конвейер получения будет разбирать входящие сообщения, сопоставляя значения ST1 и GS2 во входящем сообщении с заданными здесь значениями, а схему входящего сообщения — с указанной здесь схемой.

![Выбор схемы](./media/logic-apps-enterprise-integration-x12/x12-33.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Version (версия) |Выберите версию X12. |
| Transaction Type (ST01) (Тип транзакции (ST01)) |Выберите тип транзакции. |
| Sender Application (GS02) (Приложение отправителя (GS02)) |Выберите приложение отправителя. |
| Схема |Выберите файл схемы для использования. Схемы добавляются в учетную запись интеграции. |

> [!NOTE]
> Настройте требуемую [схему](../logic-apps/logic-apps-enterprise-integration-schemas.md), которая передается в [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).

### <a name="envelopes"></a>Envelopes (Оболочка)

![Указание разделителя в наборе транзакций: выбор "Стандартный идентификатор" или "Разделитель повторений"](./media/logic-apps-enterprise-integration-x12/x12-34.png)

| Свойство | ОПИСАНИЕ |
| --- | --- |
| ISA11 Usage (Использование ISA11) |Указывает разделитель для использования в наборе транзакций. <p>Выберите **стандартный идентификатор**, чтобы использовать точку (.) для десятичного представления вместо десятичного представления входящего документа в конвейере получения EDI. <p>Выберите **разделитель повторений** для повторяющихся вхождений простых элементов данных или повторяемой структуры данных. Например, в качестве разделителя повторений обычно используется карет (^). Для схем HIPPA можно использовать только карет. |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)

![Выбор способа обработки повторяющихся контрольных номеров](./media/logic-apps-enterprise-integration-x12/x12-35.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Disallow Interchange Control Number duplicates (Запретить повторяющиеся контрольные номера обмена) |Запрещает повторяющиеся операции обмена. Сверяет контрольный номер операции обмена (ISA13) с контрольными номерами уже полученных операций. Если они совпадают, то конвейер получения не обрабатывает обмен. Вы можете указать длительность периода (в днях), за который выполняется проверка, задав значение параметра *Проверять наличие повторяющегося ISA13 каждые (дн.)*. |
| Disallow Group control number duplicates (Запретить повторяющиеся контрольные номера групп) |Запрещает операции обмена с повторяющимися контрольными номерами групп. |
| Disallow Transaction set control number duplicates (Запретить повторяющиеся контрольные номера наборов транзакций) |Запрещает операции обмена с повторяющимися контрольными номерами наборов транзакций. |

### <a name="validations"></a>Validations (Проверки)

![Настройка свойств проверки для полученных сообщений](./media/logic-apps-enterprise-integration-x12/x12-36.png) 

После завершения проверки каждой строки автоматически будет добавляться следующая. Если правила не указаны, проверка будет использовать строку "По умолчанию".

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Message Type (Тип сообщения) |Выберите тип сообщения EDI. |
| EDI Validation (Проверка EDI) |Выполняет проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями. |
| Extended Validation (Расширенная проверка) |Если тип данных не EDI, то проверка проводится согласно требованиям к элементу данных и разрешены повторы, перечисления и контроль длины элементов данных (минимальная и максимальная длина). |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Сохраняет все дополнительные начальные или конечные нули и пробелы. Не удаляйте эти символы. |
| Обрезать начальные и конечные нули |Удаляет начальные или конечные нули и пробелы. |
| Trailing Separator Policy (Политика конечных разделителей) |Создает конечные разделители. <p>Выберите **Не разрешено**, чтобы запретить использование конечных разделителей в получаемом обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым. <p>Выберите значение **Необязательно** , чтобы принимать обмен с конечными разделителями или без них. <p>Выберите значение **Обязательно**, если обмен должен содержать конечные разделители. |

### <a name="internal-settings"></a>Internal Settings (Внутренние параметры)

![Выбор "Внутренние параметры"](./media/logic-apps-enterprise-integration-x12/x12-37.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Convert implied decimal format "Nn" to base 10 numeric value (Преобразовать подразумеваемый десятичный формат Nn в числовое значение с основанием 10) |Преобразует число EDI, которое указано в формате Nn, в числовое значение с основанием 10. |
| Create empty XML tags if trailing separators are allowed (Создать пустые теги XML, если конечные разделители разрешены) |Установите этот флажок, чтобы отправитель при обмене добавлял пустые теги XML для конечных разделителей. |
| Разделение документа Interchange на наборы транзакций — заблокировать наборы транзакций при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя к этому набору транзакций соответствующую оболочку. Приостанавливаются только те транзакции, для которых происходит сбой проверки. |
| Разделение документа Interchange на наборы транзакций — заблокировать документ Interchange при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя соответствующую оболочку. Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. | 
| Сохранение документа Interchange — заблокировать наборы транзакций при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена. Обработка будет прекращаться только для тех наборов транзакций, которые не прошли проверку, и продолжится для всех остальных наборов транзакций. |
| Сохранение документа Interchange — заблокировать операцию обмена при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена. Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. |

## <a name="configure-how-your-agreement-sends-messages"></a>Настройка отправки сообщений соглашением

Вы можете настроить идентификацию и обработку исходящих сообщений, которые вы отправляете партнерам, с помощью этого соглашения.

1.  В колонке **Добавить** выберите **Настройки отправки**.
Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваться сообщениями. Ниже приведены таблицы с описанием свойств раздела настроек отправки.

    **Настройки отправки** состоят из следующих разделов: "Идентификаторы", Acknowledgment (Подтверждение), "Схемы", "Конверты", "Кодировки и разделители", "Контрольные номера" и "Проверка".

2. После выполнения описанных выше действий нажмите кнопку **ОК**, чтобы сохранить заданные параметры.

Ваше соглашение готово к обработке исходящих сообщений, соответствующих выбранным параметрам.

### <a name="identifiers"></a>"Identifiers" (Идентификаторы)

![Настройка свойств идентификатора](./media/logic-apps-enterprise-integration-x12/x12-4.png)  

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Authorization qualifier (ISA1) (Квалификатор авторизации (ISA1)) |Выберите значение квалификатора авторизации из раскрывающегося списка. |
| ISA2 |Введите сведения об авторизации. Если значение отличается от 00, то введите от одной до десяти букв или цифр. |
| Security qualifier (ISA3) (Квалификатор авторизации (ISA3)) |Выберите значение квалификатора безопасности из раскрывающегося списка. |
| ISA4 |Введите сведения о безопасности. Если значение в текстовом поле "ISA4" отличается от 00, то введите от одной до десяти букв или цифр. |

### <a name="acknowledgment"></a>Acknowledgment (Подтверждение)

![Настройка свойств подтверждения](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| Свойство | ОПИСАНИЕ |
| --- | --- |
| TA1 expected (Ожидается TA1) |Возвращает техническое подтверждение (TA1) отправителю сообщения. Этот параметр указывает, что главный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера в соглашении. Эти подтверждения ожидаются главным партнером согласно параметрам получения в соглашении. |
| FA expected (Ожидается функциональное подтверждение) |Возвращает функциональное подтверждение (FA) отправителю сообщения. Согласно версиям схемы, с которыми вы работаете, укажите, требуются ли подтверждения 997 или 999. Эти подтверждения ожидаются главным партнером согласно параметрам получения в соглашении. |
| FA Version (Версия функционального подтверждения) |Выберите версию функционального подтверждения. |

### <a name="schemas"></a>Схемы

![Выбор схемы для использования](./media/logic-apps-enterprise-integration-x12/x12-5.png)  

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Version (версия) |Выберите версию X12. |
| Transaction Type (ST01) (Тип транзакции (ST01)) |Выберите тип транзакции. |
| Схема |Выберите схему для использования. Схемы находятся в вашей учетной записи интеграции. Если вы сначала выберете схему, будут автоматически настроены версия и тип транзакции.  |

> [!NOTE]
> Настройте требуемую [схему](../logic-apps/logic-apps-enterprise-integration-schemas.md), которая передается в [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-accounts.md).

### <a name="envelopes"></a>Envelopes (Оболочка)

![Указание разделителя в наборе транзакций: выбор "Стандартный идентификатор" или "Разделитель повторений"](./media/logic-apps-enterprise-integration-x12/x12-6.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| ISA11 Usage (Использование ISA11) |Указывает разделитель для использования в наборе транзакций. <p>Выберите **стандартный идентификатор**, чтобы использовать точку (.) для десятичного представления вместо десятичного представления входящего документа в конвейере получения EDI. <p>Выберите **разделитель повторений** для повторяющихся вхождений простых элементов данных или повторяемой структуры данных. Например, в качестве разделителя повторений обычно используется карет (^). Для схем HIPPA можно использовать только карет. |

### <a name="control-numbers"></a>Control Numbers (Контрольные номера)

![Указание свойств контрольного номера](./media/logic-apps-enterprise-integration-x12/x12-8.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Control Version Number (ISA12) (Контрольный номер версии (ISA12)) |Выберите версию стандартной X12 |
| Usage Indicator (ISA15) (Индикатор использования (ISA15)) |Выберите контекст обмена.  Значения содержат сведения, рабочие или тестовые данные. |
| Схема |Создает сегменты GS и ST для обмена в кодировке X12, которые отправляются в конвейер отправки. |
| GS1 |Необязательно. Выберите значение функционального кода в раскрывающемся списке. |
| GS2 |Необязательно. Приложение-отправитель. |
| GS3 |Необязательно. Приложение-получатель. |
| GS4 |Необязательно. Выберите формат CCYYMMDD или YYMMDD. |
| GS5 |Необязательно. Выберите формат HHMM, HHMMSS или HHMMSSdd. |
| GS7 |Необязательно. Выберите значение ответственного агентства из раскрывающегося списка. |
| GS8 |Необязательно. Версия документа. |
| Interchange Control Number (ISA13) (Контрольный номер обмена (ISA13)) |Обязательно. Введите диапазон значений для контрольного номера обмена. Введите числовое значение в диапазоне от 1 до 999 999 999. |
| Group Control Number (GS06) (Контрольный номер группы (GS06)) |Обязательно. Введите диапазон значений для контрольного номера группы. Введите числовое значение в диапазоне от 1 до 999 999 999. |
| Transaction Set Control Number (ST02) (Контрольный номер набора транзакций (ST02)) |Обязательно. Введите диапазон значений для контрольного номера набора транзакций. Задайте диапазон числовых значений в пределах от 1 до 999 999 999. |
| Prefix (Префикс) |Необязательно. Применяется к диапазону контрольных номеров наборов транзакций, используемых в подтверждении. Введите числовое значение в два поля посередине и буквы или цифры (при необходимости) в поля префикса и суффикса. Поля посередине являются обязательными и содержат минимальное и максимальное значения контрольного номера. |
| Суффикс |Необязательно. Применяется к диапазону контрольных номеров наборов транзакций, используемых в подтверждении. Введите числовое значение в два поля посередине и буквы или цифры (при необходимости) в поля префикса и суффикса. Поля посередине являются обязательными и содержат минимальное и максимальное значения контрольного номера. |

### <a name="character-sets-and-separators"></a>Character Sets and Separators (Наборы символов и разделители)

Отдельно от набора символов можно ввести отличающийся набор разделителей для каждого типа сообщений. Если для заданной схемы сообщений набор символов не указан, то используется набор символов по умолчанию.

![Указание разделителей для типов сообщений](./media/logic-apps-enterprise-integration-x12/x12-9.png) 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Character Set to be used (Используемый набор символов) |Выберите набор символов X12 для проверки свойств. Возможные варианты: Basic (базовый), Extended (расширенный) или UTF8. |
| Схема |Выберите схему из раскрывающегося списка. После завершения каждой строки автоматически будет добавляться новая строка. Для этой схемы выберите нужный набор разделителей на основе приведенных ниже описаний разделителя. |
| Тип входных данных |Выберите тип входных данных из раскрывающегося списка. |
| Разделитель компонентов |Введите один символ, который будет разделять составные элементы данных. |
| Разделитель элементов данных |Введите один символ, который будет разделять простые элементы данных в составных элементах данных. |
| Символ замены |Введите символ замены, которым будут заменены все символы разделителей в полезных данных при создании исходящего сообщения X12. |
| Признак конца сегмента |Введите один символ, который будет обозначать конец сегмента EDI. |
| Суффикс |Выберите символ, который будет использоваться с идентификатором сегмента. Если указывается суффикс, то элемент данных признака конца сегмента может быть пустым. Если признак конца сегмента оставить пустым, то необходимо будет указать суффикс. |

> [!TIP]
> Чтобы ввести значения со специальными знаками, откройте соглашение в редакторе как JSON-файл и укажите значение ASCII для специального знака.

### <a name="validation"></a>Проверка

![Настройка свойств проверки для отправки сообщений](./media/logic-apps-enterprise-integration-x12/x12-10.png) 

После завершения проверки каждой строки автоматически будет добавляться следующая. Если правила не указаны, проверка будет использовать строку "По умолчанию".

| Свойство | ОПИСАНИЕ |
| --- | --- |
| Message Type (Тип сообщения) |Выберите тип сообщения EDI. |
| EDI Validation (Проверка EDI) |Выполняет проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями. |
| Extended Validation (Расширенная проверка) |Если тип данных не EDI, то проверка проводится согласно требованиям к элементу данных и разрешены повторы, перечисления и контроль длины элементов данных (минимальная и максимальная длина). |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Сохраняет все дополнительные начальные или конечные нули и пробелы. Не удаляйте эти символы. |
| Обрезать начальные и конечные нули |Удаляет начальные или конечные нули. |
| Trailing Separator Policy (Политика конечных разделителей) |Создает конечные разделители. <p>Выберите **Не разрешено**, чтобы запретить использование конечных разделителей в отправляемом обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым. <p>Выберите значение **Необязательно**, чтобы отправлять обмен с конечными разделителями или без них. <p>Выберите значение **Обязательно**, если отправляемый обмен должен содержать конечные разделители. |

## <a name="find-your-created-agreement"></a>Поиск созданного соглашения

1.  Настроив все свойства соглашения, нажмите кнопку **ОК** на странице **Добавить**, чтобы завершить создание соглашения и вернуться в учетную запись интеграции.

    В списке **Соглашения** появится созданное соглашение.

2.  Вы также можете просмотреть соглашения в обзоре учетной записи интеграции. В меню учетной записи интеграции выберите **Обзор**, а затем щелкните плитку **Соглашения**.

    ![Выбор плитки "Соглашения"](./media/logic-apps-enterprise-integration-x12/x12-1-5.png)   

## <a name="view-the-swagger"></a>Просмотр Swagger
Ознакомьтесь с [дополнительными сведениями о Swagger](/connectors/x12/). 

## <a name="learn-more"></a>Подробнее
* [Обзор пакета интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md "Обзор пакета интеграции Enterprise")  

