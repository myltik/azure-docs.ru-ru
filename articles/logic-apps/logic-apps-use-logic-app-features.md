---
title: "Добавление условий и запуск рабочих процессов в Azure Logic Apps | Документация Майкрософт"
description: "Узнайте, как управлять запуском рабочих процессов в Azure Logic Apps с помощью добавления условной логики, триггеров, действий и параметров."
author: ecfan
manager: anneta
editor: 
services: logic-apps
documentationcenter: 
ms.assetid: e4e24de4-049a-4b3a-a14c-3bf3163287a8
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/28/2017
ms.author: LADocs; estfan
ms.openlocfilehash: 751bcc21397effc501931c00afef05f2dab24e4a
ms.sourcegitcommit: eeb5daebf10564ec110a4e83874db0fb9f9f8061
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2018
---
# <a name="use-logic-apps-features"></a>Использование функций приложений логики

В [предыдущем разделе](../logic-apps/quickstart-create-first-logic-app-workflow.md) вы создали свое первое приложение логики. Чтобы управлять рабочим процессом приложения логики, необходимо указать различные пути выполнения для него и способы обработки данных в массивах, коллекциях и пакетах. Эти элементы можно включить в рабочий процесс приложения логики:

* Условия и [операторы switch](../logic-apps/logic-apps-switch-case.md) позволяют вашему приложению логики выполнять различные действия в зависимости от того, выполняются ли определенные условия.

* [Циклы](../logic-apps/logic-apps-loops-and-scopes.md) позволяют приложению логики выполнять шаги неоднократно. Например, можно повторить действия по всему массиву, используя цикл **For_each**, или повторять действия, пока не выполнится условие, используя цикл **Until**.

* [Области](../logic-apps/logic-apps-loops-and-scopes.md) позволяют группировать последовательности действий, например, чтобы реализовать обработку исключений.

* [Индивидуальная обработка](../logic-apps/logic-apps-loops-and-scopes.md) позволяет приложению логики запускать отдельные рабочие процессы для элементов в массиве при использовании команды **SplitOn**.

Здесь описываются другие понятия для создания приложения логики:

* Представление кода для изменения имеющегося приложения логики.
* Варианты запуска рабочего процесса.

## <a name="conditions-run-steps-only-after-meeting-a-condition"></a>Условия: выполнение шагов только после выполнения условия

Чтобы приложение логики выполняло шаги только тогда, когда данные соответствуют указанным критериям, можно добавить условие, которое сравнивает данные в рабочем процессе с определенными полями и значениями.

Например, предположим, что у вас есть приложение логики, которое отправляет слишком много электронных писем для записей в RSS-канале веб-сайта. Можно добавить условие, чтобы приложение логики отсылало электронное письмо только в том случае, когда новая запись принадлежит к определенной категории.

1. На [портале Azure](https://portal.azure.com) найдите приложение логики и откройте его в конструкторе приложений логики.

2. Добавьте условие в нужное место в рабочем процессе. 

   Чтобы добавить условие между имеющимися шагами в рабочем процессе приложения логики, переместите указатель над стрелкой, где вы хотите добавить условие. 
   Щелкните **знак "плюс"** (**+**), а затем выберите **Добавить условие**. Например: 

   ![Добавление условия в приложение логики](./media/logic-apps-use-logic-app-features/add-condition.png)

   > [!NOTE]
   > Если условие надо добавить в конце текущего рабочего процесса, перейдите в нижнюю часть приложения логики и выберите **+ Новый шаг**.

3. Теперь определите условие. Укажите исходное поле, которое необходимо оценить, операцию, которую нужно выполнить, и целевое значение или поле. Чтобы добавить имеющиеся поля в условие, выберите их из **списка добавления динамического содержимого**.

   Например: 

   ![Изменение условий в базовом режиме](./media/logic-apps-use-logic-app-features/edit-condition-basic-mode.png)

   Ниже приведено полное условие:

   ![Полное условие](./media/logic-apps-use-logic-app-features/edit-condition-basic-mode-2.png)

   > [!TIP]
   > Чтобы определить условие в коде, выберите **Edit in advanced mode** (Изменить в расширенном режиме). Например: 
   > 
   > ![Изменение условия в коде](./media/logic-apps-use-logic-app-features/edit-condition-advanced-mode.png)

4. В разделе **IF YES** (Если да) и **IF NO** (Если нет) добавьте шаги для выполнения в зависимости от удовлетворения условия.

   Например: 

   ![Условия с путями "Да" и "Нет"](./media/logic-apps-use-logic-app-features/condition-yes-no-path.png)

   > [!TIP]
   > Имеющиеся действия можно перетаскивать в пути **IF YES** (Если да) и **IF NO** (Если нет).

5. Сохраните приложение логики, когда закончите.

Теперь вы будете получать сообщения электронной почты только в том случае, если записи соответствуют условию.

## <a name="repeat-actions-over-a-list-with-foreach"></a>Повтор действия для каждого элемента списка с помощью forEach

Цикл forEach определяет массив, для каждого элемента которого должно быть выполнено действие. Если определенный объект не является массивом, цикл завершается сбоем. Например, если есть действие action1, которое выводит массив сообщений, и нужно отправить каждое сообщение, то можно включить оператор forEach в свойства действия: forEach: `forEach : "@action('action1').outputs.messages"`.

## <a name="edit-the-code-definition-for-a-logic-app"></a>Изменение определения кода в приложении логики

Помимо конструктора приложения логики, вы можете изменять непосредственно код, задающий приложение логики.

1. В панели команд выберите **Представление кода**.

    Откроется полный редактор, показывающий определение, которое вы только что изменили.

    ![Просмотр кода](media/logic-apps-use-logic-app-features/codeview.png)

    С помощью текстового редактора вы можете копировать и вставлять любое количество действий в том же приложении логики или в разных приложениях логики. 
    Вы также можете легко добавлять или удалять целые разделы в определении или совместно использовать определения с другими пользователями.

2. Чтобы сохранить изменения, нажмите кнопку **Сохранить**.

## <a name="parameters"></a>Параметры

Некоторые возможности Logic Apps (например, параметры) доступны только в представлении кода. Параметры облегчают многократное использование значений во всем приложении логики. Например, если вы хотите использовать один адрес электронной почты в нескольких действиях, можно задать его как параметр.

Параметры — это хороший способ извлечения значений, которые вы планируете часто изменять. Их особенно удобно использовать, когда вам нужно переопределять параметры в разных средах. Дополнительные сведения о переопределении параметров в зависимости от среды см. в статье [Создание определений рабочих процессов для приложений логики с помощью JSON](../logic-apps/logic-apps-author-definitions.md) и [документации по REST API](https://docs.microsoft.com/rest/api/logic).

Далее приводится пример обновления существующего приложения логики, чтобы в нем использовались параметры для условия запроса.

1. В представлении кода найдите объект `parameters : {}` и вставьте в него следующий объект `currentFeedUrl`:

        "currentFeedUrl" : {
            "type" : "string",
            "defaultValue" : "http://rss.cnn.com/rss/cnn_topstories.rss"
        }

2. Выберите действие `When_a_feed-item_is_published`, найдите раздел `queries` и замените значение запроса значением: `"feedUrl": "#@{parameters('currentFeedUrl')}"`. 

    Чтобы объединить несколько строк, можно использовать функцию `concat`. 
    Например, `"@concat('#',parameters('currentFeedUrl'))"` действует так же, как описано выше.

3.  Когда все будет готово, нажмите **Сохранить**. 

    Теперь вы можете изменить RSS-канал веб-сайта, передав другой URL-адрес через объект `currentFeedURL`.

Дополнительные сведения о создании определений приложений логики см. в [этой статье](../logic-apps/logic-apps-author-definitions.md).

## <a name="start-logic-app-workflows"></a>Запуск рабочих процессов приложения логики

Существует несколько различных вариантов запуска рабочего процесса, заданного в приложении логики. Рабочий процесс всегда можно запустить по запросу на [портале Azure].

### <a name="recurrence-triggers"></a>Триггеры повторения

Триггер повторения запускается с заданным интервалом. Если в триггере предусмотрена условная логика, он проверяет, нужно ли запустить рабочий процесс. Триггер указывает, что рабочий процесс должен быть запущен, возвращая код состояния `200`. Если не требуется запускать рабочий процесс, триггер возвращает код состояния `202`.

### <a name="callback-using-rest-apis"></a>Обратный вызов с использованием REST API

Службы могут вызывать конечную точку приложения логики для запуска рабочего процесса. Чтобы запустить подобное приложение логики по требованию, нажмите кнопку **Запустить сейчас** на панели команд. Дополнительные сведения см. в статье [Приложения логики как вызываемые конечные точки](../logic-apps/logic-apps-http-endpoint.md). 

<!-- Shared links -->
[портале Azure]: https://portal.azure.com

## <a name="next-steps"></a>Дополнительная информация

* [Выполнение различных действий в приложениях логики с помощью оператора switch](../logic-apps/logic-apps-switch-case.md) 
* [Циклы, области действия и индивидуальная обработка](../logic-apps/logic-apps-loops-and-scopes.md)
* [Создание определений приложений логики](../logic-apps/logic-apps-author-definitions.md)