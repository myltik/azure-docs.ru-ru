---
title: "Операторы switch. Выполнение различных шагов на основе определенных значений в Azure Logic Apps | Документация Майкрософт"
description: "Выполнение различных шагов на основе значений объектов, выражений или маркеров в приложениях логики"
services: logic-apps
keywords: "оператор switch"
author: ecfan
manager: anneta
editor: 
documentationcenter: 
ms.assetid: 
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/05/2018
ms.author: estfan; LADocs
ms.openlocfilehash: e1f515189be8a5659af0f6c29b3fac0550abc9f9
ms.sourcegitcommit: 0b02e180f02ca3acbfb2f91ca3e36989df0f2d9c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2018
---
# <a name="switch-statements-run-different-steps-based-on-specific-values-in-logic-apps"></a>Операторы switch. Выполнение различных шагов на основе определенных значений в приложениях логики

Для выполнения различных шагов на основе значений объекта, выражения или маркера используйте оператор *switch*. Эта структура оценивает объект, выражение или маркер, выбирает вариант, который соответствует результату, и выполняет шаги только для этого варианта. При выполнении оператора switch результат должен совпадать только с одним вариантом.

Например, предположим, что вы хотите, чтобы приложение логики выполняло различные действия на основе параметра, выбранного в сообщении. В этом примере приложение логики проверяет RSS-канал веб-сайта для обнаружения нового содержимого. Если в RSS-канале появляется новый элемент, приложение логики отправляет сообщение утверждающему лицу. В зависимости от того, что выбрал утверждающий ("Утвердить" или "Отклонить"), приложение логики выполняет различные действия.

> [!TIP]
> Как и в других языках программирования, операторы switch поддерживают только операторы равенства. Если вам нужны другие операторы отношения (к примеру, оператор greater than), используйте [условный оператор](#conditions).
> Чтобы выполнение было детерминированным, варианты должны содержать уникальные статические значения, а не динамические маркеры или выражения.

## <a name="prerequisites"></a>предварительным требованиям

* Подписка Azure. Если у вас нет ее, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Чтобы выполнить действия, указанные в данной статье, [создайте этот пример приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md), используя учетную запись Outlook.com или Office 365 Outlook.

  1. Когда вы добавляете действие для отправки сообщения, выберите **Send an approval email** (Отправить сообщение с утверждением).

     ![Выбор Send an approval email (Отправить сообщение с утверждением)](./media/logic-apps-control-flow-switch-statement/send-approval-email-action.png)

  2. Заполните необходимые поля, например адрес электронной почты получателя письма с утверждением. 
  В разделе **Параметры пользователя** введите "Утвердить", "Отклонить".

     ![Ввод сведений о сообщении](./media/logic-apps-control-flow-switch-statement/send-approval-email-details.png)

## <a name="add-a-switch-statement"></a>Добавление оператора switch

1. В конце образца рабочего процесса выберите **+ Новый шаг** > **... Дополнительно** > **Add a switch case** (Добавить вариант для оператора switch). 

   ![Добавление оператора switch](./media/logic-apps-control-flow-switch-statement/add-switch-statement.png)

   Появится оператор switch с одним вариантом и вариантом по умолчанию. 
   В операторе switch должен быть создан по меньшей мере один вариант, помимо варианта по умолчанию. 

   Если вы хотите добавить оператор switch между шагами, наведите указатель мыши на стрелку, где его нужно добавить. 
   Щелкните появившийся **знак "плюс"** (**+**), а затем выберите **Add a switch case** (Добавить вариант для оператора switch).

4. В поле **В** выберите поле **SelectedOption**, выходные данные которого определяют действие для выполнения. 
   
   Выбрать поле можно в появившемся списке **Добавление динамического содержимого**.

5. Для обработки вариантов, когда утверждающий выбирает `Approve` или `Reject`, добавьте другой вариант между **Вариант** и **По умолчанию**. 
   
6. Добавьте следующие действия в соответствующие варианты:

   | № варианта | **SelectedOption** | Действие |
   |:------ |:-------------------|:------ |
   | Вариант 1 | **Утвердить** | Добавьте действие Outlook **Send an email** (Отправить сообщение), чтобы отправить сведения об элементе RSS только после того, как утверждающий выбрал **Утвердить**. |
   | Вариант 2 | **Отклонить** | Добавьте действие Outlook **Send an email** (Отправить сообщение), чтобы уведомить других утверждающих о том, что элемент RSS был отклонен. |
   | значение по умолчанию | \<Нет\> | Никаких действий не требуется. В этом примере вариант **По умолчанию** пуст, потому что для **SelectedOption** доступны только два варианта. |
   |         |          |

   ![Оператор switch](./media/logic-apps-control-flow-switch-statement/switch.png)

7. Сохраните приложение логики. 

   Чтобы вручную протестировать этот пример, выберите **Запуск**. Приложение логики должно найти новый элемент RSS и отправить письмо с утверждением. 
   Выберите **Утвердить**, чтобы просмотреть результаты.

## <a name="json-definition"></a>Определение JSON

Теперь, когда приложение логики создано с помощью оператора switch, можно рассмотреть определение программного высокоуровневого кода оператора switch.

``` json
"Switch": {
   "type": "Switch",
   "expression": "@body('Send_approval_email')?['SelectedOption']",
   "cases": {
      "Case" : {
         "actions" : {
           "Send_an_email": { }
         },
         "case" : "Approve"
      },
      "Case_2" : {
         "actions" : {
           "Send_an_email_2": { }
         },
         "case" : "Reject"
      }
   },
   "default": {
      "actions": {}
   },
   "runAfter": {
      "Send_approval_email": [
         "Succeeded"
      ]
   }
}
```

| Метка              | ОПИСАНИЕ |
| :----------------- | :---------- |
| `"Switch"`         | Имя оператора switch, которое можно изменить для большей удобочитаемости. |
| `"type": "Switch"` | Указывает на то, что конструкция является оператором switch. |
| `"expression"`     | В этом примере указывает на вариант, выбранный подтверждающим лицом, который сравнивается с указанными далее в определении вариантами значений. |
| `"cases"` | Определяет любое число вариантов. Для каждого варианта `"Case_*"` является именем по умолчанию, которое можно изменить для большей удобочитаемости. |
| `"case"` | Указывает значение варианта, которое оператор switch использует для сравнения. Это значение должно быть постоянным и уникальным. Если ни один вариант не соответствует результату выражения switch, выполняются действия в разделе `"default"`.
|           |         |

## <a name="get-support"></a>Получение поддержки

* Если у вас возникли вопросы, то посетите [форум Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).
* Отправить предложения по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Azure Logic Apps](http://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дополнительная информация

* [Conditional statements: Run steps based on a condition in logic apps](../logic-apps/logic-apps-control-flow-conditional-statement.md) (Условные операторы. Выполнение шагов на основе условия в приложениях логики)
* [Loops: Process arrays or repeat actions until a condition is met](../logic-apps/logic-apps-control-flow-loops.md) (Циклы. Обработка массивов или повторение действий до выполнения условия)
* [Create or join parallel branches in your logic app](../logic-apps/logic-apps-control-flow-branches.md) (Создание или присоединение параллельных ветвей в приложении логики)
* [Области. Выполнение шагов на основе состояния группы в приложениях логики](../logic-apps/logic-apps-control-flow-run-steps-group-scopes.md)