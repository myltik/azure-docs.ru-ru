---
title: Доступ к локальным источникам данных в Azure Logic Apps | Документация Майкрософт
description: Настройка локального шлюза данных для доступа к локальным источникам данных из приложений логики
keywords: доступ к данным, локальный, передача данных, шифрование, источники данных
services: logic-apps
author: jeffhollan
manager: jeconnoc
editor: ''
documentationcenter: ''
ms.assetid: 6cb4449d-e6b8-4c35-9862-15110ae73e6a
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 09/14/2017
ms.author: LADocs; millopis; estfan
ms.openlocfilehash: 0bf51f22e41ec78ef1dca7cba7bd5e26cbe1d969
ms.sourcegitcommit: 6f6d073930203ec977f5c283358a19a2f39872af
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/11/2018
ms.locfileid: "35300012"
---
# <a name="connect-to-data-sources-on-premises-from-logic-apps-with-on-premises-data-gateway"></a>Подключение к локальным источникам данных из приложений логики с помощью локального шлюза данных

Чтобы иметь доступ к локальным источникам данных из ваших приложений логики, настройте локальный шлюз данных, который могут использовать приложения логики с помощью поддерживаемых соединителей. Этот шлюз используется в качестве моста для шифрования и быстрой передачи данных между локальными источниками данных и приложениями логики. Шлюз ретранслирует данные из локальных источников по шифрованным каналам через служебную шину Azure. Весь трафик поступает как безопасный исходящий трафик от агента шлюза. Дополнительные сведения см. в разделе [Как работает шлюз](logic-apps-gateway-install.md#gateway-cloud-service). 

Шлюз поддерживает подключения к таким локальным источникам данных:

*   BizTalk Server 2016
*   DB2  
*   Файловая система
*   Informix
*   Магический квадрант
*   MySQL
*   База данных Oracle
*   PostgreSQL
*   сервер приложений SAP; 
*   сервер сообщений SAP;
*   SharePoint
*   SQL Server;
*   Teradata

Далее представлена процедура настройки локального шлюза данных для работы с приложениями логики. Дополнительные сведения о поддерживаемых соединителях см. статье [Список соединителей](../connectors/apis-list.md). 

Сведения о том, как использовать шлюз с другими службами, см. в следующих статьях:

*   [Локальный шлюз данных](https://powerbi.microsoft.com/documentation/powerbi-gateway-onprem/)
*   [Локальный шлюз данных](../analysis-services/analysis-services-gateway.md)
*   [Управление локальным шлюзом данных в Microsoft Flow](https://flow.microsoft.com/documentation/gateway-manage/)
*   [Управление локальным шлюзом данных в PowerApps](https://powerapps.microsoft.com/tutorials/gateway-management/)

## <a name="requirements"></a>Требования

* [Шлюз данных должен быть установлен на локальном компьютере](logic-apps-gateway-install.md).

* При входе на портал Azure необходимо использовать ту же рабочую или учебную запись, которая использовалась для [установки локального шлюза данных](logic-apps-gateway-install.md#requirements). Для установки шлюза у вашей учетной записи входа также должна быть подписка Azure, которая будет использоваться при создании ресурса шлюза на портале Azure.

* Не должно быть заявок на доступ к этой установке шлюза от другого ресурса шлюза Azure. Вы можете связать установку шлюза только с одним ресурсом шлюза Azure. Заявка осуществляется при создании ресурса шлюза, поэтому установка недоступна для других ресурсов.

* Локальный шлюз данных работает как служба Windows и настроен для использования `NT SERVICE\PBIEgwService` в качестве учетных данных входа службы Windows. Для создания и обслуживания ресурса шлюза на портале Azure [учетная запись службы Windows](../logic-apps/logic-apps-gateway-install.md) должна иметь по крайней мере разрешения **участника**. 

  > [!NOTE]
  > Учетная запись службы Windows отличается от учетной записи, которая использовалась для подключения к локальным источникам данных, и от рабочей или учебной учетной записи, которая использовалась для входа в облачные службы.

## <a name="install-the-on-premises-data-gateway"></a>Установка локального шлюза данных

Если это еще не сделано, выполните следующие [действия, чтобы установить локальный шлюз данных](logic-apps-gateway-install.md). Перед тем как продолжить, убедитесь, что шлюз данных установлен на локальном компьютере.

<a name="create-gateway-resource"></a>

## <a name="create-an-azure-resource-for-the-on-premises-data-gateway"></a>Создание ресурса для локального шлюза данных Azure

После установки шлюза на локальном компьютере вам необходимо создать шлюз данных в качестве ресурса в Azure. На этом шаге также связывается ресурс шлюза с подпиской Azure.

1. Войдите на [портал Azure](https://portal.azure.com "Портал Azure"). Убедитесь, что используете тот же рабочий или учебный адрес электронной почты Azure, что и при установке шлюза.

2. В главном меню в Azure выберите **Создать ресурс** > **Интеграция с предприятием** > **On-premises data gateway** (Локальный шлюз данных).

   ![Поиск элемента "Локальный шлюз данных"](./media/logic-apps-gateway-connection/find-on-premises-data-gateway.png)

3. Чтобы создать ресурс шлюза данных, на странице **Создание шлюза для подключения** укажите такие сведения:

    * **Имя.** Введите имя для вашего ресурса шлюза. 

    * **Подписка.** Выберите подписку Azure, связанную с вашим ресурсом шлюза. 
    Это должна быть та же подписка, которая использовалась для приложения логики.
   
      Подписка по умолчанию основана на учетной записи Azure, которая использовалась для входа.

    * **Группа ресурсов.** Создайте группу ресурсов Azure или выберите имеющуюся для развертывания своего ресурса шлюза. 
    Группы ресурсов помогают управлять связанными ресурсами Azure в качестве коллекции.

    * **Расположение.** Azure ограничивает расположение тем же регионом, выбранным для облачной службы шлюза во время [установки шлюза](logic-apps-gateway-install.md). 

      > [!NOTE]
      > Убедитесь, что расположение ресурса шлюза совпадает с расположением облачной службы шлюза. В противном случае установка вашего шлюза может не отобразиться в списке установленных шлюзов, который вы можете выбрать на следующем шаге.
      > 
      > Вы можете выбрать разные регионы для ресурса шлюза и вашего приложения логики.

    * **Имя установки.** Если установка шлюза еще не выбрана, выберите шлюз, установленный ранее. 

    Чтобы добавить ресурс шлюза на панель мониторинга Azure, выберите **Закрепить на панели мониторинга**. 
    Когда все будет готово, выберите **Создать**.

    Например: 

    ![Предоставление сведений для создания локального шлюза данных](./media/logic-apps-gateway-connection/createblade.png)

    Чтобы в любое время найти или просмотреть шлюз данных, в главном меню в Azure выберите **Все службы**. 
    В поле поиска введите "on-premises data gateways", а затем выберите **On-premises Data Gateways** (Локальные шлюзы данных).

    ![Поиск элемента On-premises Data Gateways (Локальные шлюзы данных)](./media/logic-apps-gateway-connection/find-on-premises-data-gateway-enterprise-integration.png)

<a name="connect-logic-app-gateway"></a>

## <a name="connect-your-logic-app-to-the-on-premises-data-gateway"></a>Подключение приложения логики к локальному шлюзу данных

Теперь, когда вы создали ресурс шлюза данных и связали свою подписку Azure с этим ресурсом, создайте подключение между приложением логики и шлюзом данных.

> [!NOTE]
> Расположение подключения шлюза должно находиться в том же регионе, что и приложение логики, но вы можете использовать шлюз данных из другого региона.

1. На портале Azure создайте приложение логики или откройте его в конструкторе приложений логики.

2. Добавьте соединитель, который поддерживает локальные подключения, например SQL Server.

3. Следуя указанному порядку, выберите **Connect via on-premises data gateway** (Подключиться через локальный шлюз данных), укажите уникальное имя соединения и необходимую информацию и выберите ресурс шлюза данных, который вы хотите использовать. Когда все будет готово, выберите **Создать**.

   > [!TIP]
   > Уникальное имя подключения позволяет легко идентифицировать подключение позже, особенно при создании нескольких подключений. При необходимости добавьте также имя домена для вашего имени пользователя. 

   ![Создание подключения между логическим приложением и шлюзом данных](./media/logic-apps-gateway-connection/blankconnection.png)

Поздравляем! Подключение шлюза теперь готово к использованию приложением логики.

## <a name="edit-your-gateway-connection-settings"></a>Изменение параметров подключения к шлюзу

После того как вы создадите подключение шлюза для приложения логики, возможно, вам понадобится обновить параметры этого подключения.

1. Чтобы найти подключение шлюза, сделайте следующее:

   * В меню приложения логики в разделе **Средства разработки** выберите **Подключения API**. 
   
     В области **Подключения API** указаны все подключения API, связанные с вашим приложением логики, в том числе подключения шлюза.

     ![Переход к приложению логики, выбор "Подключения API"](./media/logic-apps-gateway-connection/logic-app-find-api-connections.png)

   * Выберите в главном меню Azure элементы **Другие службы** > **Интернет+мобильные устройства** > **Подключения API** для всех подключений API, в том числе подключений шлюза, связанных с вашей подпиской Azure. 

   * А можно в главном меню Azure перейти к разделу **Все ресурсы** для всех подключений API, включая подключения шлюза, связанные с вашей подпиской Azure.

2. Выберите подключение шлюза, которое вы хотите просмотреть или изменить, и щелкните **Правка подключения API**.

   > [!TIP]
   > Если ваши обновления не вступают в силу, попробуйте [остановить и перезапустить службу Windows шлюза](./logic-apps-gateway-install.md#restart-gateway).

<a name="change-delete-gateway-resource"></a>

## <a name="switch-or-delete-your-on-premises-data-gateway-resource"></a>Переключение или ресурса локального шлюза данных

Чтобы создать другой ресурс шлюза, связать ваш шлюз с другим ресурсом или удалить ресурс шлюза, вы можете удалить его, не затрагивая установку шлюза. 

1. В главном меню Azure щелкните **Все ресурсы**. 
2. Найдите и выберите ресурс шлюза данных.
3. Выберите **Локальный шлюз данных** и на панели инструментов ресурсов щелкните **Удалить**.

<a name="faq"></a>

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

[!INCLUDE [existing-gateway-location-changed](../../includes/logic-apps-existing-gateway-location-changed.md)]

## <a name="next-steps"></a>Дополнительная информация

* [Защита приложений логики](./logic-apps-securing-a-logic-app.md)
* [Распространенные примеры и сценарии использования приложений логики](./logic-apps-examples-and-scenarios.md)
