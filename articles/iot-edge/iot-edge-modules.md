---
title: Общие сведения о модулях Центра IoT Edge Azure | Документация Майкрософт
description: Узнайте о том, что такое модули Azure IoT Edge и как их настраивать
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 02/15/2018
ms.topic: conceptual
ms.service: iot-edge
services: iot-edge
ms.openlocfilehash: 60c2c17d7a5cca66a6323f43e1ab2662afff54ee
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34630842"
---
# <a name="understand-azure-iot-edge-modules---preview"></a>Общие сведения о модулях Центра IoT Edge Azure (предварительная версия)

Azure IoT Edge позволяет развертывать *модули* бизнес-логики на пограничных устройствах и управлять этими модулями. Модуль Azure IoT Edge представляет собой наименьшую единицу вычислительных ресурсов, которыми управляет IoT Edge. Эти модули могут содержать службы Azure (например, Azure Stream Analytics) или пользовательский код для конкретного решения. Чтобы составить представление о разработке, развертывании и обслуживании модулей, важно разобраться с четырьмя основными компонентами, образующими концепцию модуля.

* **Образ модуля** — это пакет с программным обеспечением для модуля.
* **Экземпляр модуля** — это единица вычислительных ресурсов, выполняющая образ модуля на устройстве IoT Edge. Экземпляр модуля запускается средой выполнения IoT Edge.
* **Идентификатор модуля** — это сведения о модуле (включая учетные данные безопасности), которые хранятся в Центре Интернета вещей и относятся к конкретному экземпляру модуля.
* **Двойник модуля** — это документ JSON, хранящийся в Центре Интернета вещей, который содержит данные о состоянии экземпляра модуля, в том числе метаданные, конфигурации и условия. 

## <a name="module-images-and-instances"></a>Образы и экземпляры модулей

Образы модулей IoT Edge содержат приложения, в которых используются функции управления, безопасности и обмена данными среды выполнения IoT Edge. Вы можете создавать собственные образы модулей или экспортировать их из поддерживаемых служб Azure, таких как Azure Stream Analytics.
Образы существуют в облаке, и вы можете обновлять их, изменять и развертывать в разных решениях. Например, существует отдельный модуль, который прогнозирует мощность производственной линии с применением технологий машинного обучения, и другой модуль, который использует компьютерное зрение для управления дроном. 

Каждый раз, когда среда выполнения IoT Edge запускает развернутый на устройстве образ модуля, она создает новый экземпляр этого модуля. Один и тот же образ модуля может выполняться одновременно на разных устройствах в разных частях мира, но для каждого из этих устройств при запуске модуля создается собственный экземпляр модуля. 

![Образы модулей в облаке — экземпляры модулей на устройствах][1]

На практике образы модулей существуют как образы контейнеров в хранилище данных, а экземпляры модулей реализованы как контейнеры на устройствах. По мере роста возможностей для использования Azure IoT Edge будут появляться новые типы образов и экземпляров модулей. Например, устройства с ограниченными ресурсами не могут выполнять контейнеры, поэтому для них следует использовать образы модулей в виде библиотек DLL и экземпляры в виде исполняемых файлов. 

## <a name="module-identities"></a>Идентификаторы модулей

Когда в среде выполнения IoT Edge создается новый экземпляр модуля, он сопоставляется с определенным идентификатором модуля. Идентификатор модуля хранится в Центре Интернета вещей и работает как область адресации и безопасности для всех локальных и облачных взаимодействий с конкретным экземпляром модуля.
Имя идентификатора составляется из идентификатора устройства, на котором запущен этот экземпляр, и имени модуля, указанного в вашем решении. Например, когда вы вызываете модуль `insight`, в котором используется Azure Stream Analytics, и развертываете его на устройстве `Hannover01`, среда выполнения IoT Edge создает для него идентификатор модуля с именем `/devices/Hannover01/modules/insight`.

Иногда нужно развернуть один образ модуля несколько раз на одном устройстве. В таком случае для экземпляров будут использоваться разные имена.

![Идентификаторы модулей должны быть уникальными][2]

## <a name="module-twins"></a>Двойники модулей

С каждым экземпляром модуля сопоставлен определенный двойник модуля, который применяется для настройки экземпляра. Экземпляр и двойник связаны друг с другом через идентификатор модуля. 

Двойник модуля представляет собой документ JSON, в котором собраны сведения о модуле и параметры его конфигурации. Эта концепция работает так же, как и [двойник устройства][lnk-device-twin] в Центре Интернета вещей. Структура двойника модуля полностью идентична структуре двойника устройства. Для взаимодействия с двойниками обоих типов используются одни и те же API-интерфейсы. Единственное различие между ними — идентификатор, который применяется для создания экземпляра клиентского пакета SDK. 

```csharp
// Create a DeviceClient object. This DeviceClient will act on behalf of a 
// module since it is created with a module’s connection string instead 
// of a device connection string. 
DeviceClient client = new DeviceClient.CreateFromConnectionString(moduleConnectionString, settings); 
await client.OpenAsync(); 
 
// Get the model twin 
Twin twin = await client.GetTwinAsync(); 
```

## <a name="next-steps"></a>Дополнительная информация
 - [Общие сведения о среде выполнения Azure IoT Edge и ее архитектуре][lnk-runtime]

<!-- Images -->
[1]: ./media/iot-edge-modules/image_instance.png
[2]: ./media/iot-edge-modules/identity.png

<!-- Links -->
[lnk-device-identity]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-device-twin]: ../iot-hub/iot-hub-devguide-device-twins.md
[lnk-runtime]: iot-edge-runtime.md