---
title: Руководство. Создание конвейера с действием копирования с помощью мастера копирования фабрики данных | Документация Майкрософт
description: С помощью этого учебника вы создадите конвейер фабрики данных Azure с действием копирования при помощи мастера копирования, поддерживаемого фабрикой данных.
services: data-factory
documentationcenter: ''
author: linda33wj
manager: craigg
ms.assetid: b87afb8e-53b7-4e1b-905b-0343dd096198
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 01/22/2018
ms.author: jingwang
robots: noindex
ms.openlocfilehash: 8407249ed56059f278f8e4f84a4466ab286a0c24
ms.sourcegitcommit: 48ab1b6526ce290316b9da4d18de00c77526a541
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2018
ms.locfileid: "30178095"
---
# <a name="tutorial-create-a-pipeline-with-copy-activity-using-data-factory-copy-wizard"></a>Руководство. Создание конвейера с действием копирования с помощью мастера копирования фабрики данных
> [!div class="op_single_selector"]
> * [Обзор и предварительные требования](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md)
> * [Мастер копирования](data-factory-copy-data-wizard-tutorial.md)
> * [портал Azure](data-factory-copy-activity-tutorial-using-azure-portal.md)
> * [Visual Studio](data-factory-copy-activity-tutorial-using-visual-studio.md)
> * [PowerShell](data-factory-copy-activity-tutorial-using-powershell.md)
> * [Шаблон Azure Resource Manager](data-factory-copy-activity-tutorial-using-azure-resource-manager-template.md)
> * [REST API](data-factory-copy-activity-tutorial-using-rest-api.md)
> * [API для .NET](data-factory-copy-activity-tutorial-using-dotnet-api.md)

> [!NOTE]
> Статья относится к версии 1 фабрики данных, которая является общедоступной версией. Если вы используете версию 2 службы фабрики данных, которая находится на этапе предварительной версии, прочитайте [руководство по действиям копирования в версии 2](../quickstart-create-data-factory-dot-net.md). 


В этом руководстве описано, как скопировать данные из хранилища BLOB-объектов Azure в базу данных Azure SQL с помощью **мастера копирования**. 

**Мастер копирования** фабрики данных Azure позволяет быстро создать конвейер данных, копирующий данные из поддерживаемого исходного хранилища данных в поддерживаемое целевое хранилище данных. Поэтому мы рекомендуем использовать мастер в качестве первого шага при создании примера конвейера для сценария перемещения данных. Список хранилищ данных, которые поддерживаются в качестве исходных и целевых, см. в разделе [Поддерживаемые хранилища данных и форматы](data-factory-data-movement-activities.md#supported-data-stores-and-formats).  

В этом руководстве показано, как создать фабрику данных Azure, запустить мастер копирования и выполнить шаги, чтобы предоставить сведения о сценарии приема и перемещения данных. После завершения работы в мастере он автоматически создаст конвейер с действием копирования, позволяющим перенести данные из хранилища BLOB-объектов Azure в базу данных SQL Azure. Дополнительные сведения о действии копирования см. в статье [Перемещение данных с помощью действия копирования](data-factory-data-movement-activities.md).

## <a name="prerequisites"></a>предварительным требованиям
Прежде чем начать работу с этим руководством, выполните необходимые действия, перечисленные в [этой обзорной статье](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md) .

## <a name="create-data-factory"></a>Создание фабрики данных
На этом шаге с помощью портала Azure создается фабрика данных с именем **ADFTutorialDataFactory**.

1. Войдите на [портал Azure](https://portal.azure.com).
2. В верхнем левом углу нажмите кнопку **Создать ресурс**, выберите **Данные и аналитика** и щелкните **Фабрика данных**. 
   
   ![Создать -> Фабрика данных](./media/data-factory-copy-data-wizard-tutorial/new-data-factory-menu.png)
2. В колонке **Создать фабрику данных** выполните следующие действия.
   
   1. Введите **ADFTutorialDataFactory** в поле **Имя**.
       Имя фабрики данных Azure должно быть глобально уникальным. При возникновении ошибки `Data factory name “ADFTutorialDataFactory” is not available` измените имя фабрики данных (например, на ваше_имя_ADFTutorialDataFactoryYYYYMMDD) и попробуйте создать фабрику данных снова. Ознакомьтесь с разделом [Фабрика данных — правила именования](data-factory-naming-rules.md) , чтобы узнать о правилах именования артефактов фабрики данных.  
      
       ![Имя фабрики данных недоступно](./media/data-factory-copy-data-wizard-tutorial/getstarted-data-factory-not-available.png)    
   2. Выберите свою **подписку Azure**.
   3. Для группы ресурсов выполните одно из следующих действий. 
      
      - а) выберите **Использовать существующую** и укажите имеющуюся группу ресурсов;
      - выберите **Создать** и введите имя для группы ресурсов.
          
        Некоторые действия, описанные в этом руководстве, предполагают, что для группы ресурсов используется имя **ADFTutorialResourceGroup**. Сведения о группах ресурсов см. в статье, где описывается [использование групп ресурсов для управления ресурсами Azure](../../azure-resource-manager/resource-group-overview.md).
   4. Укажите **расположение** фабрики данных.
   5. Установите флажок **Закрепить на панели мониторинга** в нижней части колонки.  
   6. Нажмите кнопку **Создать**.
      
       ![Создать колонку "Фабрика данных"](media/data-factory-copy-data-wizard-tutorial/new-data-factory-blade.png)            
3. После создания вы увидите колонку **Фабрика данных**, как показано на рисунке ниже.
   
   ![Домашняя страница фабрики данных](./media/data-factory-copy-data-wizard-tutorial/getstarted-data-factory-home-page.png)

## <a name="launch-copy-wizard"></a>Запуск мастера копирования
1. Чтобы запустить **мастер копирования**, на вкладке фабрики данных щелкните **Копирование данных [предварительная версия]**. 
   
   > [!NOTE]
   > Если веб-браузер завис на действии "Авторизация...", отключите параметр или снимите флажок **Block third party cookies and site data** (Блокировать сторонние файлы cookie и данные сайта) в параметрах браузера. Либо оставьте флажок и создайте исключение для адреса **login.microsoftonline.com**, а затем попробуйте запустить мастер еще раз.
2. Вот что нужно сделать на странице **Свойства** :
   
   1. В качестве **имени задачи** введите **CopyFromBlobToAzureSql**.
   2. Введите **описание** (необязательно).
   3. Измените **дату и время начала** и **дату и время завершения** таким образом, чтобы датой завершения был сегодняшний день, а дата начала была на пять дней раньше.  
   4. Нажмите кнопку **Далее**.  
      
      ![Средство копирования — страница "Свойства"](./media/data-factory-copy-data-wizard-tutorial/copy-tool-properties-page.png) 
3. На странице **Source data store** (Хранилище данных источников) щелкните плитку **Хранилище BLOB-объектов Azure**. На этой странице можно указать хранилище данных источников для задачи копирования. 
   
    ![Средство копирования — страница "Хранилище данных источников"](./media/data-factory-copy-data-wizard-tutorial/copy-tool-source-data-store-page.png)
4. Вот что нужно сделать на странице **Specify the Azure Blob storage account** (Указание учетной записи хранилища BLOB-объектов Azure).
   
   1. В качестве **имени связанной службы** введите **AzureStorageLinkedService**.
   2. Убедитесь, что в качестве **метода выбора учетной записи** выбран вариант **From Azure subscriptions** (Из подписок Azure).
   3. Выберите свою **подписку Azure**.  
   4. Выберите **учетную запись хранения Azure** из списка учетных записей хранения Azure, доступных в выбранной вами подписке. Кроме того, вы можете вручную настроить параметры учетной записи хранения. Для этого в качестве **метода выбора учетной записи** выберите вариант **Ввести вручную** и нажмите кнопку **Далее**. 
      
      ![Средство копирования — указание учетной записи хранилища BLOB-объектов Azure](./media/data-factory-copy-data-wizard-tutorial/copy-tool-specify-azure-blob-storage-account.png)
5. Вот что нужно сделать на странице **Choose the input file or folder** (Выбор входного файла или папки).
   
   1. Дважды щелкните папку **adftutorial**.
   2. Выберите **emp.txt** и нажмите кнопку **Выбрать**.
      
      ![Средство копирования — выбор входного файла или папки](./media/data-factory-copy-data-wizard-tutorial/copy-tool-choose-input-file-or-folder.png)
6. На странице **Choose the input file or folder** (Выбор входного файла или папки) нажмите кнопку **Далее**. Не устанавливайте флажок **Binary copy**(Двоичное копирование). 
   
    ![Средство копирования — выбор входного файла или папки](./media/data-factory-copy-data-wizard-tutorial/chose-input-file-folder.png) 
7. На странице **File format settings** (Параметры формата файла) отображаются разделители и схема, которые мастер определяет автоматически при анализе файла. Можно также ввести разделители вручную, чтобы остановить автоопределение с помощью мастера копирования или переопределить. Проверив разделители и просмотрев предварительные данные, нажмите кнопку **Далее**. 
   
    ![Средство копирования — параметры формата файла](./media/data-factory-copy-data-wizard-tutorial/copy-tool-file-format-settings.png)  
8. На странице целевого хранилища данных выберите **База данных SQL Azure** и нажмите кнопку **Далее**.
   
    ![Средство копирования — выбор целевого хранилища](./media/data-factory-copy-data-wizard-tutorial/choose-destination-store.png)
9. Вот что нужно сделать на странице **Specify the Azure SQL database** (Указание базы данных SQL Azure).
   
   1. В поле **Имя подключения** введите **AzureSqlLinkedService**.
   2. В качестве **метода выбора базы данных или сервера** должен быть выбран вариант **From Azure subscriptions** (Из подписок Azure).
   3. Выберите свою **подписку Azure**.  
   4. Выберите **имя сервера** и **базу данных**.
   5. Введите **имя пользователя** и **пароль**.
   6. Нажмите кнопку **Далее**.  
      
      ![Средство копирования — указание базы данных SQL Azure](./media/data-factory-copy-data-wizard-tutorial/specify-azure-sql-database.png)
10. На странице **Сопоставление таблицы** выберите **emp** в поле **Назначение** раскрывающегося списка, щелкните **стрелку вниз** (необязательно), чтобы отобразить схему и просмотреть данные.
    
     ![Средство копирования — сопоставление таблиц](./media/data-factory-copy-data-wizard-tutorial/copy-tool-table-mapping-page.png) 
11. На странице **Сопоставление схемы** нажмите кнопку **Далее**.
    
    ![Средство копирования — сопоставление схем](./media/data-factory-copy-data-wizard-tutorial/schema-mapping-page.png)
12. На странице **Performance settings** (Параметры производительности) нажмите кнопку **Далее**. 
    
    ![Средство копирования — параметры производительности](./media/data-factory-copy-data-wizard-tutorial/performance-settings.png)
13. Просмотрите сведения на странице **Сводка** и нажмите кнопку **Готово**. Мастер создаст две связанные службы, два набора данных (входной и выходной) и один конвейер в фабрике данных (из которой вы запустили мастер копирования). 
    
    ![Средство копирования — параметры производительности](./media/data-factory-copy-data-wizard-tutorial/summary-page.png)

## <a name="launch-monitor-and-manage-application"></a>Запуск приложения для отслеживания и управления
1. На странице **развертывания** щелкните ссылку: `Click here to monitor copy pipeline`.
   
   ![Средство копирования — развертывание выполнено](./media/data-factory-copy-data-wizard-tutorial/copy-tool-deployment-succeeded.png)  
2. Приложение мониторинга запускается в отдельной вкладке веб-браузера.   
   
   ![Приложение мониторинга](./media/data-factory-copy-data-wizard-tutorial/monitoring-app.png)   
3. Щелкните кнопку **Обновить** внизу списка **Activity Windows** (Окна действий), чтобы увидеть последнее состояние почасовых срезов. Отобразится пять действий Windows за пять дней между временем начала и окончания конвейера. Список не обновляется автоматически, поэтому может потребоваться нажать кнопку "Обновить" несколько раз, прежде чем все действия Windows будут в состоянии "Готово". 
4. Выберите окно действия в списке. Просмотрите сведения о нем в окне **Activity Window Explorer** справа.

    ![Сведения об окне действия](media/data-factory-copy-data-wizard-tutorial/activity-window-details.png)    

    Обратите внимание, что 11, 12, 13, 14 и 15 число выделены зеленым цветом. Это означает, что ежедневные временные срезы для них уже созданы. Также эту цветовую кодировку вы увидите в конвейере и в выходном наборе данных в представлении схемы. На предыдущем шаге обратите внимание, что два среза уже созданы. Один срез обрабатывается сейчас, а два остальных ожидают обработки (с учетом выделения цветом). 

    Дополнительные сведения об использовании этого приложения см. в статье [Мониторинг конвейеров фабрики данных Azure и управление ими с помощью приложения для мониторинга и управления](data-factory-monitor-manage-app.md).

## <a name="next-steps"></a>Дополнительная информация
В этом руководстве в ходе операции копирования вы использовали хранилище BLOB-объектов Azure как исходное хранилище данных, а базу данных SQL Azure — как целевое хранилище данных. В следующей таблице приведен список хранилищ данных, которые поддерживаются в качестве источников и целевых расположений для действия копирования. 

[!INCLUDE [data-factory-supported-data-stores](../../../includes/data-factory-supported-data-stores.md)]

Чтобы получить дополнительные сведения о полях и свойствах в мастере копирования для хранилища данных, щелкните ссылку для хранилища данных в таблице. 