---
title: "Создание конвейера фабрики данных с помощью портала Azure | Документация Майкрософт"
description: "В этом руководстве описано, как с помощью портала Azure создать фабрику данных с конвейером. Этот конвейер использует действие копирования для копирования данных из хранилища BLOB-объектов Azure в базу данных SQL Azure. "
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: spelluru
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 01/09/2018
ms.author: jingwang
ms.openlocfilehash: 8b5211e9c932221c6b6134e7e0627f4d7f964123
ms.sourcegitcommit: eeb5daebf10564ec110a4e83874db0fb9f9f8061
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/03/2018
---
# <a name="copy-data-from-azure-blob-to-azure-sql-database-using-azure-data-factory"></a>Копирование данных из хранилища BLOB-объектов Azure в базу данных SQL Azure с помощью фабрики данных Azure
В этом руководстве вы создадите фабрику данных с помощью пользовательского интерфейса фабрики данных Azure. Конвейер этой фабрики данных копирует данные из хранилища BLOB-объектов Azure в базу данных SQL Azure. Шаблон конфигурации в этом руководстве применяется к копированию из файлового в реляционное хранилище данных. Список хранилищ данных, которые поддерживаются в качестве источников и приемников, см. в таблице [Поддерживаемые хранилища данных и форматы](copy-activity-overview.md#supported-data-stores-and-formats).

> [!NOTE]
> - Если вы еще не работали с фабрикой данных Azure, ознакомьтесь со статьей [Введение в фабрику данных Azure](introduction.md).
>
> - Эта статья относится к версии 2 фабрики данных, которая в настоящее время доступна в предварительной версии. Если вы используете общедоступную версию 1 службы фабрики данных, см. статью о [начале работы со службой фабрики данных версии 1](v1/data-factory-copy-data-from-azure-blob-storage-to-sql-database.md).

В этом руководстве вы выполните следующие шаги:

> [!div class="checklist"]
> * создадите фабрику данных;
> * создание конвейера с действием копирования;
> * тестовое выполнение конвейера;
> * активация конвейера вручную;
> * запуск конвейера по расписанию;
> * Мониторинг конвейера и выполнения действий.

## <a name="prerequisites"></a>предварительным требованиям
* **Подписка Azure**. Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.
* **Учетная запись хранения Azure.** В этом руководстве в качестве **источника** будет использоваться хранилище BLOB-объектов. Если у вас нет учетной записи хранения Azure, ознакомьтесь с разделом [Создание учетной записи хранения](../storage/common/storage-create-storage-account.md#create-a-storage-account).
* **База данных SQL Azure**. Используйте базу данных как хранилище данных-**приемник**. Если у вас нет базы данных SQL Azure, вы можете создать ее, выполнив шаги из статьи [Создание базы данных SQL Azure на портале Azure](../sql-database/sql-database-get-started-portal.md).

### <a name="create-a-blob-and-a-sql-table"></a>Создание большого двоичного объекта и таблицы SQL

Теперь подготовьте большой двоичный объект Azure и базу данных SQL Azure к изучению этого руководства, выполнив следующие действия.

#### <a name="create-a-source-blob"></a>Создание исходного большого двоичного объекта

1. Запустите Блокнот. Скопируйте следующий текст и сохраните его в файл **emp.txt** на диске.

    ```
    John,Doe
    Jane,Doe
    ```

2. Создайте контейнер с именем **adftutorial** в хранилище BLOB-объектов Azure. Создайте папку **input** в этом контейнере. Затем отправьте файл **emp.txt** в папку **input**. Эти задачи можно выполнить с помощью портала Azure или специальных средств, таких как [Обозреватель службы хранилища Azure](http://storageexplorer.com/).

#### <a name="create-a-sink-sql-table"></a>Создание таблицы-приемника SQL

1. Используйте следующий скрипт SQL, чтобы создать таблицу **dbo.emp** в базе данных SQL Azure.

    ```sql
    CREATE TABLE dbo.emp
    (
        ID int IDENTITY(1,1) NOT NULL,
        FirstName varchar(50),
        LastName varchar(50)
    )
    GO

    CREATE CLUSTERED INDEX IX_emp_ID ON dbo.emp (ID);
    ```

2. Предоставьте службам Azure доступ к серверу SQL Server. Убедитесь, что параметр **Разрешить доступ к службам Azure** имеет состояние **ВКЛ** для вашего сервера Azure SQL Server, чтобы служба фабрики данных могла записывать данные на него. Чтобы проверить и при необходимости включить этот параметр, сделайте следующее.

    1. Щелкните **Больше служб** слева и выберите **Серверы SQL**.
    2. Выберите сервер и щелкните **Брандмауэр** в разделе **Параметры**.
    3. На странице **Параметры брандмауэра** щелкните **ВКЛ** для параметра **Разрешить доступ к службам Azure**.

## <a name="create-a-data-factory"></a>Создать фабрику данных
На этом этапе вы создадите фабрику данных и запустите пользовательский интерфейс службы "Фабрика данных Azure" для создания конвейера в фабрике данных. 

1. В меню слева щелкните **Создать**, выберите **Данные+аналитика** и щелкните **Фабрика данных**. 
   
   ![Создать -> Фабрика данных](./media/tutorial-copy-data-portal/new-azure-data-factory-menu.png)
2. На странице **Новая фабрика данных** введите **ADFTutorialDataFactory** в поле **Имя**. 
      
     ![Страница "Новая фабрика данных"](./media/tutorial-copy-data-portal/new-azure-data-factory.png)
 
   Имя фабрики данных Azure должно быть **глобально уникальным**. Если вы увидите следующую ошибку для поля имени, введите другое имя фабрики данных (например, ваше_имя_ADFTutorialBulkCopyDF). Ознакомьтесь со статьей [Фабрика данных Azure — правила именования](naming-rules.md), чтобы узнать правила именования для артефактов службы "Фабрика данных".
  
     ![Страница "Новая фабрика данных"](./media/tutorial-copy-data-portal/name-not-available-error.png)
3. Выберите **подписку** Azure, в рамках которой вы хотите создать фабрику данных. 
4. Для **группы ресурсов** выполните одно из следующих действий.
     
      - Выберите **Использовать существующую**и укажите существующую группу ресурсов в раскрывающемся списке. 
      - Выберите **Создать новую**и укажите имя группы ресурсов.   
         
        Сведения о группах ресурсов см. в статье, где описывается [использование групп ресурсов для управления ресурсами Azure](../azure-resource-manager/resource-group-overview.md).  
4. Выберите **V2 (Preview)** (V2 (предварительная версия)) для **версии**.
5. Укажите **расположение** фабрики данных. В раскрывающемся списке отображаются только поддерживаемые расположения. Хранилища данных (служба хранилища Azure, база данных SQL Azure и т. д.) и вычисления (HDInsight и т. д.), используемые фабрикой данных, могут располагаться в других регионах.
6. Кроме того, установите флажок **Закрепить на панели мониторинга**.     
7. Нажмите кнопку **Создать**.      
8. На панели мониторинга вы увидите приведенный ниже элемент с состоянием **Deploying data factory** (Развертывание фабрики данных). 

    ![Элемент Deploying data factory (Развертывание фабрики данных)](media/tutorial-copy-data-portal/deploying-data-factory.png)
9. Когда завершится создание, откроется страница **Фабрика данных**, как показано на рисунке ниже.
   
   ![Домашняя страница фабрики данных](./media/tutorial-copy-data-portal/data-factory-home-page.png)
10. Щелкните плитку **Создание и мониторинг**, чтобы открыть на отдельной вкладке пользовательский интерфейс фабрики данных Azure.

## <a name="create-a-pipeline"></a>Создание конвейера
На этом шаге вы создадите в фабрике данных конвейер с действием копирования. Это действие копирования копирует данные из хранилища BLOB-объектов Azure в Базу данных SQL Azure. В предыдущем [руководстве](quickstart-create-data-factory-portal.md) вы создали конвейер, выполнив следующие действия:

1. Создание связанной службы. 
2. Создание входных и выходных наборов данных.
3. И, наконец, создание конвейера.

В этом руководстве вы сразу приступите к созданию конвейера, а связанные службы и наборы данных будете создавать по мере необходимости для настройки конвейера. 

1. На странице "Начало работы" щелкните **Создать конвейер**. 

   ![Плитка создания конвейера](./media/tutorial-copy-data-portal/create-pipeline-tile.png)
3. В окне **Свойства** конвейера для параметра **Имя** укажите значение **CopyPipeline**.

    ![Имя конвейера](./media/tutorial-copy-data-portal/pipeline-name.png)
4. На панели элементов **Действия** разверните категорию **Поток данных** и перетащите действие **Копирование** из панели элементов в область конструктора конвейера. 

    ![Перетаскивание действия копирования](./media/tutorial-copy-data-portal/drag-drop-copy-activity.png)
5. На вкладке **Общие** в окне **Свойства** укажите имя действия **CopyFromBlobToSql**.

    ![Имя действия](./media/tutorial-copy-data-portal/activity-name.png)
6. Перейдите на вкладку **Источник**. Щелкните **+Создать**, чтобы создать исходный набор данных. 

    ![Меню создания исходного набора данных](./media/tutorial-copy-data-portal/new-source-dataset-button.png)
7. В окне **Новый набор данных** выберите **Хранилище BLOB-объектов Azure** и щелкните **Готово**. Источник данных находится в хранилище BLOB-объектов Azure, поэтому выберите именно этот вариант для исходного набора данных. 

    ![Выбор хранилища BLOB-объектов Azure](./media/tutorial-copy-data-portal/select-azure-storage.png)
8. В приложении появится новая **Вкладка** с заголовком **AzureBlob1**.

    ![Вкладка AzureBlob1 ](./media/tutorial-copy-data-portal/new-tab-azure-blob1.png)        
9. На вкладке **Общие** окна **Свойства** в нижней части введите **SourceBlobDataset** в поле **Имя**.

    ![Имя набора данных](./media/tutorial-copy-data-portal/dataset-name.png)
10. Перейдите на вкладку **Подключение** в окне свойств. Щелкните **+Создать** рядом с текстовым полем **Связанная служба**. Связанная служба привязывает хранилище данных или вычислительный ресурс к фабрике данных. В нашем примере вы создаете связанную службу хранилища Azure, чтобы связать учетную запись хранения Azure с хранилищем данных. Связанная служба содержит сведения о подключении, которые служба фабрики данных применяет для подключения к хранилищу BLOB-объектов в среде выполнения. Набор данных определяет контейнер, папку и (необязательно) файл, где содержатся исходные данные. 

    ![Кнопка создания связанной службы](./media/tutorial-copy-data-portal/source-dataset-new-linked-service-button.png)
12. В окне **New Linked Service** (Новая связанная служба) выполните следующие действия: 

    1. Укажите **AzureStorageLinkedService** в поле **Имя**. 
    2. Выберите учетную запись хранения Azure в поле **Имя учетной записи хранения**.
    3. Щелкните **Проверить подключение**, чтобы проверить подключение к учетной записи хранения Azure.  
    4. Щелкните **Сохранить**, чтобы сохранить связанную службу.

        ![Новая связанная служба для службы хранилища Azure](./media/tutorial-copy-data-portal/new-azure-storage-linked-service.png)
13. Щелкните **Обзор** в области **Путь к файлу**.  

    ![Кнопка для обзора файлов](./media/tutorial-copy-data-portal/file-browse-button.png)
14. Перейдите к папке **adftutorial/input**, выберите файл **emp.txt** и щелкните **Готово**. Вместо этого можно дважды щелкнуть emp.txt. 

    ![Выбор исходного файла](./media/tutorial-copy-data-portal/select-input-file.png)
15. Убедитесь, что для параметра **Формат файла** задано значение **Текстовый формат**, а в качестве **разделителя столбцов** указана **запятая (`,`)**. Если в исходном файле используются другие символы для разделения строк и столбцов, щелкните **Определить формат текста** в поле **Формат файла**. Средство копирования данных автоматически определит формат файла и символы разделителей. Но вы можете переопределить эти значения. Чтобы просмотреть данные на этой странице, щелкните **Просмотр данных**.

    ![Определение формата текста](./media/tutorial-copy-data-portal/detect-text-format.png)
17. Перейдите на вкладку **Схема** в окне свойств и щелкните **Импорт схемы**. Обратите внимание, что приложение обнаружило в исходном файле два столбца. Импорт схемы здесь нужен для того, чтобы сопоставить столбцы из исходного хранилища данных с целевым хранилищем данных. Если сопоставление столбцов вам не требуется, можете пропустить этот шаг. Для целей этого руководства импорт схемы нужен.

    ![Определение схемы источника](./media/tutorial-copy-data-portal/detect-source-schema.png)  
19. Перейдите на **вкладку с конвейером** или щелкните конвейер в **представлении в виде дерева** слева.  

    ![Вкладка конвейера](./media/tutorial-copy-data-portal/pipeline-tab.png)
20. Убедитесь, что в поле "Исходный набор данных" в окне свойств выбран вариант **SourceBlobDataset**. Чтобы просмотреть данные на этой странице, щелкните **Просмотр данных**. 
    
    ![Исходный набор данных](./media/tutorial-copy-data-portal/source-dataset-selected.png)
21. Перейдите на вкладку **Приемник** и щелкните **Создать**, чтобы создать целевой набор данных. 

    ![Меню создания целевого набора данных](./media/tutorial-copy-data-portal/new-sink-dataset-button.png)
22. В окне **Новый набор данных** выберите **База данных SQL Microsoft Azure** и щелкните **Готово**. В этом руководстве вы будете копировать данные в базу данных Azure SQL. 

    ![Выбор Базы данных SQL Azure](./media/tutorial-copy-data-portal/select-azure-sql-database.png)
23. На вкладке **Общие** в окне свойств задайте имя **OutputSqlDataset**. 
    
    ![Имя целевого набора данных](./media/tutorial-copy-data-portal/output-dataset-name.png)
24. Перейдите на вкладку **Подключение** и щелкните **Создать** для новой **связанной службы**. Связанную службу нужно сопоставить с набором данных. Связанная служба содержит строку подключения, которая потребуется службе фабрики данных для подключения к базе данных SQL Azure в среде выполнения. Набор данных определяет контейнер, папку и (необязательно) файл, куда копируются данные. 
    
    ![Кнопка создания связанной службы](./media/tutorial-copy-data-portal/new-azure-sql-database-linked-service-button.png)       
25. В окне **New Linked Service** (Новая связанная служба) выполните следующие действия: 

    1. Введите **AzureSqlDatabaseLinkedService** в поле **имени**. 
    2. Выберите нужный сервер Azure SQL в поле **Server name** (Имя сервера).
    4. Выберите базу данных Azure SQL в поле **Database name** (Имя базы данных). 
    5. Введите имя пользователя в поле **User name** (Имя пользователя). 
    6. Введите пароль для этого пользователя в поле **Password** (Пароль). 
    7. Нажмите кнопку **Test connection** (Проверить подключение), чтобы проверить подключение.
    8. Щелкните **Сохранить**, чтобы сохранить связанную службу. 
    
        ![Создание связанной службы для базы данных SQL Azure](./media/tutorial-copy-data-portal/new-azure-sql-linked-service-window.png)

26. Выберите **[dbo].[emp]** в списке **Таблица**. 

    ![Выбор таблицы emp](./media/tutorial-copy-data-portal/select-emp-table.png)
27. Перейдите на вкладку **Схема** и щелкните "Импорт схемы". 

    ![Импорт схемы приемника данных](./media/tutorial-copy-data-portal/import-destination-schema.png)
28. Выберите столбец **Идентификатор** и щелкните **Удалить**. Столбец идентификатора служит для идентификации данных в базе данных SQL, поэтому действие копирования не должно вставлять данные в этот столбец.

    ![Удаление столбца идентификатора](./media/tutorial-copy-data-portal/delete-id-column.png)
30. Перейдите на вкладку с **конвейером** и убедитесь, что там выбрано значение **OutputSqlDataset** в поле **Целевой набор данных**.

    ![Вкладка конвейера](./media/tutorial-copy-data-portal/pipeline-tab-2.png)        
31. Перейдите на вкладку **Сопоставление** в нижней части окна свойств и щелкните **Импорт схем**. Обратите внимание, что первый и второй столбцы в исходном файле сопоставляются с полями **FirstName** и **LastName** в базе данных SQL.

    ![Сопоставление схем](./media/tutorial-copy-data-portal/map-schemas.png)
33. Проверьте работу конвейера, нажав кнопку **Проверить**. Щелкните **стрелку вправо**, чтобы закрыть окно проверки.

    ![Выходные данные проверки конвейера](./media/tutorial-copy-data-portal/pipeline-validation-output.png)   
34. Нажмите кнопку **Код** в правом углу. Вы увидите код JSON, связанный с этим конвейером. 

    ![Кнопка "Код"](./media/tutorial-copy-data-portal/code-button.png)
35. Этот код JSON должен выглядеть примерно так:  

    ```json
    {
        "name": "CopyPipeline",
        "properties": {
            "activities": [
                {
                    "name": "CopyFromBlobToSql",
                    "type": "Copy",
                    "dependsOn": [],
                    "policy": {
                        "timeout": "7.00:00:00",
                        "retry": 0,
                        "retryIntervalInSeconds": 20
                    },
                    "typeProperties": {
                        "source": {
                            "type": "BlobSource",
                            "recursive": true
                        },
                        "sink": {
                            "type": "SqlSink",
                            "writeBatchSize": 10000
                        },
                        "enableStaging": false,
                        "parallelCopies": 0,
                        "cloudDataMovementUnits": 0,
                        "translator": {
                            "type": "TabularTranslator",
                            "columnMappings": "Prop_0: FirstName, Prop_1: LastName"
                        }
                    },
                    "inputs": [
                        {
                            "referenceName": "SourceBlobDataset",
                            "type": "DatasetReference",
                            "parameters": {}
                        }
                    ],
                    "outputs": [
                        {
                            "referenceName": "OutputSqlDataset",
                            "type": "DatasetReference",
                            "parameters": {}
                        }
                    ]
                }
            ]
        }
    }
    ```

## <a name="test-run-the-pipeline"></a>Тестовое выполнение конвейера
Вы можете проверить работу конвейера, прежде чем публиковать артефакты (связанные службы, наборы данных и конвейер) в фабрике данных и (или) репозитории VSTS GIT. 

1. Чтобы проверить конвейер, щелкните **Тестовое выполнение** на панели инструментов. Состояние выполнения конвейера вы можете найти на вкладке **Выходные данные** в нижней части окна. 

    ![Кнопка тестового выполнения](./media/tutorial-copy-data-portal/test-run-output.png)
2. Убедитесь, что данные из исходного файла вставлены в целевую базу данных SQL. 

    ![Проверка результатов в SQL](./media/tutorial-copy-data-portal/verify-sql-output.png)
3. Щелкните **Опубликовать все** в области слева. Это действие опубликует созданные сущности (связанные службы, наборы данных и конвейеры) в фабрике данных Azure.

    ![Кнопка "Опубликовать"](./media/tutorial-copy-data-portal/publish-button.png)
4. Дождитесь сообщения **Successfully published** (Публикация выполнена). Чтобы увидеть уведомления, щелкните вкладку **Показать уведомления** на боковой панели слева. Чтобы закрыть окно уведомлений, щелкните значок **X**.

    ![Показать уведомления](./media/tutorial-copy-data-portal/show-notifications.png)

## <a name="configure-code-repository"></a>Настройка репозитория исходного кода
Вы можете опубликовать код для артефактов фабрики данных в репозитории кода Visual Studio Team System (VSTS). На этом шаге вы создадите репозиторий кода. 

Если вам пока не нужен репозиторий кода VSTS, можете пропустить этот шаг и продолжить публикацию в фабрике данных, как описано в предыдущем шаге. 

1. Щелкните поле **Фабрика данных** в левом углу или стрелку вниз рядом с ним, и в открывшемся списке выберите **Настроить репозиторий кода**. 

    ![Кнопка "Код"](./media/tutorial-copy-data-portal/configure-code-repository-button.png)
2. На странице **Параметры репозитория** выполните следующие действия: 
    1. Выберите значение **Visual Studio Team Services Git** в поле **тип репозитория**.
    2. Выберите учетную запись VSTS в поле **Учетная запись Visual Studio Team Services**.
    3. Выберите проект из этой учетной записи VSTS в поле **Имя проекта**.
    4. Введите **Tutorial2** в качестве **имени репозитория Git**, который будет связан с фабрикой данных. 
    5. Убедитесь, что выбран параметр **Импорт существующих ресурсов фабрики данных в репозиторий**. 
    6. Нажмите кнопку **Сохранить** , чтобы сохранить параметры. 

        ![Параметры репозитория](./media/tutorial-copy-data-portal/repository-settings.png)
3. Убедитесь, что в качестве репозитория выбран **VSTS GIT**.

    ![Выбор VSTS GIT](./media/tutorial-copy-data-portal/vsts-git-selected.png)
4. На отдельной вкладке веб-браузера перейдите к репозиторию **Tutorial2**. Там вы найдете две ветви: **master** и **adf_publish**.

    ![Ветви master и adf_publish](./media/tutorial-copy-data-portal/initial-branches-vsts-git.png)
5. Убедитесь, что **файлы JSON** для сущностей фабрики данных расположены в главной ветви (**master**).

    ![Файлы в главной ветви](./media/tutorial-copy-data-portal/master-branch-files.png)
6. Убедитесь, что **файлы JSON** пока отсутствуют в ветви **adf_publish**. 

    ![Файлы в ветви adf_publish](./media/tutorial-copy-data-portal/adf-publish-files.png)
7. Добавьте **описание** для **конвейера** и нажмите кнопку **Сохранить** на панели инструментов. 

    ![Ввод описания для конвейера](./media/tutorial-copy-data-portal/pipeline-description.png)
8. Теперь должна появиться **ветвь** с выбранным именем пользователя в репозитории **Tutorial2**. Внесенные вами изменения сохранены только в личную, но не главную ветвь. Но публикация сущностей возможна только из главной ветви.

    ![Личная ветвь](./media/tutorial-copy-data-portal/your-branch.png)
9. Наведите курсор мыши на кнопку **Синхронизация** (пока не нажимайте ее), выберите вариант **Зафиксировать изменения** и нажмите кнопку **Синхронизация**, чтобы синхронизировать изменения с главной ветвью (**master**). 

    ![Сохранение и синхронизация изменений](./media/tutorial-copy-data-portal/commit-and-sync.png)
9. В окне синхронизации изменений выполните следующие действия. 

    1. Убедитесь, что конвейер **CopyPipeline** появился в обновленном списке конвейеров.
    2. Убедитесь, что установлен флажок **Публикация изменений после синхронизации**. Если этот флажок снят, то синхронизация выполняется только с главной ветвью, без публикации в службу фабрики данных. Вы можете опубликовать их позже с помощью кнопки **Публикация**. Если этот флажок установлен, изменения сначала синхронизируются с главной ветвью, а затем сразу публикуются в службу фабрики данных.
    3. Щелкните **Синхронизация**. 

    ![Окно синхронизации изменений](./media/tutorial-copy-data-portal/sync-your-changes.png)
10. Теперь вы увидите, что в ветви **adf_publish** репозитория **Tutorial2** появились файлы. Также в этой ветви вы найдете шаблон Azure Resource Manager для созданного решения фабрики данных.  

    ![Файлы в ветви adf_publish](./media/tutorial-copy-data-portal/adf-publish-files-after-publish.png)


## <a name="trigger-the-pipeline-manually"></a>активация конвейера вручную;
На этом шаге вы вручную запустите конвейер, опубликованный ранее. 

1. Щелкните **Триггер** на панели инструментов, а затем **Активировать сейчас**. На странице **Запуск конвейера** щелкните **Готово**.  

    ![Меню активации](./media/tutorial-copy-data-portal/trigger-now-menu.png)
2. Перейдите на вкладку **Мониторинг** слева. Вы увидите выполнение конвейера, которое вы только что активировали вручную. Ссылки в столбце действий позволят вам просмотреть подробные сведения о действиях и (или) повторно выполнить конвейер.

    ![Мониторинг выполнения конвейера](./media/tutorial-copy-data-portal/monitor-pipeline.png)
3. Чтобы увидеть выполнения действий, связанные с этим выполнением конвейера, щелкните ссылку **Просмотр выполнений действий** в столбце **Действия**. В нашем примере определено только одно действие, поэтому в списке вы увидите только одну запись. Чтобы увидеть сведения об операции копирования, щелкните ссылку **Сведения** (значок очков) в столбце **Действия**. Вы можете щелкнуть ссылку **Конвейеры** в верхней части окна, чтобы вернуться к представлению **Выполнения конвейера**. Чтобы обновить это представление, щелкните **Обновить**.

    ![Просмотр выполнений действий](./media/tutorial-copy-data-portal/view-activity-runs.png)
4. Убедитесь, что в таблицу **emp** в базе данных Azure SQL добавлены две новые строки. 

## <a name="trigger-the-pipeline-on-a-schedule"></a>Запуск конвейера по расписанию
В этом разделе вы создадите триггер планировщика для выполнения конвейера. Этот триггер запускает конвейер по определенному расписанию (каждый час, каждый день и т. д.). В этом примере вы настроите триггер, который выполняется каждую минуту до указанного времени окончания. 

1. Перейдите на вкладку **Правка** слева. 

    ![Вкладка редактирования](./media/tutorial-copy-data-portal/edit-tab.png)
2. Щелкните **Триггер** и выберите **Создать или изменить**. Если конвейер не выбран, перейдите к нему. 

    ![Меню создания или изменения триггера](./media/tutorial-copy-data-portal/trigger-new-edit-menu.png)
3. В окне **Добавить триггеры** щелкните **Выбрать триггер**, а затем **+Создать**. 

    ![Добавление триггеров — новый триггер](./media/tutorial-copy-data-portal/add-trigger-new-button.png)
4. В окне **Новый триггер** выполните следующие действия. 

    1. Для параметра **Имя** введите значение **RunEveryMinute**.
    2. Выберите вариант **Дата** в списке **Окончание**. 
    3. Разверните раскрывающийся список в поле **Окончание**.
    4. Выберите **текущую дату**. По умолчанию здесь устанавливается следующий день. 
    5. Измените часть, обозначающую **минуты**, чтобы время окончания всего на несколько минут отличалось от текущих значений даты и времени. Триггер начнет работу только после публикации изменений. Поэтому если вы настроите разницу всего в одну-две минуты и не успеете за это время опубликовать триггер, он не будет выполнен.  
    6. Нажмите кнопку **Применить**. 

        ![Настройка свойств триггера](./media/tutorial-copy-data-portal/set-trigger-properties.png)
    7. Проверьте параметр **Активировано**. С помощью этого флажка вы можете в любой момент отключить и включить триггер.
    8. Нажмите кнопку **Далее**.

        ![Триггер активирован — дальнейшие действия](./media/tutorial-copy-data-portal/trigger-activiated-next.png)

    > [!IMPORTANT]
    > Каждое выполнение конвейера оплачивается. Поэтому здесь важно правильно указать дату окончания. 
6. Прочитайте предупреждение на странице **Параметры выполнения триггера** и щелкните **Готово**. Конвейер в этом примере не принимает параметры. 

    ![Параметры конвейера](./media/tutorial-copy-data-portal/trigger-pipeline-parameters.png)
7. Чтобы синхронизировать изменения в своей ветви с изменениями в главной ветви, выберите **Синхронизация**. По умолчанию флажок **Publish changes after sync** (Публикация изменений после синхронизации) установлен. Поэтому при выборе **синхронизации** в службе "Фабрика данных Azure" публикуются обновленные объекты из основной ветви. Триггер не будет срабатывать, пока публикация не завершится успешно.

    ![Публикация триггера](./media/tutorial-copy-data-portal/sync-your-changes-with-trigger.png) 
9. Перейдите на вкладку **Мониторинг** слева, чтобы увидеть активированные выполнения конвейера. 

    ![Активированные выполнения конвейера](./media/tutorial-copy-data-portal/triggered-pipeline-runs.png)    
9. Чтобы перейти от представления выполнений конвейера к представлению выполнений триггера, щелкните "Выполнения конвейеров" и выберите вариант "Выполнения триггеров".
    
    ![Меню выполнений триггеров](./media/tutorial-copy-data-portal/trigger-runs-menu.png)
10. Вы увидите в списке выполнения своего триггера. 

    ![Список выполнений триггеров](./media/tutorial-copy-data-portal/trigger-runs-list.png)
11. Проследите, как в таблицу **emp** добавляются по две строки в минуту (для каждого выполнения конвейера) вплоть до указанного времени окончания. 

## <a name="next-steps"></a>Дополнительная информация
В этом примере конвейер копирует данные из одного расположения в другое в хранилище BLOB-объектов Azure. Вы научились выполнять следующие задачи: 

> [!div class="checklist"]
> * создадите фабрику данных;
> * создание конвейера с действием копирования;
> * тестовое выполнение конвейера;
> * активация конвейера вручную;
> * запуск конвейера по расписанию;
> * Мониторинг конвейера и выполнения действий.


Перейдите к следующему руководству, чтобы узнать о копировании данных из локальной среды в облако: 

> [!div class="nextstepaction"]
>[Копирование данных между локальной средой и облаком](tutorial-hybrid-copy-portal.md)
