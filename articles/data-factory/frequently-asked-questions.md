---
title: Часто задаваемые вопросы о фабрике данных Azure | Документация Майкрософт
description: Получите ответы на часто задаваемые вопросы о фабрике данных Azure.
services: data-factory
documentationcenter: ''
author: sharonlo101
manager: craigg
ms.assetid: 532dec5a-7261-4770-8f54-bfe527918058
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 01/15/2018
ms.author: shlo
ms.openlocfilehash: b7f654fb3b24954bb1c9222a4e97dc4b6844411c
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34619037"
---
# <a name="azure-data-factory-faq"></a>Часто задаваемые вопросы о фабрике данных Azure
Эта статья относится к версии 2 службы фабрики данных Azure. Она содержит ответы на часто задаваемые вопросы о фабрике данных.  

> [!NOTE]
> Эта статья относится к версии 2 фабрики данных, которая в настоящее время доступна в предварительной версии. Если вы используете общедоступную версию 1 службы фабрики данных, см. [часто задаваемые вопросы по версии 1 фабрики данных](v1/data-factory-faq.md).

## <a name="what-is-azure-data-factory"></a>Что такое фабрика данных Azure? 
Фабрика данных представляет собой полностью управляемую облачную службу интеграции информации, которая автоматизирует перемещение и преобразование данных. Как на фабрике сырье превращается в готовую продукцию с помощью оборудования, так и в фабриках данных Azure необработанные данные собираются и преобразовываются в готовые к использованию сведения с помощью специальных служб. 

Фабрика данных Azure позволяет создавать управляемые данными рабочие процессы для перемещения данных между локальными и облачными хранилищами данных. Вы также можете обрабатывать или преобразовывать данные с помощью служб вычислений, таких как Azure HDInsight, Azure Data Lake Analytics и среды выполнения интеграции SQL Server Integration Services (SSIS). 

С помощью фабрики данных вы можете выполнить обработку данных, используя облачную службу на основе Azure или собственную вычислительную среду с локальным размещением, например SSIS, SQL Server или Oracle. Для созданного конвейера, который выполняет необходимое действие, можно запланировать периодический запуск (например, ежечасно, ежедневно или еженедельно) или запуск на основе произошедшего события. Дополнительную информацию см. в статье [Общие сведения о службе фабрики данных Azure, службе интеграции данных в облаке](introduction.md).

## <a name="whats-different-in-version-2"></a>Что нового в версии 2?
Фабрика данных Azure версии 2 использует ту же службу перемещения и трансформации данных, что и исходная версия фабрики данных Azure, расширяя ее возможности для поддержки более широкого набора сценариев по интеграции облачных данных. Фабрика данных Azure версии 2 предоставляет следующие возможности:

- Потоки управления и масштабирование
- развертывание и запуск в Azure пакетов служб SSIS.

После выпуска версии 1 мы узнали, что клиенты хотят разрабатывать сложные гибридные сценарии интеграции данных, для которых требуются функции перемещения и обработки данных в облаке, в локальной среде и в облачных виртуальных машинах. В связи с этими требованиями появилась необходимость передавать и обрабатывать данные в защищенных средах виртуальных сетей, а также развертывать вычислительные мощности по мере потребности.

Когда конвейеры данных стали более важным элементом в стратегии бизнес-аналитики, мы обнаружили также необходимость гибкого планирования для этих действий. Это планирование позволит передавать добавочные данные и выполнять действия, инициированные событиями. При увеличении сложности появляется потребность поддерживать стандартные алгоритмы рабочих процессов, включающие ветвление, циклы и условную обработку.

В версии 2 можно также перенести имеющиеся пакеты служб SSIS в облако. При этом SSIS переносится как служба Azure, управляемая в фабрике данных, которая использует новый компонент среды выполнения интеграции. Используя среду выполнения интеграции для служб SSIS в версии 2, вы сможете выполнять и создавать пакеты служб SSIS в облаке, управлять ими и отслеживать их.

### <a name="control-flows-and-scale"></a>Потоки управления и масштабирование 
Чтобы поддерживать разнообразные потоки и шаблоны интеграции в современных хранилищах данных, фабрика данных реализует новую гибкую модель конвейеров данных, которая теперь не привязана к данным временных рядов. В этом выпуске можно моделировать условные выражения, создать ветвь в потоке управления для конвейера данных, а также явно передавать параметры внутри потоков и между ними.

Теперь вы можете создать любой поток для своего сценария интеграции данных и запускать его по запросу или постоянно по расписанию. Теперь доступны стандартные потоки, которые раньше не поддерживались.   

- Потоки управления:
    - Цепочки действий в последовательности в конвейере.
    - Ветви действий в конвейере.
    - Параметры
        - Определяйте параметры на уровне конвейера и передавайте аргументы при вызове конвейера по запросу или из триггера.
        - Действия могут использовать аргументы, передаваемые в конвейер.
    - Передача пользовательского состояния:
        - Выходные данные действия содержат состояние, которое можно использовать в следующем действии в конвейере.
    - Контейнеры зацикливания:
        - Оператор for-each 
- Потоки на основе триггеров:
    - Конвейеры можно вызывать по требованию или в определенное время.
- Разностные потоки:
    - Используйте параметры и определяйте отметку пиковой активности для разностного копирования при перемещении справочных таблиц или измерений из локального или облачного реляционного хранилища в озеро данных. 

Дополнительные сведения см. в статье [Ветвления и создание цепочки действий в конвейере фабрики данных](tutorial-control-flow.md).

### <a name="deploy-ssis-packages-to-azure"></a>Развертывание пакетов служб SSIS в Azure 
Если вы хотите перемещать рабочие нагрузки служб SSIS, то создайте фабрику данных версии 2 и подготовьте среду выполнения интеграции Azure SSIS. Среда выполнения интеграции Azure SSIS — это полностью управляемый кластер виртуальных машин (узлов) Azure, выделенный для выполнения пакетов служб SSIS в облаке. Пошаговые инструкции см. в руководстве [Развертывание пакетов служб интеграции SQL Server (SSIS) в Azure](tutorial-create-azure-ssis-runtime-portal.md). 
 

### <a name="sdks"></a>Пакеты SDK
Если вам как опытному пользователю нужен программный интерфейс, вам понравится широкий выбор пакетов SDK в версии 2, которые позволяют создавать конвейеры, управлять ими или отслеживать их из любой удобной интегрированной среды разработки.

- **Пакет SDK для .NET.** Пакет SDK для .NET обновлен для версии 2. 
- **PowerShell.** Командлеты PowerShell обновлены для версии 2. Названия командлетов версии 2 содержат *DataFactoryV2*. Например, *Get-AzureRmDataFactoryV2*. 
- **Пакет SDK для Python.** Этот пакет SDK не использовался до версии 2.
- **REST API.** Интерфейс REST API обновлен для версии 2.  

Пакеты SDK, которые обновляются для версии 2, не обладают обратной совместимостью с клиентами версии 1. 

### <a name="monitoring"></a>Мониторинг
В настоящее время версия 2 поддерживает мониторинг фабрик данных только с помощью пакетов SDK. Портал пока не поддерживает мониторинг фабрик данных версии 2. 

## <a name="what-is-integration-runtime"></a>Что такое среда выполнения интеграции?
Среда выполнения интеграции — это вычислительная инфраструктура, с помощью которой фабрика данных Azure обеспечивает перечисленные ниже возможности интеграции данных в разных сетевых средах.

- **Перемещение данных.** Перемещение данных между хранилищами данных в общедоступной сети и хранилищами данных в частной сети (локальной или виртуальной частной сети). Поддерживаются встроенные соединители, преобразование форматов, сопоставление столбцов, высокопроизводительная и масштабируемая передача данных.
- **Диспетчеризация действий.** Назначение и мониторинг действий по преобразованию в разных службах вычисления, например Azure HDInsight, Машинное обучение Azure, база данных SQL Azure, SQL Server и другие.
- **Выполнение пакетов служб SSIS.** Выполнение пакетов служб SSIS в собственном коде в управляемой среде вычислений Azure.

Вы можете развертывать один или несколько экземпляров среды выполнения интеграции по необходимости, чтобы переместить или преобразовать данные. Среда выполнения интеграции может работать в общедоступной сети Azure или в частной сети (локальной сети, виртуальной сети Azure или виртуальном частном облаке Amazon Web Services [VPC]). 

Дополнительные сведения см. в статье [Среда выполнения интеграции в фабрике данных Azure](concepts-integration-runtime.md).

## <a name="what-is-the-limit-on-the-number-of-integration-runtimes"></a>Что такое ограничение количества сред выполнения интеграции?
В фабрике данных нет жестких ограничений на количество экземпляров среды выполнения интеграции. Однако есть ограничение на число ядер виртуальной машины, которые среда выполнения интеграции может использовать для каждой подписки при выполнении пакетов служб SSIS. Дополнительные сведения см. в разделе [Ограничения фабрики данных](../azure-subscription-service-limits.md#data-factory-limits).

## <a name="when-should-i-use-version-2-rather-than-version-1"></a>Когда следует использовать версию 2 вместо версии 1? 
Если вы не знакомы с фабрикой данных Azure, но начните знакомство сразу с версии 2. Если вы уже используете версию 1, то перестройте свои фабрики данных на версии 2.

> [!WARNING]
> Версия 2 фабрики данных доступна в предварительной версии и не является общедоступной. Поэтому на нее не распространяется действие того же соглашения об уровне обслуживания (SLA) Azure, что и на версию 1 фабрики данных, которая является общедоступной. 

## <a name="what-are-the-top-level-concepts-of-version-2"></a>Какие основные концепции в версии 2?
В подписке Azure может быть один или несколько экземпляров фабрики данных Azure. Фабрика данных Azure содержит четыре ключевых компонента. Они образуют платформу, на которой можно создавать управляемые данными рабочие процессы, предусматривающие перемещение и преобразование данных.

### <a name="pipelines"></a>Конвейеры
Фабрика данных может иметь один или несколько конвейеров. Конвейер — это логическая группа действий, которые выполняют определенный блок задач. Действия в конвейере совместно выполняют задачу. Например, конвейер может включать группу действий, которые принимают данные из большого двоичного объекта Azure и выполняют запрос Hive в кластере HDInsight для секционирования данных. Преимуществом является то, что конвейер позволяет управлять группами действий, а не каждым отдельным действием. Вы можете связать вместе действия в конвейере, чтобы выполнять их последовательно, или выполнять их параллельно и независимо друг от друга.

### <a name="activity"></a>Действие
Действия представляют отдельные этапы обработки в конвейере. Например, действие *копирования* может использоваться для копирования данных из одного хранилища данных в другое. Точно так же можно использовать действие Hive, которое выполняет запрос Hive к кластеру Azure HDInsight для преобразования или анализа данных. Фабрика данных поддерживает три типа действий: действия перемещения данных, действия преобразования данных и действия управления.

### <a name="data-sets"></a>Наборы данных
Наборы данных представляют структуры данных в хранилищах. Эти структуры указывают данные, необходимые для использования в действиях, разделяя их на входные и выходные. 

### <a name="linked-services"></a>Связанные службы
Связанные службы напоминают строки подключения, определяющие сведения о подключении, необходимые для подключения фабрики данных к внешним ресурсам. Таким образом, набор данных представляет структуру данных, а связанная служба определяет подключение к источнику данных. Например, связанная служба хранилища Azure определяет строку подключения для подключения к учетной записи хранения Azure. А набор данных больших двоичных объектов Azure определяет контейнер больших двоичных объектов и папку, которая содержит данные.

Связанные службы используются в фабрике данных для двух целей:

- Для представления *хранилища данных*, включая, помимо прочего, локальный экземпляр SQL Server, экземпляр базы данных Oracle, общую папку и учетную запись хранилища BLOB-объектов Azure. Список поддерживаемых хранилищ данных см. в статье [Действие копирования в фабрике данных Azure](copy-activity-overview.md).
- Для представления *вычислительного ресурса*, в котором можно выполнить действие. Например, действие HDInsightHive выполняется в кластере Hadoop в HDInsight. Список поддерживаемых действий преобразования и вычислительных сред см. в статье [Преобразование данных в фабрике данных Azure](transform-data.md).

### <a name="triggers"></a>триггеры;
Триггеры обозначают единицу обработки, которая определяет время запуска для выполнения конвейера. Существует несколько типов триггеров для разных событий. В предварительной версии поддерживается триггер планировщика, выполняемый по времени. 


### <a name="pipeline-runs"></a>Запуски конвейера
Запуск конвейера — это экземпляр выполнения конвейера. Запуск конвейера обычно выполняется путем передачи аргументов для параметров, определенных в конвейере. Вы можете передать аргументы вручную или в определении триггера.

### <a name="parameters"></a>Параметры
Параметры представляют собой пары "ключ — значение" в конфигурации только для чтения. Вы определяете параметры в конвейере и передаете для них аргументы во время выполнения из контекста запуска. Контекст запуска создается триггером или из конвейера, который выполняется вручную. Действия в конвейере используют значения параметров.

Набор данных — это строго типизированный параметр и сущность, на которую можно ссылаться и использовать повторно. Действие может ссылаться на наборы данных и использовать параметры, определенные в определении набора данных.

Связанная служба также является строго типизированным параметром, который содержит сведения о подключении к хранилищу данных или среде вычислений. Это также сущность, доступная для ссылок или повторного использования.

### <a name="control-flows"></a>Потоки управления
Потоки управления выполняют оркестрацию действий в конвейере, которая включает цепочки действий в последовательности, ветвление и параметры, определяемые на уровне конвейера, а также аргументы, которые передаются во время вызова конвейера по запросу или из триггера. Сюда также входит передача пользовательского состояния и контейнеры зацикливания (то есть итераторы For-each).


Дополнительные сведения о понятиях фабрики данных см. в следующих статьях:

- [Наборы данных и связанные службы в фабрике данных Azure](concepts-datasets-linked-services.md)
- [Конвейеры и действия](concepts-pipelines-activities.md)
- [Среда выполнения интеграции в фабрике данных Azure](concepts-integration-runtime.md)

## <a name="what-is-the-pricing-model-for-data-factory"></a>Какая модель ценообразования применяется для фабрики данных?
Подробные сведения о ценах на фабрику данных Azure см. на [этой странице](https://azure.microsoft.com/pricing/details/data-factory/).

## <a name="what-regions-support-azure-data-factory-version-2"></a>В каких регионах поддерживается фабрики данных Azure версии 2?
Сейчас фабрики данных версии 2 можно создавать в таких регионах: восточная часть США, восточная часть США 2 и Западная Европа. Тем не менее фабрика данных может использовать среду выполнения интеграции в другом регионе для перемещения данных между хранилищами данных, диспетчеризации действий по службам вычислений или диспетчеризации пакетов служб SSIS. Дополнительные сведения см. в разделе [Data Factory locations](concepts-integration-runtime.md#integration-runtime-location) (Расположения фабрики данных).

## <a name="how-can-i-stay-up-to-date-with-information-about-data-factory"></a>Как оставаться в курсе последних новостей о фабрике данных?
Чтобы узнавать о последних новостях о фабрике данных Azure, используйте следующие сайты:

- [Блог](https://azure.microsoft.com/blog/tag/azure-data-factory/)
- [Документация по фабрике данных Azure V2](/azure/data-factory)
- [Домашняя страница продукта](https://azure.microsoft.com/services/data-factory/)

## <a name="technical-deep-dive"></a>Подробное техническое руководство 

### <a name="can-version-1-and-version-2-pipelines-run-side-by-side"></a>Могут ли конвейеры версии 1 и версии 2 использоваться параллельно?
Нет. Фабрики данных версии 2 и 1 не могут содержать сущности (например, связанные службы, наборы данных или конвейеры) другой версии.   

### <a name="do-i-still-need-to-define-data-sets-in-version-2"></a>Нужно ли по-прежнему определять наборы данных в версии 2?
Набор данных больше не является обязательной сущностью для большинства действий. Он необходим для действий копирования, машинного обучения, поиска, проверки и настраиваемых действий, которые используют схему и другие сведения о метаданных в наборе данных для преобразования. Для остальных действий набор данных больше не требуется.

### <a name="can-i-chain-two-activities-without-a-data-set-in-version-2"></a>Можно ли в версии 2 объединить в цепочку два действия без набора данных?
Да. В версии 2 можно объединять действия в цепочку без наборов данных. Действия объединяются в цепочку с помощью свойства **dependsOn** в определении JSON конвейера. 

### <a name="are-all-the-version-1-activities-supported-in-version-2"></a>Все ли действия из версии 1 поддерживаются в версии 2? 
Да, все действия из версии 1 поддерживаются в версии 2.

### <a name="how-can-i-schedule-a-version-2-pipeline"></a>Как запланировать конвейер версии 2? 
Для планирования конвейера версии 2 можно использовать триггер планировщика. Триггер использует календарное расписание с указанием времени. Вы можете использовать его, чтобы планировать конвейеры, выполняемые периодически или по повторяющимся шаблонам на основе календаря (например, еженедельно по понедельникам в 18:00 и по четвергам в 21:00). Дополнительные сведения см. в статье [Выполнение конвейера и триггеры в фабрике данных Azure](concepts-pipeline-execution-triggers.md).

### <a name="can-i-pass-parameters-to-a-pipeline-run-in-version-2"></a>Можно ли передать параметры в конвейер, который выполняется в версии 2?
Да, параметры являются полноправной основной концепцией в версии 2. Вы можете определить параметры на уровне конвейера и передать аргументы при выполнении конвейера, запускаемого по требованию или с помощью триггера.  

### <a name="can-i-define-default-values-for-the-pipeline-parameters"></a>Можно ли определить значения по умолчанию для параметров конвейера? 
Да. Вы можете определить значения по умолчанию для параметров в конвейерах. 

### <a name="can-an-activity-in-a-pipeline-consume-arguments-that-are-passed-to-a-pipeline-run"></a>Может ли действие в конвейере использовать аргументы, передаваемые в конвейер? 
Да. Каждое действие в рамках конвейера может использовать значение параметра, переданное в конвейер и запущенное с помощью конструкции `@parameter`. 

### <a name="can-an-activity-output-property-be-consumed-in-another-activity"></a>Может ли свойство из выходных данных действия использоваться в другом действии? 
Да. Выходные данные действия могут использоваться в последующем действии. Для этого применяется конструкция `@activity`.
 
### <a name="how-do-i-gracefully-handle-null-values-in-an-activity-output"></a>Как корректно обрабатывать значения null в выходных данных действия? 
Для корректной обработки значений null в выражениях можно использовать конструкцию `@coalesce`. 

### <a name="can-i-use-retry-and-timeout-at-the-activity-level-in-version-2"></a>Можно ли в версии 2 использовать повторную попытку и время ожидания на уровне действий?
Да. В версии 2 можно настроить повторы и время ожидания на уровне действий, чтобы управлять выполнением действий, аналогично версии 1. 

## <a name="next-steps"></a>Дополнительная информация
Пошаговые инструкции по созданию фабрики данных версии 2 см. в следующих руководствах:

- [Создание фабрики данных и конвейера с помощью пакета SDK .NET](quickstart-create-data-factory-dot-net.md)
- [Копирование данных из хранилища BLOB-объектов Azure в базу данных SQL Azure с помощью фабрики данных Azure](tutorial-copy-data-dot-net.md)

