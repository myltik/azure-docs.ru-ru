---
title: Краткое руководство Azure по выполнению пакетного задания на портале
description: Быстро научитесь выполнять пакетное задание на портале Azure.
services: batch
author: dlepow
manager: jeconnoc
ms.service: batch
ms.devlang: na
ms.topic: quickstart
ms.date: 01/19/2018
ms.author: danlep
ms.custom: mvc
ms.openlocfilehash: f6b2cc8f3e27b65f225014ec92a7e99851eac743
ms.sourcegitcommit: 1362e3d6961bdeaebed7fb342c7b0b34f6f6417a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
---
# <a name="quickstart-run-your-first-batch-job-in-the-azure-portal"></a>Краткое руководство по выполнению первого пакетного задания на портале Azure

В этом кратком руководстве показано, как использовать портал Azure для создания учетной записи пакетной службы, *пула* вычислительных узлов (виртуальных машин) и *заданий*, выполняющих основные *задачи* в пуле. Выполняя действия из этого краткого руководства, вы изучите основные понятия пакетной службы и сможете использовать ее с более реалистичными рабочими нагрузками в большем масштабе.

[!INCLUDE [quickstarts-free-trial-note.md](../../includes/quickstarts-free-trial-note.md)]

## <a name="sign-in-to-azure"></a>Вход в Azure 

Войдите на портал Azure по адресу https://portal.azure.com.

## <a name="create-a-batch-account"></a>Создание учетной записи Пакетной службы

Выполните следующие действия, чтобы создать образец учетной записи пакетной службы для тестирования. Учетная запись пакетной службы необходима для создания пулов и заданий. Как показано ниже, учетную запись хранения Azure можно связать с учетной записью пакетной службы. Хоть наличие учетной записи хранения и не является обязательным условием для работы с этим кратким руководством, она применяется при развертывании приложений и для хранения входных и выходных данных в большинстве реальных рабочих нагрузок.


1. Щелкните **Создать** > **Вычисление** > **Пакетная служба**. 

  ![Пакетная служба в Marketplace][marketplace_portal]

2. Введите значения параметров **Account name** (Имя учетной записи) и **Resource group** (Группа ресурсов). Имя учетной записи должно быть уникальным в пределах выбранного **расположения** Azure и содержать от 3 до 24 символов (буквы нижнего регистра или цифры). 

3. В разделе **Учетная запись хранения** выберите имеющуюся учетную запись хранения или создайте новую.

4. Оставьте значения по умолчанию для остальных параметров и нажмите кнопку **Create** (Создать), чтобы создать учетную запись.

  ![Создание учетной записи Пакетной службы][account_portal]  

Когда отобразится сообщение **Развертывание прошло успешно**, перейдите к учетной записи пакетной службы на портале.

## <a name="create-a-pool-of-compute-nodes"></a>Создание пула вычислительных узлов

После создания учетной записи пакетной службы создайте образец пула вычислительных узлов Windows для тестирования. В этом кратком примере пул содержит два узла, выполняемых в образе Windows Server 2012 R2 из Azure Marketplace.


1. В учетной записи пакетной службы щелкните **Pools** (Пулы) > **Add** (Добавить).

2. В поле **Идентификатор пула** введите *mypool*. 

3. В разделе **Operating System** (Операционные системы) выберите следующие параметры (вы можете ознакомиться с другими параметрами).
  
  |Параметр  |Значение  |
  |---------|---------|
  |**Тип образа**|Marketplace (Linux/Windows)|
  |**Издатель**     |MicrosoftWindowsServer|
  |**ПРЕДЛОЖЕНИЕ**     |WindowsServer|
  |**SKU**     |2012-R2-Datacenter-smalldisk|

  ![Выбор операционной системы пула][pool_os] 

4. Прокрутите вниз, чтобы задать параметры в разделах **Размер узла** и **Scale** (Масштаб). Предлагаемый размер узла в этом кратком руководстве обеспечивает оптимальный баланс производительности и стоимости.
  
  |Параметр  |Значение  |
  |---------|---------|
  |**Ценовая категория узла**     |Standard_A1|
  |**Целевые выделенные узлы**     |2|

  ![Выбор размера пула][pool_size] 

5. Оставьте значения по умолчанию для остальных параметров и нажмите кнопку **ОК**, чтобы создать пул.

В пакетной службе сразу же создается пул, но для выделения и запуска вычислительных узлов понадобится несколько минут. В течение этого времени **состояние выделения** пула будет **Resizing** (Изменение размера). Во время изменения размера пула вы можете начать создавать задание и задачи. 

![Пул в состоянии изменения размера][pool_resizing]

Через несколько минут значение состояния пула изменится на **Устойчивое** и узлы запустятся. Щелкните раздел **Узлы**, чтобы проверить состояние узлов. Если состояние узла — **Idle** (Неактивен), он готов к выполнению задач. 

## <a name="create-a-job"></a>создать задание;

Получив пул, создайте задание, которое будет выполняться в нем. Пакетное задание — это логическая группа для одной или нескольких задач. Задание включает в себя параметры, общие для задач (например, приоритет и пул для запуска задач). Изначально у задания нет задач. 

1. В представлении учетной записи пакетной службы щелкните **Jobs** (Задания) > **Add** (Добавить). 

2. В поле **Job ID** (Идентификатор задания) введите *myjob*. В разделе **Pool** (Пул) выберите *mypool*. Оставьте значения по умолчанию для остальных параметров и нажмите кнопку **ОК**.

  ![создать задание;][job_create]

После создания задания откроется страница **Tasks** (Задачи).

## <a name="create-tasks"></a>Создание задач

Теперь создайте в задании образец задач для запуска. Обычно создается несколько задач, которые пакетная служба помещает в очередь и распределяет для запуска на вычислительных узлах. В этом примере создается две идентичные задачи. Каждая задача выполняет командную строку для отображения переменных среды пакетной службы на вычислительном узле, а затем ждет 90 секунд. 

При использовании пакетной службы в командной строке задайте приложение или скрипт. В пакетной службе предусмотрен ряд способов для развертывания приложений и скриптов на вычислительных узлах. 

Чтобы создать первую задачу, сделайте следующее:

1. Щелкните **Добавить**.

2. В поле **Идентификатор задачи** введите *mytask*. 

3. В **командной строке** введите `cmd /c "set AZ_BATCH & timeout /t 90 > NUL"`. Оставьте значения по умолчанию для остальных параметров и нажмите кнопку **ОК**.

  ![Создание задачи][task_create]

После создания задачи пакетная служба помещает ее в очередь для запуска в пуле. Если узел доступен для запуска, задание выполняется.

Чтобы создать второе задание, вернитесь к шагу 1. Введите другой **идентификатор задачи**, но укажите ту же командную строку. Если первая задача по-прежнему выполняется, пакетная служба выполняет вторую задачу на другом узле в пуле.

## <a name="view-task-output"></a>Просмотр выходных данных задачи

Выполнение предыдущих примеров задач завершается через несколько минут. Чтобы просмотреть выходные данные завершенной задачи, щелкните **Файлы на узле**, а затем выберите файл `stdout.txt`. В этом файле показаны стандартные выходные данные задачи. Его содержимое должно выглядеть следующим образом:

![Просмотр выходных данных задачи][task_output]

В этом файле содержатся сведения о переменных среды пакетной службы, установленных на узле. При создании пакетных заданий и задач вы можете ссылаться на них в командных строках задач, а также в приложениях и скриптах, запускаемых этими командными строками.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы хотите продолжить изучение примеров и руководств по пакетной службе, используйте учетную запись пакетной службы и связанную учетную запись хранения, созданную при выполнении инструкций в этом кратком руководстве. Плата за использование самой пакетной службы не взимается.

Но если во время работы узлов используется пул, плата взимается даже если задания не запланированы. Если вы больше не будете использовать пул, удалите его. В представлении учетной записи щелкните **Pools** (Пулы), а затем имя пула. Затем щелкните **Удалить**.  При удалении пула удаляются все выходные данные задачи на узлах. 

Ставшие ненужными группу ресурсов, учетную запись пакетной службы и все связанные ресурсы можно удалить. Для этого выберите группу ресурсов для учетной записи пакетной службы и щелкните **Удалить группу ресурсов**.

## <a name="next-steps"></a>Дополнительная информация

В этом кратком руководстве вы создали учетную запись и пул пакетной службы, а также пакетное задание. Это задание запустило образцы задач, и вы просмотрели выходные данные на одном узле. Изучив основные понятия пакетной службы, вы сможете использовать ее с более реалистичными рабочими нагрузками в большем масштабе. Чтобы узнать больше о пакетной службе Azure, изучите следующие руководства. 

> [!div class="nextstepaction"]
> [Руководства по пакетной службе Azure](./tutorial-parallel-dotnet.md)

[marketplace_portal]: ./media/quick-create-portal/marketplace-batch.png

[account_portal]: ./media/quick-create-portal/batch-account-portal.png

[account_keys]: ./media/quick-create-portal/batch-account-keys.png

[pool_os]: ./media/quick-create-portal/pool-operating-system.png

[pool_size]: ./media/quick-create-portal/pool-size.png

[pool_resizing]: ./media/quick-create-portal/pool-resizing.png

[job_create]: ./media/quick-create-portal/job-create.png

[task_create]: ./media/quick-create-portal/task-create.png

[task_output]: ./media/quick-create-portal/task-output.png