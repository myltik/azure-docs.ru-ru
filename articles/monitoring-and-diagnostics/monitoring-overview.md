---
title: "Мониторинг в Microsoft Azure | Документация Майкрософт"
description: "Варианты мониторинга в Microsoft Azure. Azure Monitor, Application Insights и Log Analytics"
author: rboucher
manager: carmonm
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 1b962c74-8d36-4778-b816-a893f738f92d
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2017
ms.author: robb
ms.openlocfilehash: e164cbd910ccc38610c7aef37d25ff1b4413038d
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="overview-of-monitoring-in-microsoft-azure"></a>Обзор мониторинга в Microsoft Azure
В этой статье представлен обзор инструментов и служб, участвующих в комплексном мониторинге Microsoft Azure. В ней рассматривается:
- мониторинг инфраструктуры Azure и приложений с помощью служб Azure;
- мониторинг гибридных и не относящихся к Azure инфраструктуры и приложений с помощью служб Azure;
- мониторинг инфраструктуры и приложений Azure с помощью служб, не относящихся к Azure.

Здесь описываются доступные продукты и службы, а также их совместное использование. Эта статья поможет определить наиболее подходящие средства для тех или иных сценариев использования.  

## <a name="why-use-azures-monitoring-services"></a>Для чего использовать службы мониторинга Azure?

Проблемы с производительностью в облачном приложении могут повлиять на работу вашей компании. Несколько взаимосвязанных компонентов и частые выпуски могут в любое время привести к снижению производительности. В разработанном приложении пользователи, как правило, находят проблемы, которые не были обнаружены во время тестирования. Вы должны немедленно получать о них сведения и применять средства для их диагностики и устранения. Более того, проблемы в приложениях часто возникают из-за базовой инфраструктуры, в которой эти приложения выполняются, поэтому наличие комплексного представления о приложениях и инфраструктуре является ключом к мониторингу среды Azure. В Microsoft Azure доступен широкий спектр инструментов для обнаружения и устранения подобных проблем.

## <a name="how-do-i-monitor-my-azure-environment"></a>Как отслеживать среду Azure?

Существует широкий набор инструментов для мониторинга среды Azure, от кода приложения, работающего в Azure, до служб и инфраструктуры, выполняющих этот код. Вместе эти инструменты обеспечивают комплексный мониторинг облака и включают в себя следующее:

-   **Azure Monitor** — служба Azure, которая действует как объединенный конвейер для всех данных мониторинга, поступающих от служб Azure. Она предоставляет доступ к метрикам производительности и событиям, которые описывают работу инфраструктуры Azure и всех служб Azure, которые вы используете. Azure Monitor — это конвейер данных мониторинга для среды Azure. Он передает эти данные непосредственно в Log Analytics, а также в сторонние инструменты, где эти данные можно изучить и объединить с данными из локальных ресурсов или других облачных ресурсов.

-   **Application Insights** — служба Azure, которая предлагает мониторинг производительности приложений и аналитику пользователей. Она отслеживает создаваемый код и приложения, развертываемые в Azure, локальной среде или других облаках. Инструментируя приложение с помощью пакета SDK для Application Insights, можно получить доступ к широкому набору данных, включая время ответа зависимостей, трассировки исключений, отладочные моментальные снимки и профили выполнения. Эта служба предоставляет мощные инструменты для анализа данных телеметрии приложения во время его разработки и эксплуатации. Она тесно интегрируется с Visual Studio, чтобы дать возможность переходить непосредственно к строкам с ошибками и исправлять их, а также предоставляет аналитические данные об использовании, с помощью которых менеджеры по продуктам могут анализировать использование клиентами ваших приложений.

-   **Log Analytics** (прежнее название — OMS Log Analytics) — это служба Azure, которая принимает данные журналов и метрик из служб Azure (с помощью Azure Monitor), виртуальных машин Azure и локальной или другой облачной инфраструктуры и предоставляет гибкие возможности поиска по журналам и готовую аналитику на основе этих данных. Эта служба предоставляет расширенные инструменты для анализа данных из разных источников, позволяет использовать сложные запросы во всех журналах и может отправлять упреждающие оповещения при выполнении указанных условий.  Вы даже можете собирать пользовательские данные в центральном репозитории, чтобы иметь возможность запрашивать их и выполнять визуализацию. Вы можете также использовать преимущества встроенных решений Log Analytics, чтобы мгновенно получать ценные сведения о безопасности и функциональных возможностях инфраструктуры.

## <a name="accessing-monitoring-in-the-azure-portal"></a>Получение доступа к мониторингу на портале Azure
Все службы мониторинга Azure теперь доступны на одной панели пользовательского интерфейса. Дополнительные сведения о доступе к этой области см. в статье [Приступая к работе с Azure Monitor](monitoring-get-started.md). 

Кроме того, вы также можете получить доступ к функциям мониторинга для определенных ресурсов. Для этого нужно выделить эти ресурсы и перейти к доступным параметрам мониторинга. 

## <a name="examples-of-when-to-use-which-tool"></a>Примеры использования средств 

Здесь описаны некоторые основные сценарии и приведены сведения о средствах, которые можно использовать совместно. 

### <a name="scenario-1--fix-errors-in-an-azure-application-under-development"></a>Сценарий 1. Исправление ошибок в приложениях Azure, которые находятся на стадии разработки   

**Application Insights, Azure Monitor и Visual Studio лучше всего использовать совместно.**

Теперь Azure предоставляет полный спектр возможностей отладчика Visual Studio в облаке. Настройте Azure Monitor, чтобы отправлять данные телеметрии в Application Insights. С помощью Visual Studio можно включить пакет SDK для Application Insights в ваше приложение. В Application Insights можно использовать схему сопоставления приложений, чтобы визуально обнаружить, какие части работающего приложения неработоспособны. Вы можете исследовать ошибки и исключения неработоспособных частей приложения. С помощью различных аналитик в Application Insights можно получить более подробную информацию. Если вы не владеете сведениями об ошибке, используйте отладчик Visual Studio, чтобы выполнить трассировку кода и вычислить источник проблемы. 

Дополнительные сведения см. в статье [Мониторинг производительности веб-приложения Azure](../application-insights/app-insights-azure-web-apps.md). Ознакомьтесь также с инструкциями для различных типов приложений и языков, для чего воспользуйтесь оглавлением слева.  

### <a name="scenario-2--debug-an-azure-net-web-application-for-errors-that-only-show-in-production"></a>Сценарий 2. Отладка веб-приложения Azure .NET на наличие ошибок, которые отображаются только в рабочей среде 

> [!NOTE]
> Эти функции работают в режиме предварительной версии. 

**Лучше всего использовать Application Insights и, если возможно, Visual Studio. Так вы сможете воспользоваться всеми возможностями отладки.**

Используйте отладчик моментальных снимков Application Insights для отладки приложения. При достижении определенного порогового значения ошибки, связанной с компонентами рабочей среды, система автоматически фиксирует данные телеметрии (создает моментальный снимок) в этот промежуток времени. Зафиксированный объем данных безопасный для рабочего облака, так как он мал для того, чтобы повлиять на производительность. Однако этих данных достаточно, чтобы выполнить трассировку.  Система может зафиксировать несколько моментальных снимков. Вы можете просмотреть моментальные снимки за определенный момент времени на портале Azure или использовать Visual Studio, чтобы воспользоваться всеми возможностями отладки. С помощью Visual Studio разработчики могут рассмотреть моментальный снимок так, как если бы отладка выполнялась в реальном времени. При этом доступны локальные переменные, параметры, память и фреймы. Разработчикам можно предоставить доступ к данным в рабочей среде через роль RBAC.  

Дополнительные сведения см. в статье [Debug Snapshots on Exceptions in .NET Apps](../application-insights/app-insights-snapshot-debugger.md) (Отладка моментальных снимков исключений в приложениях .NET). 

### <a name="scenario-3--debug-an-azure-application-that-uses-containers-or-microservices"></a>Сценарий 3. Отладка приложения Azure, использующего контейнеры или микрослужбы 

**Этот сценарий аналогичен сценарию 1. Application Insights, Azure Monitor и Visual Studio лучше всего использовать совместно.** Application Insights также поддерживает сбор данных телеметрии из процессов, выполняющихся в контейнерах и микрослужбах (Kubernetes, Docker, Azure Service Fabric). Дополнительные сведения см. в статье [Debug Snapshots on Exceptions in .NET Apps](https://go.microsoft.com/fwlink/?linkid=848184) (Отладка моментальных снимков исключений в приложениях .NET). 


### <a name="scenario-4--fix-performance-issues-in-your-azure-application"></a>Сценарий 4. Устранение проблем производительности в приложении Azure

[Профилировщик Application Insights](../application-insights/app-insights-profiler.md) помогает устранить эти типы проблем. Вы можете определить и устранить проблемы с производительностью в приложениях, работающих в службах приложений (веб-приложения, Logic Apps, мобильные приложения, приложения API) и в других вычислительных ресурсах (например, виртуальные машины, масштабируемые наборы виртуальных машин, облачные службы и Service Fabric). 

> [!NOTE]
> Возможность профилирования виртуальных машин, масштабируемых наборов виртуальных машин, облачных служб и Service Fabric предоставляется в предварительной версии.   

Кроме того, вы будете заранее получать уведомления по электронной почте об определенных типах ошибок, например о длительном времени загрузки страниц, с помощью средства интеллектуального обнаружения.  Это средство не нуждается в настройке. Дополнительные сведения см. в разделе [Интеллектуальное обнаружение. Аномалии производительности](../application-insights/app-insights-proactive-performance-diagnostics.md).



## <a name="next-steps"></a>Дальнейшие действия
Кроме того, вы можете узнать больше о:

* [Azure Monitor на видео с конференции Ignite 2016](https://myignite.microsoft.com/videos/4977)
* [Приступая к работе с Azure Monitor](monitoring-get-started.md)
* [Системе диагностики Azure](../azure-diagnostics.md), если вы пытаетесь диагностировать проблемы в работе облачной службы, виртуальной машины, масштабируемого набора виртуальных машин или приложения Service Fabric.
* [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/) , если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
* [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) и решение для мониторинга рабочей среды [Operations Management Suite](https://www.microsoft.com/oms/).
