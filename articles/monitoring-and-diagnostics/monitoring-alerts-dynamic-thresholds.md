---
title: Создание оповещений с динамическими пороговыми значениями в Azure Monitor | Документы Майкрософт
description: Создание оповещений с использованием динамических пороговых значений на основе машинного обучения
author: antonfrMSFT
manager: carmonm
editor: ''
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: ''
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2018
ms.author: antonfr;mbullwin
ms.openlocfilehash: 45d2f39ff7fb2e5a22cda74cd0c794db28e351f1
ms.sourcegitcommit: d98d99567d0383bb8d7cbe2d767ec15ebf2daeb2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
ms.locfileid: "33943303"
---
# <a name="alerts-with-dynamic-thresholds-in-azure-monitor-limited-public-preview"></a>Оповещения с динамическими пороговыми значениями в Azure Monitor (ограниченная общедоступная предварительная версия)

Оповещения с динамическими пороговыми значениями — это усовершенствование оповещений для метрик Azure в Azure Monitor, которые используют расширенные возможности машинного обучения для изучения исторического поведения метрик, чтобы автоматически вычислять базовые показатели и использовать их в качестве пороговых значений.

Использование динамических пороговых значений дает следующие преимущества:

- Избежание трудностей, связанных с настройкой предопределенной жесткой границы, так как монитор автоматически изучает историю производительности метрики и применяет алгоритмы машинного обучения для определения пороговых значений оповещений.
- Возможно выявление сезонного характера и выдача оповещений только при отклонениях от него. Оповещения метрик с динамическими пороговыми значениям не будут срабатывать, если в службе регулярно наблюдается простой в выходные дни и последующий всплеск активности в понедельник. Сейчас поддерживается сезонность по часам, дням и неделям.
- Непрерывное определение производительности метрик и адаптивное реагирование на изменения метрик.

Оповещения на основе динамических пороговых значений доступны для всех источников метрик на основе Azure Monitor, перечисленных в этой [статье](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-near-real-time-metric-alerts#what-resources-can-i-create-near-real-time-metric-alerts-for).

## <a name="sign-up-to-access-the-preview"></a>Регистрация для доступа к предварительной версии

Чтобы проверить эту возможность в деле, [зарегистрируйтесь для доступа к предварительной версии](http://aka.ms/DynamicThresholdMetricAlerts). Как и всегда, нам очень важны ваши отзывы, которые можно отправить на адрес [azurealertsfeedback@microsoft.com](mailto:azurealertsfeedback@microsoft.com).

## <a name="how-to-configure-alerts-with-dynamic-thresholds"></a>Настройка оповещений с динамическими пороговыми значениями

Оповещения с динамическими пороговыми значениями можно настроить с помощью функции "Оповещения" в Azure Monitor.

![Оповещения (предварительная версия)](./media/monitoring-alerts-dynamic-thresholds/0001.png)

## <a name="creating-an-alert-rule-with-dynamic-thresholds"></a>Создание правила генерации оповещений с динамическими пороговыми значениями

1. На панели "Оповещения" в области "Монитор" нажмите кнопку **Новое правило генерации оповещений**, чтобы создать оповещение в Azure.

   ![Новое правило генерации оповещений](./media/monitoring-alerts-dynamic-thresholds/002.png)

2. Появится раздел "Создать правило" с тремя элементами: _Определение условия оповещения_, _Определение сведений об оповещении_ и _Определение группы действий_. Начните с раздела _Определение условия оповещения_ и воспользуйтесь ссылкой **Выбор цели**, чтобы указать целевой объект, выбрав ресурс. После выбора подходящего ресурса нажмите кнопку "Готово".

   ![Выбор цели](./media/monitoring-alerts-dynamic-thresholds/0003.png)

3. Затем нажмите кнопку **Добавить условие**, чтобы просмотреть список доступных параметров сигнала для ресурса. В списке сигналов выберите подходящий параметр **метрики**. (Например, выберите "Загрузка ЦП".)

   ![Добавление условий](./media/monitoring-alerts-dynamic-thresholds/004.png)

4. В разделе "Логика оповещений" экрана "Настроить логику сигналов" вы можете переключить тип условия на "Динамический". При этом автоматически создаются динамические пороговые значения (красные линии) вместе с метрикой (синяя линия).

   ![Динамический](./media/monitoring-alerts-dynamic-thresholds/005.png)

5. Отображаемые на диаграмме пороговые значения вычисляются на основе исторических данных за последние семь дней. После создания оповещения для динамических пороговых значений используются дополнительные исторические данные, и постоянно осуществляется обучение на основе новых данных для уточнения пороговых значений.

6. Дополнительные параметры логики оповещений:
   - Условие — можно настроить выдачу оповещения по одному из следующих трех условий:
       - Больше верхнего порогового значения или меньше нижнего порогового значения (по умолчанию)
       - Больше верхнего порогового значения
       - Меньше нижнего порогового значения
   - Агрегат времени: среднее (по умолчанию), сумма, минимум и максимум.
   - Чувствительность оповещений:
       - Высокая — больше оповещений, так как оповещение выдается при наименьшем отклонении.
       - Средняя — меньше оповещений, чем при высокой чувствительности (по умолчанию)
       - Низкая — наименее чувствительное пороговое значение.

    ![Параметры логики оповещений](./media/monitoring-alerts-dynamic-thresholds/00007.png)

7. Вычисляется на основе:
    -  Выбрав **Период**, можно указать, в течение какого времени оповещение будет искать заданное условие.

    ![Вычисляется на основе](./media/monitoring-alerts-dynamic-thresholds/007.png)

   > [!NOTE]
   > Поддерживаемые значения периода: 5 минут, 10 минут, 30 минут и 1 час.

   Для уменьшения количества лишних оповещений, вызываемых временными пиками, рекомендуется использовать параметры "Number violations to trigger the alert" (Число нарушений для выдачи оповещения). Эта функция позволяет выдавать оповещение только в том случае, если пороговое значение было нарушено X раз подряд или Y раз за последние Z периодов. Например: 

    Чтобы инициировать оповещение, если проблема возникает непрерывно в течение 15 минут 3 раза подряд в течение указанного 5-минутного периода, используйте следующие параметры:

   ![Вычисляется на основе](./media/monitoring-alerts-dynamic-thresholds/0008.png)

    Чтобы инициировать оповещение при нарушении динамического порогового значения в течение 15 минут за последние 30 минут с 5-минутным периодом, используйте следующие параметры:

   ![Вычисляется на основе](./media/monitoring-alerts-dynamic-thresholds/0009.png)

8. Сейчас пользователи могут использовать оповещения с одиночным условием динамического порогового значения.

   ![Создание правила](./media/monitoring-alerts-dynamic-thresholds/010.png)

## <a name="q--a"></a>Вопросы и ответы

- Вопрос. Если метрика медленно изменяется со временем, это вызовет оповещение с динамическими пороговыми значениями?

- Ответ. Скорее всего, нет. Динамические пороговые значения хорошо подходят для обнаружения значительных отклонений, а не постепенных изменений.

- Вопрос. Можно ли настроить динамические пороговые значения через API?

- Ответ. Мы работаем над этим.
