---
title: Просмотр относительных задержек в регионах Azure из определенных расположений | Документация Майкрософт
description: Узнайте, как просмотреть относительные задержки по интернет-провайдерам в регионах Azure из определенных расположений.
services: network-watcher
documentationcenter: ''
author: jimdial
manager: jeconnoc
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2017
ms.author: jdial
ms.custom: ''
ms.openlocfilehash: a6c2ffa619eeff8b455df8a8b2157525af12c640
ms.sourcegitcommit: 3cdc82a5561abe564c318bd12986df63fc980a5a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/05/2018
ms.locfileid: "27601018"
---
# <a name="view-relative-latency-to-azure-regions-from-specific-locations"></a>Просмотр относительных задержек в регионах Azure из определенных расположений

Из этого руководства вы узнаете, как использовать службу [Наблюдатель за сетями](network-watcher-monitoring-overview.md) Azure, чтобы определиться, в какой регион Azure развернуть приложение или службу, руководствуясь демографическим анализом пользователей. Кроме того, эту службу можно использовать для оценки подключений провайдеров службы к Azure.  
        
## <a name="create-a-network-watcher"></a>Создание наблюдателя за сетями

Если у вас уже есть наблюдатель за сетями как минимум в одном [регионе](https://azure.microsoft.com/regions) Azure, вы можете пропустить задачи в этом разделе. Создайте группу ресурсов для наблюдателя за сетями. В этом примере группа ресурсов создается в регионе "Восточная часть США", но вы можете создать ее в любом регионе Azure.

```powershell
New-AzureRmResourceGroup -Name NetworkWatcherRG -Location eastus
```

Создайте наблюдатель за сетями. Необходимо создать наблюдатель за сетями как минимум в одном регионе Azure. В этом примере наблюдатель за сетями создается в регионе Azure — "Восточная часть США".

```powershell
New-AzureRmNetworkWatcher -Name NetworkWatcher_eastus -ResourceGroupName NetworkWatcherRG -Location eastus
```

## <a name="compare-relative-network-latencies-to-a-single-azure-region-from-a-specific-location"></a>Сравнение относительных сетевых задержек в одном регионе Azure из определенного расположения

Оцените поставщиков служб или устраните неполадки, описанные в отчете пользователем, например медленную работу сайта из определенного расположения в регионе Azure, в котором развернута служба. Например, команда ниже возвращает средние относительные задержки поставщика услуг Интернета между штатом Вашингтон в США и регионом Azure "Западная часть США 2" за период 13–15 декабря 2017 года:

```powershell
Get-AzureRmNetworkWatcherReachabilityReport `
  -NetworkWatcherName NetworkWatcher_eastus `
  -ResourceGroupName NetworkWatcherRG `
  -Location "West US 2" `
  -Country "United States" `
  -State "washington" `
  -StartTime "2017-12-13" `
  -EndTime "2017-12-15"
```

> [!NOTE]
> Регион, указанный в команде выше, может отличаться от региона, указанного при получении наблюдателя за сетями. Для предыдущей команды просто необходимо указать имеющийся наблюдатель за сетями. Наблюдатель за сетями может находиться в любом регионе. Необходимо указать допустимые значения для `-Country` и `-State`. Эти значения чувствительны к регистру. Данные доступны для ограниченного количества стран, штатов и городов. Выполните команды, описанные в разделе о [просмотре доступных стран, штатов, городов и поставщиков](#view-available), чтобы просмотреть список доступных стран, штатов и городов, чтобы использовать их в команде выше. 

> [!WARNING]
> Необходимо указать дату после 14 ноября 2017 года для параметров `-StartTime` и `-EndTime`. При указании даты до 14 ноября 2017 года результаты не вернутся. 

Выходные данные из предыдущей команды будут выглядеть примерно так:

```powershell
AggregationLevel   : State
ProviderLocation   : {
                       "Country": "United States",
                       "State": "washington"
                     }
ReachabilityReport : [
                       {
                         "Provider": "Qwest Communications Company, LLC - ASN 209",
                         "AzureLocation": "West US 2",
                         "Latencies": [
                           {
                             "TimeStamp": "2017-12-14T00:00:00Z",
                             "Score": 92
                           },
                           {
                             "TimeStamp": "2017-12-13T00:00:00Z",
                             "Score": 92
                           }
                         ]
                       },
                       {
                         "Provider": "Comcast Cable Communications, LLC - ASN 7922",
                         "AzureLocation": "West US 2",
                         "Latencies": [
                           {
                             "TimeStamp": "2017-12-14T00:00:00Z",
                             "Score": 96
                           },
                           {
                             "TimeStamp": "2017-12-13T00:00:00Z",
                             "Score": 96
                           }
                         ]
                       }
                     ]
```

В выходных данных значение для параметра **Оценка** представляет собой относительную задержку между регионами и поставщиками. Показатель 1 — это худшая (наивысшая) задержка, в то время как 100 представляет собой наименьшее значение задержки. Относительные задержки представляют собой усредненное значение за день. В предыдущем примере помимо очевидно, что для указанного диапазона дат задержки одинаковы, существует небольшая разница между задержками для двух поставщиков, а также значения задержки для двух поставщиков достаточно низкие по шкале 1–100. Хотя эти результаты и являются ожидаемыми, так как штат Вашингтон в США физически ближе к региону Azure "Западная часть США 2", некоторые результаты предугадать невозможно. Чем больший диапазон дат вы указываете, тем большую среднюю задержку можно вычислить за указанный период времени.

## <a name="compare-relative-network-latencies-across-azure-regions-from-a-specific-location"></a>Сравнение относительных сетевых задержек в регионах Azure из определенного расположения

Вместо указания относительных задержек между определенным расположением и определенным регионом Azure с помощью параметра `-Location` можно определить относительные задержки для всех регионов Azure из определенного физического расположения. Например, с помощью следующей команды можно оценить, в какой регион Azure развернуть службу, если основные пользователи являются пользователями Comcast, размещенными в штате Вашингтон:

```powershell
Get-AzureRmNetworkWatcherReachabilityReport `
  -NetworkWatcherName NetworkWatcher_eastus `
  -ResourceGroupName NetworkWatcherRG `
  -Provider "Comcast Cable Communications, LLC - ASN 7922" `
  -Country "United States" `
  -State "washington" `
  -StartTime "2017-12-13" `
  -EndTime "2017-12-15"
```

>[!NOTE]
В отличие от случая, когда вы указываете отдельное расположение, если вы не указываете расположение или указываете несколько, например "Западная часть США 2", "Западная часть США", при выполнении команды следует указать поставщик услуг Интернета. 

## <a name="view-available"></a>Просмотр доступных стран, штатов, городов и поставщиков

Данные доступны для определенных поставщиков услуг Интернета, стран, штатов и городов. Чтобы просмотреть список всех доступных поставщиков услуг Интернета, стран, штатов и городов, для которых можно просмотреть данные, введите следующую команду:

```powershell
Get-AzureRmNetworkWatcherReachabilityProvidersList -NetworkWatcherName NetworkWatcher_eastus -ResourceGroupName NetworkWatcherRG
```

Данные доступны только для стран, штатов и городов, возвращенных предыдущей командой. Для предыдущей команды необходимо указать имеющийся Наблюдатель за сетями. В примере указывается Наблюдатель за сетями *NetworkWatcher_eastus* в группе ресурсов с именем *NetworkWatcherRG*, но вы можете указать любой имеющийся Наблюдатель за сетями. Если у вас его нет, создайте его, выполнив задачи, описанные в разделе о [создании наблюдателя за сетями](#create-a-network-watcher). 

После выполнения предыдущей команды можно отфильтровать выходные данные, указав при необходимости допустимые значения для параметров **страны**, **штата** и **города**.  Например, чтобы просмотреть список поставщиков услуг Интернета, доступных в Сиэтле, штат Вашингтон, США, введите следующую команду:

```powershell
Get-AzureRmNetworkWatcherReachabilityProvidersList `
  -NetworkWatcherName NetworkWatcher_eastus `
  -ResourceGroupName NetworkWatcherRG `
  -City seattle `
  -Country "United States" `
  -State washington
```

> [!WARNING]
> Значение, указанное для параметра **страны** должно содержать прописные и строчные буквы. Значения, указанные для параметров **штата** и **города** должны содержать строчные буквы. Значения должны перечисляться в выходных данных, возвращенных после выполнения команды без значений для параметров **страны**, **штата** и **города**. Если указать неверный регистр или указать значение для **страны**, **штата** или **города**, отсутствующее в выходных данных, возвращенных после выполнения команды без значений для этих свойств, возращенные выходные данные не будут содержать результатов.
