<properties
	pageTitle="Руководство: рабочие процессы DevOps на портале Azure | Microsoft Azure"
	description="Узнайте о различных рабочих процессах DevOps, доступных на портале Azure."
	services="azure-portal"
	documentationCenter=""
	authors="mlearned"
	manager="douge"
	editor="mlearned"/>

<tags
	ms.service="multiple"
	ms.workload="na"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="hero-article"
	ms.date="06/05/2016"
	ms.author="mlearned"/>

# Руководство: рабочие процессы DevOps на портале Azure

Платформа Azure поддерживает множество гибких рабочих процессов разработки и операций (DevOps). В этом руководстве вы узнаете, как использовать возможности портала Azure для разработки, тестирования, развертывания, устранения неполадок и мониторинга приложения, а также управления им. Здесь рассматриваются следующие вопросы.

1.  Создание веб-приложения и включение непрерывного развертывания.

2.  Разработка и тестирование приложений.

3.  Мониторинг и устранение неполадок приложений.

4.  Общие задачи управления приложениями.

## Создание веб-приложения и включение непрерывного развертывания

Чтобы выполнить действия, описанные в этом руководстве, необходимо создать веб-приложение с помощью [службы приложений Azure](https://azure.microsoft.com/services/app-service/). Кроме того, изначально потребуется включить непрерывное развертывание из репозитория исходного кода в выполняемую среду Azure.

1.  Войдите на портал Azure.

2.  Выберите элементы **Службы приложений** &gt; **Add icon** (Добавить значок), а затем введите имя, выберите нужную подписку и создайте группу ресурсов, которая будет использоваться в качестве контейнера службы.

    Группы ресурсов позволяют одновременно управлять выставлением счетов, развертыванием, отслеживанием и другими заданиями для всех ресурсов с помощью [Azure Resource Manager](https://azure.microsoft.com/documentation/articles/resource-group-overview/).

	![рисунок 1][image1]


3.  Через некоторое время будет создана служба приложений. Просмотрите доступные параметры меню для этой службы на портале.

	![рисунок 2][image2]

4.  Щелкните URL-адрес. Обратите внимание на инструменты и репозитории, доступные на портале Azure. Кроме того, вам предоставляется широкий выбор языков и платформ, включая .NET, Java и Ruby.

	![image3][image3]

3.  На портале Azure непрерывное развертывание можно включить всего за несколько простых шагов. Щелкните значок созданной службы приложений, чтобы просмотреть доступные для нее параметры.

    ![image4][image4]

    В колонке справа прокрутите вниз к разделу публикации.

    ![рисунок 5][image5]

4.  Далее, чтобы включить для приложения непрерывное развертывание, необходимо настроить некоторые параметры. Щелкните "Источник развертывания", а затем выберите "Выбор источника". Обратите внимание на доступные источники репозиториев.

	![рисунок 6][image6]

1.  Для этого примера выберите источник GitHub. При необходимости можно выбрать другой репозиторий и настроить для него учетные данные авторизации.

    ![рисунок 7][image7]

2.  После авторизации в репозитории выберите проект и филиал, откуда будет проводиться развертывание. Ниже приведено несколько примеров.

    ![рисунок 8][image8]

3.  Закончив, нажмите кнопку "OК". После запуска будут отображаться уведомления о развертывании.

    ![image9][image9]

4.  Вернитесь на страницу Github, чтобы просмотреть объект webhook, созданный для интеграции репозитория системы управления версиями в Azure. Интеграция с Github на портале Azure включает в себя всего несколько простых шагов.

    ![image10][image10]

5.  Чтобы продемонстрировать возможности непрерывного развертывания, добавьте в репозиторий Github содержимое. Например, текстовый файл. Со службой приложений также можете использовать приложения .NET, Ruby, Python и другие. В репозиторий можно добавлять текстовые файлы, а также приложения ASP.NET MVC, Java или Ruby.

    ![image11][image11]

6.  После применения изменений в репозитории на портале в области уведомлений отобразится новое уведомление о развертывании. Если изменения не отображаются, нажмите кнопку "Синхронизировать".

    ![image12][image12]

7.  На этом этапе при загрузке страницы для службы приложений может появиться ошибка 403. Это происходит из-за того, что для страницы не задан документ по умолчанию (например, index.htm или default.html). Используйте средства на портале Azure, чтобы быстро настроить для страницы документ по умолчанию. На портале Azure выберите "Параметры" &gt; "Параметры приложения".

	 ![image13][image13]

8.  Откроется колонка "Параметры приложения". Укажите для страницы имя SamplePage.html и нажмите кнопку "Сохранить". Просмотрите также другие доступные параметры.

	![рисунок 14][image14]

9.  При необходимости обновите URL-адрес браузера, чтобы убедиться, что изменения применены. Если это так, на странице появится текст. При внесении дополнительных изменений в репозитории будет выполняться автоматическое развертывание.

    ![рисунок 15][image15]

    Включить непрерывное развертывание с помощью портала Azure несложно. Вы также можете создать более сложные конвейеры выпуска и использовать другие методы с текущей системой управления версиями и системами непрерывной интеграции (например, использование автоматических систем управления сборкой и выпуском) для развертывания приложений в Azure.

## Разработка и тестирование приложений

Теперь нам необходимо внести некоторые изменения в базу кода и быстро развернуть их, а также настроить тестирование производительности веб-приложения.

1.  В области навигации портала Azure щелкните "Службы приложений" и выберите вашу службу приложений.

    ![рисунок 16][image16]

2.  Щелкните пункт "Инструменты".

    ![рисунок 17][image17]

3.  Обратите внимание на инструменты, доступные в категории "Разработка". Они позволяют работать с приложениями непосредственно на портале Azure. Затем щелкните пункт "Консоль".

    ![рисунок 18][image18]

4.  В окне консоли можно выполнять команды для приложения. Введите команду dir и нажмите клавишу ВВОД. Обратите внимание, что здесь не работают команды, требующие повышенных привилегий.

    ![рисунок 19][image19]

5.  Вернитесь к категории "Разработка" и выберите Visual Studio Online. Примечание. Visual Studio Online теперь называется Visual Studio Team Services.

    ![рисунок 20][image20]

6.  Активируйте возможность редактирования приложения в браузере.

    ![рисунок 21][image21]

7.  Установите для вашего приложения веб-расширение. С помощью расширений можно быстро и легко добавлять функции для приложений в Azure. На снимке экрана ниже показаны другие доступные типы расширений.

    ![рисунок 22][image22]

8.  После установки расширения Visual Studio Online щелкните "Перейти".

    ![рисунок 23][image23]

9.  Непосредственно в браузере откроется вкладка с интегрированной средой разработки. Вот как она выглядит в браузере Chrome:

    ![рисунок 24][image24]

10. Здесь вы можете редактировать файлы, добавлять папки и файлы, а также скачивать содержимое активного сайта. Внесите изменения в файл SamplePage.html.

    ![рисунок 25][image25]

11. Через несколько секунд изменения будут автоматически сохранены. Чтобы просмотреть их, вернитесь на страницу. Помните, что такие изменения в реальном времени, скорее всего, не поддерживаются в рабочих средах. Тем не менее доступные инструменты позволяют быстро и легко выполнять изменения в средах разработки и тестирования.

    ![рисунок 26][image26]

    ![рисунок 27][image27]

12. Вернитесь к колонке "Инструменты" и в категории "Разработка" щелкните "Тест производительности".

    ![рисунок 28][image28]

13. Чтобы выполнить тест производительности, необходимо создать учетную запись Team Services. Дополнительные сведения о создании учетной записи Team Services. см. [здесь](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).

14. Щелкните "Создать", чтобы создать тест производительности.

    ![рисунок 29][image29]

    Задайте различные значения и в нижней части диалогового окна нажмите кнопку "Запустить тест".

    ![рисунок 30][image30]

	![рисунок 31][image31]

1.  Во время выполнения теста можно отслеживать его состояние.

    ![рисунок 32][image32]

    После завершения теста щелкните результат, чтобы просмотреть дополнительные сведения.

    ![рисунок 33][image33]

2.  Наш тест выполнялся недолго, поэтому данных для анализа совсем немного, но в открывшемся представлении можно просмотреть различные метрики и при необходимости повторно выполнить тест. Создавать и выполнять тесты производительности, а также анализировать полученные результаты на портале Azure очень просто. На снимках экрана ниже показаны показатели производительности, полученные после выполнения теста.

    ![рисунок 34][image34]

    ![рисунок 35][image35]

    ![рисунок 36][image36]

## Мониторинг и устранение неполадок приложений

В Azure доступно множество средств для мониторинга и устранения неполадок приложений.

1.  На портале Azure для нашего веб-приложения щелкните "Инструменты".

    ![рисунок 37][image37]

2.  В категории "Устранение неполадок" просмотрите доступные инструменты для устранения потенциальных неполадок с работающим приложением. Здесь можно отследить динамический HTTP-трафик, включить самовосстановление, просмотреть журналы и многое другое.

    ![рисунок 38][image38]

3.  Чтобы просмотреть некоторые коды HTTP, выберите "Метрики сайта".

    ![рисунок 39][image39]

4.  Щелкните "Диагностика как услуга". Выберите тип приложения и нажмите кнопку "Запустить".

    ![рисунок 40][image40]

    Начнется сбор данных.

    ![рисунок 41][image41]

5.  Для диагностики потенциальных неполадок можно выбрать соответствующий журнал. Чтобы просмотреть доступные данные (например, журналы HTTP), необходимо включить ведение журнала.

    ![рисунок 42][image42]

    Если щелкнуть файл дампа памяти, загрузится отчет об анализе DebugDiag, с помощью которого можно определить потенциальные неполадки.

    ![рисунок 43][image43]

6.  Чтобы получить более детальный отчет, необходимо включить дополнительные возможности ведения журнала. На портале Azure перейдите к веб-приложению и выберите "Параметры".

    ![рисунок 44][image44]

7.  Прокрутите вниз к категории "Возможности" и выберите "Журналы диагностики".

  	 ![рисунок 45][image45]

8.  Там вы увидите различные доступные параметры ведения журнала. Включите ведение журнала веб-сервера и нажмите кнопку "Сохранить".

    ![рисунок 46][image46]

9.  Вернитесь к области "Инструменты" приложения, выберите "Диагностика как услуга" и нажмите кнопку "Запустить", чтобы повторно запустить сбор данных.

    ![рисунок 47][image47]

10. Параметр "Ведение журнала HTTP" позволяет просматривать данные, собранные для журналов HTTP.

    ![рисунок 48][image48]

11. Щелкните файл журнала HTML, чтобы создать в браузере объемный отчет для последующего изучения.

    ![рисунок 49][image49]

12. Вернитесь к разделу "Инструменты" для приложения на портале Azure. Прокрутите вниз к разделу "Инструменты" и выберите "Обозреватель процессов".

    ![рисунок 50][image50]

13. Параметр "Обозреватель процессов" позволяет просматривать сведения о запущенных процессах. На снимке экрана ниже видно, что можно просмотреть более детальные сведения о процессе и даже завершить все процессы с портала Azure.

    ![рисунок 51][image51]

    ![рисунок 52][image52]

14. Вернитесь к колонке "Параметры" в левой части окна. Щелкните "Новый запрос в службу поддержки".

    ![рисунок 53][image53]

15. В колонке справа можно добавить сведения о неполадках, контактную информацию и даже загрузить данные диагностики. Портал Azure поддерживает работу со службой поддержки Microsoft.

    ![рисунок 54][image54]

    ![рисунок 55][image55]

    На портале Azure предоставляются эффективные привычные средства для мониторинга и устранения неполадок приложений. Кроме того, здесь можно быстро принимать меры по устранению неполадок, выполняя такие задачи, как перезапуск процессов, включение и отключение разных наборов данных и даже интеграцию со службой поддержки Microsoft.

## Общие задачи управления приложениями

Управление приложениями всегда сопряжено с выполнением самых разных задач, таких как настройка параметров резервного копирования, реализация поставщика удостоверений и управление им, а также настройка управления доступом на основе ролей. Как и другие задачи DevOps, эти задачи можно выполнять непосредственно на портале Azure.

1.  Чтобы защитить веб-приложение от потери данных, необходимо настроить резервное копирование. Перейдите в область "Параметры" для вашего веб-приложения.

    ![рисунок 56][image56]

2.  В колонке справа прокрутите вниз к категории "Возможности".

	 ![рисунок 57][image57]

1.  Выберите пункт "Резервные копии". Справа откроется колонка.

    ![рисунок 58][image58]

2.  Щелкните "Настроить" и в колонке справа выберите учетную запись хранения.

    ![рисунок 59][image59]

3.  Затем создайте и выберите контейнер хранилища для хранения резервных копий. Щелкните кнопку "Создать" в нижней части колонки, а затем выберите контейнер.

    ![рисунок 60][image60]

4.  После этого можно настроить расписания, а также резервное копирование для вашей базы данных. В данном случае щелкните значок "Сохранить".

     ![рисунок 61][image61]

5.  После сохранения вернитесь к колонке "Резервные копии". Чтобы создать резервную копию приложения, щелкните "Создать резервную копию".

     ![рисунок 62][image62]

6.  Через несколько секунд появится созданная резервная копия. Обратите внимание на параметр "Восстановить сейчас" на снимке экрана ниже.

     ![рисунок 63][image63]

7.  Щелкните "Восстановить сейчас" и просмотрите параметры в колонке справа. При необходимости можно выбрать соответствующую резервную копию и легко восстановить ее до необходимого состояния. Таким образом, мы с легкостью реализовали простую стратегию аварийного восстановления для приложения на портале Azure.

     ![рисунок 64][image64]

8.  Вернитесь к колонке "Параметры" слева и в категории "Возможности" выберите "Аутентификация или авторизация".

     ![рисунок 65][image65]

9.  В колонке справа выберите "Проверка подлинности службы приложений". Обратите внимание на различные параметры, которые можно настроить с помощью популярных поставщиков.

     ![рисунок 66][image66]

10. Выберите необходимого поставщика и просмотрите параметры, которые можно для него настроить. Указав идентификатор и секрет для приложения, можно быстро активировать проверку подлинности для него в Facebook. Портал Azure предоставляет готовое решение для проверки подлинности приложений.

     ![рисунок 67][image67]

11. Вернитесь к колонке "Параметры" и в категории "Управление ресурсами" выберите "Пользователи".

     ![рисунок 68][image68]

12. В колонке справа просмотрите различные варианты добавления ролей и пользователей. Портал Azure позволяет легко управлять доступом на основе ролей к приложению.

     ![рисунок 69][image69]


## Сводка

В этом руководстве содержатся сведения о некоторых возможностях платформы Azure, которые позволяют быстро включать непрерывное развертывание, выполнять разработку, тестирование, мониторинг и устранение неполадок приложений, а также управлять основными стратегиями, такими как аварийное восстановление, управление удостоверениями и доступом на основе ролей. Платформа Azure поддерживает рабочие процессы DevOps, что позволяет эффективно выполнять различные задачи непосредственно на портале.


## Дальнейшие действия 

* Чтобы включить рабочие процессы DevOps на платформе Azure, требуется Azure Resource Manager. Дополнительные сведения см. в статье [Общие сведения об Azure Resource Manager](../resource-group-overview.md).

* Дополнительные сведения о развертывании службы приложений Azure см. в статье [Развертывание приложения в службе приложений Azure](../app-service-web/web-sites-deploy.md).


[image1]: ./media/tutorial-azureportal-devops/image1.png
[image2]: ./media/tutorial-azureportal-devops/image2.png
[image3]: ./media/tutorial-azureportal-devops/image3.png
[image4]: ./media/tutorial-azureportal-devops/image4.png
[image5]: ./media/tutorial-azureportal-devops/image5.png
[image6]: ./media/tutorial-azureportal-devops/image6.png
[image7]: ./media/tutorial-azureportal-devops/image7.png
[image8]: ./media/tutorial-azureportal-devops/image8.png
[image9]: ./media/tutorial-azureportal-devops/image9.png
[image10]: ./media/tutorial-azureportal-devops/image10.png
[image11]: ./media/tutorial-azureportal-devops/image11.png
[image12]: ./media/tutorial-azureportal-devops/image12.png
[image13]: ./media/tutorial-azureportal-devops/image13.png
[image14]: ./media/tutorial-azureportal-devops/image14.png
[image15]: ./media/tutorial-azureportal-devops/image15.png
[image16]: ./media/tutorial-azureportal-devops/image16.png
[image17]: ./media/tutorial-azureportal-devops/image17.png
[image18]: ./media/tutorial-azureportal-devops/image18.png
[image19]: ./media/tutorial-azureportal-devops/image19.png
[image20]: ./media/tutorial-azureportal-devops/image20.png
[image21]: ./media/tutorial-azureportal-devops/image21.png
[image22]: ./media/tutorial-azureportal-devops/image22.png
[image23]: ./media/tutorial-azureportal-devops/image23.png
[image24]: ./media/tutorial-azureportal-devops/image24.png
[image25]: ./media/tutorial-azureportal-devops/image25.png
[image26]: ./media/tutorial-azureportal-devops/image26.png
[image27]: ./media/tutorial-azureportal-devops/image27.png
[image28]: ./media/tutorial-azureportal-devops/image28.png
[image29]: ./media/tutorial-azureportal-devops/image29.png
[image30]: ./media/tutorial-azureportal-devops/image30.png
[image31]: ./media/tutorial-azureportal-devops/image31.png
[image32]: ./media/tutorial-azureportal-devops/image32.png
[image33]: ./media/tutorial-azureportal-devops/image33.png
[image34]: ./media/tutorial-azureportal-devops/image34.png
[image35]: ./media/tutorial-azureportal-devops/image35.png
[image36]: ./media/tutorial-azureportal-devops/image36.png
[image37]: ./media/tutorial-azureportal-devops/image37.png
[image38]: ./media/tutorial-azureportal-devops/image38.png
[image39]: ./media/tutorial-azureportal-devops/image39.png
[image40]: ./media/tutorial-azureportal-devops/image40.png
[image41]: ./media/tutorial-azureportal-devops/image41.png
[image42]: ./media/tutorial-azureportal-devops/image42.png
[image43]: ./media/tutorial-azureportal-devops/image43.png
[image44]: ./media/tutorial-azureportal-devops/image44.png
[image45]: ./media/tutorial-azureportal-devops/image45.png
[image46]: ./media/tutorial-azureportal-devops/image46.png
[image47]: ./media/tutorial-azureportal-devops/image47.png
[image48]: ./media/tutorial-azureportal-devops/image48.png
[image49]: ./media/tutorial-azureportal-devops/image49.png
[image50]: ./media/tutorial-azureportal-devops/image50.png
[image51]: ./media/tutorial-azureportal-devops/image51.png
[image52]: ./media/tutorial-azureportal-devops/image52.png
[image53]: ./media/tutorial-azureportal-devops/image53.png
[image54]: ./media/tutorial-azureportal-devops/image54.png
[image55]: ./media/tutorial-azureportal-devops/image55.png
[image56]: ./media/tutorial-azureportal-devops/image56.png
[image57]: ./media/tutorial-azureportal-devops/image57.png
[image58]: ./media/tutorial-azureportal-devops/image58.png
[image59]: ./media/tutorial-azureportal-devops/image59.png
[image60]: ./media/tutorial-azureportal-devops/image60.png
[image61]: ./media/tutorial-azureportal-devops/image61.png
[image62]: ./media/tutorial-azureportal-devops/image62.png
[image63]: ./media/tutorial-azureportal-devops/image63.png
[image64]: ./media/tutorial-azureportal-devops/image64.png
[image65]: ./media/tutorial-azureportal-devops/image65.png
[image66]: ./media/tutorial-azureportal-devops/image66.png
[image67]: ./media/tutorial-azureportal-devops/image67.png
[image68]: ./media/tutorial-azureportal-devops/image68.png
[image69]: ./media/tutorial-azureportal-devops/image69.png

<!---HONumber=AcomDC_0615_2016--->