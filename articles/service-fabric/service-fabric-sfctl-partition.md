---
title: "Интерфейс командной строки Azure Service Fabric : sfctl partition | Документация Майкрософт"
description: "Описание команд sfctl partition интерфейса командной строки Azure Service Fabric."
services: service-fabric
documentationcenter: na
author: rwike77
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: cli
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 09/22/2017
ms.author: ryanwi
ms.openlocfilehash: 99756378f2106707b4f6d634a1183d5c32243ee2
ms.sourcegitcommit: ccb84f6b1d445d88b9870041c84cebd64fbdbc72
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/14/2017
---
# <a name="sfctl-partition"></a>sfctl partition
Запрос секций для любой службы и управление ими.

## <a name="commands"></a>Команды

|Команда|Описание|
| --- | --- |
|    data-loss      | Этот API вызывает потерю данных в указанной секции.|
|    data-loss-status  | Возвращает ход выполнения операции потери данных, запущенной с помощью API StartDataLoss.|
|    health         | Возвращает состояние работоспособности указанной секции Service Fabric.|
|    info           | Возвращает сведения о секции Service Fabric.|
|    list           | Получает список секций службы Service Fabric.|
|    load           | Возвращает сведения о нагрузке указанной секции Service Fabric.|
|    load-reset     | Сбрасывает текущую нагрузку секции Service Fabric.|
|    quorum-loss    | Вызывает потерю кворума в указанной секции службы с отслеживанием состояния.|
|    quorum-loss-status| Возвращает ход выполнения операции потери кворума, запущенной с помощью API StartQuorumLoss.|
|    recover        | Указывает кластеру Service Fabric, что следует попытаться восстановить определенную секцию, которая в настоящее время находится в состоянии потери кворума.|
|    recover-all    | Указывает кластеру Service Fabric, что следует попытаться восстановить все службы (в том числе системные), которые в настоящее время находятся в состоянии потери кворума.|
|    report-health  | Отправляет отчет о работоспособности секции Service Fabric.|
|    restart        | Этот API перезапускает некоторые или все реплики или экземпляры указанной секции.|
|    restart-status | Возвращает ход выполнения операции PartitionRestart, запущенной с помощью StartPartitionRestart.|
|    svc-name       | Возвращает имя службы Service Fabric для секции.|


## <a name="sfctl-partition-health"></a>sfctl partition health
Возвращает состояние работоспособности указанной секции Service Fabric.

Возвращает сведения о работоспособности указанной секции. EventsHealthStateFilter используется для фильтрации получаемой коллекции событий работоспособности службы на основе состояния работоспособности.
ReplicasHealthStateFilter используется для фильтрации коллекции объектов ReplicaHealthState для секции. Если указанная секция не существует в хранилище данных о работоспособности, то этот командлет возвращает ошибку. .

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --partition-id [обязательный параметр]| Идентификатор секции.|
| --events-health-state-filter  | Позволяет отфильтровать коллекцию возвращаемых объектов HealthEvent по состоянию работоспособности. Возможные значения для этого параметра — целочисленное значение одного из приведенных ниже состояний работоспособности.                Возвращаются только те события, которые соответствуют заданному фильтру. Для оценки общего состояния работоспособности используются все события. Если фильтр не указан, возвращаются все записи. Значения состояния представляют собой перечисление на основе флага, поэтому значение может представлять собой сочетание этих значений, полученное с помощью битового оператора "ИЛИ". Например, если указано значение 6, то возвращаются все события со значениями HealthState "ОК" (2) и "Warning" (4). -Default — значение по умолчанию. Соответствует любому значению HealthState. Значение равно нулю. -None — фильтр, который не соответствует какому-либо значению HealthState. Используется для возвращения нуля результатов для определенной коллекции состояний. Значение равно 1. -ОК — фильтр, извлекающий входные данные с HealthState со значением "Ок". Значение равно 2. -Warning — фильтр, извлекающий входные данные с HealthState со значением "Warning". Значение равно 4. -Error — фильтр, извлекающий входные данные с HealthState со значением "Error". Значение равно 8.                -All — фильтр, извлекающий входные данные с любым значением HealthState.                Значение равно 65 535.|
|--exclude-health-statistics   | Указывает, должна ли возвращаться статистика работоспособности в результате запроса. Значение по умолчанию: false. Статистика содержит число дочерних сущностей в состоянии работоспособности "Ok", "Warning" и "Error".|
| --replicas-health-state-filter| Позволяет фильтровать коллекцию объектов ReplicaHealthState для секции. Это значение можно получить из элементов HealthStateFilter или с помощью битовых операций с элементами HealthStateFilter. Возвращаются только те реплики, которые соответствуют заданному фильтру. Для оценки общего состояния работоспособности используются все реплики. Если фильтр не указан, возвращаются все записи. Значения состояния представляют собой перечисление на основе флага, поэтому значение может представлять собой сочетание этих значений, полученное с помощью битового оператора "ИЛИ". Например, если указано значение 6, то возвращаются все события со значениями HealthState "ОК" (2) и "Warning" (4). Возможные значения для этого параметра — целочисленное значение одного из приведенных ниже состояний работоспособности. -Default — значение по умолчанию. Соответствует любому значению HealthState. Значение равно нулю. -None — фильтр, который не соответствует какому-либо значению HealthState. Используется для возвращения нуля результатов для определенной коллекции состояний. Значение равно 1. -ОК — фильтр, извлекающий входные данные с HealthState со значением "Ок". Значение равно 2. -Warning — фильтр, извлекающий входные данные с HealthState со значением "Warning". Значение равно 4. -Error — фильтр, извлекающий входные данные с HealthState со значением "Error". Значение равно 8. -All — фильтр, извлекающий входные данные с любым значением HealthState. Значение равно 65 535.|
| --timeout -t               | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug                    | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h                  | Отображение этого справочного сообщения и выход.|
| --output -o                | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.                Значение по умолчанию: json.|
| --query                    | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org. |
| --verbose                  | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="sfctl-partition-info"></a>sfctl partition info
Возвращает сведения о секции Service Fabric.

Конечная точка Partitions возвращает сведения об указанной секции. Ответ содержит идентификатор секции, сведения о схеме секционирования, ключи, поддерживаемые секцией, состояние, данные о работоспособности и другие сведения о секции.

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --partition-id [обязательный параметр]| Идентификатор секции.|
| --timeout -t          | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug               | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h             | Отображение этого справочного сообщения и выход.|
| --output -o           | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.  Значение по умолчанию: json.|
| --query               | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org.|
| --verbose             | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="sfctl-partition-list"></a>sfctl partition list
Получает список секций службы Service Fabric.

Получает список секций службы Service Fabric. Ответ содержит идентификатор секции, сведения о схеме секционирования, ключи, поддерживаемые секцией, состояние, данные о работоспособности и другие сведения о секции.

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --service-id [обязательный параметр]| Идентификатор службы. Обычно это полное имя службы без схемы универсального кода ресурса (URI) "fabric:". Начиная с версии 6.0 иерархические имена разделяются знаком "~". Например, если имя службы — fabric://myapp/app1/svc1, то в версии 6.0 и более поздних версиях идентификатором службы будет myapp~app1~svc1, а в предыдущих версиях идентификатором был бы myapp/app1/svc1.|
| --continuation-token| Параметр маркера продолжения используется для получения следующего набора результатов.         Маркер продолжения с непустым значением добавляется в ответ API, когда результаты из системы не помещаются в одном ответе. Когда это значение передается в следующем вызове API, API возвращает следующий набор результатов. Если следующий набор результатов отсутствует, маркер продолжения не содержит значения. Значение этого параметра не должно быть указано в формате URL-адреса.|
| --timeout -t        | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug             | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h           | Отображение этого справочного сообщения и выход.|
| --output -o         | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.  Значение по умолчанию: json.|
| --query             | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org.|
| --verbose           | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="sfctl-partition-load"></a>sfctl partition load
Возвращает сведения о нагрузке указанной секции Service Fabric.

Возвращает сведения об указанной секции. Ответ содержит перечень сведений о нагрузке. Каждая запись содержит имя метрики нагрузки, значение и время последнего сообщения в формате UTC.

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --partition-id [обязательный параметр]| Идентификатор секции.|
| --timeout -t          | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug               | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h             | Отображение этого справочного сообщения и выход.|
| --output -o           | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.  Значение по умолчанию: json.|
| --query               | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org.|
| --verbose             | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="sfctl-partition-recover"></a>sfctl partition recover
Указывает кластеру Service Fabric, что следует попытаться восстановить определенную секцию, которая в настоящее время находится в состоянии потери кворума.

Указывает кластеру Service Fabric, что следует попытаться восстановить определенную секцию, которая в настоящее время находится в состоянии потери кворума. Эту операцию следует выполнять только в том случае, если известно, что неработающие реплики невозможно восстановить. Неправильное использование этого API может привести к потере данных.

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --partition-id [обязательный параметр]| Идентификатор секции.|
| --timeout -t          | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug               | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h             | Отображение этого справочного сообщения и выход.|
| --output -o           | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.  Значение по умолчанию: json.|
| --query               | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org.|
| --verbose             | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="sfctl-partition-restart"></a>sfctl partition restart
Этот API перезапускает некоторые или все реплики или экземпляры указанной секции.

Этот API удобен для тестирования отработки отказа. Если он используется для секции службы без отслеживания состояния, то параметр RestartPartitionMode должен иметь значение AllReplicasOrInstances. Вызовите API GetPartitionRestartProgress, указав то же значение OperationId, чтобы узнать ход выполнения. .

### <a name="arguments"></a>Аргументы

|Аргумент|Описание|
| --- | --- |
| --operation-id [обязательный параметр]| Идентификатор GUID, определяющий вызов этого API.  Он передается в соответствующий API GetProgress.|
| --partition-id [обязательный параметр]| Идентификатор секции.|
| --restart-partition-mode [обязательный параметр]| -Invalid — зарезервированное значение.  Не передавайте его в API. -AllReplicasOrInstances — все реплики или экземпляры в секции перезапускаются одновременно. -OnlyActiveSecondaries — перезапускаются только вторичные реплики. .|
| --service-id [обязательный параметр]| Идентификатор службы. Обычно это полное имя службы без схемы универсального кода ресурса (URI) "fabric:". Начиная с версии 6.0 иерархические имена разделяются знаком "~". Например, если имя службы — fabric://myapp/app1/svc1, то в версии 6.0 и более поздних версиях идентификатором службы будет myapp~app1~svc1, а в предыдущих версиях идентификатором был бы myapp/app1/svc1.|
| --timeout -t                    | Время ожидания сервера в секундах.  Значение по умолчанию: 60.|

### <a name="global-arguments"></a>Глобальные аргументы

|Аргумент|Описание|
| --- | --- |
| --debug                         | Увеличение уровня детализации ведения журнала для отображения всех журналов отладки.|
| --help -h                       | Отображение этого справочного сообщения и выход.|
| --output -o                     | Формат выходных данных.  Допустимые значения: json, jsonc, table, tsv.                     Значение по умолчанию: json.|
| --query                         | Строка запроса JMESPath. Дополнительные сведения и примеры доступны на сайте http://jmespath.org.|
| --verbose                       | Повышение уровня детализации ведения журнала. Используйте параметр --debug, чтобы получить полные журналы отладки.|

## <a name="next-steps"></a>Дальнейшие действия
- [Настройте](service-fabric-cli.md) интерфейс командной строки Service Fabric.
- Узнайте, как использовать интерфейс командной строки Service Fabric, с помощью [примеров сценариев](/azure/service-fabric/scripts/sfctl-upgrade-application).
