---
title: Как сохранить постоянный виртуальный IP-адрес для облачной службы Azure | Документация Майкрософт
description: Узнайте, как сохранить постоянный виртуальный IP-адрес (VIP) облачной службы Azure.
services: visual-studio-online
author: ghogen
manager: douge
assetId: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.prod: visual-studio-dev15
ms.technology: vs-azure
ms.workload: azure
ms.topic: conceptual
ms.date: 03/21/2017
ms.author: ghogen
ms.openlocfilehash: c02e80a97fe5943019f446299e370bf029a01ff4
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
ms.locfileid: "31795098"
---
# <a name="retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a>Сохранение постоянного виртуального IP-адреса для облачной службы Azure
При обновлении облачной службы, размещенной в Azure, необходимо убедиться в том, что виртуальный IP-адрес (VIP) службы не изменяется. Многие службы управления доменом используют службу доменных имен (DNS) для регистрации доменных имен. Регистрация с помощью DNS возможна, только если виртуальный IP-адрес остается неизменным. Проверить, изменяется ли виртуальный IP-адрес облачной службы при обновлении, можно с помощью **мастера публикации** в инструментах Azure. Дополнительные сведения об управлении доменами DNS для облачных служб см. в статье [Настройка пользовательского доменного имени для облачной службы Azure](cloud-services/cloud-services-custom-domain-name-portal.md).

## <a name="publish-a-cloud-service-without-changing-its-vip"></a>Публикация облачной службы без изменения ее виртуального IP-адреса
Виртуальный IP-адрес (VIP) облачной службы назначается при первом развертывании службы в Azure в конкретной среде, например в рабочей среде. Виртуальный IP-адрес изменяется, только если развертывание удаляется явно или если оно удаляется неявно в процессе обновления. Чтобы сохранить виртуальный IP-адрес, нельзя удалять развертывание. Кроме того, необходимо убедиться, что Visual Studio не удаляет развертывание автоматически. 

Можно указать параметры развертывания в **мастере публикации**, который поддерживает несколько вариантов развертывания. Можно указать новое развертывание или развертывание обновления, которое может быть добавочным или одновременным. Оба вида развертывания обновления сохраняют виртуальный IP-адрес. Определение разных типов развертывания см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md). Кроме того, можно указать, нужно ли удалять предыдущее развертывание облачной службы при возникновении ошибки. Виртуальный IP-адрес может неожиданно измениться, если этот параметр не задан правильно.

## <a name="update-a-cloud-service-without-changing-its-vip"></a>Обновление облачной службы без изменения ее виртуального IP-адреса
1. Создайте или откройте проект облачной службы Azure в среде Visual Studio. 

2. В **обозревателе решений** щелкните проект правой кнопкой мыши. В контекстном меню выберите **Опубликовать**.

    ![Меню публикации](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

3. В диалоговом окне **Опубликовать приложение Azure** выберите подписку Azure, в которую требуется выполнить развертывание. При необходимости войдите в систему и нажмите кнопку **Далее**.

    ![Публикация приложения Azure: страница входа](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

4. На вкладке **Общие параметры** проверьте правильность имени облачной службы, для которой выполняется развертывание, а также значений параметров **Среда**, **Конфигурация сборки** и **Конфигурация службы**.

    ![Публикация приложения Azure: вкладка "Общие параметры"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

5. На вкладке **Дополнительные параметры** убедитесь, что значения **Метка развертывания** и **Учетная запись хранения** указаны правильно. Убедитесь, что флажок **Удалить развертывание при сбое** снят, а флажок **Обновление развертывания** установлен. Снятый флажок **Удалить развертывание при сбое** гарантирует, что виртуальный IP-адрес не будет потерян при возникновении ошибки во время развертывания. Установленный флажок **Обновление развертывания** гарантирует, что развертывание не будет удалено, а виртуальный IP-адрес не будет потерян при повторной публикации приложения. 

    ![Публикация приложения Azure: вкладка "Дополнительные параметры"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

6. Чтобы указать способ обновления в дальнейшем, щелкните **Параметры** рядом с флажком **Обновление развертывания**. Затем выберите **Добавочное обновление** или **Одновременное обновление**. Нажмите кнопку **ОК**. Если выбрать **Добавочное обновление**, то все экземпляры приложения будут обновляться по очереди, обеспечивая доступность приложения в любое время. Если выбрать **Одновременное обновление**, то все экземпляры приложения будут обновляться одновременно. Одновременное обновление выполняется быстрее, но служба может быть недоступна во время обновления. По завершении нажмите кнопку **Далее**.

    ![Публикация приложения Azure: страница "Параметры развертывания"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

7. В диалоговом окне **Опубликовать приложение Azure** нажимайте кнопку **Далее**, пока не отобразится страница **Сводка**. Проверьте параметры и нажмите кнопку **Опубликовать**.
   
    ![Публикация приложения Azure: страница "Сводка"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a>Дополнительная информация
- [Использование мастера публикации приложений Azure в Visual Studio](vs-azure-tools-publish-azure-application-wizard.md)

