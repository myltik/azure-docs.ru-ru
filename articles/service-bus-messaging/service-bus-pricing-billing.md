---
title: Сведения о расценках и выставлении счетов служебной шины | Документация Майкрософт
description: Общие сведения о структуре ценообразования служебной шины.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: ''
ms.assetid: 7c45b112-e911-45ab-9203-a2e5abccd6e0
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/21/2017
ms.author: sethm
ms.openlocfilehash: 8ccb44b5009588c28bc79bb45e1a7640ead6c817
ms.sourcegitcommit: 6f33adc568931edf91bfa96abbccf3719aa32041
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
ms.locfileid: "27159792"
---
# <a name="service-bus-pricing-and-billing"></a>Сведения о расценках и выставлении счетов служебной шины

Служебная шина Azure доступна на уровнях "Стандартный" и ["Премиум"](service-bus-premium-messaging.md). Уровень обслуживания можно выбрать для каждого пространства имен службы служебной шины, которое вы создаете, и этот уровень применяется ко всем сущностям, создаваемым в этом пространстве имен.

> [!NOTE]
> Дополнительные сведения о текущих расценках на использование служебной шины см. на [странице цен на служебную шину](https://azure.microsoft.com/pricing/details/service-bus/) и в разделе [Сведения о ценах на служебную шину](service-bus-faq.md#pricing).
>
>

В служебной шине используются две следующие единицы тарификации для очередей, разделов и подписок:

1. **Операции обмена сообщениями.** Определяется как количество вызовов API к конечным точкам службы очереди, раздела или подписки. Эта единица тарификации заменяет число отправляемых или получаемых сообщений в качестве основной единицы тарификации для очередей, разделов или подписок.
2. **Подключения через брокер.** Определяется как пиковое количество открытых постоянных подключений к очередям, разделам или подпискам для заданного периода выборки в один час. Эта единица тарификации применяется только для уровня "Стандартный", на котором можно открывать дополнительные подключения, в виде номинального сбора за каждое подключение (ранее максимальное число подключений для каждой очереди, раздела или подписки ограничивалось 100).

На уровне **Стандартный** вводится дифференцированная тарификация для операций, выполняемых с очередями, разделами или подписками. Это позволяет получить скидки до 80 % в зависимости от объема при максимальных уровнях использования. Для уровня Стандартный также предусмотрен базовый сбор в размере 10 долларов в месяц, который позволяет выполнять до 12,5 миллиона операций в месяц без дополнительных затрат.

На уровне **Премиум** обеспечивается изоляция ресурсов на уровне процессора и памяти, так что рабочая нагрузка каждого клиента выполняется изолированно от других. Контейнер ресурса называется *единицей обмена сообщениями*. Для каждого премиального пространства имен выделяется хотя бы одна единица обмена сообщениями. Для каждого пространства имен служебной шины Premium можно приобрести одну, две или четыре единицы обмена сообщениями. Одна единица рабочей нагрузки или сущность может охватывать несколько единиц обмена сообщениями, количество которых можно менять; при этом стоимость услуг рассчитывается по 24-часовому или суточному тарифу. В результате вы получаете решение на базе служебной шины с прогнозируемой и повторяемой производительностью. Оно отличается не только более предсказуемой производительностью и высокой доступностью, но и более высокой скоростью работы.

Обратите внимание, что базовый сбор для уровня "Стандартный" взимается только один раз в месяц для каждой подписки Azure. Это означает, что после создания единого пространства имен служебной шины на уровне "Стандартный" вы сможете создавать любое число дополнительных пространств имен на уровне "Стандартный". Это будет возможно в рамках той же подписки Azure без дополнительных базовых расходов.

В таблице на странице [Служебная шина — цены](https://azure.microsoft.com/pricing/details/service-bus/) перечислены функциональные различия между уровнями "Базовый", "Стандартный" и "Премиум".

## <a name="messaging-operations"></a>Операции обмена сообщениями

Плата за очереди, разделы и подписки взимается за каждую операцию, а не за каждое сообщение. Понятие "операция" в данном случае означает любой вызов API к конечной точке службы очереди, раздела или подписки. Оно включает операции управления, отправки и получения сообщений и операции состояния сеанса.

| Тип операции | ОПИСАНИЕ |
| --- | --- |
| управления |Создание, чтение, обновление и удаление (CRUD) очередей, разделов или подписок. |
| Обмен сообщениями |Отправка и получение сообщений с помощью очередей, разделов или подписок. |
| Состояние сеанса |Получение или установка состояния сеанса для очереди, раздела или подписки. |

Дополнительные сведения о ценах см. на странице [Служебная шина — цены](https://azure.microsoft.com/pricing/details/service-bus/).

## <a name="brokered-connections"></a>Подключения через брокера

*Подключения через брокер* охватывают шаблоны использования, включающие большое количество отправителей или получателей, "постоянно подключенных" к очередям, разделам или подпискам. Постоянно подключенные отправители/получатели — это те отправители/получатели, которые подключаются по протоколу AMQP или HTTP с ненулевым временем ожидания приема (например, длинный опрос HTTP). Отправители и получатели HTTP с нулевым временем ожидания не создают подключений через посредника.

Сведения о квотах подключения и других ограничениях служб см. в статье [Квоты на служебную шину](service-bus-quotas.md). Дополнительные сведения о подключениях через брокер см. в разделе [Часто задаваемые вопросы](#faq) далее в этой статье.

На уровне "Стандартный" снимается ограничение на подключения через брокер для пространства имен, и статистика использования подключения через брокер определяется для подписки Azure. Дополнительные сведения см. в таблице [Подключения через брокер](https://azure.microsoft.com/pricing/details/service-bus/).

> [!NOTE]
> В уровень "Стандартный" (в рамках базового сбора) включены 1000 подключений через брокер. Они могут использоваться во всех очередях, разделах и подписках в рамках соответствующей подписки Azure.
>
>

<br />

> [!NOTE]
> Выставление счетов производится на основе пикового количества одновременных подключений. Тарификация выполняется на почасовой основе из расчета в 744 часа в месяц.
>
>

### <a name="premium-tier"></a>Уровень Премиум

Подключения через посредника на уровне Премиум не тарифицируются.

## <a name="faq"></a>Часто задаваемые вопросы

### <a name="what-are-brokered-connections-and-how-do-i-get-charged-for-them"></a>Что такое подключения через посредника и как они тарифицируются?

Подключение через посредника определяется как подключение одного из двух следующих типов:

1. Подключение AMQP клиента к очереди, разделу или подписке служебной шины.
2. Вызов HTTP для получения сообщения с ненулевым временем ожидания приема из раздела или очереди служебной шины.

Тарификация выполняется для пикового количества одновременных подключений через посредника, которое превышает установленный предел (1000 для уровня Стандартный). Пиковые значения измеряются ежечасно, рассчитываются пропорционально из расчета 744 часа в месяц и суммируются для ежемесячного выставления счетов. В конце периода выставления счетов к сумме пропорционально рассчитанных почасовых пиков применяется установленный предел (1000 подключений через посредника в месяц).

Например: 

1. Каждое из 10 000 устройств подключается через отдельное подключение AMQP и получает команды из раздела служебной шины. Устройства отправляют события телеметрии концентратору событий. Если все устройства подключаются в течение 12 часов каждый день, то тарификация подключений будет выполнена следующим образом (в дополнение к любым другим сборам за разделы служебной шины): 10 000 подключений * 12 часов * 31 день / 744 = 5000 подключений через брокер. С учетом ежемесячного предела в 1000 подключений через посредника будут тарифицированы 4000 подключений. С расценкой в 0,03 доллара за каждое подключение через посредника общие сборы составят 120 долларов.
2. 10000 устройств получают сообщения из очереди служебной шины по протоколу HTTP с ненулевым временем ожидания. Если все устройства подключены в течение 12 часов каждый день, то тарификация подключений будет выполнена следующим образом (в дополнение к любым другим сборам за служебную шину): 10 000 подключений на получение по протоколу HTTP * 12 часов в день * 31 день / 744 часа = 5000 подключений через брокер.

### <a name="do-brokered-connection-charges-apply-to-queues-and-topicssubscriptions"></a>Применяются ли сборы за подключения через брокер к очередям, разделам и подпискам?

Да. При отправке событий с помощью HTTP плата за подключение не взимается вне зависимости от количества отправляющих систем или устройств. Сборы за подключения через посредника применяются к событиям приема по протоколу HTTP с ненулевым значением времени ожидания, которое иногда называется "длинным опросом". Для подключений AMQP сборы за подключения через посредника применяются независимо от того, используются ли эти подключения для отправки или приема данных. Первые 1000 подключений через брокер для всех пространств имен в подписке Azure уровня "Стандартный" предоставляются без дополнительной оплаты (сверх базового сбора). Так как этих значений достаточно для охвата многих сценариев обмена сообщениями между службами, сборы за подключения через посредника обычно становятся заметными только при использовании долгого опроса AMQP или HTTP с большим числом клиентов, например, для достижения более эффективной потоковой передачи событий или включения двунаправленного обмена данными для многих устройств или экземпляров приложения.

## <a name="next-steps"></a>Дополнительная информация

* Дополнительные сведения о ценах на служебную шину см. на странице [Служебная шина — цены](https://azure.microsoft.com/pricing/details/service-bus/).
* Ответы на некоторые общие вопросы о ценах на служебную шину и выставлении счетов за ее использование приведены в разделе [Часто задаваемые вопросы о служебной шине](service-bus-faq.md#pricing).

[Azure portal]: https://portal.azure.com
