---
title: Расширенное обнаружение угроз Azure | Документация Майкрософт
description: Узнайте о защите идентификации и ее возможностях.
services: security
documentationcenter: na
author: UnifyCloud
manager: mbaldwin
editor: TomSh
ms.assetid: ''
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/21/2017
ms.author: TomSh
ms.openlocfilehash: eb1bf9f6465a8a94fd2de75f581817887c333289
ms.sourcegitcommit: 870d372785ffa8ca46346f4dfe215f245931dae1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/08/2018
ms.locfileid: "33895337"
---
# <a name="azure-advanced-threat-detection"></a>Расширенное обнаружение угроз Azure
## <a name="introduction"></a>Введение

### <a name="overview"></a>Обзор

Корпорация Майкрософт разработала ряд технических документов, обзоров возможностей безопасности, рекомендаций и контрольных списков, чтобы помочь клиентам Azure в использовании различных функций безопасности, доступных в платформе Azure и связанных продуктах. Содержимое разделов периодически обновляется с точки зрения охвата и углубленности материала. Данный документ является частью этого цикла, как описано в приведенной ниже аннотации.

### <a name="azure-platform"></a>Платформа Azure

Azure — общедоступная облачная платформа, которая поддерживает широкий выбор операционных систем, языков программирования, платформ, инструментов, баз данных и устройств.
Она поддерживает следующие языки программирования и позволяет:
-   запускать контейнеры Linux с интеграцией Docker;
-   создавать приложения с помощью JavaScript, Python, .NET, PHP, Java и Node.js;
-   создавать серверные части для устройств iOS, Android и Windows.

Общедоступные облачные службы Azure поддерживают технологии, которым доверяют миллионы разработчиков и ИТ-специалистов.

При переходе организации в общедоступное облако именно она отвечает за защиту данных и обеспечение безопасности и управления в системе.

Инфраструктура устройств и приложений Azure предназначена для размещения миллионов пользователей одновременно. Это надежная база, которая удовлетворяет корпоративным требованиям к обеспечению безопасности. Azure предоставляет широкий набор параметров для настройки безопасности в соответствии с требованиями развернутых приложения. Данный документ поможет вам выполнить эти требования.

### <a name="abstract"></a>Аннотация

Microsoft Azure предлагает встроенные функции расширенного обнаружения угроз в таких службах, как Azure Active Directory, Azure Operations Management Suite (OMS) и центр безопасности Azure. С помощью этого набора служб и функций безопасности можно легко и быстро понять, что произошло в развертываниях Azure.

Этот технический документ ознакомит вас с подходами Microsoft Azure к диагностике уязвимостей и анализу рисков, связанных с вредоносными действиями, направленными на серверы и другие ресурсы Azure. Это поможет вам определить методы управления удостоверениями и уязвимостями с помощью оптимизированных решений, основанных на клиентских службах и технологиях защиты платформы Azure.

В этом техническом документе рассматриваются технологии платформы Azure и средства управления для клиентов. В нем не затрагиваются соглашения об уровне обслуживания, модели ценообразования и рекомендации для DevOps.

## <a name="azure-active-directory-identity-protection"></a>Защита идентификации Azure Active Directory

![Защита идентификации Azure Active Directory](./media/azure-threat-detection/azure-threat-detection-fig1.png)


[Защита идентификации Azure Active Directory](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection) — это функция [Azure AD уровня Premium P2](https://docs.microsoft.com/azure/active-directory/active-directory-editions), обеспечивающая обзор всех событий риска и возможных уязвимостей, которые могут влиять на удостоверения организации. Корпорация Майкрософт более десяти лет обеспечивает безопасность облачной идентификации, а теперь благодаря защите идентификации Azure AD аналогичные системы защиты стали доступны корпоративным клиентам. Служба защиты идентификации использует возможности обнаружения аномалий Azure AD (они доступны в [отчетах Azure AD об аномальных действиях](https://docs.microsoft.com/azure/active-directory/active-directory-view-access-usage-reports#anomalous-activity-reports)) и новые типы событий риска, которые позволяют обнаруживать аномалии в реальном времени.

Она использует адаптивные алгоритмы машинного обучения и эвристические методы, чтобы обнаруживать аномалии и события риска, которые могут указывать на компрометацию удостоверения. На основе этих данных служба защиты идентификации создает отчеты и оповещения, с помощью которых можно исследовать события риска, чтобы предпринять действия по исправлению и устранению рисков.

Тем не менее защита идентификации Azure Active Directory — больше, чем просто инструмент для мониторинга и создания отчетности. Она позволяет рассчитать уровень риска для каждого пользователя на основе соответствующих событий и настроить политики рисков, чтобы обеспечить автоматическую защиту удостоверений в организации.

Эти политики рисков, помимо других [средств управления условным доступом](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access) Azure Active Directory и [EMS](https://docs.microsoft.com/azure/active-directory/active-directory-conditional-access), позволяют обеспечить автоматическую блокировку или предусмотреть адаптивные действия по исправлению, в том числе сброс пароля и принудительную Многофакторную идентификацию.

### <a name="identity-protections-capabilities"></a>Возможности защиты идентификации

Защита идентификации Azure Active Directory — это больше, чем просто инструмент для мониторинга и создания отчетности. Для защиты удостоверений организации можно настроить политики на основе рисков, которые автоматически реагируют на обнаруженные проблемы в случае достижения указанного уровня риска. Эти политики, помимо других элементов управления условным доступом Azure Active Directory и EMS, позволяют обеспечить автоматическую блокировку или инициировать адаптивные действия по исправлению, в том числе сброс пароля и принудительную многофакторную идентификацию.

Примеры способов защиты удостоверений Azure, которые могут помочь защитить учетные записи и удостоверения:

[Обнаружение событий риска и учетных записей, подверженных риску:](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#detection)
-   обнаружение событий риска шести типов с помощью правил машинного обучения и эвристических правил;
-   расчет уровня риска для пользователя;
-   предоставление пользовательских рекомендаций для повышения общего уровня безопасности путем информирования об уязвимостях.

[Исследование событий риска:](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#investigation)
-   отправка уведомлений о событиях риска;
-   исследование событий риска на основе соответствующей и контекстной информации;
-   базовые рабочие процессы для отслеживания исследований;
-   легкий доступ к действиям по исправлению, таким как сброс пароля.

[Политики условного доступа на основе рисков:](https://docs.microsoft.com/azure/active-directory/active-directory-identityprotection#risky-sign-ins)
-   политика уменьшения рисков при сомнительных входах путем блокировки входа или запроса многофакторной проверки подлинности;
-   политика блокировки или защиты учетных записей с возможным риском;
-   политика обязательной регистрации пользователей для многофакторной проверки подлинности.

### <a name="azure-ad-privileged-identity-management-pim"></a>Azure AD Privileged Identity Management

С помощью [Azure Active Directory (AD) Privileged Identity Management](https://docs.microsoft.com/azure/active-directory/active-directory-privileged-identity-management-configure)

![Azure AD Privileged Identity Management](./media/azure-threat-detection/azure-threat-detection-fig2.png)

можно осуществлять управление, контроль и мониторинг доступа в организации. в том числе доступ к ресурсам в Azure AD и остальным веб-службам Microsoft, таким как Office 365 или Microsoft Intune.

Управление привилегированными пользователями Azure AD помогает:

-   отправлять оповещения и отчеты администраторам Azure AD и предоставлять административный JIT-доступ к службам Microsoft Online Services, таким как Office 365 и Intune;

-   получать отчеты по данным журнала доступа администраторов и изменениям в назначениях администраторов;

-   получать оповещения о доступе к привилегированным ролям;

## <a name="microsoft-operations-management-suite-oms"></a>Microsoft Operations Management Suite (OMS)

[Microsoft Operations Management Suite](https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview) — это облачное решение Майкрософт для управления ИТ-средой, которое помогает управлять локальной и облачной инфраструктурами и защищать их. Набор OMS реализован как облачная служба, поэтому время, затрачиваемое на подготовку к работе, минимально, как и вложения в службы инфраструктуры. Новые возможности безопасности предоставляются автоматически, что сокращает затраты на текущее обслуживание и обновление.

Помимо предоставления ценных служб, OMS поддерживает интеграцию с компонентами System Center, такими как [System Center Operations Manager](https://blogs.technet.microsoft.com/cbernier/2013/10/23/monitoring-windows-azure-with-system-center-operations-manager-2012-get-me-started/), позволяя распространить текущие инвестиции в управление безопасностью на облачную среду. System Center и OMS поддерживают взаимодействие для формирования полнофункциональной гибридной среды управления.

### <a name="holistic-security-and-compliance-posture"></a>Комплексное состояние безопасности и соответствия

[Панель мониторинга "Безопасность и аудит" OMS](https://docs.microsoft.com/azure/operations-management-suite/oms-security-getting-started) позволяет всесторонне изучать данные об информационной безопасности в вашей организации. Для этого применяются встроенные поисковые запросы, которые позволяют определять важные моменты, требующие вашего внимания. Панель мониторинга "Безопасность и аудит" — это начальный экран для доступа ко всем функциям, связанным с безопасностью в OMS. Она содержит обобщенное представление состояния безопасности компьютеров организации. Кроме того, она включает возможность просмотра всех событий за последние 24 часа, 7 дней или другие настраиваемые промежутки времени.

Панели мониторинга OMS помогут вам быстро и легко понять общее состояние безопасности любой среды в контексте ИТ-операций, включая оценку обновлений программного обеспечения, оценку защиты от вредоносных программ и базовые показатели конфигураций. Кроме того, вы можете изучить готовые данные журнала безопасности, чтобы оптимизировать процессы аудита безопасности и соответствия.

Данные на панели мониторинга OMS "Безопасность и аудит" подразделяются на четыре основные категории.

![Панель мониторинга OMS "Безопасность и аудит"](./media/azure-threat-detection/azure-threat-detection-fig3.jpg)

-   **Домены безопасности.** В этой области можно более детально просматривать записи безопасности в динамике по времени, получать доступ к оценке защиты от вредоносных программ, оценке обновлений, сведениям о сетевой безопасности, идентификации, доступе и компьютерах с событиями безопасности, а также быстро переходить к панели мониторинга центра безопасности Azure.

-   **Важные проблемы.** В этом разделе можно быстро определить количество активных проблем и степень их серьезности.

-   **Обнаружения (ознакомительная версия).** Эта область позволяет определять схемы атак путем визуализации оповещений системы безопасности, связанных с ресурсами.

-   **Аналитика угроз.** Эта область позволяет определять схемы атак благодаря визуализации общего числа серверов с исходящим вредоносным IP-трафиком, типов вредоносных угроз и карты, на которой показано физическое расположение соответствующих IP-адресов.

-   **Общие запросы безопасности.** В этом разделе содержится список самых распространенных запросов безопасности, которые можно использовать для мониторинга вашей среды. При щелчке любого из этих запросов он откроется в колонке "Поиск" с результатами для этого запроса.

### <a name="insight-and-analytics"></a>Анализ и аналитика
Центральное место в службе [Log Analytics](https://docs.microsoft.com/azure/log-analytics/log-analytics-overview) занимает репозиторий OMS, который размещается в облаке Azure.

![Анализ и аналитика](./media/azure-threat-detection/azure-threat-detection-fig4.png)

Данные собираются в репозиторий из подключенных источников в результате настройки источников данных и добавления решений в подписку.

![Подписка](./media/azure-threat-detection/azure-threat-detection-fig5.png)

Источники данных и решения каждого создают различные типы записей, которые имеют собственные наборы свойств, но в запросах к репозиторию могут анализироваться вместе. Это позволяет использовать одни и те же средства и методы для работы с разными видами данных, собранными из различных источников.


Большая часть взаимодействия с Log Analytics осуществляется через портал OMS, который работает в любом браузере и обеспечивает доступ к параметрам конфигурации и многочисленным инструментам для анализа собранных данных и принятия необходимых мер. На портале можно использовать [поиск по журналам](https://docs.microsoft.com/azure/log-analytics/log-analytics-log-searches), при котором формируются запросы для анализа собранных данных, [панели мониторинга](https://docs.microsoft.com/azure/log-analytics/log-analytics-dashboards), которые можно настраивать, используя графические представления большинства значимых поисковых запросов, и [решения](https://docs.microsoft.com/azure/log-analytics/log-analytics-add-solutions), предоставляющие дополнительные функции и средства анализа.

![Инструменты анализа](./media/azure-threat-detection/azure-threat-detection-fig6.png)

Решения добавляют функциональные возможности в службу Log Analytics. Они выполняются преимущественно в облаке и обеспечивают анализ данных, собираемых в репозитории OMS. Кроме того, они могут определять новые типы записей, которые нужно собирать и которые можно анализировать, используя запросы поиска по журналам или дополнительный пользовательский интерфейс, предоставляемый решением на панели мониторинга OMS.
К решениям такого типа относится решение "Безопасность и аудит".



### <a name="automation--control-alert-on-security-configuration-drifts"></a>Автоматизация и контроль: оповещения об отклонениях конфигурации безопасности

Служба автоматизации Azure позволяет автоматизировать административные процессы с помощью модулей Runbook, основанных на PowerShell и выполняемых в облаке Azure. Модули Runbook также могут выполняться на сервере в локальном центре обработки данных для управления локальными ресурсами. Служба автоматизации Azure предоставляет функции управления конфигурацией с помощью PowerShell DSC (Desired State Configuration).

![Служба автоматизации Azure](./media/azure-threat-detection/azure-threat-detection-fig7.png)

Вы можете создавать ресурсы DSC, размещенные в Azure, управлять ими и назначать их облачным и локальным системам для определения и автоматического применения их конфигурации. Кроме того, можно получать отчеты об отклонениях, чтобы обеспечить соответствие конфигураций безопасности политике.

## <a name="azure-security-center"></a>Центр безопасности Azure

Центр безопасности Azure помогает защитить ваши ресурсы Azure. Он включает в себя встроенные функции мониторинга безопасности и управления политиками для подписок Azure. С помощью службы можно определить политики не только для подписок Azure, но и для [групп ресурсов](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-portal), что сделает ваши настройки более точными.

![Центр безопасности Azure](./media/azure-threat-detection/azure-threat-detection-fig8.png)

Исследователи корпорации Майкрософт по вопросам безопасности постоянно отслеживают возникающие угрозы. У них есть доступ к обширной телеметрии, которую корпорация Майкрософт получает благодаря своему глобальному присутствию в облаке и на локальных устройствах. Эта обширная и разнообразная коллекция наборов данных позволяет Майкрософт выявлять новые схемы и тенденции атак в своих локальных потребительских и корпоративных продуктах, а также в онлайн-службах.

Поэтому, когда хакеры создают новые, все более сложные эксплойты, центр безопасности обновляет свои алгоритмы обнаружения максимально оперативно. Этот подход позволяет эффективно противостоять стремительно развивающимся угрозам.

![Центр безопасности](./media/azure-threat-detection/azure-threat-detection-fig9.jpg)

Функция обнаружения угроз в центре безопасности автоматически собирает информацию о безопасности из ваших ресурсов Azure, сети и подключенных партнерских решений.  Она анализирует эту информацию, сравнивая сведения из разных источников и определяя угрозы.
Приоритет в центре безопасности получают оповещения безопасности и рекомендации по устранению угроз.

В центре безопасности используется расширенная аналитика безопасности, возможности которой значительно превышают возможности подходов, основанных на сигнатурах. В центре безопасности используются также достижения в технологиях больших данных и [машинного обучения](https://azure.microsoft.com/blog/machine-learning-in-azure-security-center/). С их помощью оцениваются события во всей облачной структуре — выявляются угрозы, которые невозможно обнаружить вручную, и прогнозируются тенденции развития атак. В аналитику системы безопасности включено следующее.

### <a name="threat-intelligence"></a>Аналитика угроз

В корпорации Майкрософт накоплен огромный объем информации, относящейся к глобальной аналитике угроз.
Данные телеметрии поступают из таких источников, как Azure, Office 365, Microsoft CRM Online, Microsoft Dynamics AX, outlook.com, MSN.com, подразделение Microsoft Digital Crimes Unit (DCU) и центр Microsoft Security Response Center (MSRC).

![Аналитика угроз](./media/azure-threat-detection/azure-threat-detection-fig10.jpg)

Исследователи получают также информацию, связанную с аналитикой угроз, от основных поставщиков облачных служб (которые получают ее от своих подписчиков), а также от третьих сторон. Эта информация позволяет центру безопасности Azure оповещать вас об угрозах, которые связаны с известными вредоносными программами. Некоторые примеры:

-   **Использование возможностей машинного обучения.** Центр безопасности Azure имеет доступ к огромному объему данных о сетевых операциях в облаке, которые могут использоваться для обнаружения угроз, нацеленных на развертывания Azure. Например: 

-   **Обнаружение атак методом подбора.** Машинное обучение используется для создания хронологического шаблона попыток удаленного доступа, который позволит обнаруживать атаки методом подбора, направленные на порты SSH, RDP и SQL.

-   **Обнаружение исходящих атак DDoS и ботнетов.** Общей целью атак на облачные ресурсы является использование вычислительной мощности этих ресурсов для выполнения других атак.

-   **Поведенческая аналитика серверов и виртуальных машин**. После нарушения безопасности сервера или виртуальной машины хакеры используют широкий набор методов для выполнения вредоносного кода в этой системе, стараясь избежать обнаружения, обеспечить постоянное присутствие и устранить средства безопасности.

-   **Обнаружение угроз базы данных SQL Azure.** Служба обнаружения угроз базы данных SQL Azure выявляет аномальные операции базы данных, указывающее на необычные и потенциально опасные попытки получить доступ к базам данных или использовать их уязвимость.

### <a name="behavioral-analytics"></a>Поведенческая аналитика

Поведенческая аналитика — это метод, в рамках которого данные анализируются и сверяются с набором известных схем. Однако эти схемы — не просто сигнатуры. Они определяются с помощью сложных алгоритмов машинного обучения, которые применяются к объемным наборам данных.

![Поведенческая аналитика](./media/azure-threat-detection/azure-threat-detection-fig11.jpg)


Их также определяют аналитики посредством тщательного анализа вредоносного поведения. Поведенческая аналитика позволяет центру безопасности Azure выявлять скомпрометированные ресурсы. Для этого центр безопасности анализирует журналы виртуальных машин, журналы устройств виртуальной сети, журналы структуры, аварийный дампы и другие источники.

Кроме того, получаемые данные сверяются с другими сигналами. Это дает возможность получить подтверждающие доказательства масштабной кампании. Эта корреляция, в свою очередь, помогает выявить события, которые соответствуют установленным признакам компрометации.

Некоторые примеры:
-   **Выполнение подозрительных процессов.** Хакеры используют несколько методик, чтобы выполнять вредоносные программы и не допускать при этом их обнаружения. Например, хакер может дать вредоносной программе то же имя, что и у обычного системного файла, при этом разместив вредоносные файлы в альтернативных расположениях, использовать имя, очень похожее на имя безвредного файла, или замаскировать настоящее расширение файла. Чтобы обнаруживать подобные выбросы, центр безопасности моделирует поведение процессов и отслеживает их выполнение.

-   **Скрытые вредоносные программы и эксплойты.** Сложная вредоносная программа может избегать обнаружения традиционным антивирусным ПО. Для этого она либо никогда ничего не записывает на диск, либо шифрует находящиеся на диске программные компоненты. Тем не менее такую программу может обнаружить анализ памяти, так как, функционируя, она не может не оставлять следов в памяти. Когда программа дает сбой, аварийный дамп записывает часть памяти в момент сбоя. Анализируя память в аварийном дампе, центр безопасности Azure может выявить методы, с помощью которых хакер использует уязвимости ПО, получает доступ к конфиденциальным данным и тайно пользуется скомпрометированным компьютером, не снижая его производительность.

-   **Путешествие по компьютерам и внутренняя разведка.** Чтобы находиться в скомпрометированной сети длительное время, занимаясь поиском и сбором ценных данных, хакеры часто пытаются переходить со скомпрометированного компьютера на другие компьютеры в той же сети. Чтобы обнаруживать попытки хакера укрепиться в сети, центр безопасности отслеживает процессы обработки и входа, например зондирование сети через удаленное выполнение команд и перечисление учетных записей.

-   **Вредоносные сценарии PowerShell.** Для выполнения вредоносного кода на целевых виртуальных машинах хакеры могут использовать PowerShell с различными целями. Центр безопасности проверяет процессы PowerShell на предмет подозрительной активности.

-   **Исходящие атаки.** Хакеры часто атакуют облачные ресурсы, чтобы дополнительные атаки исходили уже от них. Скомпрометированные виртуальные машины, например, могут быть источником атак методом подбора против других виртуальных машин, могут рассылать спам или сканировать открытые порты и другие устройства в Интернете. Изучая сетевой трафик с помощью машинного обучения, центр безопасности может обнаруживать аномалии в исходящих сетевых подключениях. Что касается спама, центр безопасности сверяет трафик необычной электронной почты с аналитической информацией из Office 365, чтобы определить, является ли почта нежелательной или рассылается в рамках обычной рекламной кампании.

### <a name="anomaly-detection"></a>Обнаружение аномалий

Центр безопасности Azure выявляет угрозы также с помощью метода обнаружения аномалий. В отличие от поведенческой аналитики (в которой используются известные схемы поведения, созданные на основе объемных наборов данных), обнаружение аномалий является более персонализированной методикой. В ее рамках акцент делается на показатели, стандартные для вашего развертывания. Машинное обучение определяет, какие процессы являются нормальными для вашей среды. Затем вырабатываются правила, в которых обозначаются аномальные условия, свидетельствующие об угрозе безопасности. Ниже приведен пример.

-   **Входящие атаки методом подбора по протоколу RDP или SSH.** Ваши развертывания могут включать в себя виртуальные машины с большой нагрузкой, куда пользователи входят много раз в день, и другие виртуальные машины, куда входят очень редко или не входят вообще. Центр безопасности Azure может определять стандартные показатели входов на эти виртуальные машины и с помощью машинного обучения определить средние значения этих показателей. В случае каких-либо отклонений от базовых показателей, определенных для характеристик входа, может быть создано оповещение. Степень существенности отклонения также определяется с помощью машинного обучения.

### <a name="continuous-threat-intelligence-monitoring"></a>Непрерывный мониторинг аналитики угроз

В центре безопасности Azure работают глобальные команды по исследованиям в области безопасности и по обработке и анализу данных. Они постоянно наблюдают за изменениями в сфере угроз. В центре безопасности действуют описанные ниже инициативы.

-   **Мониторинг аналитики угроз.** Аналитика угроз предусматривает механизмы, индикаторы, результаты и практические советы об имеющихся и возникающих угрозах. Эта информация размещается в сообществе специалистов по безопасности, и корпорация Майкрософт непрерывно отслеживает каналы аналитики угроз, принадлежащие внутренним и внешним источникам.

-   **Общий доступ к информации.** Команды по обеспечению безопасности, задействованные в широком наборе облачных и локальных служб, серверов и клиентских устройств с конечными точками корпорации Майкрософт, обмениваются информацией и анализируют ее.

-   **Специалисты по безопасности Майкрософт.** Свой вклад неустанно вносят команды Майкрософт, которые работают в таких узких областях безопасности, как экспертиза и обнаружение веб-атак.

-   **Настройка обнаружения.** Алгоритмы испытываются на наборах данных конкретных пользователей, и исследователи по вопросам безопасности проверяют результаты испытаний в тесном сотрудничестве с этими пользователями. Чтобы улучшать алгоритмы машинного обучения, специалисты анализируют ложные и истинные срабатывания.

Все эти инициативы совместно дают общий результат: обнаружение угроз происходит по-новому и более качественно, а пользоваться результатами вы можете прямо сейчас, не прилагая никаких усилий.

## <a name="advanced-threat-detection-features---other-azure-services"></a>Функции расширенного обнаружения угроз: другие службы Azure

### <a name="virtual-machine-microsoft-antimalware"></a>Виртуальная машина: антивредоносная программа (Майкрософт)

[Антивредоносная программа](https://docs.microsoft.com/azure/security/azure-security-antimalware) для Azure — это единый агент для приложений и клиентских сред, работающий в фоновом режиме и не требующий вмешательства пользователя. Вы можете развернуть систему защиты, соответствующую рабочим нагрузкам своих приложений, и использовать базовую конфигурацию защиты (по умолчанию) или расширенную настраиваемую конфигурацию, включающую отслеживание вредоносных программ. Антивредоносная программа Azure — это компонент безопасности для виртуальных машин Azure, который автоматически устанавливается на всех виртуальных машинах PaaS в Azure.

**Возможности Azure по развертыванию и включению антивредоносной программы (Майкрософт) для ваших приложений**

#### <a name="microsoft-antimalware-core-features"></a>Основные возможности антивредоносной программы (Майкрософт)

-   **Защита в режиме реального времени**: мониторинг действий, выполняемых в облачных службах и виртуальных машинах, для обнаружения и блокировки работы вредоносных программ.

-   **Запланированное сканирование**: периодическое целевое сканирование для обнаружения вредоносных программ, включая уже запущенные.

-   **Исправление вредоносных действий**: автоматические действия в отношении обнаруженных вредоносных программ, например удаление или помещение в карантин вредоносных файлов, а также удаление из реестра нежелательных записей.

-   **Обновление подписей**: автоматическая установка последних версий подписей (определений вирусов) с заданной частотой, обеспечивающая актуальность защиты.

-   **Обновление модуля защиты от вредоносных программ**: автоматическое обновление соответствующего модуля защиты Майкрософт.

-   **Обновление платформы защиты от вредоносных программ**: автоматическое обновление платформы антивредоносного ПО Майкрософт.

-   **Активная защита**: отправка в Microsoft Azure отчетов с метаданными телеметрии, содержащих сведения об обнаруженных угрозах и подозрительных ресурсах. Это обеспечивает быстрое реагирование на возникающие угрозы и синхронное предоставление подписей в режиме реального времени с помощью системы Microsoft Active Protection System (MAPS).

-   **Отправка примеров**: отправка отчетов и примеров в службу защиты от вредоносных программ Майкрософт для повышения качества обслуживания и устранения неполадок.

-   **Исключения**: администраторы приложений и служб могут отключать защиту и сканирование для определенных файлов, процессов и дисков, повышая тем самым производительность и решая другие задачи.

-   **Сбор событий защиты от вредоносных программ**: запись данных о работоспособности службы защиты от вредоносных программ, а также сведений о подозрительных действиях и исправлениях в журнале событий операционной системы. Вся эта информация собирается в пользовательской учетной записи хранения Azure.

### <a name="azure-sql-database-threat-detection"></a>Обнаружение угроз базы данных SQL Azure

[Обнаружение угроз базы данных Azure SQL](https://azure.microsoft.com/blog/azure-sql-database-threat-detection-your-built-in-security-expert/) — это новая функция аналитики безопасности, встроенная в службу базы данных SQL Azure. Работая круглосуточно, чтобы изучать, профилировать и выявлять аномальные действия с базами данных, служба обнаружения угроз базы данных SQL Azure определяет потенциальные угрозы для базы данных.

Сотрудники службы безопасности или другие назначенные администраторы могут получить немедленное уведомление о подозрительных действиях с базой данных. Каждое уведомление содержит сведения о подозрительном действии и рекомендации по дальнейшему исследованию и снижению угрозы.

В настоящее время служба обнаружения угроз базы данных SQL Azure обнаруживает потенциальные уязвимости, атаки путем внедрения кода SQL и аномальные закономерности в доступе к базам данных.

При получении уведомления по электронной почте об обнаружении угрозы пользователи могут перейти и просмотреть соответствующие записи аудита, воспользовавшись ссылкой в сообщении, которая открывает средство просмотра записей аудита и (или) предварительно настроенный шаблон аудита Excel, отображающий записи аудита, соответствующие времени подозрительного события. Они могут просмотреть информацию в соответствии:
-   с хранилищем аудита для сервера и базы данных, где обнаружены аномальные действия базы данных;

-   таблицей хранилища аудита, которая использовалась во время события для записи журнала аудита;

-   с записями аудита за час, последовавший после того, как произошло событие;

-   с записями аудита с одинаковым идентификатором события на момент происшествия события (необязательно для некоторых средств проверки).

Средства обнаружения угроз базы данных SQL используют одну из следующих методик обнаружения:

-   **Детерминированное обнаружение** определяет подозрительные закономерности (на основе правил) в SQL-запросах клиентов, которые соответствуют известным атакам. Эта методика обеспечивает высокие показатели обнаружения и мало ложных срабатываний, однако ее применение ограничено, так как она относится к категории "атомарного обнаружения".

-   **Обнаружение на основе поведения** выявляет аномальные действия, которые нетипичны для базы данных и не выполнялись в течение последних 30 дней.  Примерами аномальных действий клиента SQL может быть всплеск неудачных попыток входа или запросов, извлечение большого объема данных, необычные канонические запросы и неизвестные IP-адреса, используемые для доступа к базе данных.

### <a name="application-gateway-web-application-firewall"></a>Брандмауэр веб-приложения шлюза приложений

[Брандмауэр веб-приложения](../app-service/environment/app-service-app-service-environment-web-application-firewall.md) — это функция [шлюза приложений Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-webapplicationfirewall-overview), которая обеспечивает защиту веб-приложений, использующих шлюз приложений для стандартных функций [управления доставкой приложений](https://kemptechnologies.com/in/application-delivery-controllers). Принцип работы брандмауэра веб-приложения заключается в защите приложений от [большинства из основных 10 уязвимостей OWASP](https://www.owasp.org/index.php/Top_10_2010-Main).

![Брандмауэр веб-приложения шлюза приложений](./media/azure-threat-detection/azure-threat-detection-fig13.png)

-   Защита от внедрения кода SQL.

-   Защита от межсайтовых сценариев.

-   Защита от распространенных сетевых атак, в том числе от внедрения команд, несанкционированных HTTP-запросов, разделения HTTP-запросов и атак с включением удаленного файла.

-   Защита от нарушений протокола HTTP.

-   Защита от аномалий протокола HTTP, например отсутствия агента пользователя узла и заголовков accept.

-   Защита от программ-роботов, программ-обходчиков и сканеров.

-   Обнаружение распространенных неправильных конфигураций приложений (Apache, IIS и т. д.).

Настройка WAF в шлюзе приложений предоставляет следующие преимущества.

-   Защита веб-приложения от сетевых уязвимостей и атак без изменения в коде серверной части.

-   Одновременная защита нескольких веб-приложений с помощью шлюза приложений. Шлюз приложений поддерживает размещение до 20 веб-сайтов за одним шлюзом, который позволяет защитить их все от сетевых атак.

-   Мониторинг веб-приложения на наличие атак с помощью отчета, создаваемого в режиме реального времени на основе журналов WAF шлюза приложений.

-   Для некоторых элементов управления соответствием требованиям необходимо, чтобы все конечные точки для Интернета были защищены решением WAF. С помощью шлюза приложений с включенным WAF вы можете удовлетворить эти требования.

### <a name="anomaly-detection--an-api-built-with-azure-machine-learning"></a>API обнаружения аномалий, встроенный в машинное обучение Azure

API обнаружения аномалий — это интерфейс API, встроенный в Машинное обучение Azure, который используется для обнаружения различного рода аномальных закономерностей в данных временных рядов. Этот API присваивает показатель аномальности каждой точке данных временного ряда, который может использоваться для создания оповещений, отслеживания с помощью панелей мониторинга или соединения с системами отправки запросов.

[API обнаружения аномалий](https://docs.microsoft.com/azure/machine-learning/machine-learning-apps-anomaly-detection-api) может обнаруживать следующие типы аномалий в данных временных рядов:

-   **Пики и спады**. Например, при мониторинге количества неудачных попыток входа в службу или заказов на сайте электронной коммерции необычные пики или спады могут означать атаки на систему безопасности или нарушения в работе службы.

-   **Тенденции к повышению и понижению**. Например, при мониторинге использования памяти в вычислениях уменьшение размера свободной памяти указывает на потенциальную утечку памяти. При мониторинге длины очереди службы постоянная тенденция к повышению может означать проблему с базовым программным обеспечением.

-   **Изменение уровня и изменения в динамическом диапазоне значений**. Например, изменения уровня задержек службы после обновления службы или более низкие уровни исключений после обновления могут представлять интерес для наблюдения.

API на основе машинного обучения обеспечивает:

-   **Гибкое и надежное обнаружение**. Модели обнаружения аномалий дают пользователям возможность настроить параметры чувствительности и выявлять аномалии в сезонных и несезонных наборах данных. Пользователи могут настроить модель обнаружения аномалий, чтобы повысить или понизить чувствительность API обнаружения в соответствии с потребностями. Это будет означать обнаружение большего или меньшего числа видимых аномалий в данных с сезонными закономерностями и без них.

-   **Масштабируемое и своевременное обнаружение**. Традиционный мониторинг с пороговыми значениями, заданными в соответствии с предметными знаниями экспертов, требует больших затрат и не может охватить миллионы динамически изменяемых наборов данных. Модели обнаружения аномалий в данном API обучаются и настраиваются автоматически на основе данных журналов и данных, получаемых в режиме реального времени.

-   **Упреждающее и действенное обнаружение**. Обнаружение медленных тенденций и изменений уровня может применяться для раннего обнаружения аномалий. Обнаруженные ранние аномальные сигналы могут использоваться для привлечения специалистов к изучению проблемных областей и принятию ответных мер.  Кроме того, модели анализа первопричин и инструменты оповещения могут разрабатываться на основе этой службы API обнаружения аномалий.

API обнаружения аномалий — это эффективное и рациональное решение для разнообразных сценариев, таких как мониторинг работоспособности и ключевых показателей эффективности служб, Интернет вещей, мониторинг производительности и мониторинг сетевого трафика. Ниже приведены некоторые популярные сценарии, в которых можно использовать этот API.
- ИТ-отделы, нуждающиеся в инструментах для своевременного отслеживания событий, кодов ошибок, журналов использования и производительности (ЦП, памяти и т. д.).

-   Сайты электронной коммерции, на которых требуется отслеживать действия клиентов, просмотры страниц, щелчки и т. д.

-   Коммунальные компании, которым требуется отслеживать потребление воды, газа, электроэнергии и других ресурсов.

-   Службы управления зданиями, которым требуется отслеживать температуру, влажность, движение и т. д.

-   Компании, работающие в сфере Интернета вещей, или производители, которым требуется использовать данные датчиков во временных рядах для контроля рабочего процесса, качества и т. д.

-   Поставщики услуг, например центры обработки вызовов, которым нужно отслеживать тенденции спроса на услуги, объем инцидентов, длину очереди ожидания и т. д.

-   Группы бизнес-аналитики, которым требуется отслеживать аномальные смещения ключевых показателей эффективности организации (например, объем продаж, мнения клиентов, цены) в режиме реального времени.

### <a name="cloud-app-security"></a>Cloud App Security

[Cloud App Security](https://docs.microsoft.com/cloud-app-security/what-is-cloud-app-security) является важнейшей частью стека безопасности Microsoft Cloud. Это комплексное решение, которое поможет вашей организации, переходящей в облако, получить все обещанные преимущества облачных приложений, но сохранить полный контроль благодаря улучшенной видимости операций. Оно также позволяет повысить защиту критически важных данных приложений в облаке.

Используя инструменты, помогающие обнаруживать теневые ИТ, оценивать риски, применять политики, исследовать действия и предотвращать угрозы, организации могут более безопасно перейти в облако, сохраняя контроль над критически важными данными.

<table style="width:100%">
 <tr>
   <td>Поиск</td>
   <td>Выявите теневые ИТ с помощью Cloud App Security. Получайте информацию, обнаруживая приложения, действия, пользователей, данные и файлы в облачной среде. Выявляйте сторонние приложения, подключенные к вашему облаку.</td>
 </tr>
 <tr>
   <td>Изучение</td>
   <td>Изучите облачные приложения с помощью облачных инструментов экспертизы, чтобы узнать больше об опасных приложениях, определенных пользователях и файлах в сети. Находите закономерности в данных, собранных из вашего облака. Создавайте отчеты для отслеживания работы облака.</td>

 </tr>
 <tr>
   <td>Контроль</td>
   <td>Снижайте риск, задав политики и оповещения, чтобы получить максимальный контроль над сетевым трафиком облака. Используйте Cloud App Security, чтобы перенести пользователей в альтернативные варианты облачных приложений, санкционированные системой безопасности.</td>

 </tr>
 <tr>
   <td>Защита</td>
   <td>Используйте Cloud App Security, чтобы одобрять или запрещать приложения, применять средства предотвращения потери данных, контролировать доступ и совместное использование ресурсов, а также создавать настраиваемые отчеты и оповещения.</td>

 </tr>
 <tr>
   <td>Контроль</td>
   <td>Снижайте риск, задав политики и оповещения, чтобы получить максимальный контроль над сетевым трафиком облака. Используйте Cloud App Security, чтобы перенести пользователей в альтернативные варианты облачных приложений, разрешенные системой безопасности.</td>

 </tr>
</table>


![Cloud App Security](./media/azure-threat-detection/azure-threat-detection-fig14.png)

Cloud App Security объединяет информацию об облаке следующим образом:

-   Использует Cloud Discovery для сопоставления и определения облачной среды и облачных приложений, которые использует ваша организация.


-   Разрешает и запрещает приложения в облаке.



-   Использует простые в развертывании соединители приложений, применяющие преимущества интерфейсов API поставщиков, для мониторинга и контроля приложений, к которым вы подключаетесь.

-   Обеспечивает непрерывный контроль благодаря установке политик и их постоянной точной настройке.

При сборе данных из этих источников Cloud App Security выполняет сложный анализ данных. Это решение немедленно оповещает вас о подозрительной активности и предоставляет подробную информацию об облачной среде. В Cloud App Security можно настроить политику безопасности и использовать ее для защиты всех компонентов облачной среды.

## <a name="third-party-atd-capabilities-through-azure-marketplace"></a>Возможности сторонних ATD, доступные в Azure Marketplace

### <a name="web-application-firewall"></a>Брандмауэр веб-приложения

Брандмауэр веб-приложения проверяет входящий трафик Интернета и блокирует атаки путем внедрения кода SQL, межсайтовые сценарии, передачу вредоносных программ, атаки DDoS на приложения и другие атаки, нацеленные на ваши веб-приложения. Также они проверяют ответы от внутренних веб-серверов для предотвращения потери данных (DLP). Интегрированная подсистема управления доступом позволяет администраторам создавать детализированные политики управления доступом для осуществления аутентификации, авторизации и учета, что обеспечивает организациям строгую проверку подлинности и контроль пользователей.

**Главное:**
-   Обнаружение и блокирование атак путем внедрения кода SQL, межсайтовых сценариев, передачи вредоносных программ, атак DDoS на приложения и других атак, нацеленных на приложение.

-   Аутентификация и управление доступом.

-   Проверка исходящего трафика для выявления конфиденциальных данных и возможность маскировать информацию или блокировать ее утечку.

-   Ускорение доставки содержимого веб-приложений с помощью различных возможностей, в том числе кэширования, сжатия и других способов оптимизации трафика.

Ниже приведены примеры брандмауэров веб-приложения, доступных в Azure Marketplace:

[Barracuda Web Application Firewall, Brocade Virtual Web Application Firewall (Brocade vWAF), Imperva SecureSphere и The ThreatSTOP IP Firewall.](https://azure.microsoft.com/marketplace/partners/brocade_communications/brocade-virtual-web-application-firewall-templatevtmcluster/)

## <a name="next-steps"></a>Дальнейшие действия

- [Возможности обнаружения центра безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-detection-capabilities)

Расширенные возможности обнаружения в центре безопасности Azure помогают выявлять активные угрозы для ресурсов Microsoft Azure и оперативно на них реагировать.

- [Обнаружение угроз базы данных SQL Azure](https://azure.microsoft.com/blog/azure-sql-database-threat-detection-your-built-in-security-expert/)

Обнаружение угроз базы данных SQL Azure помогло устранить проблемы, связанные с потенциальными угрозами для базы данных.
