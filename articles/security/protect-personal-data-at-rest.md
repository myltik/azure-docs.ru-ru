Cu--- title: Защита неактивных персональных данных с помощью шифрования в Azure | Документация Майкрософт description: Этот материал входит в цикл статей, которые помогают защитить персональные данные с помощью Azure. services: security documentationcenter: na author: Barclayn manager: MBaldwin editor: TomSh

ms.assetid: ms.service: security ms.devlang: na ms.topic: article ms.tgt_pltfrm: na ms.workload: na ms.date: 08/22/2017 ms.author: barclayn ms.custom: 

---
# <a name="azure-encryption-technologies-protect-personal-data-at-rest-with-encryption"></a>Технологии шифрования Azure. Защита неактивных персональных данных с помощью шифрования

Эта статья поможет понять, как защитить неактивные данные на основе технологий шифрования Azure.

Мы советуем шифровать неактивные данные, чтобы защитить конфиденциальные или персональные данные, а также обеспечить соответствие требованиям и конфиденциальность данных.
Шифрование неактивных данных предназначено для предотвращения доступа злоумышленника к незашифрованным данным за счет шифрования данных на диске.

## <a name="scenario"></a>Сценарий 

Большая круизная компания, расположенная в США, расширяет масштабы своей деятельности, чтобы предоставлять маршруты в Средиземном и Балтийском морях, а также на Британских островах. Чтобы реализовать эту программу, компания приобрела несколько небольших круизных фирм, расположенных в Италии, Германии, Дании и Великобритании.

Корпоративные данные компании хранятся в облаке Microsoft Azure. К ним могут относиться такие персональные данные клиентов и сотрудников:

- адреса;
- номера телефонов;
- идентификационные номера налогоплательщиков;
- данные кредитной карты.

Компания должна обеспечивать конфиденциальность данных клиентов и сотрудников и сделать их доступными только в определенных отделах (например, отделах заработной платы и бронирования).

Круизная компания также содержит большую базу данных участников программ лояльности и программ скидок, которая, в свою очередь, содержит персональные данные, позволяющие отслеживать связи с текущими и бывшими клиентами.

### <a name="problem-statement"></a>Проблема

Компания должна обеспечить конфиденциальность персональных данных клиентов и сотрудников и сделать их доступными только в определенных отделах (например, отделах заработной платы и бронирования). Эти персональные данные хранятся вне управляемого корпорацией центра обработки данных и физически не контролируются компанией.

### <a name="company-goal"></a>Цель компании

В рамках многоуровневой эшелонированной стратегии защиты цель компании заключается в обеспечении шифрования всех источников данных, содержащих персональные данные, включая те, что находятся в облачном хранилище. Если посторонние лица получат доступ к персональным данным, благодаря шифрованию они не смогут прочитать их. Шифрование должно быть простым или прозрачным для пользователей и администраторов.

## <a name="solutions"></a>Решения

Службы Azure предоставляют несколько инструментов и технологий защиты неактивных персональных данных за счет шифрования.

### <a name="azure-key-vault"></a>Хранилище ключей Azure

[Azure Key Vault](https://docs.microsoft.com/en-us/azure/key-vault/key-vault-whatis) предоставляет безопасное хранилище ключей, которые используются при шифровании неактивных данных в службах Azure. Это рекомендованное хранилище ключей и решение по управлению ими. Управление ключами шифрования имеет важное значение при защите хранимых данных.

#### <a name="how-do-i-use-azure-key-vault-to-protect-keys-that-encrypt-personal-data"></a>Защита ключей шифрования персональных данных с помощью Azure Key Vault

Чтобы использовать Azure Key Vault, требуется подписка для учетной записи Azure. Кроме того, необходимо установить Azure PowerShell. С помощью командлетов PowerShell вы выполните следующие действия:

1. Подключение к своим подпискам

2. Создайте хранилище ключей.

3. Добавьте ключ или секретный код в хранилище ключей.

4. Зарегистрируете приложения, которые будут использовать хранилище ключей с Azure Active Directory.

5. Разрешите приложениям использовать ключ или секрет.

Чтобы создать хранилище ключей, используйте командлет PowerShell New-AzureRmKeyVault. Вы присвоите имя хранилища, имя группы ресурсов и географическое местоположение. Имя хранилища используется при управлении ключами с помощью других командлетов. Приложениям, использующим хранилище через REST API, также требуется универсальный код ресурса (URI) хранилища.

Azure Key Vault предоставляет ключ с программной защитой. Вы также можете импортировать ключ, имеющийся в PFX-файле. В хранилище также можно хранить секреты (пароли).

Вы также можете создать ключ в своем локальном аппаратном модуле безопасности и передать его в аппаратные модули безопасности в службе Key Vault так, чтобы ключ не покидал их пределы.

Подробные инструкции по использованию Azure Key Vault см. в статье [Приступая к работе с хранилищем ключей Azure](https://docs.microsoft.com/en-us/azure/key-vault/key-vault-get-started).

Сведения о списке командлетов PowerShell, используемых с Azure Key Vault, см. в статье [Azure​RM.​Key​Vault](https://docs.microsoft.com/en-us/powershell/module/azurerm.keyvault/?view=azurermps-4.2.0).

### <a name="azure-disk-encryption-for-windows"></a>Шифрование дисков Azure для Windows

[Шифрование дисков Azure для виртуальных машин IaaS под управлением Windows и Linux](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption) позволяет защитить неактивные персональные данные на виртуальных машинах Azure. Эта возможность интегрируется с Azure Key Vault. Служба шифрования дисков Azure шифрует диски ОС и диски данных на основе технологии [BitLocker](https://technet.microsoft.com/library/cc732774.aspx) в Windows и [DM-Crypt](https://en.wikipedia.org/wiki/Dm-crypt) в Linux. Шифрование дисков Azure поддерживается в Windows Server 2008 R2, Windows Server 2012, Windows Server 2012 R2, Windows Server 2016, а также клиентах Windows 8 и Windows 10.

#### <a name="how-do-i-use-azure-disk-encryption-to-protect-personal-data"></a>Защита персональных данных с помощью шифрования дисков Azure

Чтобы использовать шифрование дисков Azure, необходима подписка для учетной записи Azure. Чтобы включить шифрование дисков Azure для виртуальных машин Windows и Linux, выполните следующее:

1. Чтобы включить шифрование дисков и указать соответствующую конфигурацию, используйте шаблон Resource Manager, PowerShell или интерфейс командной строки (CLI). 

2. Предоставьте доступ к платформе Azure для чтения материала шифрования из вашего хранилища ключей.

3. Укажите идентификатор приложения Azure Active Directory (AAD) для записи ключевого материала шифрования в хранилище ключей.

Azure обновит виртуальную машину и конфигурацию хранилища ключей, а затем настроит зашифрованную виртуальную машину.

При реализации поддержки шифрования дисков Azure в хранилище ключей вы можете добавить ключ шифрования ключей (KEK), чтобы обеспечить дополнительную безопасность и поддержку резервного копирования зашифрованных виртуальных машин.

![](media/protect-personal-data-at-rest/create-key.png)

Подробные инструкции для определенных сценариев развертывания и взаимодействия с пользователем см. в статье [Дисковое шифрование Azure для виртуальных машин IaaS под управлением Windows и Linux](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption).

### <a name="azure-storage-service-encryption"></a>Шифрование службы хранилища Azure

[Шифрование службы хранилища Azure (SSE) для неактивных данных](https://docs.microsoft.com/en-us/azure/storage/storage-service-encryption) помогает защитить данные в соответствии с предложениями по безопасности и соответствию вашей организации. Служба хранилища Azure автоматически шифрует данные с помощью 256-битного шифрования AES перед сохранением в хранилище и расшифровывает их перед извлечением. Эта служба доступна для файлов и больших двоичных объектов Azure.

#### <a name="how-do-i-use-storage-service-encryption-to-protect-personal-data"></a>Защита персональных данных с помощью шифрования службы хранения

Чтобы включить шифрование службы хранения, выполните следующие действия:

1. Войдите на портал Azure.

2. Выберите учетную запись хранения.

3. В колонке "Параметры" в разделе "Служба BLOB-объектов" выберите "Шифрование".

4. В разделе "Служба файлов" выберите "Шифрование".

После выбора параметра шифрования можно включить или отключить шифрование службы хранилища.

![](media/protect-personal-data-at-rest/storage-service-encryption.png)

Новые данные будут зашифрованы. Данные в имеющихся файлах этой учетной записи хранения останутся незашифрованными.

После включения шифрования скопируйте данные в учетную запись хранения с помощью одного из следующих методов:

1. Скопируйте большие двоичные объекты или файлы с помощью [служебной программы командной строки AzCopy](https://docs.microsoft.com/en-us/azure/storage/storage-use-azcopy).

2. [Подключите общую папку с помощью SMB](https://docs.microsoft.com/en-us/azure/storage/storage-file-how-to-use-files-windows), чтобы иметь возможность копировать файлы, используя такие служебные программы, как Robocopy.

3. Скопируйте данные большого двоичного объекта или файла в и из хранилища BLOB-объектов или между учетными записями хранения с помощью [клиентских библиотек хранилища, таких как .NET](https://docs.microsoft.com/en-us/azure/storage/storage-dotnet-how-to-use-blobs).

4.  Отправьте большие двоичные объекты в учетную запись хранения с включенным шифрованием с помощью [обозревателя хранилищ](https://docs.microsoft.com/en-us/azure/storage/storage-explorers).

### <a name="transparent-data-encryption"></a>Прозрачное шифрование данных

Прозрачное шифрование данных (TDE) — это функция в SQL Azure, позволяющая шифровать данные на уровне базы данных и сервера. Эта функция теперь включена по умолчанию во всех новых базах данных. TDE выполняет шифрование операций ввода-вывода в режиме реального времени, а также расшифровку файлов данных и журналов.

#### <a name="how-do-i-use-tde-to-protect-personal-data"></a>Защита персональных данных с помощью TDE

Вы можете настроить TDE через портал Azure с помощью REST API или PowerShell. Чтобы включить TDE в имеющейся базе данных с помощью портала Azure, выполните следующие действия:

1. Перейдите на портал Azure (<https://portal.azure.com>). Войдите в свою учетную запись администратора или участника Azure.

2. В области слева щелкните "Обзор", а затем выберите "Базы данных SQL".

3. В колонке "Базы данных SQL" щелкните пользовательскую базу данных.

4. В колонке баз данных щелкните "Все параметры".

5. В колонке "Параметры" щелкните "Прозрачное шифрование данных", чтобы открыть колонку "Прозрачное шифрование данных".

6. В колонке "Прозрачное шифрование данных" установите переключатель "Шифрование данных" в положение "Вкл." и щелкните "Сохранить" (в верхней части страницы), чтобы применить параметры. Состояние шифрования приблизительно отображает ход прозрачного шифрования данных.

![Включение шифрования данных](media/protect-personal-data-at-rest/turn-data-encryption-on.png)

Инструкции по включению TDE и сведения о расшифровке баз данных, защищенных на основе прозрачного шифрования данных, см. в статье [Transparent Data Encryption for Azure SQL Database and Data Warehouse](https://docs.microsoft.com/en-us/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database) (Прозрачное шифрование данных с помощью базы данных SQL Azure и хранилища данных).

## <a name="summary"></a>Сводка

Компания может реализовать шифрование персональных данных, хранящихся в облаке Azure. Она может защитить целые тома с помощью шифрования дисков Azure. На этих томах могут храниться как файлы операционной системы, так и файлы данных, содержащие персональные и другие конфиденциальные данные. Шифрование службы хранилища Azure позволяет защитить персональные данные, хранящиеся в больших двоичных объектах и файлах. К персональным данным, хранящимся в базе данных SQL Azure, можно применить прозрачное шифрование, которое обеспечивает защиту от несанкционированного доступа.

Чтобы защитить ключи, которые используются при шифровании данных в Azure, компания может использовать Azure Key Vault. Это упрощает процесс управления ключами и позволяет компании поддерживать контроль над ключами, которые обеспечивают доступ к персональным данным и их шифрование.

## <a name="next-steps"></a>Дальнейшие действия

- [Руководство по устранению неполадок шифрования дисков Azure](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption-tsg)

- [Шифрование виртуальной машины Azure](https://docs.microsoft.com/en-us/azure/security-center/security-center-disk-encryption?toc=%2fazure%2fsecurity%2ftoc.json)

- [Шифрование данных в Azure Data Lake Store](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-encryption)

- [Шифрование неактивных данных базы данных в Azure Cosmos DB](https://docs.microsoft.com/en-us/azure/cosmos-db/database-encryption-at-rest)
