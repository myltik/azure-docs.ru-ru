---
title: Защита приложений PaaS с помощью службы хранилища Azure | Документация Майкрософт
description: " Ознакомьтесь с рекомендациями по безопасности службы хранилища Azure, чтобы защитить свои веб-приложения и мобильные приложения PaaS. "
services: security
documentationcenter: na
author: TomShinder
manager: MBaldwin
editor: ''
ms.assetid: ''
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/21/2017
ms.author: TomShinder
ms.openlocfilehash: 9d4251e61b60d8da6ce5072ba66aeaedb60cb33a
ms.sourcegitcommit: 9cdd83256b82e664bd36991d78f87ea1e56827cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="securing-paas-web-and-mobile-applications-using-azure-storage"></a>Защита мобильных приложений и веб-приложений PaaS с помощью службы хранилища Azure
В этой статье рассматривается набор рекомендаций по безопасности службы хранилища Azure, предназначенных для защиты веб-приложений и мобильных приложений PaaS. Эти рекомендации основаны на нашем опыте, полученном в процессе использования Azure AD, и на отзывах других пользователей.

[Руководство по безопасности службы хранилища Azure](../storage/common/storage-security-guide.md) является отличным источником сведений о службе хранилища Azure и ее безопасности.  В этой статье более подробно рассматриваются некоторые основные понятия, содержащиеся в руководстве по безопасности, а также представлены ссылки на руководство по безопасности и другие источники.

## <a name="azure-storage"></a>Хранилище Azure
Azure позволяет развертывать и использовать хранилище способами, которых сложно достичь в локальной среде. Благодаря службе хранилища Azure можно относительно легко достичь высокого уровня масштабируемости и доступности. Служба хранилища Azure является не только основой для виртуальных машин Azure под управлением Windows и Linux, она также поддерживает большие распределенные приложения.

Службы хранилища Azure включают хранилище BLOB-объектов, а также хранилища таблиц, очередей и файлов. Дополнительные сведения см. в статье [Introduction to Microsoft Azure Storage](../storage/storage-introduction.md) (Введение в службу хранилища Microsoft Azure).

## <a name="best-practices"></a>Рекомендации
В этой статье рассматриваются следующие рекомендации:

- Защита доступа:
   - Подписанный URL-адрес (SAS)
   - управляемые диски;
   - Управление доступа на основе ролей

- Шифрование хранилища:
   - шифрование на стороне клиента для важных данных;
   - шифрование дисков Azure для виртуальных машин;
   - Шифрование службы хранения

## <a name="access-protection"></a>Защита доступа
### <a name="use-shared-access-signature-instead-of-a-storage-account-key"></a>Использование подписанного URL-адреса вместо ключа учетной записи хранения

В решении IaaS, обычно использующем виртуальные машины Windows Server или Linux, файлы защищены от угрозы подмены данных и разглашения сведений при помощи механизмов контроля доступа. В Windows используются [списки управления доступом (ACL)](../virtual-network/virtual-networks-acl.md), а в Linux следует использовать [chmod](https://en.wikipedia.org/wiki/Chmod). По сути, это именно то, что вы сделали бы, если бы в данный момент вам потребовалось защитить файлы на сервере в собственном центре обработки данных.

PaaS действует иначе. Одним из наиболее распространенных способов хранения файлов в Microsoft Azure является использование [хранилища BLOB-объектов Azure](../storage/storage-dotnet-how-to-use-blobs.md). Хранилище BLOB-объектов отличается от других хранилищ файлов тем, что оно оснащено средствами ввода-вывода файлов и методами защиты, которые предоставляются вместе с ними.

Управление доступом является критически важным. Чтобы помочь вам контролировать доступ к службе хранилища Azure, при создании [учетной записи хранения](../storage/common/storage-create-storage-account.md) система создаст два 512-разрядных ключа доступа (SAK). Уровень избыточности ключа позволяет избежать прерывания службы во время процедуры смены ключей.

Ключи доступа к хранилищу являются секретами с высоким приоритетом и должны быть доступны только тем, кто отвечает за управление доступом к хранилищу. Если посторонние лица получат доступ к этим ключам, они смогут полностью контролировать хранилище, а также заменять, удалять или добавлять содержащиеся в нем файлы. Сюда входит вредоносное ПО и другие типы содержимого, которые могут потенциально поставить под угрозу вашу организацию или ваших клиентов.

Вам по-прежнему потребуется способ предоставления доступа к объектам в хранилище. Чтобы обеспечить более точные условия доступа, можно воспользоваться преимуществами [подписанного URL-адреса](../storage/common/storage-dotnet-shared-access-signature-part-1.md) (SAS). SAS позволяет обмениваться конкретными объектами в хранилище в течение заранее определенного интервала времени с конкретными разрешениями. Подписанный URL-адрес позволяет определить следующее:

- Период действия SAS, включая время начала и окончания срока действия.
- Разрешения, предоставляемые с помощью SAS. Например, SAS для большого двоичного объекта может предоставить разрешения на чтение и запись для него, но не разрешение на удаление.
- Дополнительный IP-адрес или диапазон IP-адресов, по которым служба хранилища Azure будет принимать SAS. Например, можно указать диапазон IP-адресов, принадлежащих организации. Таким образом обеспечивается еще одна мера безопасности для SAS.
- Протокол, по которому служба хранилища Azure будет принимать SAS. С помощью этого необязательного параметра можно ограничить доступ к клиентам, использующим протокол HTTPS.

SAS позволяет совместно использовать содержимое таким образом, чтобы предоставить к нему доступ, не отдавая свои ключи учетной записи хранения. Постоянное использование SAS в приложениях — это безопасный способ предоставления общего доступа к ресурсам хранилища без ущерба для ключей учетной записи хранения.

Дополнительные сведения см. в статье [Использование подписанных URL-адресов (SAS)](../storage/common/storage-dotnet-shared-access-signature-part-1.md). Дополнительные сведения о потенциальных рисках и рекомендации для снижения этих рисков см. в разделе [Рекомендации по использованию SAS](../storage/common/storage-dotnet-shared-access-signature-part-1.md).

### <a name="use-managed-disks-for-vms"></a>Использование управляемых дисков для виртуальных машин

При выборе [управляемых дисков Azure](../storage/storage-managed-disks-overview.md) управлять учетными записями хранения, используемыми для дисков виртуальной машины, будет Azure. Вам нужно всего лишь выбрать тип диска (уровень "Премиум" или "Стандартный") и его размер. Служба хранилища Azure сделает все остальное. Вам не нужно беспокоиться об ограничениях масштабируемости, которые в противном случае могли бы потребоваться для нескольких учетных записей.

Дополнительные сведения см. в статье [Frequently asked questions about Azure IaaS VM disks and managed and unmanaged premium disks](../storage/storage-faq-for-disks.md) (Часто задаваемые вопросы о дисках виртуальных машин Azure IaaS, а также об управляемых и неуправляемых дисках уровня "Премиум").

### <a name="use-role-based-access-control"></a>Использование контроля доступа на основе ролей

Ранее мы рассмотрели предоставление другим клиентам ограниченного доступа SAS к объектам в вашей учетной записи хранения без предоставления ключа вашей учетной записи. Иногда риски для вашей учетной записи хранения, связанные с конкретной операцией, перевешивают преимущества подписи общего доступа. Иногда проще организовать управление доступом другим образом,

например за счет [управления доступом на основе ролей Azure](../role-based-access-control/overview.md) (RBAC). Используя RBAC, вы сосредотачиваетесь на предоставлении сотрудникам именно тех разрешений, в которых они нуждаются по таким принципам безопасности, как выполнение должностных обязанностей и минимальные привилегии. Слишком большое число разрешений делает учетную запись уязвимой для злоумышленников. Недостаточное число разрешений мешает эффективной работе сотрудников. RBAC помогает решить эту задачу, обеспечивая точное управление доступом для Azure. Это крайне важно для организаций, которые планируют применять политики безопасности для доступа к данным.

Вы можете назначать пользователям привилегии с помощью встроенных ролей RBAC в Azure. Для облачных операторов, которым нужно управлять учетными записями хранения, мы рекомендуем роль "Участник учетной записи хранения", а для управления классическими учетными записями хранения — "Участник классической учетной записи хранения". Облачным операторам, которым нужно управлять виртуальными машинами, но не виртуальными сетями и учетными записями хранения, к каким они подключены, мы предлагаем назначать роль "Участник виртуальной машины".

Если организация не применяет для управления доступом к данным такие возможности, как RBAC, пользователям будет предоставлено больше полномочий, чем необходимо для выполнения назначенных им задач. Это может привести к компрометации данных, так как пользователи смогут получить доступ к таким данным, которые не должны быть им доступны.

Дополнительные сведения о RBAC:

- [Управление доступом на основе ролей в Azure](../role-based-access-control/role-assignments-portal.md)
- [Встроенные роли управления доступом на основе ролей в Azure](../role-based-access-control/built-in-roles.md)
- [Руководство по безопасности службы хранилища Azure](../storage/common/storage-security-guide.md) предоставляет сведения о том, как защитить свою учетную запись хранилища с помощью RBAC.

## <a name="storage-encryption"></a>Шифрование хранилища
### <a name="use-client-side-encryption-for-high-value-data"></a>Использование шифрования на стороне клиента для важных данных

Шифрование на стороне клиента позволяет программно шифровать передаваемые данные до отправки в службу хранилища Azure и расшифровывать их при извлечении из хранилища.  Таким образом обеспечивается шифрование передаваемых и неактивных данных.  Шифрование на стороне клиента является наиболее безопасным методом шифрования данных, который, однако, требует внесения программных изменений в приложение и реализации процессов управления ключами.

Шифрование на стороне клиента также позволяет обеспечить исключительный контроль над ключами шифрования.  Вы можете создавать собственные ключи шифрования и управлять ими.  Шифрование на стороне клиента использует конвертный метод, когда клиентская библиотека службы хранилища Azure создает ключ шифрования содержимого (CEK), который затем зашифровывается с помощью ключа шифрования ключей (KEK). Ключ шифрования ключей определяется идентификатором ключа и может быть парой асимметричных ключей или симметричным ключом. Вы можете управлять им локально или хранить его в [хранилище ключей Azure](../key-vault/key-vault-whatis.md).

Шифрование на стороне клиента встроено в библиотеки хранилищ Java и .NET.  Дополнительные сведения о шифровании данных в клиентских приложениях и о создании собственных ключей шифрования и управлении ими см. в статье [Шифрование на стороне клиента для службы хранилища Microsoft Azure](../storage/storage-client-side-encryption.md).

### <a name="azure-disk-encryption-for-vms"></a>Шифрование дисков Azure для виртуальных машин
Шифрование дисков Azure — это возможность, которая помогает зашифровать диски виртуальных машин IaaS под управлением Windows и Linux. Для этого в Azure используются стандартные для отрасли функции (BitLocker для Windows и DM-Crypt для Linux), которые обеспечивают шифрование томов системных дисков и дисков данных. Шифрование дисков Azure интегрировано в Azure Key Vault, что позволяет управлять секретами и ключами шифрования дисков в подписке Key Vault и контролировать их. Данное решение обеспечивает шифрование всех неактивных данных на дисках виртуальной машины в службе хранилища Azure.

Ознакомьтесь со статьей [Шифрование дисков Azure для виртуальных машин IaaS под управлением Windows и Linux](azure-security-disk-encryption.md).

### <a name="storage-service-encryption"></a>Шифрование службы хранения
Когда [шифрование службы хранения](../storage/storage-service-encryption.md) для хранилища файлов включено, данные шифруются автоматически с использованием шифрования AES-256. Корпорация Майкрософт полностью обеспечивает шифрование, расшифровку и управление ключами. Эта функция доступна для типов избыточности LRS и GRS.

## <a name="next-steps"></a>Дополнительная информация
В этой статье представлен набор рекомендаций по безопасности службы хранилища Azure, предназначенных для защиты веб-приложений и мобильных приложений PaaS. Дополнительные сведения о безопасности развернутых служб PaaS см. в следующих статьях:

- [Защита развернутых приложений PaaS](security-paas-deployments.md)
- [Защита мобильных приложений и веб-приложений PaaS с помощью служб приложений Azure](security-paas-applications-using-app-services.md)
- [Защита баз данных PaaS в Azure](security-paas-applications-using-sql.md)
