---
title: Рекомендации по безопасности для рабочих нагрузок IaaS в Azure | Документация Майкрософт
description: " Перенос рабочих нагрузок в Azure IaaS позволяет повторно оценить структуру "
services: security
documentationcenter: na
author: barclayn
manager: MBaldwin
editor: TomSh
ms.assetid: 02c5b7d2-a77f-4e7f-9a1e-40247c57e7e2
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/26/2018
ms.author: barclayn
ms.openlocfilehash: 1a6ff01274c4a47730ffe45275aed9d122994260
ms.sourcegitcommit: b6319f1a87d9316122f96769aab0d92b46a6879a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/20/2018
ms.locfileid: "34366279"
---
# <a name="security-best-practices-for-iaas-workloads-in-azure"></a>Рекомендации по безопасности для рабочих нагрузок IaaS в Azure

Задумываясь о перемещении рабочих нагрузок в инфраструктуру как услугу (IaaS) Azure, вы, вероятно, поняли, что уже сталкивались с некоторыми рекомендациями. Возможно, вы уже создавали защиту виртуальных сред. Переместившись в Azure IaaS, вы сможете применить навыки для защиты виртуальных сред и использовать новые варианты защиты своих ресурсов.

Начнем с того, что при переносе локальных ресурсов в Azure не стоит ожидать, что они останутся прежними. Новые задачи и возможности позволят совершенно иначе взглянуть на существующую структуру, инструменты и процессы.

Ваш уровень ответственности за безопасность основан на типе облачной службы. На рисунке ниже показано соотношение ответственности корпорации Майкрософт и клиента.


![Области ответственности](./media/azure-security-iaas/sec-cloudstack-new.png)


Мы рассмотрим некоторые варианты, доступные в Azure, которые помогут обеспечить соответствие корпоративным требованиям к безопасности. Имейте в виду, что для различных типов рабочих нагрузок требования к безопасности могут различаться. Ни одна из этих рекомендаций сама по себе не поможет вам обеспечить защиту своих систем. Как и во всем, что касается безопасности, необходимо выбрать соответствующие варианты и определить, как решения могут дополнить друг друга, заполнив имеющиеся в них пробелы.

## <a name="use-privileged-access-workstations"></a>Использование рабочих станций с привилегированным доступом

Организации часто подвергаются кибератакам, так как администраторы работают в учетных записях с повышенными правами. Обычно это делается не намеренно, а потому что этому способствуют существующие конфигурации и процессы. На уровне понятий большинство этих пользователей осознают риски при работе с такими учетными записями, но по-прежнему делают то, что является небезопасным.

Проверка электронной почты и просмотр страниц в Интернете кажутся достаточно безобидными занятиями. Но они могут представлять опасность для учетных записей с повышенными привилегиями, конфиденциальность которых может быть нарушена злоумышленниками. Просмотр страниц, отправку специально созданных сообщений по электронной почте или другие действия можно использовать для получения доступа к вашей организации. Поэтому настоятельно рекомендуем выполнять все задачи администрирования Azure на защищенных рабочих станциях (SAW). Их использование снижает вероятность случайного нарушения безопасности.

Рабочие станции с привилегированным доступом предоставляют выделенную операционную систему для выполнения конфиденциальных задач, защищенных от атак из Интернета и векторов угроз. Отделение этих конфиденциальных задач и учетных записей от ежедневно используемых рабочих станций и устройств обеспечивает надежную защиту. Такой подход ограничивает воздействие фишинговых атак, различных атак олицетворения и атак с хищением учетных данных, а также уязвимость приложений и операционных систем (регистрация нажатия клавиш, атаки Pass-the-Hash и Pass-the-Ticket).

Метод с использованием рабочих станций с привилегированным доступом — это уже известный, но более широкий подход, который заключается в том, чтобы использовать отдельную учетную запись администратора. Учетная запись администратора отличается от учетной записи обычного пользователя. При этом подходе для работы с конфиденциальными учетными записями предоставляется надежная рабочая станция.

Дополнительные сведения, а также руководство по реализации, см. в статье [Рабочие станции привилегированный доступ](https://technet.microsoft.com/windows-server-docs/security/securing-privileged-access/privileged-access-workstations).

## <a name="use-multi-factor-authentication"></a>Использование Многофакторной идентификации

В прошлом периметр сети использовался для управления доступом к корпоративным данным. В мире, где главенствующую роль играют работа в облаке и мобильность, идентификация является плоскостью управления. Она позволяет управлять доступом к службам IaaS с любого устройства, а также получить четкое представление о том, где и как используются данные. Защита цифрового удостоверения пользователей Azure является краеугольным камнем защиты подписок от хищения удостоверений и других кибератак.

Одна из самых действенных мер защиты учетной записи — включение двухфакторной аутентификации. Двухфакторная аутентификация — это способ аутентификации, когда используется не только пароль. Она помогает снизить риск доступа злоумышленника, получившего пароль другого пользователя.

[Многофакторная идентификация Azure](../active-directory/authentication/multi-factor-authentication.md) помогает защитить доступ к данным и приложениям, не усложняя при этом процесс входа пользователя в систему. Служба обеспечивает строгую аутентификацию с помощью простых способов проверки — телефонного звонка, текстового сообщения или уведомления от мобильного приложения. Пользователи могут выбрать наиболее удобный для них способ.

Проще всего использовать многофакторную проверку подлинности через мобильное приложение Microsoft Authenticator, которое доступно на мобильных устройствах под управлением Windows, IOS и Android. В последнем выпуске Windows 10 и локальном каталоге Active Directory, интегрированном с Azure Active Directory (Azure AD), [Windows Hello для бизнеса](../active-directory/active-directory-azureadjoin-passport-deployment.md) упрощает единый вход в ресурсы Azure. В этом случае устройства с Windows 10 будут использоваться в качестве второго фактора при аутентификации.

Для учетных записей, управляющих подпиской Azure, а также для учетных записей, используемых для входа на виртуальные машины, Многофакторная идентификация обеспечивает более высокий уровень безопасности, чем защита одним паролем. Такие же результаты позволяют получить и другие виды двухфакторной аутентификации, но для их внедрения потребуется гораздо больше усилий, если они еще не развернуты в рабочей среде.

На снимке экрана ниже показаны некоторые из параметров, доступных для Многофакторной идентификации Azure.

![Параметры Многофакторной идентификации](./media/azure-security-iaas/mfa-options.png)

## <a name="limit-and-constrain-administrative-access"></a>Ограничения административного доступа

Крайне важно обеспечить безопасность учетных записей, которые могут управлять подпиской Azure. Компрометация любой из них сводит на нет позитивные результаты действий по обеспечению конфиденциальности и целостности данных. Недавний случай с [Эдвардом Сноуденом (Edward Snowden)](https://en.wikipedia.org/wiki/Edward_Snowden) стал свидетельством того, что внутренние атаки представляют колоссальную угрозу для всей системы безопасности любой организации.

Оцените пользователей для предоставления им прав администратора по критериям, представленным ниже (или схожим критериям).

- Выполнение задач, требующих прав администратора.
- Периодичность выполнения таких задач.
- Причины, по которым эти задачи не могут быть выполнены другим администратором от имени указанного сотрудника.

Документирование остальных известных альтернативных подходов к предоставлению прав и объяснение причины, почему каждый из них неприемлем.

Используя JIT-администрирование, вы можете удалять ненужные учетные записи с повышенными правами, если эти права не нужны. Повышенные права, позволяющие администраторам выполнять свою работу, назначаются учетным записям на ограниченное время. После окончания работы или завершения задания эти права удаляются.

Используйте [управление привилегированными пользователями](../active-directory/active-directory-privileged-identity-management-configure.md) (PIM), чтобы выполнять мониторинг и контроль доступа в организации, а также управлять им. PIM позволяет получить сведения о том, чем занимаются пользователи в организации, и обеспечивает JIT-администрирование в Azure AD, введя понятие разрешенного администратора. Это пользователи, учетным записям которых могут предоставить права администратора. Такие пользователи могут пройти активацию и получить права администратора на ограниченное время.


## <a name="use-devtest-labs"></a>Использование DevTest Labs

Используя Azure для лабораторий и сред разработки, организации могут получить гибкость в тестировании и разработке, устранив задержки в процессе закупки оборудования. К сожалению, незнание основ работы со средой Azure или желание ускорить ее внедрение может привести к тому, что администратор предоставит слишком много разрешений при назначении прав. Такие действия могут ненамеренно подвергнуть организацию риску внутренних атак. Некоторым пользователям может быть предоставлен больший уровень доступа, чем следовало бы.

Служба [Azure DevTest Labs](../devtest-lab/devtest-lab-overview.md) использует [управление доступом на основе ролей Azure (RBAC)](../role-based-access-control/overview.md). Используя RBAC, вы можете разделить обязанности в группе на роли, предоставляющие уровень доступа, необходимый пользователям для выполнения своих задач. RBAC поставляется с предварительно определенными ролями (владелец, пользователь лаборатории и участник). Вы даже можете использовать их для назначения прав внешним партнерам, что значительно упрощает совместную работу.

Так как DevTest Labs использует RBAC, вы можете создавать дополнительные [пользовательские роли](../lab-services/devtest-lab-grant-user-permissions-to-specific-lab-policies.md). Служба DevTest Labs упрощает не только управление разрешениями, но и процесс подготовки среды. Она также позволяет устранить другие типичные сложности, с которыми сталкиваются команды, работающие со средами разработки и тестирования. Она требует некоторой подготовки, но в долгосрочной перспективе облегчит работу вашим сотрудникам.

Ниже представлены некоторые из основных возможностей, предоставляемых Azure DevTest Labs.

- Административный контроль над параметрами, доступными пользователям. Администратор может централизованно управлять допустимым размером, максимальным числом и временем запуска и завершения работы виртуальных машин.
- Автоматизация создания лабораторной среды.
- Отслеживание расходов.
- Упрощенное распространение виртуальных машин для временной совместной работы.
- Возможность самообслуживания, благодаря которой пользователи могут подготовить свои лаборатории с помощью шаблонов.
- Управление потребляемыми ресурсами и их ограничение.

![Использование DevTest Labs для создания лаборатории](./media/azure-security-iaas/devtestlabs.png)

За использование DevTest Labs дополнительная плата не взимается. Возможности создания лабораторий, политик, шаблонов и артефактов предоставляются бесплатно. Плата взимается только за ресурсы Azure, используемые в лабораториях, например виртуальные машины, учетные записи хранения и виртуальные сети.



## <a name="control-and-limit-endpoint-access"></a>Управление доступом к конечным точкам и его ограничение

Размещая лаборатории или рабочие системы в Azure, следует обеспечить их доступность в Интернете. По умолчанию в новой виртуальной машине Windows порт RDP доступен из Интернета, а в виртуальной машине Linux открыт порт SSH. Ограничение доступа к открытым точкам требуется, чтобы свести к минимуму риск несанкционированного доступа.

В Azure предусмотрены технологии, которые позволяют ограничить доступ к этим административным конечным точкам. В Azure можно использовать [группы безопасности сети (NSG)](../virtual-network/security-overview.md). При развертывании группы безопасности сети с использованием Resource Manager доступ из всех сетей ограничивают только конечными точками управления (RDP или SSH). Если вы планируете использовать группы безопасности сети, применяйте списки управления доступом маршрутизатора. Они позволяют надежно контролировать взаимодействие между различными сегментами сетей Azure. Это похоже на создание сетей в сетях периметра или в других изолированных сетях. Они не проверяют трафик, но помогут сегментировать сети.


В Azure из локальной сети вы можете настроить [VPN типа "сеть — сеть"](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md). VPN типа "сеть — сеть" расширит вашу локальную сеть до облака. Так вы получаете еще одну возможность использовать группы безопасности сети, так как можно изменить группы безопасности сети таким образом, чтобы они разрешали доступ только из локальной сети, а для администрирования требовалось бы сначала подключиться к сети Azure через VPN.

Полезно использовать VPN типа "сеть — сеть" при размещении рабочих систем, тесно интегрированных с локальными ресурсами в Azure.

Кроме того, вы можете использовать [подключение типа "точка — сеть"](../vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps.md) при управлении системами, которым не требуется доступ к локальным ресурсам. Эти системы могут быть изолированы в собственной виртуальной сети Azure. Администраторы могут подключаться по VPN к размещенной среде Azure с рабочей станции администратора.

>[!NOTE]
>Используя VPN, вы можете настроить списки управления доступом в группах безопасности сети таким образом, чтобы они запрещали доступ к конечным точкам управления из Интернета.

Стоит также обратить внимание на развертывание [шлюза удаленных рабочих столов](../active-directory/authentication/howto-mfaserver-nps-rdg.md). Его можно использовать для безопасного подключения к серверам удаленных рабочих столов по протоколу HTTPS и более точного контроля этих подключений.

Ниже представлены возможности, для добавления которых вам может быть предоставлен доступ.

- Возможности ограничения подключений по запросам от конкретных систем для администратора.
- Проверка подлинности с помощью смарт-карты или Многофакторной идентификации Azure.
- Управление возможностью подключения системы через шлюз.
- Контроль перенаправления устройств и дисков.

## <a name="use-a-key-management-solution"></a>Использование решения для управления ключами

Безопасное управление ключами очень важно для защиты данных в облаке. С помощью [хранилища ключей Azure](../key-vault/key-vault-whatis.md) можно безопасно хранить ключи шифрования и небольшие секретные данные, например пароли, в аппаратных модулях безопасности (HSM). Чтобы обеспечить более высокий уровень защиты, ключи можно импортировать или создать в аппаратных модулях безопасности.

Корпорация Майкрософт будет обрабатывать ключи в аппаратных модулях безопасности (оборудование и встроенное ПО), сертифицированных по стандарту FIPS 140-2 уровня 2. Вы можете выполнять мониторинг и аудит ключей с помощью журналов Azure, которые направляются в Azure или систему управления событиями и сведениями о безопасности (SIEM) с целью дополнительного анализа и обнаружения угроз.

Хранилища ключей может создавать и использовать любой пользователь, у которого есть подписка Azure. Хотя Key Vault предоставляет преимущества для разработчиков и администраторов безопасности, администратор организации, отвечающий за управление службами Azure, может также реализовать хранилища и управлять ими.


## <a name="encrypt-virtual-disks-and-disk-storage"></a>Шифрование виртуальных дисков и хранилища дисков

[Шифрование дисков Azure](https://gallery.technet.microsoft.com/Azure-Disk-Encryption-for-a0018eb0) устраняет угрозу кражи или нарушения безопасности данных при несанкционированном доступе за счет перемещения диска. Чтобы обойти другие средства обеспечения безопасности, диск можно подключить к другой системе. Для шифрования дисков операционной системы и данных технология шифрования дисков использует [BitLocker](https://technet.microsoft.com/library/hh831713) в Windows и DM-Crypt в Linux. Шифрование дисков Azure интегрируется с Key Vault для контроля ключей шифрования и управления ими. Эта функция доступна для стандартных виртуальных машин, а также виртуальных машин с хранилищем класса Premium.

Дополнительные сведения см. в статье [Дисковое шифрование Azure для виртуальных машин IaaS под управлением Windows и Linux](azure-security-disk-encryption.md).

[Шифрование службы хранилища Azure](../storage/common/storage-service-encryption.md) обеспечивает защиту неактивных данных. Эта функция включена на уровне учетной записи хранения. Данные шифруются при записи в центры обработки данных и автоматически расшифровываются при получении доступа к ним. Оно поддерживает следующие сценарии:

- шифрование блочных, страничных BLOB-объектов, а также добавочных больших двоичных объектов;
- шифрование архивных виртуальных жестких дисков и шаблонов, переданных в Azure из локальной среды;
- шифрование базовой ОС и дисков данных для виртуальных машин IaaS, созданных с помощью виртуальных жестких дисков.

Прежде чем продолжить с шифрованием службы хранилища Azure, обратите внимание на следующие два существенных ограничения.

- Эта возможность недоступна в классических учетных записях хранения.
- Шифруются только те данные, которые записаны после включения шифрования.

## <a name="use-a-centralized-security-management-system"></a>Использование централизованной системы управления безопасностью

На серверах должны отслеживаться исправления, конфигурации, события и действия, которые могут представлять угрозу безопасности. Для устранения этих угроз можно воспользоваться [центром безопасности](https://azure.microsoft.com/services/security-center/) и [модулем обеспечения безопасности и соответствия требованиям Operations Management Suite](https://azure.microsoft.com/services/security-center/). Оба эти варианта позволяют не только настроить операционную систему. Они также обеспечивают мониторинг конфигурации базовой инфраструктуры, например конфигурации сети и использования виртуального устройства.

## <a name="manage-operating-systems"></a>Управление операционными системами

В развертывании IaaS вы сами отвечаете за управление развертываемыми системами, а также серверами или рабочими станциями в своей среде. Вы должны самостоятельно устанавливать исправления, усиливать защиту, назначать права и выполнять другие действия, связанные с обслуживанием системы. Для внедрения антивирусных и антивредоносных программ, а также для установки исправлений и архивации в системах, которые тесно интегрированы с локальными ресурсами, нужно использовать те же инструменты и процедуры, что и в локальной среде.

### <a name="harden-systems"></a>Усиление защиты систем
Следует усиливать защиту всех виртуальных машин в IaaS Azure, чтобы доступными были только конечные точки служб, требуемые для установленных приложений. Для виртуальных машин с Windows следуйте рекомендациям, которые публикуются корпорацией Майкрософт в качестве базовых принципов для решения [Security Compliance Manager](https://technet.microsoft.com/solutionaccelerators/cc835245.aspx).

Security Compliance Manager является бесплатным инструментом. Он позволяет быстро настраивать настольные компьютеры, традиционные центры обработки данных, частные и общедоступные облака, а также управлять ими с помощью групповой политики и System Center Configuration Manager.

Инструмент Security Compliance Manager предоставляет готовые к развертыванию политики и пакеты конфигураций DCM, которые проверяются. В основе этих базовых принципов лежат рекомендации [руководства по безопасности корпорации Майкрософт](https://technet.microsoft.com/library/cc184906.aspx) и передовые методики отрасли. Они помогут вам управлять различиями в конфигурациях, обеспечить соответствие требованиям и уменьшить вероятность возникновения угроз безопасности.

Вы можете использовать Security Compliance Manager, чтобы импортировать текущую конфигурацию компьютеров двумя разными методами. Во-первых, вы можете импортировать групповые политики на основе Active Directory. Во-вторых, вы можете импортировать конфигурацию главного эталонного исходного компьютера, используя [инструмент LocalGPO](https://blogs.technet.microsoft.com/secguide/2016/01/21/lgpo-exe-local-group-policy-object-utility-v1-0/) для архивации локальной групповой политики. Затем вы можете импортировать ее в Security Compliance Manager.

Сравните свои стандарты с передовыми методиками отрасли, откорректируйте их и создайте новые политики и пакеты конфигураций DCM. Базовые принципы опубликованы для всех поддерживаемых операционных систем, включая юбилейное обновление Microsoft Windows 10 и Windows Server 2016.


### <a name="install-and-manage-antimalware"></a>Установка антивредоносных программ и управление ими

Для сред, размещенных отдельно от рабочей среды, вы можете использовать расширение антивредоносных программ, чтобы защитить виртуальные машины и облачные службы. Это расширение интегрируется с [центром безопасности Azure](../security-center/security-center-intro.md).


[Антивредоносные программы Майкрософт](azure-security-antimalware.md) обладают такими возможностями, как обеспечение защиты в реальном времени, плановое сканирование, исправление вредоносных действий, обновление подписей, обновление модуля защиты, отправка образцов, сбор событий исключения и [поддержка PowerShell](https://msdn.microsoft.com/library/dn771715.aspx).

![Антивредоносные программы Azure](./media/azure-security-iaas/azantimalware.png)

### <a name="install-the-latest-security-updates"></a>Установка последних обновлений безопасности
Одними из первых рабочих нагрузок, которые клиенты перемещают в Azure, являются лаборатории и внешние системы. Если виртуальные машины, размещенные в Azure, включают приложения или службы, к которым требуется доступ через Интернет, при установке исправлений необходимо соблюдать осторожность. Не ограничивайтесь только исправлениями операционной системы. Неисправленные уязвимости в сторонних приложениях также могут привести к проблемам, которых можно было бы избежать при эффективном управлении исправлениями.

### <a name="deploy-and-test-a-backup-solution"></a>Развертывание и тестирование решения для архивации

Так же как и обновления безопасности, архивацию следует выполнять подобно любым другим операциям. Это касается систем, входящих в рабочую среду, распространяющуюся в облако. В системах тестирования и разработки следует применять стратегии архивации, которые могут предоставить возможности восстановления, аналогичные привычным для пользователей возможностям с учетом опыта работы в локальных средах.

По возможности рабочие нагрузки, перемещенные в Azure, должны интегрироваться с существующими решениями для архивации. Кроме того, для обеспечения соответствия требованиям к архивации можно использовать [службу архивации Azure](../backup/backup-azure-arm-vms.md).


## <a name="monitor"></a>Мониторинг

[Центр безопасности](../security-center/security-center-intro.md) обеспечивает непрерывную оценку состояния безопасности ресурсов Azure, чтобы выявить потенциальные уязвимости. Список рекомендаций помогает выполнить процедуру настройки необходимого средства контроля.

Примеры приведены ниже.

- Подготовка антивредоносных программ для обнаружения и устранения вредоносных программ.
- Настройка групп безопасности сети и правил управления трафиком для виртуальных машин.
- Подготовка брандмауэров веб-приложений для защиты от атак на веб-приложения.
- Развертывание отсутствующих обновлений системы.
- Обращение к конфигурациям операционной системы, не соответствующим рекомендуемым базовым показателям.

На рисунке ниже отображаются некоторые параметры, которые вы можете включить в центре безопасности.

![Политики центра безопасности Azure](./media/azure-security-iaas/security-center-policies.png)

[Operations Management Suite](../operations-management-suite/operations-management-suite-overview.md) — это облачное решение Майкрософт для управления ИТ-средой, которое помогает управлять локальной и облачной инфраструктурой и защищать ее. Так как OMS реализовано в качестве облачной службы, время, затрачиваемое на развертывание, минимально, как и вложения в ресурсы инфраструктуры.

Новые возможности предоставляются автоматически, что обеспечивает экономию затрат на текущее обслуживание и обновление. Operations Management Suite также интегрируется с System Center Operations Manager. OMS предоставляет различные компоненты для более эффективного управления рабочими нагрузками Azure, включая модуль [обеспечения безопасности и соответствия требованиям](../operations-management-suite/oms-security-getting-started.md).

Вы можете использовать инструменты обеспечения безопасности и соответствия требованиям в OMS, чтобы просмотреть сведения о ресурсах. Сведения делятся на четыре основные категории.

- **Домены безопасности**. Позволяют более детально просматривать записи безопасности в динамике по времени, получать доступ к оценке защиты от вредоносных программ, оценке обновлений, сведениям о сетевой безопасности, удостоверениях, доступе и компьютерах с событиями безопасности, а также быстро переходить к панели мониторинга центра безопасности Azure.
- **Важные проблемы**. В этой области можно быстро определить количество текущих проблем и степень их серьезности.
- **Обнаружения (предварительная версия)**. Эта область позволяет определять схемы атак путем визуализации оповещений системы безопасности, связанных с ресурсами.
- **Аналитика угроз**. Эта область позволяет определять схемы атак путем визуализации общего числа серверов с исходящим вредоносным IP-трафиком, типов вредоносных угроз и карты, на которой показано физическое расположение соответствующих IP-адресов.
- **Общие запросы безопасности**. В этой области содержится список самых распространенных запросов безопасности, которые можно использовать для мониторинга среды. Если щелкнуть какой-либо из этих запросов, откроется колонка **Поиск** с результатами для этого запроса.

На снимке экрана ниже представлены сведения, отображаемые OMS.

![Базовые показатели системы безопасности OMS](./media/azure-security-iaas/oms-security-baseline.png)

## <a name="next-steps"></a>Дополнительная информация

* [Блог группы безопасности Azure](https://blogs.msdn.microsoft.com/azuresecurity/)
* [Центр Microsoft Security Response Center](https://technet.microsoft.com/library/dn440717.aspx)
* [Рекомендации и шаблоны для обеспечения безопасности в Azure](security-best-practices-and-patterns.md)
