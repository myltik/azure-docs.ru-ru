---
title: Устранение неполадок, связанных с Microsoft Azure Stack | Документация Майкрософт
description: Устранение неполадок, связанных с Azure Stack.
services: azure-stack
documentationcenter: ''
author: jeffgilb
manager: femila
editor: ''
ms.assetid: a20bea32-3705-45e8-9168-f198cfac51af
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/21/2018
ms.author: jeffgilb
ms.reviewer: unknown
ms.openlocfilehash: b63fdd630647cc970a2d935619b4d3f16b8c0375
ms.sourcegitcommit: d74657d1926467210454f58970c45b2fd3ca088d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2018
ms.locfileid: "30229896"
---
# <a name="microsoft-azure-stack-troubleshooting"></a>Устранение неполадок, связанных с Microsoft Azure Stack

*Область применения: Пакет средств разработки Azure Stack*

В этом документе содержатся общие сведения об устранении неполадок в Azure Stack. 

Так как технический комплект разработки Azure Stack предлагается в качестве оценочной среды, служба поддержки корпорации Майкрософт не предоставляет для него официальную поддержку. Если возникли неописанные проблемы, посетите [форум MSDN Azure Stack](https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack) для получения дополнительной помощи и сведений.  

Рекомендации по устранению неполадок, описанные в этом разделе, сформированы на основе нескольких источников и могут не помочь в решении конкретной проблемы. Примеры кода предоставляются как есть, и ожидаемые результаты не гарантируются. Этот раздел подвержен частым изменениям и обновлениям в связи с улучшениями продукта.

## <a name="deployment"></a>Развертывание
### <a name="deployment-failure"></a>Сбой развертывания
Если во время установки возникнет сбой, можно использовать параметр -rerun для скрипта развертывания, чтобы перезапустить развертывание с этапа, завершившегося ошибкой.  


### <a name="at-the-end-of-the-deployment-the-powershell-session-is-still-open-and-doesnt-show-any-output"></a>В конце развертывания сеанс PowerShell все еще открыт и выходные данные не отображаются
Это поведение, скорее всего, является результатом поведения по умолчанию командного окна PowerShell (если оно выбрано). Развертывание комплекта разработки завершилось успешно, но скрипт был приостановлен при выборе окна. Чтобы узнать, завершилась ли установка, выполните поиск по слову "select" в строке заголовка командного окна.  Нажмите клавишу ESC, чтобы отменить выбор, после чего должно отобразиться сообщение о завершении.

## <a name="virtual-machines"></a>Виртуальные машины
### <a name="default-image-and-gallery-item"></a>Элемент коллекции и образ по умолчанию
Перед развертыванием виртуальных машин в Azure Stack необходимо добавить элемент коллекции и образ Windows Server.

### <a name="after-restarting-my-azure-stack-host-some-vms-may-not-automatically-start"></a>После перезагрузки узла Azure Stack некоторые виртуальные машины могут не запуститься автоматически.
После перезагрузки узла можно заметить, что службы Azure Stack доступны не сразу.  Это обусловлено тем, что [виртуальным машинам инфраструктуры](..\azure-stack\asdk\asdk-architecture.md#virtual-machine-roles) и поставщикам ресурсов Azure Stack нужно немного времени для проверки согласованности, но в конечном итоге они будут запущены автоматически.

Вы также можете заметить, что клиентские виртуальные машины не запускаются автоматически после перезагрузки узла Пакета средств разработки Azure Stack. Это известная проблема. Чтобы перевести их в рабочее состояние, требуется выполнить несколько действий вручную:

1.  На узле Пакета средств разработки Azure Stack запустите **диспетчер отказоустойчивости кластеров** из меню "Пуск".
2.  Выберите кластер **S-Cluster.azurestack.local**.
3.  Выберите **Роли**.
4.  Клиентские виртуальные машины отобразятся в состоянии *Сохранено*. После запуска всех виртуальных машин инфраструктуры щелкните правой кнопкой мыши виртуальные машины клиента и выберите **Запустить**, чтобы возобновить работу виртуальной машины.

### <a name="i-have-deleted-some-virtual-machines-but-still-see-the-vhd-files-on-disk-is-this-behavior-expected"></a>Некоторые виртуальные машины удалены, но на диске по-прежнему отображаются VHD-файлы. Это ожидаемое поведение?
Да, такая реакция является ожидаемой. Это связано со следующими причинами:

* Если вы удалите виртуальную машину, виртуальные жесткие диски останутся. В группе ресурсов диски являются отдельными ресурсами.
* Как только начнется удаление учетной записи хранения, изменения сразу отобразятся в Azure Resource Manager, но содержащиеся в ней диски все еще будут находиться в хранилище до выполнения сборки мусора.

При появлении "потерянных" виртуальных жестких дисков важно знать, являются ли они частью папки удаленной учетной записи хранения. Если учетная запись хранения не была удалена, они по-прежнему находятся в папке.

Вы можете больше узнать о настройке порогового значения периода удержания и освобождении по запросу в статье об [управлении учетными записями хранения](azure-stack-manage-storage-accounts.md).

## <a name="storage"></a>Хранилище
### <a name="storage-reclamation"></a>Освобождение хранилища
Для отображения освобожденной емкости на портале может понадобиться до четырнадцати часов. Освобождение пространства зависит от различных факторов, включая процент использования файлов внутреннего контейнера в хранилище блочных BLOB-объектов. Поэтому, в зависимости от того, какое количество данных удалено, нет гарантии касательно объема пространства, которое можно освободить, запустив сборщик мусора.

## <a name="windows-azure-pack-connector"></a>Соединитель Windows Azure Pack
* Если изменить пароль учетной записи azurestackadmin, то после развертывания Пакета средств разработки Azure Stack невозможно настроить многооблачный режим. Таким образом будет невозможно подключиться к целевой среде Windows Azure Pack.
* После настройки многооблачного режима:
    * Пользователь увидит панель мониторинга только после сброса параметров портала. (На пользовательском портале щелкните значок параметров портала (значок с шестеренкой в правом верхнем углу).) В разделе **Восстановить параметры по умолчанию** щелкните **Применить**.
    * Плитки панели мониторинга могут не отображаться. При возникновении этой проблемы необходимо добавить их вручную.
    * Некоторые плитки могут отображаться некорректно, как только вы их добавите на панель мониторинга. Чтобы устранить эту проблему, обновите браузер.



