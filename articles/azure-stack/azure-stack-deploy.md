---
title: "Необходимые компоненты для развертывания комплекта разработки Azure Stack | Документация Майкрософт"
description: "Просмотрите требования к среде и оборудованию для комплекта разработки Azure Stack (для оператора облачной среды)."
services: azure-stack
documentationcenter: 
author: jeffgilb
manager: femila
editor: 
ms.assetid: 32a21d9b-ee42-417d-8e54-98a7f90f7311
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 11/14/2017
ms.author: jeffgilb
ms.openlocfilehash: 8a0d23e14ef50034d5f9595cf154c3513a09c464
ms.sourcegitcommit: 9a61faf3463003375a53279e3adce241b5700879
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2017
---
# <a name="azure-stack-deployment-prerequisites"></a>Необходимые компоненты для развертывания Azure Stack

*Область применения: комплект разработки Azure Stack*

Перед развертыванием [комплекта разработки](azure-stack-poc.md) Azure Stack убедитесь, что компьютер соответствует приведенным ниже требованиям.


## <a name="hardware"></a>Оборудование
| Компонент | Минимальная | Рекомендуется |
| --- | --- | --- |
| Диски: операционная система |1 диск операционной системы с минимальным объемом 200 ГБ для системного раздела (SSD или жесткий диск). |1 диск операционной системы с минимальным объемом 200 ГБ для системного раздела (SSD или жесткий диск). |
| Диски: общие данные комплекта разработки* |4 диска. Каждый емкостью не меньше 140 ГБ (SSD или жесткие диски). Используются все доступные диски. |4 диска. Каждый емкостью не меньше 250 ГБ (SSD или жесткие диски). Используются все доступные диски. |
| Вычислительные ресурсы: ЦП |Два гнезда: 12 физических ядер (всего). |Два гнезда: 16 физических ядер (всего). |
| Вычислительные ресурсы: память |ОЗУ 96 ГБ. |ОЗУ 128 ГБ. Это минимальный объем для поддержки поставщиков ресурсов PaaS.|
| Вычислительные ресурсы: BIOS |С поддержкой Hyper-V (с поддержкой SLAT). |С поддержкой Hyper-V (с поддержкой SLAT). |
| Сетевые ресурсы: сетевая карта |Для сетевой карты требуется сертификация Windows Server 2012 R2; специальные функции не требуются. |Для сетевой карты требуется сертификация Windows Server 2012 R2; специальные функции не требуются. |
| Информация о сертификации на эмблеме оборудования |[Сертифицировано для Windows Server 2012 R2](http://windowsservercatalog.com/results.aspx?&chtext=&cstext=&csttext=&chbtext=&bCatID=1333&cpID=0&avc=79&ava=0&avq=0&OR=1&PGS=25&ready=0) |[Сертифицировано для Windows Server 2012 R2](http://windowsservercatalog.com/results.aspx?&chtext=&cstext=&csttext=&chbtext=&bCatID=1333&cpID=0&avc=79&ava=0&avq=0&OR=1&PGS=25&ready=0) |

\*Вам потребуется объем памяти больше рекомендуемого, если вы планируете добавлять большое количество [элементов Marketplace](azure-stack-download-azure-marketplace-item.md) из Azure.

**Конфигурация дисков данных:** все диски данных должны быть одного типа (все SAS, все SATA или все NVMe) и уровня производительности. При использовании дисков SAS они должны быть подключены через один путь (поддержка MPIO не обеспечивается).

**Параметры конфигурации адаптера шины**

* Простой адаптер шины (рекомендуется)
* Адаптер шины RAID: адаптер следует настроить в режиме сквозной передачи.
* Адаптер шины RAID: диски следует настроить как один диск с поддержкой массива RAID-0.

**Поддерживаемые сочетания шины и типа носителя**

* Жесткий диск SATA
* Жесткий диск SAS
* Жесткий диск RAID
* SSD RAID (если тип носителя не указан или неизвестен\*)
* SSD SATA + жесткий диск SATA
* SSD SAS + жесткий диск SAS
* NVMe

\* RAID-контроллеры без поддержки режима сквозной передачи не распознают типы носителей. Такие контроллеры пометят жесткий диск и SSD как неопределенный. В этом случае SSD будет использоваться в качестве постоянного хранилища, а не кэша для устройств. Следовательно, можно развернуть комплект разработки на этих SSD.

**Примеры HBA**: LSI 9207-8i, LSI 9300-8i или LSI-9265-8i в сквозном режиме.

Доступны примеры конфигураций OEM.

## <a name="operating-system"></a>операционная система
|  | **Требования** |
| --- | --- |
| **Версия ОС** |Windows Server 2012 R2 или более поздней версии. Версия операционной системы не важна до начала развертывания, так как система главного компьютера будет загружена на виртуальный жесткий диск, устанавливаемый вместе с Azure Stack. Операционная система и все необходимые исправления уже интегрированы в образ. Не используйте ключи для активации экземпляров Windows Server, используемых в комплекте разработки. |

## <a name="deployment-requirements-check-tool"></a>Средство проверки соответствия требованиям к развертыванию
После установки операционной системы вы можете воспользоваться [средством проверки готовности к развертыванию Azure Stack](https://gallery.technet.microsoft.com/Deployment-Checker-for-50e0f51b), чтобы проверить, соответствует ли оборудование всем требованиям.

## <a name="account-requirements"></a>Требования к учетной записи
Как правило, комплект разработки развертывается с подключением к Интернету, чтобы подключиться к Microsoft Azure. В этом случае, чтобы развернуть комплект разработки, необходимо настроить учетную запись Azure Active Directory (Azure AD).

Если в среде нет подключения к Интернету или вы не хотите использовать Azure AD, Azure Stack можно развернуть с помощью служб федерации Active Directory (AD FS). Комплект разработки содержит собственные экземпляры AD FS и доменных служб Active Directory. Если вы используете этот вариант, вам не нужно настраивать учетные записи перед развертыванием.

>[!NOTE]
При развертывании с помощью AD FS необходимо повторно развернуть Azure Stack, чтобы перейти в Azure AD.

### <a name="azure-active-directory-accounts"></a>Учетные записи Azure Active Directory
Чтобы развернуть Azure Stack с учетной записью Azure AD, необходимо подготовить эту учетную запись, прежде чем запустить сценарий PowerShell для развертывания. Для этой учетной записи назначаются права глобального администратора в клиенте Azure AD. Она используется для подготовки и делегирования приложений и субъектов-служб во всех службах Azure Stack, взаимодействующих с Azure Active Directory и API Graph. Для нее также по умолчанию назначается роль владельца подписки поставщика, что можно изменить. Вы можете войти на портал системного администрирования Azure Stack, используя эту учетную запись.

1. Создайте учетную запись Azure AD с правами администратора каталога по крайней мере для одного клиента Azure AD. Если у вас уже есть такая учетная запись, вы можете использовать ее. Или же создайте ее бесплатно, перейдя по ссылке [http://azure.microsoft.com/en-us/pricing/free-trial/](http://azure.microsoft.com/pricing/free-trial/) (ссылка для пользователей из Китая: <http://go.microsoft.com/fwlink/?LinkID=717821>). Если вы планируете позже [зарегистрировать Azure Stack в Azure](azure-stack-register.md), вам также потребуется указать подписку в созданной учетной записи.
   
    Сохраните эти учетные данные, чтобы использовать их на шаге 6 процедуры [развертывания комплекта разработки](azure-stack-run-powershell-script.md#deploy-the-development-kit). Используя эту учетную запись *администратора служб*, можно настраивать облака ресурсов, учетные записи пользователей, планы клиента, квоты и расценки, а также управлять ими. На портале они могут создавать облака веб-сайтов, частные облака виртуальных машин и планы, а также управлять подписками пользователей.
2. [Создайте](azure-stack-add-new-user-aad.md) по крайней мере одну учетную запись, чтобы вы могли войти в комплект разработки в качестве клиента.
   
   | **Учетная запись Azure Active Directory** | **Поддерживается?** |
   | --- | --- |
   | Рабочая или учебная учетная запись с действительной общедоступной подпиской Azure |Да |
   | Учетная запись Майкрософт с действительной общедоступной подпиской Azure |Да |
   | Рабочая или учебная учетная запись с действительной подпиской Azure для организаций Китая |Да |
   | Рабочая или учебная учетная запись с действительной подпиской Azure для государственных организаций США |Да |

## <a name="network"></a>Сеть
### <a name="switch"></a>Switch
Один порт коммутатора для компьютера, где будет установлен комплект разработки.  

Компьютер для комплекта разработки поддерживает подключение к порту доступа или магистральному порту коммутатора. Специальные функции на коммутаторе не требуются. Если вы используете магистральный порт или необходимо настроить идентификатор виртуальной сети (VLAN ID), следует указать VLAN ID в качестве параметра развертывания. Примеры можно просмотреть в [списке параметров развертывания](azure-stack-run-powershell-script.md).

### <a name="subnet"></a>Подсеть
Не подключайте компьютер для комплекта разработки к следующим подсетям:

* 192.168.200.0/24
* 192.168.100.0/27
* 192.168.101.0/26
* 192.168.102.0/24
* 192.168.103.0/25
* 192.168.104.0/25

Эти подсети зарезервированы для внутренних сетей в среде комплекта разработки.

### <a name="ipv4ipv6"></a>IPv4 или IPv6
Поддерживается только протокол IPv4. Создать сети IPv6 нельзя.

### <a name="dhcp"></a>DHCP
Убедитесь, что в сети, к которой подключается сетевая карта, имеется DHCP-сервер. Если протокол DHCP недоступен, помимо сети, используемой узлом, необходимо подготовить дополнительную сеть со статическим IPv4-адресом. Этот IP-адрес и шлюз необходимо указать в качестве параметра развертывания. Примеры можно просмотреть в [списке параметров развертывания](azure-stack-run-powershell-script.md).

### <a name="internet-access"></a>Доступ к Интернету
Для Azure Stack требуется непосредственное подключение к Интернету или через прозрачный прокси-сервер. Azure Stack не поддерживает конфигурацию веб-прокси для включения доступа к Интернету. У IP-адреса узла и нового IP-адреса, назначенного MAS-BGPNAT01 (это может быть назначенный с помощью DHCP или статический IP-адрес), должен быть доступ к Интернету. В доменах graph.windows.net и login.microsoftonline.com используются порты 80 и 443.

## <a name="telemetry"></a>Телеметрия

Данные телеметрии помогают разрабатывать последующие версии Azure Stack. Кроме того, они позволяют быстро реагировать на отзывы, предоставлять пользователям новые функции и улучшить качество. В состав Microsoft Azure Stack входит Windows Server 2016 и SQL Server 2014. Параметры по умолчанию этих продуктов не изменены. Они также включены в заявление о конфиденциальности Microsoft Enterprise. Azure Stack также содержит программное обеспечение с открытым исходным кодом, которое не отправляет данные телеметрии в Майкрософт. Примеры данных телеметрии Azure Stack:

- сведения о регистрации развертывания;
- сведения об открытии и закрытии оповещения;
- количество сетевых ресурсов.

Чтобы обеспечить поддержку потока данных телеметрии, в сети необходимо открыть порт 443 (HTTPS). Конечная точка клиента — https://vortex-win.data.microsoft.com.

Если вы не хотите предоставлять данные телеметрии Azure Stack, эту функцию можно отключить на узле комплекта разработки и виртуальных машинах инфраструктуры, как описано ниже.

### <a name="turn-off-telemetry-on-the-development-kit-host-optional"></a>Отключение функции передачи данных телеметрии на узле комплекта разработки (необязательно)

>[!NOTE]
Если вы хотите отключить функцию передачи данных телеметрии на узле комплекта разработки, это нужно сделать перед выполнением сценария развертывания.

Прежде чем [выполнять сценарий asdk-installer.ps1]() для развертывания узла комплекта разработки, выполните загрузку в файл Cloudbuilder.vhdx и запустите следующий сценарий в окне PowerShell с повышенными привилегиями:
```powershell
### Get current AllowTelmetry value on DVM Host
(Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" `
-Name AllowTelemetry).AllowTelemetry
### Set & Get updated AllowTelemetry value for ASDK-Host 
Set-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" `
-Name "AllowTelemetry" -Value '0'  
(Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" `
-Name AllowTelemetry).AllowTelemetry
```

Если для параметра **AllowTelemetry** задать значение 0, вы отключите функцию передачи данных телеметрии в Windows и развертывание Azure Stack. Отправляются только критические события из операционной системы. Этот параметр управляет передачей данных телеметрии Windows на всех узлах и виртуальных машинах инфраструктуры. Он повторно применяется к новым узлам и виртуальным машинам после масштабирования.


### <a name="turn-off-telemetry-on-the-infrastructure-virtual-machines-optional"></a>Отключение функции передачи данных телеметрии на виртуальных машинах инфраструктуры (необязательно)

После развертывания на узле комплекта разработки выполните следующий сценарий в окне PowerShell с повышенными привилегиями (как пользователь AzureStack или AzureStackAdmin):

```powershell
$AzSVMs= get-vm |  where {$_.Name -like "AzS-*"}
### Show current AllowTelemetry value for all AzS-VMs
invoke-command -computername $AzSVMs.name {(Get-ItemProperty -Path `
"HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" -Name AllowTelemetry).AllowTelemetry}
### Set & Get updated AllowTelemetry value for all AzS-VMs
invoke-command -computername $AzSVMs.name {Set-ItemProperty -Path `
"HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" -Name "AllowTelemetry" -Value '0'}
invoke-command -computername $AzSVMs.name {(Get-ItemProperty -Path `
"HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\DataCollection" -Name AllowTelemetry).AllowTelemetry}
```

Сведения о настройке данных телеметрии SQL Server см. в разделе [Настройка SQL Server 2016 для отправки отчетов в корпорацию Майкрософт](https://support.microsoft.com/en-us/help/3153756/how-to-configure-sql-server-2016-to-send-feedback-to-microsoft).

### <a name="usage-reporting"></a>Отчеты об использовании

При регистрации в Azure Stack также можно настроить передачу сведений об использовании в Azure. Эта возможность не настраивается отдельно от передачи данных телеметрии. Создание отчетов об использовании можно отключить при [регистрации](azure-stack-register.md) с помощью сценария в GitHub. В этом случае нужно просто задать параметру **$reportUsage** значение **$false**.

Сведения о форматировании данных об использовании см. в статье [Report Azure Stack usage data to Azure](https://docs.microsoft.com/en-us/azure/azure-stack/azure-stack-usage-reporting) (Передача данных об использовании Azure Stack в Azure). Плата за использование комплекта разработки Azure Stack не взимается. Эта функция входит в комплект разработки, поэтому вы можете проверить, как работает создание отчетов об использовании. 


## <a name="next-steps"></a>Дальнейшие действия
[Комплект разработки Azure Stack](https://azure.microsoft.com/overview/azure-stack/try/?v=try)

[Развертывание комплекта разработки Azure Stack](azure-stack-run-powershell-script.md)

