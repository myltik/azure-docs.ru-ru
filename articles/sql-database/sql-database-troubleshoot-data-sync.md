---
title: Устранение неполадок синхронизации данных SQL Azure (предварительная версия) | Документация Майкрософт
description: Узнайте, как устранять распространенные неполадки синхронизации данных SQL Azure (предварительная версия).
services: sql-database
ms.date: 04/01/2018
ms.topic: article
ms.service: sql-database
author: douglaslMS
ms.author: douglasl
manager: craigg
ms.custom: data-sync
ms.openlocfilehash: 6e29c93f37017a88aa4b6d69168e649f7397d56b
ms.sourcegitcommit: 3a4ebcb58192f5bf7969482393090cb356294399
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
---
# <a name="troubleshoot-issues-with-sql-data-sync-preview"></a>Устранение неполадок с синхронизацией данных SQL (предварительная версия)

В этой статье описывается, как устранять известные неполадки синхронизации данных SQL Azure (предварительная версия). Если существует решение проблемы, оно представлено ниже.

Общие сведения о синхронизации данных SQL (предварительная версия) см. в статье [Синхронизация данных в нескольких облачных и локальных базах данных с помощью синхронизации данных SQL Azure (предварительная версия)](sql-database-sync-data.md).

## <a name="sync-issues"></a>Проблемы синхронизации

### <a name="sync-fails-in-the-portal-ui-for-on-premises-databases-that-are-associated-with-the-client-agent"></a>Ошибка синхронизации в интерфейсе портала для локальных баз данных, связанных с агентом клиента

#### <a name="description-and-symptoms"></a>Описание и симптомы

Синхронизация завершается ошибкой в ​​пользовательском интерфейсе портала синхронизации SQL (предварительная версия) для локальных баз данных, связанных с агентом. На локальном компьютере, на котором запущен агент, в журнале событий содержатся ошибки System.IO.IOException. Они указывают, что на диске недостаточно места.

#### <a name="resolution"></a>Способы устранения:

Освободите дополнительное место на диске, на котором находится каталог %TEMP%.

### <a name="my-sync-group-is-stuck-in-the-processing-state"></a>Моя группа синхронизации зависла в процессе обработки

#### <a name="description-and-symptoms"></a>Описание и симптомы

Группа синхронизации в службе синхронизации данных SQL (предварительная версия) находилась в состоянии обработки в течение длительного времени. Она не реагирует на команду **stop**, новые записи в журнале отсутствуют.

#### <a name="cause"></a>Причина:

К фиксации группы синхронизации в состоянии обработки может привести любое из следующих условий:

-   **Агент клиента находится вне сети**. Убедитесь, что агент клиента в сети, а затем повторите попытку.

-   **Агент клиента удален или отсутствует**. Агент клиента удален или отсутствует:

    1. Удалите XML-файл агента из установочной папки синхронизации данных SQL (предварительная версия), если файл существует.
    2. Установите агент на локальном компьютере (это может быть тот же или другой компьютер). Затем отправьте ключ, созданный на портале для агента, который находится вне сети.

-   **Служба синхронизации данных SQL остановлена**.

    1. В меню **Пуск** выполните поиск текста **Службы**.
    2. В результатах поиска щелкните **Службы**.
    3. Найдите службу **синхронизации данных SQL (предварительная версия)**.
    4. Если служба находится в состоянии **Остановлена**, щелкните правой кнопкой мыши имя службы и выберите **Запуск**.

#### <a name="resolution"></a>Способы устранения:

Если приведенные выше сведения не вывели группу синхронизации из состояния обработки, служба поддержки Майкрософт может сбросить состояние группы синхронизации. Чтобы сбросить состояние группы синхронизации, создайте соответствующую запись на [форуме по Базе данных SQL Azure](https://social.msdn.microsoft.com/Forums/azure/home?forum=ssdsgetstarted). Укажите в ней идентификатор подписки и идентификатор группы синхронизации, которую нужно сбросить. Специалист службы поддержки Майкрософт ответит на вашу запись и сообщит вам, когда состояние будет сброшено.

### <a name="i-see-erroneous-data-in-my-tables"></a>Я вижу неверные данные в таблицах

#### <a name="description-and-symptoms"></a>Описание и симптомы

Если в синхронизации участвуют таблицы с одинаковыми именам, но из разных схем базы данных, то после синхронизации в них отображаются ошибочные данные.

#### <a name="cause"></a>Причина:

Процесс подготовки синхронизации данных SQL Sync (предварительная версия) использует аналогичные таблицы отслеживания для таблиц одинаковыми именами, но в разных схемах. По этой причине изменения из обеих таблиц отражаются в одной таблице отслеживания. Это приводит к неправильному изменению данных во время синхронизации.

#### <a name="resolution"></a>Способы устранения:

Убедитесь, что имена таблиц, участвующих в синхронизации, отличаются, даже если они относятся к разным схемам в базе данных.

### <a name="i-see-inconsistent-primary-key-data-after-a-successful-sync"></a>Я вижу несогласованные данные первичного ключа после успешной синхронизации

#### <a name="description-and-symptoms"></a>Описание и симптомы

После синхронизации, которая считается успешной, в журнале нет неудачных или пропущенных строк, но вы видите, что данные первичного ключа не согласованы между базами данных в группе синхронизации.

#### <a name="cause"></a>Причина:

Это сделано намеренно. Изменения в любом столбце первичного ключа приводят к несогласованным данным в строках, в которых был изменен первичный ключ.

#### <a name="resolution"></a>Способы устранения:

Чтобы предотвратить эту проблему, убедитесь, что данные в столбце первичного ключа не изменены.

Чтобы устранить эту проблему после ее возникновения, удалите строку, которая содержит несогласованные данные, из всех конечных точек в группе синхронизации. Затем снова вставьте эту строку.

### <a name="i-see-a-significant-degradation-in-performance"></a>Я вижу значительное снижение производительности

#### <a name="description-and-symptoms"></a>Описание и симптомы

Производительность может снизиться до такой степени, что вы даже не сможете открыть пользовательский интерфейс синхронизации данных.

#### <a name="cause"></a>Причина:

Наиболее вероятной причиной является петля синхронизации. Петля синхронизации возникает, когда группа синхронизации А активирует синхронизацию с группой по синхронизации Б, которая затем запускает синхронизацию с группой синхронизации А. Фактическая ситуации может быть более сложной, так как петля может включать более двух групп синхронизации. Проблема заключается в зацикливании синхронизации из-за перекрытия групп синхронизации.

#### <a name="resolution"></a>Способы устранения:

Наилучшим решением является предотвращение. Убедитесь, что в группах синхронизации нет циклических ссылок. Любая строка, синхронизируемая с одной группой синхронизации, не может синхронизироваться c другой группой синхронизации.

### <a name="i-see-this-message-cannot-insert-the-value-null-into-the-column-column-column-does-not-allow-nulls-what-does-this-mean-and-how-can-i-fix-it"></a>Получено сообщение об ошибке "Не удалось вставить значение NULL в столбец \<столбец\>. В столбце запрещены значения NULL". Что это означает, и как это можно исправить? 
Это сообщение об ошибке указывает на одну из двух следующих проблем:
-  У таблицы нет первичного ключа. Чтобы устранить эту проблему, добавьте первичный ключ во все таблицы, которые синхронизируются.
-  В инструкции CREATE INDEX присутствует предложение WHERE. Служба синхронизации данных (предварительная версия) не может обработать такое условие. Чтобы устранить эту проблему, удалите предложение WHERE или вручную внесите изменения во все базы данных. 
 
### <a name="how-does-data-sync-preview-handle-circular-references-that-is-when-the-same-data-is-synced-in-multiple-sync-groups-and-keeps-changing-as-a-result"></a>Как служба синхронизации данных (предварительная версия) обрабатывает циклические ссылки? То есть, когда одни и те же данные синхронизируются в нескольких группах синхронизации и в результате постоянно изменяются?
Служба синхронизации данных (предварительная версия) не обрабатывает циклические ссылки. Не используйте их. 

## <a name="client-agent-issues"></a>Проблемы в работе агента клиента

### <a name="the-client-agent-install-uninstall-or-repair-fails"></a>Установка, удаление или восстановление агента клиента завершается ошибкой

#### <a name="cause"></a>Причина:

Этот сбой может произойти во множестве случаев. Чтобы определить конкретную причину этого сбоя, просмотрите журналы.

#### <a name="resolution"></a>Способы устранения:

Чтобы найти конкретную причину сбоя, следует создать и просмотреть журналы установщика Windows. Включить ведение журнала можно с помощью командной строки. Например, если скачанный файл AgentServiceSetup.msi — LocalAgentHost.msi, создайте и изучите файлы журналов, используя следующие команды.

-   Для установки: `msiexec.exe /i SQLDataSyncAgent-Preview-ENU.msi /l\*v LocalAgentSetup.InstallLog`
-   Для удаления: `msiexec.exe /x SQLDataSyncAgent-se-ENU.msi /l\*v LocalAgentSetup.InstallLog`

Вы также можете включить ведение журнала для всех установок, выполняемых установщиком Windows. Дополнительные сведения см. в статье базы знаний Майкрософт [Как включить ведение журнала работы установщика Windows](https://support.microsoft.com/help/223300/how-to-enable-windows-installer-logging). В ней также описано расположение этих журналов.

### <a name="my-client-agent-doesnt-work"></a>Мой агент клиента не работает

#### <a name="description-and-symptoms"></a>Описание и симптомы

При попытке использовать агент клиента вы получаете следующие сообщения.

"Sync failed with exception There was an error while trying to deserialize parameter www.microsoft.com/.../05:GetBatchInfoResult. See InnerException for more information" (Сбой синхронизации с исключением. Ошибка десериализации параметра www.microsoft.com/.../05:GetBatchInfoResult. Дополнительные сведения см. в описании InnerException).

"Inner exception message: Type 'Microsoft.Synchronization.ChangeBatch' is an invalid collection type since it does not have a default constructor" (Внутреннее сообщение об исключении. Тип Microsoft.Synchronization.ChangeBatch является недопустимым типом коллекции, так как он не имеет конструктора по умолчанию).

#### <a name="cause"></a>Причина:

Это известная проблема с установкой службы синхронизации данных SQL (предварительная версия). Наиболее вероятной причиной этого сообщения является одна из следующих:

-   Вы используете Windows 8 Developer Preview.
-   У вас установлена платформа .NET Framework 4.5.

#### <a name="resolution"></a>Способы устранения:

Установите агент клиента на компьютер, на котором не установлены Windows 8 Developer Preview и платформа .NET Framework 4.5.

### <a name="my-client-agent-doesnt-work-after-i-cancel-the-uninstall"></a>Мой агент клиента не работает после отмены удаления

#### <a name="description-and-symptoms"></a>Описание и симптомы

Агент клиента не работает, даже если вы отменили его удаление.

#### <a name="cause"></a>Причина:

Эта проблема возникает из-за того, что агент клиента синхронизации данных SQL (предварительная версия) не хранит учетные данные.

#### <a name="resolution"></a>Способы устранения:

Попробуйте применить следующие два способа:

-   Используйте services.msc для повторного ввода учетных данных агента клиента.
-   Удалите этот агент клиента и установите его заново. Скачайте и установите последний агент клиента из [центра загрузки](http://go.microsoft.com/fwlink/?linkid=221479).

### <a name="my-database-isnt-listed-in-the-agent-list"></a>В списке агента отсутствует моя база данных

#### <a name="description-and-symptoms"></a>Описание и симптомы

При попытке добавить существующую базу данных SQL Server в группу синхронизации база данных не отображается в списке агентов.

#### <a name="cause"></a>Причина:

Этот сбой может произойти в следующих случаях:

-   Агент клиента и группа синхронизации находятся в разных центрах обработки данных.
-   Список баз данных агента клиента устарел.

#### <a name="resolution"></a>Способы устранения:

Способ устранения зависит от причины.

- **Агент клиента и группа синхронизации находятся в разных центрах обработки данных**

    Агент клиента и группа синхронизации должны находиться в одном центре обработки данных. Чтобы обеспечить это, имеются две возможности:

    -   Создайте новый агент в центре обработки данных, в котором находится группа синхронизации. Затем зарегистрируйте базу данных в этом агенте.
    -   Удалите текущую группу синхронизации. Затем повторно создайте группу синхронизации в центре обработки данных, в котором находится агент.

- **Список баз данных агента клиента устарел**

    Остановите и перезапустите службу агента клиента.

    Локальный агент скачивает список связанных баз данных только при первой отправке ключа агента. Он не скачивает список связанных баз данных при последующих отправках ключа агента. Базы данных, зарегистрированные во время перемещения агента, не отображаются в исходном экземпляре агента.

### <a name="client-agent-doesnt-start-error-1069"></a>Агент клиента не запускается (ошибка 1069)

#### <a name="description-and-symptoms"></a>Описание и симптомы

Вы обнаружили, что агент не работает на компьютере, на котором размещен сервер SQL Server. При попытке запустить агент вручную отображается диалоговое окно с сообщением об ошибке: "Ошибка 1069. Служба не запущена из-за ошибки входа в систему".

![Диалоговое окно ошибки с синхронизацией данных 1069](media/sql-database-troubleshoot-data-sync/sync-error-1069.png)

#### <a name="cause"></a>Причина:

Вероятной причиной этой ошибки является то, что пароль на локальном сервере изменился с момента создания агента и его пароля.

#### <a name="resolution"></a>Способы устранения:

Обновите пароль агента до текущего пароля сервера.

1. Найдите службу предварительного просмотра агента клиента синхронизации данных SQL (предварительная версия).  
    a. Щелкните **Запуск**.  
    Б. В поле поиска введите **services.msc**.  
    c. В результатах поиска щелкните **Службы**.  
    d. В окне **Службы** прокрутите список до записи **SQL Data Sync (Preview) Agent Preview** (Просмотр агента синхронизации данных SQL (предварительная версия)).  
2. Щелкните правой кнопкой мыши **SQL Data Sync (Preview) Agent Preview** (Агент синхронизации данных SQL (предварительная версия)), а затем выберите **Остановить**.
3. Щелкните правой кнопкой мыши **SQL Data Sync (Preview) Agent Preview** (Агент синхронизации данных SQL (предварительная версия)), а затем выберите **Свойства**.
4. В окне **SQL Data Sync (Preview) Agent Preview Properties** (Свойства агента синхронизации данных SQL (предварительная версия)) щелкните вкладку **Вход**.
5. Введите пароль в поле **Пароль**.
6. Повторно введите пароль в поле **Подтверждение пароля**.
7. Нажмите кнопку **Apply** (Применить), а затем нажмите кнопку **ОК**.
8. В окне **Службы** щелкните правой кнопкой мыши службу **SQL Data Sync (Preview) Agent Preview** (Агент синхронизации данных SQL (предварительная версия)), а затем щелкните **Запуск**.
9. Закройте окно **Службы**.

### <a name="i-cant-submit-the-agent-key"></a>Я не могу отправить ключ агента

#### <a name="description-and-symptoms"></a>Описание и симптомы

После создания или повторного создания ключа агента вы пытаетесь передать этот ключ через приложение SqlAzureDataSyncAgent. Но выполнить отправку не удается.

![Диалоговое окно ошибки синхронизации: не удается отправить ключ агента](media/sql-database-troubleshoot-data-sync/sync-error-cant-submit-agent-key.png)

Прежде чем продолжить, проверьте следующие условия:

-   Запущена служба синхронизации данных SQL Windows (предварительная версия).  
-   Учетная запись службы предварительного просмотра синхронизации данных SQL (предварительная версия) Windows имеет доступ к сети.    
-   Агент клиента может связаться со службой указателя. Убедитесь, что следующий раздел реестра имеет значение https://locator.sync.azure.com/LocatorServiceApi.svc:  
    -   На компьютере x86: `HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\SQL Azure Data Sync\\LOCATORSVCURI`  
    -   На компьютере x64: `HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Wow6432Node\\Microsoft\\SQL Azure Data Sync\\LOCATORSVCURI`

#### <a name="cause"></a>Причина:

Ключ агента уникально идентифицирует каждый локальный агент. Ключ должен соответствовать двум условиям:

-   Ключ агента клиента на сервере синхронизации данных SQL (предварительная версия) и локальном компьютере должен быть идентичным.
-   Ключ агента клиента можно использовать только один раз.

#### <a name="resolution"></a>Способы устранения:

Если агент не работает, это связано с тем, что одно или оба условия не выполняются. Чтобы агент снова заработал:

1. Создайте ключ.
2. Примените новый ключ к агенту.

Примените новый ключ к агенту.

1. Используйте проводник для перехода в каталог установки агента. Каталог установки по умолчанию — C:\\Program Files (x86)\\Microsoft SQL Data Sync.
2. Дважды щелкните подкаталог bin.
3. Откройте приложение SqlAzureDataSyncAgent.
4. Щелкните **Submit Agent Key** (Отправить ключ агента).
5. Вставьте ключ из буфера обмена в соответствующем поле.
6. Нажмите кнопку **ОК**.
7. Закройте программу.

### <a name="the-client-agent-cant-be-deleted-from-the-portal-if-its-associated-on-premises-database-is-unreachable"></a>Агент клиента не может быть удален с портала, если связанная с ним локальная база данных недоступна

#### <a name="description-and-symptoms"></a>Описание и симптомы

Если локальная конечная точка (то есть база данных), которая зарегистрирована в агенте клиента синхронизации данных SQL (предварительная версия), становится недоступной, агент клиента не может быть удален.

#### <a name="cause"></a>Причина:

Локальный агент не может быть удален, так как недоступная база данных все еще зарегистрирована в агенте. При попытке удалить агент процесс удаления пытается подключиться к базе данных, что приводит к ошибке.

#### <a name="resolution"></a>Способы устранения:

Используйте принудительное удаление, чтобы удалить недоступную базу данных.

> [!NOTE]
> Если после принудительного удаления таблицы метаданных синхронизации остаются, используйте инструмент deprovisioningutil.exe для их очистки.

### <a name="local-sync-agent-app-cant-connect-to-the-local-sync-service"></a>Приложение локального агента синхронизации не может подключиться к локальной службе синхронизации

#### <a name="resolution"></a>Способы устранения:

Попробуйте сделать следующее.

1. Выйдите из приложения.  
2. Откройте панель "Службы компонентов".  
    a. В поле поиска на панели задач введите **services.msc**.  
    Б. В результатах поиска дважды щелкните **Службы**.  
3. Остановите службу **SQL Data Sync (Preview) Preview**.
4. Перезапустите службу **SQL Data Sync (Preview) Preview**.  
5. Повторно откройте приложение.

## <a name="setup-and-maintenance-issues"></a>Проблемы установки и обслуживания

### <a name="i-get-a-disk-out-of-space-message"></a>Я получаю сообщение "disk out of space" (нет свободного места на диске)

#### <a name="cause"></a>Причина:

Сообщение "disk out of space" (нет свободного места на диске) может отображаться, если нужно удалить лишние файлы. Это могут быть лишние файлы, обнаруженные антивирусным программным обеспечением, или файлы, которые были открыты при попытке выполнить операции удаления.

#### <a name="resolution"></a>Способы устранения:

Вручную удалите файлы синхронизации, которые находятся в папке %temp% (`del \*sync\* /s`). Затем удалите подкаталоги в папке %temp%.

> [!IMPORTANT]
> Не удаляйте файлы во время синхронизации.

### <a name="i-cant-delete-my-sync-group"></a>Я не могу удалить группу синхронизации

#### <a name="description-and-symptoms"></a>Описание и симптомы

Вам не удается удалить группу синхронизации.

#### <a name="causes"></a>Причины

Любая из следующих ситуаций может помешать удалению группы синхронизации:

-   Агент клиента находится в автономном режиме.
-   Агент клиента удален или отсутствует. 
-   База данных находится в автономном режиме. 
-   Группа синхронизации подготавливается или синхронизируется. 

#### <a name="resolution"></a>Способы устранения:

Чтобы устранить сбой при удалении группы синхронизации, сделайте следующее.

-   Убедитесь, что агент клиента в сети, а затем повторите попытку.
-   Агент клиента удален или отсутствует:  
    a. Удалите XML-файл агента из установочной папки синхронизации данных SQL (предварительная версия), если файл существует.  
    Б. Установите агент на локальном компьютере (это может быть тот же или другой компьютер). Затем отправьте ключ, созданный на портале для агента, который находится вне сети.
-   Убедитесь, что запущена служба синхронизации данных SQL (предварительная версия).  
    a. В меню **Пуск** выполните поиск текста **Службы**.  
    Б. В результатах поиска щелкните **Службы**.  
    c. Найдите службу **предварительного просмотра синхронизации данных SQL (предварительная версия)**.  
    d. Если служба находится в состоянии **Остановлена**, щелкните правой кнопкой мыши имя службы и выберите **Запуск**.
-   Убедитесь, что базы данных SQL и базы данных SQL Server подключены к сети.
-   Дождитесь завершения процесса подготовки или синхронизации и повторите попытку удалить группу синхронизации.

### <a name="i-cant-unregister-an-on-premises-sql-server-database"></a>Я не могу отменить регистрацию локальной базы данных SQL Server

#### <a name="cause"></a>Причина:

Скорее всего, вы пытаетесь отменить регистрацию базы данных, которая уже удалена.

#### <a name="resolution"></a>Способы устранения:

Чтобы отменить регистрацию локальной базы данных SQL Server, выберите эту базу данных и щелкните **Принудительно удалить**.

Если эта операция не удалила базу данных из группы синхронизации, выполните следующие действия.

1. Остановите, а затем перезапустите службу узла агента клиента.  
    a. Щелкните меню **Пуск**.  
    Б. В поле поиска введите **services.msc**.  
    c. В разделе **Программы** области результатов поиска дважды щелкните **Службы**.  
    d. Щелкните правой кнопкой мыши службу **SQL Data Sync (Preview)**.  
    д. Если служба запущена, остановите ее.  
    f. Щелкните правой кнопкой мыши службу и выберите **Запуск**.  
    ж. Проверьте, зарегистрирована ли еще база данных. Если она больше не зарегистрирована, процедура завершена. В противном случае перейдите к следующему шагу.
2. Откройте приложение агента клиента (SqlAzureDataSyncAgent).
3. Выберите **Изменить учетные данные**, а затем введите учетные данные для базы данных.
4. Выполните отмену регистрации.

### <a name="i-dont-have-sufficient-privileges-to-start-system-services"></a>У меня нет необходимых привилегий для запуска системных служб

#### <a name="cause"></a>Причина:

Эта ошибка возникает в двух ситуациях:
-   Имя пользователя или пароль неверны.
-   Указанная учетная запись пользователя не имеет достаточных привилегий для входа в систему в качестве службы.

#### <a name="resolution"></a>Способы устранения:

Предоставьте учетной записи пользователя учетные данные для входа в качестве службы.

1. Выберите **Пуск** > **Панель управления** > **Администрирование** > **Локальная политика безопасности**  >  **Локальная политика** > **User Rights Management** (Управление правами пользователей).
2. Выберите **Вход в качестве службы**.
3. В диалоговом окне **Свойства** добавьте учетную запись пользователя.
4. Нажмите кнопку **Apply** (Применить), а затем нажмите кнопку **ОК**.
5. Закройте все окна.

### <a name="a-database-has-an-out-of-date-status"></a>База данных находится в состоянии "Устарела"

#### <a name="cause"></a>Причина:

Служба синхронизации данных SQL (предварительная версия) удаляет базы данных, которые были отключены более 45 дней (с момента отключения базы данных от сети) из службы. Если база данных находится вне сети более 45 дней, а затем возвращается в сеть, ее состояние имеет значение **Out-of-Date** (Устарела).

#### <a name="resolution"></a>Способы устранения:

Чтобы избежать состояния **Out-of-Date** (Устарела), нужно сделать так, чтобы ни одна из ваших баз данных не находилась вне сети более 45 дней.

Если база данных находится в состоянии **Out-of-Date** (Устарела), сделайте следующее.

1. Удалите базу данных в состоянии **Out-of-Date** (Устарела) из группы синхронизации.
2. Добавьте базу данных обратно в группу синхронизации.

> [!WARNING]
> Все изменения, внесенные в эту базу данных в автономном режиме, будут потеряны.

### <a name="a-sync-group-has-an-out-of-date-status"></a>Группа синхронизации находится в состоянии "Устарела"

#### <a name="cause"></a>Причина:

Если одно или несколько изменений не применяются в течение всего периода хранения (45 дней), группа синхронизации может стать устаревшей.

#### <a name="resolution"></a>Способы устранения:

Чтобы избежать состояния **Out-of-Date** (Устарела) группы синхронизации, регулярно проверяйте результаты заданий синхронизации в средстве просмотра журнала. Изучайте и устраняйте проблемы изменений, которые не применяются.

Если группа синхронизации находится в состоянии **Out-of-Date** (Устарела), необходимо удалить ее и создать заново.

### <a name="a-sync-group-cant-be-deleted-within-three-minutes-of-uninstalling-or-stopping-the-agent"></a>Группу синхронизации не удается удалить в течение трех минут после удаления или остановки агента

#### <a name="description-and-symptoms"></a>Описание и симптомы

Вам не удается удалить группу синхронизации в течение трех минут после удаления или остановки связанного агента синхронизации данных SQL (предварительная версия).

#### <a name="resolution"></a>Способы устранения:

1. Удалите группу синхронизации, в то время как связанные агенты синхронизации подключены к сети (рекомендуется).
2. Если агент находится вне сети, но установлен, подключите его к сети на локальном компьютере. Дождитесь, когда состояние агента изменится на **Online** (В сети) на портале синхронизации данных SQL (предварительная версия). Удалите группу синхронизации.
3. Если агент находится вне сети, потому что он был удален, выполните следующие действия.  
    a.  Удалите XML-файл агента из установочной папки синхронизации данных SQL (предварительная версия), если файл существует.  
    Б.  Установите агент на локальном компьютере (это может быть тот же или другой компьютер). Затем отправьте ключ, созданный на портале для агента, который находится вне сети.  
    c. Попробуйте удалить группу синхронизации.

### <a name="what-happens-when-i-restore-a-lost-or-corrupted-database"></a>Что происходит, когда я восстанавливаю потерянную или поврежденную базу данных?

Если вы восстанавливаете потерянную или поврежденную базу данных из резервной копии, в группах синхронизации, к которым принадлежит база данных, может иметь место несходимость данных.

## <a name="next-steps"></a>Дополнительная информация
Дополнительные сведения о службе синхронизации данных SQL (предварительная версия) см. в разделах:

-   [Синхронизация данных в нескольких облачных и локальных базах данных с помощью функции синхронизации данных SQL Azure (предварительная версия)](sql-database-sync-data.md)  
-   [Настройка синхронизации данных SQL Azure (предварительная версия)](sql-database-get-started-sql-data-sync.md)  
-   [Рекомендации по синхронизации данных SQL (предварительная версия)](sql-database-best-practices-data-sync.md)  
-   [Мониторинг синхронизации данных SQL Azure (предварительная версия) с помощью Log Analytics](sql-database-sync-monitor-oms.md)  
-   Полные примеры PowerShell, которые демонстрируют, как настроить синхронизацию данных SQL (предварительная версия):  
    -   [Использование PowerShell для синхронизации данных между несколькими базами данных SQL Azure](scripts/sql-database-sync-data-between-sql-databases.md)  
    -   [Использование PowerShell для синхронизации данных между базой данных SQL Azure и локальной базой данных SQL Server](scripts/sql-database-sync-data-between-azure-onprem.md)  
-   [Документация по REST API синхронизации данных SQL (предварительная версия)](https://github.com/Microsoft/sql-server-samples/raw/master/samples/features/sql-data-sync/Data_Sync_Preview_REST_API.pdf?raw=true)

Дополнительные сведения о Базе данных SQL см. в разделах:

-   [Обзор Базы данных SQL](sql-database-technical-overview.md)
-   [Управление жизненным циклом базы данных](https://msdn.microsoft.com/library/jj907294.aspx)
