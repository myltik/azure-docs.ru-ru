---
title: "SaaS Wingtip: пример мультитенантного приложения базы данных SQL Azure | Документация Майкрософт"
description: "Обучайтесь на примере мультитенантного приложения, использующего базу данных SQL Azure — SaaS Wingtip"
keywords: "руководство по базе данных sql"
services: sql-database
author: stevestein
manager: craigg
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/09/2017
ms.author: sstein
ms.openlocfilehash: 68a9d97a881f3a7628a08b66091c3feb4c4dbbfe
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="introduction-to-a-sql-database-multi-tenant-saas-app-example"></a>Общие сведения о примере мультитенантного приложения SaaS для базы данных SQL

Приложение *SaaS Wingtip* — это пример многопользовательского приложения, демонстрирующего уникальные преимущества базы данных SQL. Для обслуживания нескольких клиентов приложение использует шаблон приложения SaaS, в котором на один клиент используется одна база данных. Приложение разработано для демонстрации возможностей базы данных SQL Azure, которые позволяют работать со сценариями SaaS, включая несколько моделей проектирования и управления SaaS. Приложение SaaS Wingtip развертывается менее чем за пять минут, поэтому вы сможете быстро приступить к работе.

Исходный код и скрипты управления приложения доступны в репозитории GitHub [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS). Загрузите папку [Learning Modules](#download-and-unblock-the-wingtip-saas-scripts) на локальный компьютер.

## <a name="sql-database-wingtip-saas-tutorials"></a>Руководства по SaaS Wingtip базы данных SQL

Развернув приложение, изучите руководства, которые созданы на основе первоначального развертывания. В этих руководствах рассматриваются распространенные шаблоны SaaS, использующие преимущества встроенных функций базы данных SQL, хранилища данных SQL и других служб Azure. Руководства включают скрипты PowerShell с подробными объяснениями, которые значительно упрощают понимание и реализацию шаблонов управления SaaS в ваших приложениях.


| Учебник | Описание |
|:--|:--|
|[Развертывание и изучение мультитенантного приложения SaaS, использующего базу данных SQL Azure](sql-database-saas-tutorial.md)| **НАЧНИТЕ ЗДЕСЬ!** Разверните и изучите мультитенантное приложение SaaS, использующее базу данных SQL Azure. |
|[Подготовка новых клиентов и их регистрация в каталоге](sql-database-saas-tutorial-provision-and-catalog.md)| Узнайте, как приложение подключается к клиентам с помощью базы данных каталога и как клиенты сопоставляются с данными каталога. |
|[Мониторинг производительности примера приложения SaaS Wingtip](sql-database-saas-tutorial-performance-monitoring.md)| Узнайте, как использовать функции мониторинга базы данных SQL и как настроить оповещения при превышении пороговых значений производительности. |
|[Настройка и использование Log Analytics (OMS) с примером приложения SaaS WTP](sql-database-saas-tutorial-log-analytics.md) | Узнайте больше об использовании [Log Analytics](../log-analytics/log-analytics-overview.md) для мониторинга большого количества ресурсов в нескольких пулах. |
|[Восстановление базы данных отдельного клиента](sql-database-saas-tutorial-restore-single-tenant.md)| Узнайте, как восстановить базу данных клиента до предыдущей точки во времени. Кроме того, включены шаги для восстановления в параллельную базу данных путем выхода из имеющейся базы данных клиента через Интернет. |
|[Управление схемой для нескольких клиентов в приложении SaaS Wingtip](sql-database-saas-tutorial-schema-management.md)| Узнайте, как обновить схему и обновить эталонные данные во всех клиентах SaaS Wingtip. |
|[Выполнение запросов ad-hoc-аналитики по всем клиентам SaaS Wingtip](sql-database-saas-tutorial-adhoc-analytics.md) | Создание базы данных аналитики ad-hoc и выполнение распределенных запросов в реальном времени по всем клиентам.  |
|[Выполнение распределенных запросов в нескольких базах данных SQL Azure](sql-database-saas-tutorial-tenant-analytics.md) | Извлечение данных клиента в базу данных аналитики или хранилище данных для выполнения автономных аналитических запросов. |



## <a name="application-architecture"></a>Архитектура приложения

Приложение SaaS Wingtip использует модель, предполагающую применение одной базы данных на каждого клиента, максимизируя эффективность с помощью эластичных пулов SQL. Для подготовки и сопоставления клиентов с их данными используется база данных каталога. Основное приложение SaaS Wingtip использует пул с тремя примерами клиентов и базу данных каталога. Пройдя многие руководства по приложению SaaS Wingtip, вы сможете создавать надстройки к первоначальному развертыванию путем введения аналитических баз данных, управления схемами между базами данных и т. д.


![Архитектура SaaS Wingtip](media/sql-database-wtp-overview/app-architecture.png)


Во время прохождения руководств и работы с приложением важно сосредоточиться на шаблонах SaaS, так как они относятся к уровню данных. Другими словами сосредоточиться на уровне данных, а не анализировать само приложение. Для реализации этих шаблонов SaaS в ваших приложениях важно понять суть этого процесса, принимая во внимание любые необходимые изменения для ваших конкретных бизнес-требований.

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a>Загрузка и разблокировка скриптов SaaS Wingtip

Исполняемое содержимое (скрипты, библиотеки DLL) может быть заблокировано Windows, в то время как ZIP-файлы можно загрузить с внешнего источника, а затем извлечь их содержимое. При извлечении скриптов из ZIP-файла ***выполните указанные ниже действия, чтобы разблокировать ZIP-файл перед извлечением***. После этого скрипты можно выполнять.

1. Перейдите к [репозиторию GitHub SaaS Wingtip](https://github.com/Microsoft/WingtipSaaS).
1. Выберите **Clone or download** (Клонировать или скачать).
1. Выберите **Download ZIP** (Загрузить ZIP) и сохраните файл.
1. Щелкните правой кнопкой мыши файл **WingtipSaaS-master.zip** и выберите **Свойства**.
1. На вкладке **Общие** выберите **Разблокировать**.
1. Нажмите кнопку **ОК**.
1. Извлеките файлы.

Скрипты находятся в папке *..\\WingtipSaaS-master\\Learning Modules*.


## <a name="working-with-the-wingtip-saas-powershell-scripts"></a>Работа со скриптами PowerShell SaaS Wingtip

Чтобы использовать пример с максимальной пользой, необходимо детально изучить приведенные скрипты. Используйте точки останова и пошагово выполните скрипты, изучив особенности реализации различных шаблонов SaaS. Для легкого пошагового выполнения указанных скриптов и прохождения модулей мы рекомендуем использовать [интегрированную среду сценариев PowerShell](https://msdn.microsoft.com/powershell/scripting/core-powershell/ise/introducing-the-windows-powershell-ise).

### <a name="update-the-configuration-file-for-your-deployment"></a>Обновление файла конфигурации для развертывания

Измените файл **UserConfig.psm1**, используя имя группы ресурсов и значение пользователя, заданные во время развертывания:

1. Откройте *интегрированную среду сценариев PowerShell* и загрузите файл *Learning Modules*\\UserConfig.psm1\\. 
1. В полях *ResourceGroupName* и *Name* введите специфические для развертывания значения (только в строках 10 и 11).
1. Сохраните изменения.

Если задать эти значения, относящиеся к развертыванию, здесь, вам не понадобится обновлять их в каждом скрипте.

### <a name="execute-scripts-by-pressing-f5"></a>Выполнение скрипта нажатием клавиши F5

Некоторые скрипты используют *$PSScriptRoot*, чтобы разрешить перемещение по папкам. Переменная *$PSScriptRoot* обрабатывается только при выполнении скрипта по нажатию клавиши **F5**.  Если выделить несколько скриптов и запустить их (**F8**), может произойти ошибка, поэтому нажмите клавишу **F5** при выполнении скриптов.

### <a name="step-through-the-scripts-to-examine-the-implementation"></a>Пошаговое выполнение скриптов и изучение их реализации

Лучший способ разобраться в скриптах — поэтапно выполнить их, чтобы узнать, что они делают. Просмотрите включенные скрипты **Demo-** с легким детализированным рабочим процессом. В скриптах **Demo-** показаны шаги, необходимые для выполнения каждой задачи, поэтому установите точки останова и подробно изучите отдельные вызовы, чтобы просмотреть сведения о реализации для различных шаблонов SaaS.

Советы для просмотра и пошагового выполнения скриптов PowerShell:

* Откройте скрипты **Demo-** в интегрированной среде сценариев PowerShell.
* Выполните скрипт или продолжайте работу, нажав клавишу **F5** (использование клавиши **F8** не рекомендуется, так как при этом переменная *$PSScriptRoot* не обрабатывается во время выполнения нескольких скриптов).
* Поместите точки останова, щелкнув или выбрав линию и нажав клавишу **F9**.
* Чтобы обойти функцию или вызов скрипта, нажмите клавишу **F10**.
* Чтобы перейти к функции или вызову скрипта, нажмите клавишу **F11**.
* Чтобы выйти из текущей функции или скрипта, нажмите клавиши **SHIFT+F11**.


## <a name="explore-database-schema-and-execute-sql-queries-using-ssms"></a>Просмотр схемы базы данных и выполнение SQL-запросов с помощью SSMS

Используйте [SQL Server Management Studio (SSMS)](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) для подключения и просмотра серверов и баз данных приложения.

Для развертывания изначально доступно два сервера баз данных SQL, к которым оно может подключиться: *tenants1-&lt;User&gt;* и *catalog-&lt;User&gt;*. Для успешного выполнения демонстрационного подключения на обоих серверах есть [правило брандмауэра](sql-database-firewall-configure.md), которое разрешает вход через все IP-адреса.


1. Откройте среду *SSMS* и подключитесь к серверу *tenants1-&lt;пользователь&gt;.database.windows.net*.
1. Щелкните **Подключить** > **Компонент ядра СУБД…**:

   ![сервер каталога](media/sql-database-wtp-overview/connect.png)

1. Используйте такие демонстрационные учетные данные: имя пользователя — *developer*, пароль — *P@ssword1*.

   ![connection;](media\sql-database-wtp-overview\tenants1-connect.png)

1. Повторите шаги 2-3 и подключитесь к серверу *catalog-&lt;пользователь&gt;.database.windows.net*.

После успешного подключения вы увидите оба сервера. Список баз данных может отличаться в зависимости от подготовленных клиентов:

![обозреватель объектов](media/sql-database-wtp-overview/object-explorer.png)



## <a name="next-steps"></a>Дальнейшие действия

[Развертывание и изучение мультитенантного приложения SaaS, использующего базу данных SQL Azure](sql-database-saas-tutorial.md)