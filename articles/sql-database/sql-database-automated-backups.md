---
title: "Резервные копии Базы данных SQL: автоматически создаваемые и геоизбыточные | Документация Майкрософт"
description: "База данных SQL автоматически создает локальную резервную копию базы данных каждые пять минут и использует геоизбыточное хранилище Azure с доступом на чтение для обеспечения геоизбыточности."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: 
ms.assetid: 3ee3d49d-16fa-47cf-a3ab-7b22aa491a8d
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 11/02/2016
ms.author: sashan
translationtype: Human Translation
ms.sourcegitcommit: 2a51e12d16795204b2ec68d66755b020ab6a6490
ms.openlocfilehash: 10c70d478d638a4938b7978d9b2188617b7f61e9


---
# <a name="learn-about-sql-database-backups"></a>Подробнее о резервном копировании базы данных SQL

База данных SQL автоматически создает резервную копию базы данных и использует геоизбыточное хранилище Azure (RA-GRS) с доступом на чтение для обеспечения геоизбыточности. Эти резервные копии создаются автоматически и без дополнительной платы. Не нужно ничего делать для того, чтобы это происходило. Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. Если вы хотите хранить резервные копии в собственном контейнере хранилища, можно настроить политику длительного периода удержания резервных копий. Дополнительные сведения см. в статье [Long-term retention](sql-database-long-term-retention.md) (Длительный период удержания).

## <a name="what-is-a-sql-database-backup"></a>Что такое резервная копия Базы данных SQL?

База данных SQL использует для создания [полных](https://msdn.microsoft.com/library/ms186289.aspx), [разностных](https://msdn.microsoft.com/library/ms175526.aspx) резервных копий и резервных копий [журналов транзакций](https://msdn.microsoft.com/library/ms191429.aspx) технологию SQL Server. Как правило, резервные копии журналов транзакций создаются каждые 5–10 минут. Периодичность архивации зависит от уровня производительности и числа действий, производимых с базой данных. Резервные копии журналов транзакций и полные, разностные резервные копии позволяют восстановить базу данных на определенный момент времени на том же сервере, на котором размещена база данных. При восстановлении базы данных служба сама определяет, какие резервные копии (полные, разностные или резервные копии журналов транзакций) следует восстановить.


Эти резервные копии позволяют выполнить следующие операции:

* Восстановление базы данных на определенный момент времени в течение периода хранения. В результате этой операции будет создана база данных на том же сервере, что и исходная база данных.
* Восстановление удаленной базы данных на момент удаления или на любой момент в пределах периода удержания. Удаленную базу данных можно восстановить только на том же сервере, на котором была создана исходная база данных.
* Восстановление базы данных в другом географическом регионе. Эта операция позволяет выполнить восстановление после сбоя в регионе при отсутствии доступа к серверу и базе данных. В результате создается база данных на любом существующем сервере в любой точке мира. 
* Восстановление базы данных из определенной резервной копии, хранимой в хранилище служб восстановления Azure. Эта операция позволяет восстановить старую версию базы данных, чтобы удовлетворить запрос на соответствие или запустить старую версию приложения. Ознакомьтесь со статьей [Long-term retention](sql-database-long-term-retention.md) (Длительный период удержания).
* Инструкции по восстановлению см. в статье о [восстановлении базы данных из резервной копии](sql-database-recovery-using-backups.md).

> [!TIP]
> Руководство приведено в статье [Начало работы с резервным копированием и восстановлением для защиты и восстановления данных с помощью PowerShell](sql-database-get-started-backup-recovery.md).
>


> [!NOTE]
> В службе хранилища Azure термин *репликация* обозначает копирование файлов из одного расположения в другое. *Репликация базы данных SQL* означает хранение нескольких баз данных-получателей, синхронизированных с основной базой данных. 
> 
> 

## <a name="how-much-backup-storage-is-included-at-no-cost"></a>Сколько места для хранения резервных копий предоставляется бесплатно?
База данных SQL бесплатно предоставляет хранилище для резервных копий размером до 200 % от максимального объема подготовленного хранилища базы данных. Например, если вы используете экземпляр базы данных уровня "Стандартный" с подготовленным размером базы данных 250 ГБ, вам будет предоставлено бесплатное хранилище службы архивации объемом 500 ГБ. Если база данных будет использовать больший объем хранилища, вы можете сократить период хранения, обратившись в службу поддержки Azure. Другой вариант — оплачивать превышение объема для хранения резервных копий по стандартной ставке для географически избыточного хранилища с доступом для чтения (RA-GRS). 

## <a name="how-often-do-backups-happen"></a>Как часто создаются резервные копии?
Полные резервные копии базы данных создаются каждую неделю, разностные резервные копии, как правило, создаются каждые несколько часов, а резервные копии журналов транзакций создаются каждые 5–10 минут. Первое полное резервное копирование планируется сразу после создания базы данных. Обычно оно занимает не более 30 минут, но для базы данных большого размера может потребоваться больше времени. Например, начальное резервное копирование будет выполняться дольше для восстановленной базы данных или копии базы данных. После первого полного резервного копирования все последующие операции резервного копирования планируются автоматически и управляются без участия пользователя в фоновом режиме. Точное время создания всех копий базы данных определяет служба Базы данных SQL с учетом распределения общей рабочей нагрузки в системе. 

Георепликация хранилища службы архивации осуществляется по расписанию репликации службы хранилища Azure.

## <a name="how-long-do-you-keep-my-backups"></a>Как долго хранятся мои резервные копии?
Каждая резервная копия Базы данных SQL имеет свой срок хранения, который определяется по [уровню служб](sql-database-service-tiers.md) базы данных. Сроки хранения для разных баз данных


* Уровень служб "Базовый" — 7 дней.
* Уровень служб "Стандартный" — 35 дней.
* Уровень служб "Премиум" — 35 дней.

При переходе на более низкий уровень служб базы данных с уровня "Стандартный" или "Премиум" на "Базовый" резервные копии сохраняются в течение семи дней. Все существующие резервные копии старше семи дней становятся недоступными. 

При переходе на более высокий уровень служб базы данных с уровня "Базовый" на "Стандартный" или "Премиум" База данных SQL сохраняет существующие резервные копии до 35 дней. Она хранит новые резервные копии в течение 35 дней.

При удалении базы данных База данных SQL хранит резервные копии так же, как и для базы данных в Интернете. Например, предположим, что была удалена база данных уровня "Базовый", имеющая срок хранения&7; дней. Резервная копия, хранящаяся четыре дня, будет храниться еще три дня.

> [!IMPORTANT]
> Если вы удаляете сервер SQL Azure, на котором размещены базы данных SQL, то все связанные с ним базы данных также будут удалены без возможности восстановления. Удаленный сервер восстановить невозможно.
> 
> 

## <a name="how-to-extend-the-backup-retention-period"></a>Как увеличить период удержания резервной копии?
Если приложению требуется, чтобы резервные копии были доступны в течение более длительного периода времени, можно продлить встроенный период удержания, настроив политику длительного периода удержания резервных копий для отдельных баз данных. Это позволит увеличить встроенный период удержания с 35 дней до 10 лет. Дополнительные сведения см. в статье [Storing Azure SQL Database Backups for up to&10; years](sql-database-long-term-retention.md) (Хранение резервных копий баз данных SQL Azure до&10; лет).

После добавления политики длительного периода удержания резервных копий в базу данных с помощью портала Azure или API еженедельные полные резервные копии базы данных будут автоматически скопированы в ваше хранилище службы архивации Azure. Если база данных зашифрована с использованием прозрачного шифрования, резервные копии будут автоматически шифроваться при хранении.  Хранилище служб будет автоматически удалять резервные копии с истекшим сроком действия с учетом меток времени и политики длительного периода удержания резервных копий.  Поэтому вам не нужно управлять расписанием резервного копирования или беспокоиться об очистке старых файлов. API восстановления поддерживает резервные копии, содержащиеся в хранилище, при условии, что хранилище находится в той же подписке, что и База данных SQL. Для доступа к этим резервным копиям можно воспользоваться порталом Azure или PowerShell.

> [!TIP]
> Руководство приведено в статье [Начало работы с резервным копированием и восстановлением для защиты и восстановления данных с помощью PowerShell](sql-database-get-started-backup-recovery.md).
>

## <a name="next-steps"></a>Дальнейшие действия

- Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. Дополнительные сведения о других решениях для базы данных SQL Azure, обеспечивающих непрерывность бизнес-процессов, см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure](sql-database-business-continuity.md).
- Восстановление до точки во времени описывается в разделе [Восстановление базы данных SQL Azure до точки во времени](sql-database-point-in-time-restore.md).
- Чтобы просмотреть самую старую точку восстановления из резервных копий базы данных, создаваемых службой, ознакомьтесь со статьей [Просмотр самой старой точки восстановления из резервных копий базы данных SQL Azure, создаваемых службой](sql-database-view-oldest-restore-point.md).
- Чтобы настроить долгосрочное хранение создаваемых автоматически резервных копий в хранилище служб восстановления Azure, ознакомьтесь со статьей [Настройка долгосрочного хранения создаваемых автоматически резервных копий в хранилище служб восстановления Azure](sql-database-configure-long-term-retention.md).



<!--HONumber=Feb17_HO1-->


