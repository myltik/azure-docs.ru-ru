---
title: Псевдоним DNS для Базы данных SQL Azure | Документация Майкрософт
description: Приложения могут подключаться к псевдониму для имени сервера Базы данных SQL Azure. Кроме того, в любое время можно изменить базу данных SQL, на которую указывает псевдоним, чтобы упростить тестирование и т. д.
services: sql-database
author: MightyPen
manager: craigg
ms.service: sql-database
ms.custom: DNS alias
ms.topic: conceptual
ms.date: 02/05/2018
ms.reviewer: genemi;ayolubek
ms.author: dmalik
ms.openlocfilehash: da771f71566a912a3f172a1382bcd90ab0c3a0a2
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34646074"
---
# <a name="dns-alias-for-azure-sql-database"></a>Псевдоним DNS для Базы данных SQL Azure

Для Базы данных SQL Azure существует сервер службы доменных имен (DNS). PowerShell и REST API принимают [вызовы для создания псевдонимов DNS и управления ими](#anchor-powershell-code-62x) для имени сервера базы данных SQL.

*Псевдоним DNS* можно использовать вместо имени сервера Базы данных SQL Azure. Клиентские программы могут использовать псевдоним в строке подключения. Псевдоним DNS предоставляет слой преобразования, который может перенаправить клиентские программы на разные сервера. Этот слой избавляет вас от необходимости находить и редактировать все клиенты и их строки подключения.

Далее представлены общие случаи использования псевдонимов DNS:

- Создание легко запоминающегося имени для SQL Server Azure.
- Во время начальной разработки ваш псевдоним может ссылаться на тестовый сервер базы данных SQL. После активации приложения вы можете изменить псевдоним, чтобы он ссылался на рабочий сервер. При переходе от тестовой среды к рабочей не нужно менять конфигурации клиентов, которые подключаются к серверу базы данных.
- Предположим, что единственная база данных в вашем приложении перенесена на другой сервер базы данных SQL. Здесь вы можете изменить псевдоним без необходимости изменения конфигураций нескольких клиентов.

#### <a name="domain-name-system-dns-of-the-internet"></a>Служба доменных имен (DNS) Интернета

Интернет использует службу доменных имен (DNS). DNS преобразовывает понятные имена в имя сервера Базы данных SQL Azure.

## <a name="scenarios-with-one-dns-alias"></a>Сценарии с одним псевдонимом DNS

Предположим, вам нужно переключить свою систему на новый сервер Базы данных SQL Azure. Раньше вам нужно было найти и обновить каждую строку подключения в каждой клиентской программе. Но теперь, если в строках подключения используется псевдоним DNS, необходимо обновить только свойство "псевдоним".

Компонент "псевдоним" DNS Базы данных SQL Azure можно использовать в следующих сценариях.

#### <a name="test-to-production"></a>Переход от тестовой к рабочей среде

Включите использование псевдонима DNS в строках подключения в разработку клиентских программ. Добавьте свойства псевдонима к тестовой версии сервера Базы данных Azure SQL.

Позже, когда новая система будет доступна для использования, вы сможете обновить свойства псевдонима, указав на рабочий сервер базы данных SQL. Никаких изменений в клиентских программах не требуется.

#### <a name="cross-region-support"></a>Поддержка перехода в другой регион

Аварийное восстановление может привести к переходу вашего сервера базы данных SQL в другой географический регион. Для системы, которая использует псевдоним DNS, можно избежать необходимости поиска и обновления всех строк подключения для всех клиентов. Вместо этого вы можете обновить псевдоним, чтобы он ссылался на новый сервер базы данных SQL, в котором теперь находится ваша база данных.




## <a name="properties-of-a-dns-alias"></a>Свойства псевдонима DNS

Следующие свойства применимы к каждому псевдониму DNS для сервера базы данных SQL:

- *Уникальное имя.* Каждое создаваемое имя псевдонима уникально для всех серверов Базы данных SQL Azure так же, как имена серверов.

- *Необходим сервер.* Псевдоним DNS обязательно должен ссылаться на имеющийся сервер. В противном случае создать псевдоним невозможно. Обновленный псевдоним должен всегда ссылаться только на один имеющийся сервер.
    - При удалении сервера Базы данных SQL система Azure удаляет все псевдонимы DNS, ссылающиеся на него.

- *Отсутствие привязки к какому-либо региону.* Псевдонимы DNS не привязаны к региону. Любые псевдонимы DNS можно изменить таким образом, чтобы они ссылались на сервер Базы данных SQL Azure, который находится в любом географическом регионе.
    - Однако при этом оба сервера должны находится в одной *подписке* Azure.

- *Разрешения.* Для управления псевдонимом DNS пользователю нужно разрешение *Участник на уровне сервера* или разрешение с большими правами. Дополнительные сведения см. в статье [Начало работы с управлением доступом на основе ролей на портале Azure](../role-based-access-control/overview.md).





## <a name="manage-your-dns-aliases"></a>Управление псевдонимами DNS

Для программного управления псевдонимами DNS доступны командлеты REST API и PowerShell.

#### <a name="rest-apis-for-managing-your-dns-aliases"></a>REST API для управления псевдонимами DNS

<!-- TODO
??2 "soon" in the following live sentence, is not the best situation.
TODO update this subsection very soon after REST API docu goes live.
Dev = Magda Bojarska
Comment as of:  2018-01-26
-->

Документация по REST API доступна в следующей статье:
- [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) (REST API Базы данных SQL)

Кроме того, ознакомиться с REST API можно на сайте GitHub:
- [Azure SQL Database server, DNS alias REST APIs](https://github.com/Azure/azure-rest-api-specs/blob/master/specification/sql/resource-manager/Microsoft.Sql/preview/2017-03-01-preview/serverDnsAliases.json) (REST API сервера Базы данных SQL Azure и псевдонима DNS)

<a name="anchor-powershell-code-62x"/>

#### <a name="powershell-for-managing-your-dns-aliases"></a>PowerShell для управления псевдонимами DNS

Доступны командлеты PowerShell, которые вызывают REST API.

Пример кода командлетов PowerShell, используемых для управления псевдонимами DNS, приведен в следующей статье:
- [Управление псевдонимом DNS для Базы данных SQL Azure с помощью PowerShell](dns-alias-powershell.md)


В примере кода используются следующие командлеты:
- [New-AzureRMSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/AzureRM.Sql/New-AzureRmSqlServerDnsAlias?view=azurermps-5.1.1). Создает псевдоним DNS в системе службы "База данных SQL Azure". Псевдоним ссылается на сервер 1 Базы данных SQL Azure.
- [Get-AzureRMSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/AzureRM.Sql/Get-AzureRmSqlServerDnsAlias?view=azurermps-5.1.1). Получает и выводит все псевдонимы DNS, назначены серверу 1 Базы данных SQL.
- [Set-AzureRMSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/AzureRM.Sql/Set-AzureRmSqlServerDnsAlias?view=azurermps-5.1.1). Изменяет имя сервера базы данных SQL, на который ссылается псевдоним, с "Сервер 1" на "Сервер 2".
- [Remove-AzureRMSqlServerDNSAlias](https://docs.microsoft.com/powershell/module/AzureRM.Sql/Remove-AzureRmSqlServerDnsAlias?view=azurermps-5.1.1). С помощью имени псевдонима удаляет псевдоним DNS с сервера 2 базы данных SQL.


Предыдущие командлеты были добавлены в модуль **AzureRM.Sql**, начиная с модуля версии 5.1.1.




## <a name="limitations-during-preview"></a>Ограничения для предварительной версии

Сейчас для псевдонима DNS существуют следующие ограничения:

- *Задержка до 2 минут.* Для обновления или удаления псевдонима DNS требуется до 2 минут.
    - Независимо от задержки (даже небольшой), псевдоним немедленно прекращает ссылаться на клиентские подключения к устаревшему серверу.

- *Поиск DNS.* [Поиск DNS](https://docs.microsoft.com/windows-server/administration/windows-commands/nslookup) — это единственный надежный способ проверить, на какой сервер ссылается псевдоним DNS.

- *[Аудит таблиц не поддерживается](sql-database-auditing-and-dynamic-data-masking-downlevel-clients.md).* Невозможно использовать псевдоним DNS на сервере Базы данных SQL Azure, в которой включен *аудит таблиц*.
    - Аудит таблиц не рекомендуется.
    - Рекомендуем использовать [аудит больших двоичных объектов](sql-database-auditing.md).




## <a name="related-resources"></a>Связанные ресурсы

- Сведения об аварийном восстановлении см. в статье [Overview of business continuity with Azure SQL Database](sql-database-business-continuity.md) (Общие сведения об обеспечении непрерывности бизнес-процессов с помощью Базы данных SQL Azure).



## <a name="next-steps"></a>Дополнительная информация

- [Управление псевдонимом DNS для Базы данных SQL Azure с помощью PowerShell](dns-alias-powershell.md)

