---
title: 'Azure Active Directory B2C: вспомогательное средство для настройки пользовательского интерфейса страницы | Документация Майкрософт'
description: Вспомогательное средство, которое используется для демонстрации настройки пользовательского интерфейса страницы в Azure Active Directory B2C.
services: active-directory-b2c
documentationcenter: ''
author: davidmu1
manager: mtillman
editor: ''
ms.service: active-directory-b2c
ms.workload: identity
ms.topic: article
ms.date: 01/07/2017
ms.author: davidmu
ms.openlocfilehash: f898c626d52b1a4e7df72284190749f4481999ad
ms.sourcegitcommit: 48ab1b6526ce290316b9da4d18de00c77526a541
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2018
---
# <a name="azure-active-directory-b2c-a-helper-tool-used-to-demonstrate-the-page-user-interface-ui-customization-feature"></a>Azure Active Directory B2C: вспомогательное средство, используемое для демонстрации настройки пользовательского интерфейса для страницы пользователя
Эта статья дополняет [основную статью о настройке пользовательского интерфейса](active-directory-b2c-reference-ui-customization.md) в Azure Active Directory (Azure AD) B2C. Описанные ниже действия показывают, как работать с функцией настройки пользовательского интерфейса страницы на основе предоставленных нами примеров HTML и CSS.

## <a name="get-an-azure-ad-b2c-tenant"></a>Получение клиента Azure AD B2C
Прежде чем выполнять какую-либо настройку, необходимо [получить клиент Azure AD B2C](active-directory-b2c-get-started.md) (если у вас еще нет его).

## <a name="create-a-sign-up-or-sign-in-policy"></a>Создание политики регистрации или входа в систему
Этот пример содержимого можно использовать для настройки двух страниц в [политике регистрации или входа](active-directory-b2c-reference-policies.md): [единой страницы входа](active-directory-b2c-reference-ui-customization.md) и [страницы самостоятельно утвержденных атрибутов](active-directory-b2c-reference-ui-customization.md). При [создании политики регистрации и входа](active-directory-b2c-reference-policies.md#create-a-sign-up-or-sign-in-policy)добавьте в качестве **поставщиков удостоверений**локальную учетную запись (адрес электронной почты), Facebook, Google и Microsoft. Наш пример HTML принимает только этих поставщиков удостоверений.  При желании можно также добавить подмножество этих поставщиков удостоверений.

## <a name="register-an-application"></a>Регистрация приложения
Вам потребуется [зарегистрировать](active-directory-b2c-app-registration.md) приложение в клиенте B2C, который можно использовать для выполнения вашей политики. После этого вы получите несколько опций, которые можно будет использовать для выполнения вашей политики регистрации:

* Создайте одно из приложений быстрого запуска Azure AD B2C, перечисленных в разделе "Приступая к работе" статьи [Azure Active Directory B2C: регистрация и вход пользователей в приложения](active-directory-b2c-overview.md#get-started).
* Использовать предварительно построенное приложение [площадки Azure AD B2C](https://aadb2cplayground.azurewebsites.net) . В этом случае вам придется зарегистрировать приложение в клиенте B2C, используя **URI перенаправления** `https://aadb2cplayground.azurewebsites.net/`.
* Воспользуйтесь кнопкой **Выполнить** для вашей политики на [портале Azure](https://portal.azure.com/).

## <a name="customize-your-policy"></a>Настройка политики
Для настройки внешнего вида и поведения политик необходимо в первую очередь создать файлы HTML и CSS, используя определенные соглашения Azure AD B2C. Затем вы сможете загрузить статическое содержимое в общедоступное место, сделав его доступным для Azure AD B2C. Это может быть ваш собственный выделенный веб-сервер, хранилище BLOB-объектов Azure, сеть доставки содержимого Azure или любой другой поставщик статических ресурсов. Единственное требование — это возможность получения доступа к содержимому по протоколу HTTPS и с помощью CORS. Переместив статическое содержимое в сеть, вы сможете изменить политику таким образом, чтобы она указывала на это место и предоставляла содержимое пользователям. В [основной статье о настройке пользовательского интерфейса](active-directory-b2c-reference-ui-customization.md) подробно описано, как работает функция настройки Azure AD B2C.

В контексте этого руководства мы уже создали образец содержимого и разместили его в хранилище больших двоичных объектов Azure. Пример содержимого — это базовая настройка темы для нашей вымышленной компании Wingtip Toys. Чтобы опробовать его в вашей собственной политике, выполните описанные ниже действия.

1. Войдите в свой клиент на [портале Azure](https://portal.azure.com/) и откройте колонку функций B2C.
2. Щелкните **Политики регистрации и входа** и выберите свою политику (например, b2c\_1\_sign\_up\_sign\_in).
3. Щелкните **Настройка пользовательского интерфейса страницы**, а затем — **Единая страница регистрации или входа**.
4. Установите переключатель **Использовать настраиваемую страницу** в положение **Да**. В поле **URI пользовательской страницы** введите `https://wingtiptoysb2c.blob.core.windows.net/b2c/wingtip/unified.html`. Последовательно выберите **ОК**.
5. Щелкните **страницу регистрации локальной учетной записи**. Установите переключатель **Использовать настраиваемый шаблон** в положение **Да**. В поле **URI пользовательской страницы** введите `https://wingtiptoysb2c.blob.core.windows.net/b2c/wingtip/selfasserted.html`.
6. Повторите этот шаг для **страницы регистрации учетных записей социальных сетей**.
   Дважды нажмите кнопку **ОК** , чтобы закрыть колонки настройки пользовательского интерфейса.
7. Выберите команду **Сохранить**.

Теперь можно испытать настраиваемую политику в деле. При желании вы можете использовать собственное приложение или площадку Azure AD B2C. Либо просто нажмите кнопку **Выполнить сейчас** в колонке политики. Выберите в раскрывающемся списке приложение и соответствующий URI перенаправления. Нажмите кнопку **Выполнить**. Откроется новая вкладка браузера, и вы сможете зарегистрировать пользователя в приложении, в котором уже есть новое содержимое!

## <a name="upload-the-sample-content-to-azure-blob-storage"></a>Передача образцов содержимого в хранилище больших двоичных объектов Azure
Если вы хотите разместить содержимое страницы в хранилище больших двоичных объектов Azure, создайте собственную учетную запись хранения и загрузите файлы с помощью вспомогательного средства B2C.

### <a name="create-a-storage-account"></a>Создайте учетную запись хранения.
1. Войдите на [портале Azure](https://portal.azure.com/).
2. Последовательно выберите пункты **+Создать** > **Данные+хранилище** > **Учетная запись хранения**. Для создания учетной записи хранения больших двоичных объектов Azure требуется подписка Azure. Вы можете оформить подписку на бесплатную пробную версию на [веб-сайте Azure](https://azure.microsoft.com/pricing/free-trial/).
3. Укажите **имя** учетной записи (например, contoso) и выберите соответствующие значения для **ценовой категории**, **группы ресурсов** и **подписки**. Убедитесь, что флажок **Закрепить на начальной панели** установлен. Нажмите кнопку **Создать**.
4. Вернитесь на начальную панель и щелкните только что созданную учетную запись хранения.
5. В разделе **Сводка** щелкните **Контейнеры** и **+Добавить**.
6. Введите **имя** контейнера (например, b2c) и для параметра **Тип доступа** выберите значение **Большой двоичный объект**. Последовательно выберите **ОК**.
7. Созданный контейнер появится в списке в колонке **Большие двоичные объекты**. Запишите URL-адрес контейнера. Он может выглядеть так: `https://contoso.blob.core.windows.net/b2c`. Закройте колонку **Большие двоичные объекты**.
8. В колонке учетной записи хранения щелкните **Ключи** и запишите значения полей **Имя учетной записи хранения** и **Первичный ключ доступа**.

> [!NOTE]
> **Первичный ключ доступа** — важная составляющая системы безопасности.
> 
> 

### <a name="download-the-helper-tool-and-sample-files"></a>Загрузка вспомогательного средства и образцы файлов
Вы можете скачать [вспомогательное средство хранилища больших двоичных объектов Azure и примеры файлов в виде ZIP-архива здесь](https://github.com/azureadquickstarts/b2c-azureblobstorage-client/archive/master.zip) или клонировать его из GitHub.

```
git clone https://github.com/azureadquickstarts/b2c-azureblobstorage-client
```

Этот репозиторий включает в себя каталог `sample_templates\wingtip` , который содержит пример кода HTML и CSS, а также изображения. Для того чтобы эти шаблоны ссылались именно на вашу учетную запись в хранилище больших двоичных объектов Azure, необходимо изменить HTML-файлы. Откройте `unified.html` и `selfasserted.html`, затем замените все экземпляры `https://localhost` URL-адресом вашего контейнера, записанным ранее. Необходимо использовать абсолютный путь к HTML-файлам, так как в этом случае Azure AD будет обслуживать HTML в домене `https://login.microsoftonline.com`.

### <a name="upload-the-sample-files"></a>Загрузка образцов файлов
В том же репозитории распакуйте `B2CAzureStorageClient.zip` и запустите файл `B2CAzureStorageClient.exe` из этого архива. Эта программа просто загружает все файлы в каталог, указанный в вашей учетной записи хранения, и обеспечивает доступ к этим файлам с помощью CORS. Если вы выполнили описанные выше шаги, HTML и CSS-файлы будут указывать на учетную запись хранения. Обратите внимание, что имя вашей учетной записи хранения представляет собой часть, предшествующую `blob.core.windows.net`, например `contoso`. Вы можете проверить, что содержимое отправлено правильно, попробовав получить доступ к `https://{storage-account-name}.blob.core.windows.net/{container-name}/wingtip/unified.html` в браузере. Кроме того, перейдите по адресу [http://test-cors.org/](http://test-cors.org/) и проверьте, включен ли для содержимого доступ CORS. (Ищите "XHR status: 200" в результате проверки.)

### <a name="customize-your-policy-again"></a>Повторная настройка политики
Теперь, когда образец содержимого загружен в свою учетную запись хранения, политику регистрации нужно изменить таким образом, чтобы она ссылалась на этот образец. Повторите действия из приведенного выше раздела [Настройка политики](#customize-your-policy) , но на этот раз используйте URL-адреса вашей учетной записи хранения. Например, файл `unified.html` будет расположен по адресу `<url-of-your-container>/wingtip/unified.html`.

Теперь еще раз запустите политику с помощью кнопки **Выполнить** (или используя свое приложение). Результат выглядит практически так же, поскольку в обоих случаях использовался один и тот же образец HTML и CSS-кода. Однако теперь политики ссылаются на наш собственный экземпляр хранилища BLOB-объектов Azure, а значит, вы можете спокойно редактировать и отправлять файлы. Дополнительные сведения о настройке HTML и CSS-кода см. в [статье о настройке основного пользовательского интерфейса](active-directory-b2c-reference-ui-customization.md).

