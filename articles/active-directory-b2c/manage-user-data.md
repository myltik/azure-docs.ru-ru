---
title: Управление пользовательскими данными в Azure AD B2C | Документы Майкрософт
description: Сведения о том, как удалить или экспортировать пользовательские данные в Azure AD B2C.
services: active-directory-b2c
author: davidmu1
manager: mtillman
ms.service: active-directory-b2c
ms.workload: identity
ms.topic: article
ms.date: 05/06/2018
ms.author: davidmu
ms.openlocfilehash: 414221c3e4942801b5792835d520ec936c8c4bbb
ms.sourcegitcommit: d98d99567d0383bb8d7cbe2d767ec15ebf2daeb2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/10/2018
ms.locfileid: "33932532"
---
# <a name="manage-user-data-in-azure-ad-b2c"></a>Управление пользовательскими данными в Azure AD B2C

 Эта статья содержит сведения об управлении пользовательскими данными в Azure Active Directory (AD) B2C с помощью операций, предоставляемых [API Graph Azure Active Directory](https://msdn.microsoft.com/en-us/library/azure/ad/graph/api/api-catalog). Управление пользовательскими данными включает в себя возможность удаления данных или их экспорта из журналов аудита.

[!INCLUDE [gdpr-intro-sentence.md](../../includes/gdpr-intro-sentence.md)]

## <a name="delete-user-data"></a>Удаление пользовательских данных

Пользовательские данные хранятся в каталоге Azure AD B2C и журналах аудита. Все пользовательские данные аудита сохраняются в течение 30 дней в Azure AD B2C. Если вы хотите удалить данные пользователя в течение этого 30-дневного срока, можно использовать операцию [Удалить пользователя](https://msdn.microsoft.com/library/azure/ad/graph/api/users-operations#DeleteUser). Операция удаления требуется для каждого из клиентов Azure AD B2C, где могут храниться данные. 

Каждому пользователю в Azure AD B2C назначается идентификатор объекта. Это однозначный идентификатор, позволяющий удалить пользовательские данные в Azure AD B2C.  В зависимости от архитектуры идентификатор объекта может являться полезным идентификатором корреляции в других службах, например базах данных для финансовых и маркетинговых сведений, а также для управления отношениями с клиентами.  

Наиболее точным является получение идентификатора объекта для пользователя в рамках проверки подлинности в Azure AD B2C.  Если от пользователя получен допустимый запрос к данным с помощью других методов, для поиска этого пользователя и уточнения идентификатора объекта может потребоваться автономная процедура, например поиск агентом поддержки из центра обслуживания клиентов. 

Следующий пример показывает возможную процедуру удаления данных:

1. Пользователь выполняет вход и выбирает **Delete my data** (Удалить мои данные).
2. Приложение предлагает возможность удаления данных в разделе администрирования приложения.
3. Приложение принудительно выполняет проверку подлинности в Azure AD B2C. Azure AD B2C возвращает в приложение токен с идентификатором объекта этого пользователя. 
4. Приложение получает токен и использует идентификатор объекта для удаления пользовательских данных путем вызова API Graph Azure AD. API Graph Azure AD удаляет пользовательские данные и возвращает код состояния 200 OK.
5. При необходимости приложение управляет удалением пользовательских данных в других системах организации, используя идентификатор объекта или другие идентификаторы.
6. Приложение подтверждает удаление данных и сообщает пользователю о следующих шагах.

## <a name="export-customer-data"></a>Экспорт данных клиента

Процесс экспорта данных клиента из Azure AD B2C похожа на процедуру удаления.

Пользовательские данные Azure AD B2C ограничены следующим:

- **Данные, хранящиеся в Azure Active Directory** — данные можно извлечь в рамках проверки подлинности пользователя в Azure AD B2C, используя идентификатор объекта или любое учетное имя, например адрес электронной почты или имя пользователя.  
- **Отчет о событиях аудита для конкретного пользователя** — данные индексируются с использованием идентификатора объекта.

В следующем примере с процедурой экспорта данных действия, описанные как выполняемые приложением, могут выполняться серверным процессом или пользователем с ролью администратора в каталоге:

1. Пользователь входит в приложение. Azure AD B2C принудительно выполняет проверку подлинности с многофакторной авторизацией, если это необходимо.
2. Приложение использует учетные данные пользователя для вызова операции API Graph Azure AD для получения атрибутов пользователя. API Graph Azure AD предоставляет данные атрибутов в формате JSON. В зависимости от схемы содержимое токена идентификатора может включать в себя все персональные данные о пользователе.
3. Приложение извлекает действия аудита для конечного пользователя. API Graph Azure AD предоставляет приложению данные о событии.
4. Приложение объединяет данные и предоставляет их пользователю.

## <a name="next-steps"></a>Дополнительная информация

- Вы можете узнать, как управлять доступом пользователей к приложению, в разделе [Управление доступом пользователей](manage-user-access.md)




