---
title: Azure Active Directory B2C. Общие сведения о пользовательских политиках начального пакета | Документация Майкрософт
description: В этой статье описываются пользовательские политики Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: ''
author: davidmu1
manager: mtillman
editor: ''
ms.service: active-directory-b2c
ms.workload: identity
ms.topic: article
ms.date: 04/25/2017
ms.author: davidmu
ms.openlocfilehash: 12f63bc42f8450f086ed9f0e8d598c9c91a0c3d4
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2018
---
# <a name="understanding-the-custom-policies-of-the-azure-ad-b2c-custom-policy-starter-pack"></a>Общие сведения о пользовательских политиках начального пакета Azure Active Directory B2C

В этой статье перечислены все основные элементы политики B2C_1A_base, которые входят в **начальный пакет** и используются для создания собственных политик путем наследования политики *B2C_1A_base_extensions*.

Таким образом, здесь особое внимание уделяется определенным типам утверждений, преобразованию утверждений, определениям содержимого, поставщикам утверждений с их техническими профилями и основным путям взаимодействия пользователя.

> [!IMPORTANT]
> Корпорация Майкрософт не дает никаких явных или подразумеваемых гарантий в отношении представленной ниже информации. Изменения могут быть внесены в любое время: до, во время или после выпуска общедоступной версии.

Как ваши собственные политики, так и политика B2C_1A_base_extensions могут переопределить эти определения и расширить эту родительскую политику, добавив при необходимости дополнительные.

Основные элементы *политики B2C_1A_base* — это типы утверждений, преобразования утверждений и определения содержимого. На эти элементы можно ссылаться в собственных политиках, а также в *политике B2C_1A_base_extensions*.

## <a name="claims-schemas"></a>Схемы утверждений

Схемы утверждений состоят из трех разделов:

1.  Первый раздел содержит минимальные утверждения, требуемые для правильной работы путей взаимодействия пользователя.
2.  Второй раздел содержит утверждения, необходимые для параметров строки запроса и других особых параметров, которые нужно передавать другим поставщикам утверждений, особенно для проверки подлинности в домене login.microsoftonline.com. **Не изменяйте эти утверждения**.
3.  Третий раздел содержит дополнительные необязательные утверждения, которые можно получить от пользователя, сохранить в каталоге и отправить в токенах во время входа. В этом разделе можно добавить новые типы утверждений, которые можно получить от пользователя или отправить в токенах.

> [!IMPORTANT]
> Схема утверждений содержит ограничения на определенные утверждения, такие как пароли и имена пользователей. Для политики инфраструктуры доверия Azure AD рассматривается так же, как и любой другой поставщик утверждений. Все ограничения смоделированы в настраиваемой политике. Политику можно изменить, чтобы добавить дополнительные ограничения или использовать другой поставщик утверждений для хранилища учетных данных со своими ограничениями.

Ниже перечислены доступные типы утверждений.

### <a name="claims-that-are-required-for-the-user-journeys"></a>Утверждения, необходимые для путей взаимодействия пользователя

Следующие утверждения необходимы для правильной работы путей взаимодействия пользователя:

| Тип утверждения | ОПИСАНИЕ |
|-------------|-------------|
| *UserId* | Имя пользователя |
| *signInName* | Имя входа |
| *tenantId* | Идентификатор клиента объекта-пользователя в Azure AD B2C |
| *objectId* | Идентификатор объекта-пользователя в Azure AD B2C |
| *password* | Пароль |
| *newPassword* | |
| *reenterPassword* | |
| *passwordPolicies* | Политики пароля, используемые Azure AD B2C, определяющие надежность пароля, срок действия и т. д. |
| *sub* | |
| *alternativeSecurityId* | |
| *identityProvider* | |
| *displayName* | |
| *strongAuthenticationPhoneNumber* | Номер телефона пользователя |
| *Verified.strongAuthenticationPhoneNumber* | |
| *email* | Адрес электронной почты, который может использоваться для связи с пользователем |
| *signInNamesInfo.emailAddress* | Адрес электронной почты, который пользователь может использовать для входа |
| *otherMails* | Адреса электронной почты, которые могут использоваться для связи с пользователем |
| *userPrincipalName* | Имя пользователя, сохраненное в Azure AD B2C |
| *upnUserName* | Имя пользователя для создания имени субъекта-пользователя |
| *mailNickName* | Псевдоним пользовательской почты, сохраненный в Azure AD B2C |
| *newUser* | |
| *executed-SelfAsserted-Input* | Утверждение, которое указывает, были ли получены от пользователя атрибуты |
| *executed-PhoneFactor-Input* | Утверждение, которое указывает, был ли получен от пользователя номер телефона |
| *authenticationSource* | Указывает, прошел ли пользователь проверку подлинности в поставщике удостоверений социальных сетей, на сайте login.microsoftonline.com или с использованием локальной учетной записи |

### <a name="claims-required-for-query-string-parameters-and-other-special-parameters"></a>Утверждения, необходимые для параметров строки запроса и других особых параметров

Следующие утверждения необходимы для передачи особых параметров (в том числе некоторые параметры строки запроса) другим поставщикам утверждений:

| Тип утверждения | ОПИСАНИЕ |
|-------------|-------------|
| *nux* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *nca* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *prompt* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *mkt* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *lc* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *grant_type* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *scope* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *client_id* | Специальный параметр, который передается для проверки подлинности локальной учетной записи на сайт login.microsoftonline.com |
| *objectIdFromSession* | Параметр, предоставленный поставщиком управления сеансами по умолчанию, чтобы указать, что идентификатор объекта был получен из сеанса единого входа |
| *isActiveMFASession* | Параметр, предоставленный поставщиком управления сеансами MFA по умолчанию, чтобы указать, что у пользователя активен сеанс MFA |

### <a name="additional-optional-claims-that-can-be-collected"></a>Дополнительные (необязательные) утверждения для сбора

Далее представлены дополнительные утверждения, которые можно получить от пользователей, сохранить в каталоге и отправить в токене. Как упоминалось выше, дополнительные утверждения можно добавить к этому списку.

| Тип утверждения | ОПИСАНИЕ |
|-------------|-------------|
| *givenName* | Имя пользователя |
| *surname* | Фамилия пользователя |
| *Extension_picture* | Фотография пользователя из социальных сетей |

## <a name="claim-transformations"></a>Преобразования утверждения

Ниже перечислены доступные преобразования утверждений.

| Преобразования утверждения | ОПИСАНИЕ |
|----------------------|-------------|
| *CreateOtherMailsFromEmail* | |
| *CreateRandomUPNUserName* | |
| *CreateUserPrincipalName* | |
| *CreateSubjectClaimFromObjectID* | |
| *CreateSubjectClaimFromAlternativeSecurityId* | |
| *CreateAlternativeSecurityId* | |

## <a name="content-definitions"></a>Определения содержимого

В этом разделе описываются определения содержимого, уже объявленные в политике *B2C_1A_base*. На эти определения можно ссылаться, их можно переопределять или расширять по мере необходимости в собственных политиках и в политике *B2C_1A_base_extensions*.

| Поставщик утверждений | ОПИСАНИЕ |
|-----------------|-------------|
| *Facebook* | |
| *Вход с использованием локальной учетной записи* | |
| *PhoneFactor* | |
| *Azure Active Directory* | |
| *Самоподтверждение* | |
| *Локальная учетная запись* | |
| *Управление сеансами* | |
| *Подсистема политик инфраструктуры доверия* | |
| *Технические профили* | |
| *Поставщик токенов* | |

## <a name="technical-profiles"></a>Технические профили

В этом разделе описаны технические профили, уже объявленные поставщиком утверждений в политике *B2C_1A_base*. На эти технические профили можно ссылаться, их можно переопределять или расширять по мере необходимости в собственных политиках и в политике *B2C_1A_base_extensions*.

### <a name="technical-profiles-for-facebook"></a>Технические профили для Facebook

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *Facebook-OAUTH* | |

### <a name="technical-profiles-for-local-account-signin"></a>Технические профили для входа с использованием локальной учетной записи

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *Login-NonInteractive* | |

### <a name="technical-profiles-for-phone-factor"></a>Технические профили для PhoneFactor

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *PhoneFactor-Input* | |
| *PhoneFactor-InputOrVerify* | |
| *PhoneFactor-Verify* | |

### <a name="technical-profiles-for-azure-active-directory"></a>Технические профили для Azure Active Directory

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *AAD-Common* | Технические профили, включенные другими техническими профилями AAD |
| *AAD-UserWriteUsingAlternativeSecurityId* | Технический профиль для входа в социальные сети |
| *AAD-UserReadUsingAlternativeSecurityId* | Технический профиль для входа в социальные сети |
| *AAD-UserReadUsingAlternativeSecurityId-NoError* | Технический профиль для входа в социальные сети |
| *AAD-UserWritePasswordUsingLogonEmail* | Технический профиль для локальных учетных записей |
| *AAD-UserReadUsingEmailAddress* | Технический профиль для локальных учетных записей |
| *AAD-UserWriteProfileUsingObjectId* | Технический профиль для обновления записи пользователя с помощью objectId |
| *AAD-UserWritePhoneNumberUsingObjectId* | Технический профиль для обновления записи пользователя с помощью objectId |
| *AAD-UserWritePasswordUsingObjectId* | Технический профиль для обновления записи пользователя с помощью objectId |
| *AAD-UserReadUsingObjectId* | Технический профиль, используемый для считывания данных после проверки подлинности пользователя |

### <a name="technical-profiles-for-self-asserted"></a>Технические профили для самоподтверждения

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *SelfAsserted-Social* | |
| *SelfAsserted-ProfileUpdate* | |

### <a name="technical-profiles-for-local-account"></a>Технические профили для локальной учетной записи

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *LocalAccountSignUpWithLogonEmail* | |

### <a name="technical-profiles-for-session-management"></a>Технические профили для управления сеансами

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *SM-Noop* | |
| *SM-AAD* | |
| *SM-SocialSignup* | Имя профиля, используемое для устранения неоднозначности сеанса AAD между регистрацией и входом |
| *SM-SocialLogin* | |
| *SM-MFA* | |

### <a name="technical-profiles-for-trustframework-policy-engine-technicalprofiles"></a>Технические профили для технических профилей и подсистемы политик инфраструктуры доверия

Сейчас технические профили для поставщика утверждений **технические профили и подсистема политик инфраструктуры доверия** не определены.

### <a name="technical-profiles-for-token-issuer"></a>Технические профили для поставщика токенов

| Технический профиль | ОПИСАНИЕ |
|-------------------|-------------|
| *JwtIssuer* | |

## <a name="user-journeys"></a>Пути взаимодействия пользователя

В этом разделе описываются пути взаимодействия пользователя, уже объявленные в политике *B2C_1A_base*. На эти пути взаимодействия пользователя можно ссылаться, их можно переопределять или расширять по мере необходимости в собственных политиках и в политике *B2C_1A_base_extensions*.

| Пути взаимодействия пользователя | ОПИСАНИЕ |
|--------------|-------------|
| *SignUp* | |
| *SignIn* | |
| *SignUpOrSignIn* | |
| *EditProfile* | |
| *PasswordReset* | |
