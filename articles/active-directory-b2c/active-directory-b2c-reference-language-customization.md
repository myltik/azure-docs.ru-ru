---
title: "Azure Active Directory B2C. Настройка языка | Документация Майкрософт"
description: 
services: active-directory-b2c
documentationcenter: 
author: sama
ms.assetid: eec4d418-453f-4755-8b30-5ed997841b56
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/25/2017
ms.author: sama
ms.translationtype: Human Translation
ms.sourcegitcommit: 97fa1d1d4dd81b055d5d3a10b6d812eaa9b86214
ms.openlocfilehash: 7134467421927e9a26e23f89684eeb6864a2f9a3
ms.contentlocale: ru-ru
ms.lasthandoff: 05/11/2017


---
# <a name="azure-active-directory-b2c-using-language-customization"></a>Azure Active Directory B2C. Настройка языка

>[!NOTE] 
>Эта функция предоставляется в общедоступной предварительной версии.  При использовании этой функции мы рекомендуем применять тестовый клиент.  Мы не планируем вносить критические изменения в общедоступный выпуск (по сравнению с предварительной версией), но оставляем за собой право вносить такие изменения для улучшения этой функции.  Воспользовавшись этой функцией, оставьте свой отзыв и помогите нам улучшить ее.  Отзыв можно отправить на портале Azure, щелкнув смайлик в правом верхнем углу.   Если вашей компании требуется активировать эту функцию на этапе предварительной версии, сообщите нам о своих сценариях и мы предоставим вам соответствующие рекомендации и помощь.  Свяжитесь с нами по адресу [aadb2cpreview@microsoft.com](mailto:aadb2cpreview@microsoft.com).

Настройка языка позволяет пользователям переключаться на другой язык в соответствии с потребностями.  Мы предоставляем переводы на 37 языков (см. раздел [Дополнительные сведения](#additional-information)).  Даже если вам требуется только один язык, любой текст на странице можно настроить в соответствии с потребностями.  

## <a name="how-does-language-customization-work"></a>Как работает настройка языка?
Настройка языка позволяет выбрать языки, доступные пользователю.  Если эта функция включена, в приложении можно предоставить параметр строки запроса ui_locales.  При вызове Azure AD B2C выполняется перевод страницы на указанный языковой стандарт.  При использовании такой конфигурации вы получаете полный контроль над языками, доступными пользователю, а языковые параметры браузера клиента игнорируются.  В некоторых случаях вам может не понадобиться такой уровень контроля за тем, какие языки будут доступны пользователю.  Если не предоставить параметр ui_locales, настройка языка будет зависеть от параметров браузера.  Вы сможете управлять тем, какие языки будут доступны пользователю, добавив их в качестве поддерживаемых.  Если браузер клиента настроен для отображения на языке, который не требуется поддерживать, вместо него будет отображаться язык, выбранный по умолчанию для поддерживаемых языков.

1. **Язык, указанный с помощью ui-locales**. После включения настройки языка путь взаимодействия пользователя переводится на указанный язык.
2. **Язык, запрашиваемый браузером**. Если параметр ui-locales не указан, используется язык, запрашиваемый браузером, **если он был включен в поддерживаемые языки**.
3. **Язык политики по умолчанию**. Если язык не указан или указан неподдерживаемый язык, будет использоваться язык политики по умолчанию.

>[!NOTE]
>Если используются пользовательские атрибуты, необходимо предоставить собственный перевод.  Подробные сведения см. в разделе [Настройка строк](#customize-your-strings).
>

## <a name="support-uilocales-requested-languages"></a>Поддержка языков, запрашиваемых ui_locales 
Включив в политике настройки языка, вы сможете управлять языками, доступными пользователю, добавив параметр ui_locales.
1. [Выполните эти действия, чтобы перейти к колонке функций B2C на портале Azure.](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-app-registration#navigate-to-the-b2c-features-blade)
2. Перейдите к политике, которую нужно включить.
3. Щелкните **Настройка языка**.
4. Внимательно прочтите предупреждение.  После включения настройку языка невозможно отключить.
5. Включите функцию и нажмите кнопку **ОК**.
6. Сохраните политику в верхнем левом углу колонки **Изменение политики**.

## <a name="select-which-languages-your-user-journey-supports"></a>Выбор поддерживаемых языков 
Создайте список языков, разрешенных для пути взаимодействия пользователя, если параметр ui_locales не задан.
1. Убедитесь, что в политике включена настройка языка, описанная выше.
2. В колонке **Изменение политики** выберите **Настройка языка**.
3. Откроется колонка **Поддерживаемые языки**.  Выберите в ней **Добавить ресурс**.
4. Выберите все языки, поддержка которых необходима.  

>[!NOTE]
>Если параметр ui_locales не указан, то страница будет переведена на язык браузера клиента, только если он указан в этом списке.
>

5. В нижней части нажмите кнопку **ОК**.
6. Закройте колонку **Настройка языка** и **сохраните** политику.

## <a name="customize-your-strings"></a>Настройка строк
Настройка языка позволяет настроить любую строку, с которой взаимодействует пользователь.
1. Убедитесь, что в политике включена настройка языка, описанная выше.
2. В колонке **Изменение политики** выберите **Настройка языка**.
3. В меню навигации слева выберите **Скачать контент**.
4. Выберите страницу, которую требуется изменить.
5. В раскрывающемся списке выберите нужный язык.
6. Щелкните элемент **Загрузить**. 

В результате будет создан JSON-файл, который можно использовать для изменения строк.

### <a name="changing-any-string-on-the-page"></a>Изменение любой строки на странице
1. Откройте скачанный JSON-файл в редакторе JSON.
2. Найдите элемент, который требуется изменить.  Вы можете найти `StringId` искомой строки или найти `Value`, которое вы хотите изменить.
3. Замените атрибут `Value` значением, которое требуется отобразить.
4. Сохраните файл и отправьте изменения.

### <a name="changing-extension-attributes"></a>Изменение атрибутов расширения
Если вы хотите изменить или добавить в JSON строку пользовательского атрибута, это нужно сделать в следующем формате:
```JSON
{
  "LocalizedStrings": [
    {
      "ElementType": "ClaimType",
      "ElementId": "extension_<ExtensionAttribute>",
      "StringId": "DisplayName",
      "Override": false,
      "Value": "<ExtensionAttributeValue>"
    }
    [...]
}
```
>[!IMPORTANT]
>Если необходимо переопределить строку, измените значение `Override` на `true`.  В противном случае запись не учитывается. 
>

Замените `<ExtensionAttribute>` именем пользовательского атрибута.  
Замените `<ExtensionAttributeValue>` новой строкой для отображения.

### <a name="using-localizedcollections"></a>Использование LocalizedCollections
Если вы хотите предоставить список значений для ответов, необходимо создать `LocalizedCollections`.  `LocalizedCollections` является массивом пар `Name` и `Value`.  `Name` будет отображаться, а `Value` — возвращаться в утверждении.  Добавьте `LocalizedCollections` в следующем формате.

```JSON
{
  "LocalizedStrings": [...],
  "LocalizedCollections": [{
      "ElementType":"ClaimType", 
      "ElementId":"<UserAttribute>",
      "TargetCollection":"Restriction",
      "Override": false,
      "Items":[
           {
                "Name":"<Response1>",
                "Value":"<Value1>"
           },
           {
                "Name":"<Response2>",
                "Value":"<Value2>"
           }
     ]
  }]
}
```
>[!IMPORTANT]
>Если необходимо переопределить строку, измените значение `Override` на `true`.  В противном случае запись не учитывается. 
>

* `ElementId` представляет собой пользовательский атрибут, ответом на который является `LocalizedCollections`.
* `Name` является значением, которое видит пользователь.
* `Value` возвращается в утверждении при выборе этого параметра.

### <a name="upload-your-changes"></a>Загрузка изменений
1. После завершения изменений в файле JSON перейдите обратно в клиент B2C.
2. В колонке **Изменение политики** выберите **Настройка языка**.
3. В меню навигации слева выберите **Загрузить контент**.
4. Выберите страницу, изменения для которой необходимо загрузить.
5. Если вы хотите загрузить язык, для которого ранее предоставили JSON-файл, необходимо удалить предыдущую запись.  Ее можно удалить, щелкнув `...` справа от языка и выбрав **Удалить**.
6. Щелкните **Добавить** в левом верхнем углу.
7. Выберите язык JSON-файла.
8. Нажмите кнопку папки справа и выберите JSON-файл.
9. Нажмите кнопку **Передать** в нижней части колонки.
10. Вернитесь в колонку **Изменение политики** и нажмите кнопку **Сохранить**.

## <a name="additional-information"></a>Дополнительная информация
### <a name="recommendations-for-language-customization"></a>Рекомендации по настройке языка
Мы рекомендуем помещать записи языковых ресурсов только для тех строк, которые явно требуется заменить.  Применяется ограничение на размер файла, скомпилированного из всех переводов в JSON-файле.  Файлы слишком большого размера будут влиять на производительность.
### <a name="page-ui-customization-labels-are-removed-once-language-customization-is-enabled"></a>Метки настройки пользовательского интерфейса страницы удаляются после включения настройки языка
При включении настройки языка удаляются все предыдущие изменения меток, использующих настройки пользовательского интерфейса страницы, кроме настраиваемых пользовательских атрибутов.  Это изменение выполняется для предотвращения конфликтов в случае изменения строк.  Вы можете продолжить изменять метки и другие текстовые строки, отправив языковые ресурсы в настройках языка.
### <a name="microsoft-is-committed-to-provide-the-most-up-to-date-translations-for-your-use"></a>Корпорация Майкрософт стремится предоставить наиболее актуальные переводы
Мы постоянно улучшаем переводы в соответствии с вашими требованиями.  Мы выявляем ошибки и изменения в глобальной терминологии и обновляем ее, обеспечивая непрерывную поддержку пользователей.
### <a name="social-identity-provider-translations"></a>Переводы для поставщиков удостоверений в социальных сетях
Мы предоставляем параметр OIDC ui_locales при входе в социальные сети, который не используется некоторыми поставщиками удостоверений, включая Facebook и Google. 
### <a name="browser-behavior"></a>Поведение браузера
Chrome и Firefox запрашивают настроенный в них язык, и если этот язык поддерживается, он отображается перед языком по умолчанию.  Сейчас Edge не запрашивает язык и сразу отображает язык по умолчанию.
### <a name="known-issues"></a>Известные проблемы
* Сейчас отправка языковых ресурсов для страницы MFA в политике изменения профиля недоступна.
* `LocalizedCollections` не создается для значений, когда он требуется для типа ответа.
### <a name="what-if-i-want-a-language-that-isnt-supported"></a>Что делать, если требуется использовать неподдерживаемый язык?
Мы планируем предоставить расширение этой функции, которое позволит отправлять ресурсы JSON для пользовательских языков.  Оно позволит указывать имя и код для любого языка и предоставлять *все* переводы на этом языке.  Если требуется эта функция, отправьте свой сценарий по адресу [aadb2cpreview@microsoft.com](mailto:aadb2cpreview@microsoft.com).  

### <a name="what-languages-are-supported"></a>Какие языки поддерживаются?

| Язык              | Код языка |
|-----------------------|---------------|
| Бенгальский                | bn            |
| Чешский                 | cs            |
| Датский                | da            |
| Немецкий                | de            |
| Греческий                 | el            |
| Английский               | en            |
| Испанский               | es            |
| Финский               | fi            |
| Французский                | fr            |
| Гуджарати              | gu            |
| Иврит                | he            |
| Хинди                 | hi            |
| Хорватский              | hr            |
| Венгерский             | hu            |
| Итальянский               | it            |
| Японский              | ja            |
| Каннада               | kn            |
| Корейский                | ko            |
| Малаялам             | ml            |
| Маратхи               | mr            |
| Малайский                 | ms            |
| Норвежский (букмол)      | nb            |
| Нидерландский                 | nl            |
| Панджаби               | pa            |
| Польский                | pl            |
| Португальский (Бразилия)   | pt-br         |
| Португальский (Португалия) | pt-pt         |
| Румынский              | ro            |
| Русский               | ru            |
| Словацкий                | sk            |
| Шведский               | sv            |
| Тамильский                 | ta            |
| Телугу                | te            |
| Тайский                  | th            |
| Турецкий               | tr            |
| Китайский (упрощенное письмо)  | zh-hans       |
| Китайский (традиционное письмо) | zh-hant       |

