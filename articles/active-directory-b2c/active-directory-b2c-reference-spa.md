---
title: Azure Active Directory B2C. Одностраничные приложения, использующие неявный поток | Документация Майкрософт
description: Узнайте, как с помощью Azure Active Directory B2C создавать одностраничные приложения, использующие неявный поток OAuth 2.0.
services: active-directory-b2c
documentationcenter: ''
author: davidmu1
manager: mtillman
editor: ''
ms.service: active-directory-b2c
ms.workload: identity
ms.topic: article
ms.date: 02/06/2017
ms.author: davidmu
ms.openlocfilehash: 3347eac16e447091ffcaaf403e1291e2c7175a2d
ms.sourcegitcommit: 9cdd83256b82e664bd36991d78f87ea1e56827cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="azure-ad-b2c-single-page-app-sign-in-by-using-oauth-20-implicit-flow"></a>Azure AD B2C. Вход в одностраничные приложения с помощью неявного потока OAuth 2.0

Многие современные приложения содержат интерфейсное одностраничное приложение, созданное преимущественно на языке JavaScript. Часто приложение создается с помощью таких платформ, как AngularJS, Ember.js или Durandal. При аутентификации одностраничные и другие приложения JavaScript, которые запускаются в основном в браузере, сталкиваются с некоторыми дополнительными проблемами:

* Характеристики безопасности этих приложений значительно отличаются от традиционных серверных веб-приложений.
* Многие серверы авторизации и поставщики удостоверений не поддерживают запросы на общий доступ к ресурсам независимо от источника (CORS).
* Полностраничный браузер перенаправляет пользователя из приложения, взаимодействие с которым становится особенно агрессивным.

Для поддержки этих приложений в Azure Active Directory B2C (Azure AD B2C) используется неявный поток OAuth 2.0. Описание неявного потока предоставления авторизации OAuth 2.0 см. в [разделе 4.2 спецификации OAuth 2.0](http://tools.ietf.org/html/rfc6749). В неявном потоке приложение получает маркеры из конечной точки авторизации Azure Active Directory (Azure AD) напрямую, без какого-либо обмена данными между серверами. Вся обработка логики аутентификации и сеансов выполняется в клиенте JavaScript без перенаправления на дополнительные страницы.

В Azure AD B2C стандартный неявный поток OAuth 2.0 выходит за рамки простой аутентификации и авторизации. В Azure AD B2C вводится [параметр политики](active-directory-b2c-reference-policies.md). Он позволяет использовать OAuth 2.0 для добавления в приложение действий по управлению пользователями, таких как регистрация, вход и управление профилями. В этой статье демонстрируется, как с помощью неявного потока и Azure AD реализовать каждую из этих функций в одностраничных приложениях. Просмотрите примеры для [Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi) и [Microsoft .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi), которые помогут вам приступить к работе.

В приведенных в этой статье запросах HTTP используется наш пример каталога Azure AD B2C **fabrikamb2c.onmicrosoft.com**. Также используются наши примеры приложения и политик. Вы можете пробовать выполнять запросы с этими значениями или заменить их собственными.
Узнайте, как [получить собственный каталог Azure AD B2C, приложение и политики](#use-your-own-b2c-tenant).


## <a name="protocol-diagram"></a>Схема протокола

Неявный поток входа выглядит примерно так, как показано на приведенном ниже рисунке. Каждый шаг описан более подробно далее в этой статье.

![Дорожки OpenID Connect](../media/active-directory-v2-flows/convergence_scenarios_implicit.png)

## <a name="send-authentication-requests"></a>Отправка запросов проверки подлинности
Если веб-приложению требуется проверить подлинность пользователя и выполнить политику, то оно направляет его к конечной точке `/authorize`. Это интерактивная часть потока, в которой пользователь выполняет действие в зависимости от политики. Пользователь получает маркер идентификации от конечной точки Azure AD.

В этом запросе клиент указывает в параметре `scope` разрешения, которые ему требуется получить от пользователя. В параметре `p` он указывает политику, которую необходимо выполнить. Ниже приведены три примера (переносы строк добавлены для удобства чтения), в которых используются разные политики. Чтобы понять, как работает каждый запрос, попробуйте вставить его в браузер и запустить.

### <a name="use-a-sign-in-policy"></a>Пример с политикой входа в систему
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a>Пример с политикой регистрации
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a>Пример с политикой изменения профиля
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=id_token+token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=fragment
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| Параметр | Обязательный? | ОПИСАНИЕ |
| --- | --- | --- |
| client_id |Обязательно |Идентификатор приложения, назначенный вашему приложению на [портале Azure](https://portal.azure.com). |
| response_type |Обязательно |Должен включать `id_token` для входа в OpenID Connect. Он также может содержать значение `token` типа ответа. Использование `token` позволяет приложению получать маркер доступа непосредственно от конечной точки авторизации, не отправляя новый запрос на вход в эту конечную точку.  При использовании типа ответа `token` параметр `scope` должен содержать область, определяющую ресурсы, для которых необходимо выдавать маркер. |
| redirect_uri |Рекомендуется |Универсальный код ресурса (URI) перенаправления приложения, на который можно отправлять ответы аутентификации для их получения приложением. Он должен в точности соответствовать одному из URI перенаправления, зарегистрированных на портале, но иметь форму закодированного URL-адреса. |
| response_mode |Рекомендуется |Указывает метод, с помощью которого результирующий маркер будет отправлен приложению.  Для неявных потоков используйте `fragment`. |
| scope |Обязательно |Список областей с разделителями-пробелами. При указании одной области также обозначаются запрашиваемые разрешения. Область `openid` определяет разрешение на вход пользователя и получение данных о пользователе в форме маркеров идентификации. (Мы рассмотрим это более подробно далее в этой статье.) Область `offline_access` для веб-приложений является необязательной. Она означает, что вашему приложению потребуется маркер обновления для продолжительного доступа к ресурсам. |
| state |Рекомендуется |Значение, включенное в запрос, которое также возвращается в ответе маркера. Это может быть строка любого содержимого. Как правило, с целью предотвращения подделки межсайтовых запросов используется генерируемое случайным образом уникальное значение. Этот параметр также включает сведения о состоянии пользователя в приложении перед созданием запроса на аутентификацию (например, об открытой в тот момент странице). |
| nonce |Обязательно |Значение, включенное в запрос (созданное приложением), которое входит в состав полученного маркера идентификации в качестве утверждения. Приложение может проверить это значение во избежание атак с использованием воспроизведения токена. Это значение обычно представляет собой случайную уникальную строку, которую можно использовать для определения источника запроса. |
| p |Обязательно |Политика, которую необходимо выполнить. Это имя политики, созданной в клиенте Azure AD B2C. Оно должно начинаться с **b2c\_1\_**. Дополнительные сведения см. в [документации по встроенным политикам Azure AD B2C](active-directory-b2c-reference-policies.md). |
| prompt |Необязательно |Требуемый тип взаимодействия с пользователем. В настоящее время поддерживается только значение `login`. При этом значении пользователь должен ввести учетные данные по запросу. Единый вход не сработает. |

На этом этапе пользователю предлагается выполнить рабочий процесс политики. Для этого могут потребоваться ввод имени пользователя и пароля, вход с помощью удостоверения социальной сети, регистрация в каталоге или любые другие шаги. Действия пользователя определяются в политике.

Когда пользователь выполнит рабочий процесс политики, служба Azure AD вернет ответ приложению, используя значение, указанное для `redirect_uri`. Она использует метод, указанный в параметре `response_mode`. Во всех сценариях действий пользователя ответ будет одинаковым независимо от политики, которая была выполнена.

### <a name="successful-response"></a>Успешный ответ
Успешный ответ с использованием `response_mode=fragment` и `response_type=id_token+token` выглядит следующим образом (разрывы строк — для удобства чтения):

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&token_type=Bearer
&expires_in=3599
&scope="90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
&id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
```

| Параметр | ОПИСАНИЕ |
| --- | --- |
| access_token |Маркер доступа, запрошенный приложением.  Маркер доступа не следует расшифровывать или каким-либо иным образом проверять. Его можно рассматривать как непрозрачную строку. |
| token_type |Значение типа маркера. Единственный тип, поддерживаемый Azure AD — носитель. |
| expires_in |Срок действия маркера доступа (в секундах). |
| scope |Области, для которых действителен маркер. Области также можно использовать, чтобы кэшировать маркеры для последующего использования. |
| id_token |Маркер идентификации, запрошенный приложением. Вы можете использовать маркер идентификации для проверки личности пользователя и запуска сеанса пользователя. Дополнительные сведения о маркерах идентификации и их содержимом см. в [справочнике по маркерам Azure AD B2C](active-directory-b2c-reference-tokens.md). |
| state |Если запрос содержит параметр `state`, то в ответе должно отображаться то же значение. Приложение должно проверить, совпадают ли значения параметра `state` в запросе и ответе. |

### <a name="error-response"></a>Сообщение об ошибке
Сообщения об ошибках также можно отправлять на универсальный код ресурса (URI) перенаправления, чтобы приложение могло их правильно обработать:

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| Параметр | ОПИСАНИЕ |
| --- | --- |
| error |Строка кода ошибки, используемая для классификации типов возникших ошибок. Код ошибки также можно использовать для обработки ошибок. |
| error_description |Конкретное сообщение об ошибке, с помощью которого можно определить первопричину возникновения ошибки аутентификации. |
| state |См. полное описание в предыдущей таблице. Если запрос содержит параметр `state`, то в ответе должно отображаться то же значение. Приложение должно проверить, совпадают ли значения параметра `state` в запросе и ответе.|

## <a name="validate-the-id-token"></a>Проверка маркера идентификации
Получение маркера идентификации не является достаточным для прохождения пользователем аутентификации. Необходимо проверить подпись маркера идентификации и сопоставить утверждения в маркере с требованиями вашего приложения. В Azure AD B2C для подписи маркеров и проверки их правильности используются [веб-маркеры JSON Web Token (JWT)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) и шифрование с открытым ключом.

Для проверки маркеров JWT доступны многие библиотеки с открытым исходным кодом в зависимости от выбранного языка. Рекомендуется изучить доступные библиотеки с открытым исходным кодом, а не реализовывать логику проверки самостоятельно. Сведения, приведенные в данной статье, помогут вам узнать, как правильно использовать эти библиотеки.

Служба Azure AD B2C имеет конечную точку метаданных OpenID Connect. Приложение может использовать конечную точку для получения сведений об Azure AD B2C в среде выполнения. Эти сведения включают конечные точки, содержимое маркеров и ключи подписи маркеров. Для каждой политики в клиенте Azure AD B2C есть собственный документ метаданных JSON. Например, документ метаданных для политики b2c_1_sign_in в клиенте fabrikamb2c.onmicrosoft.com находится в каталоге:

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

Одно из свойств этого документа конфигурации — `jwks_uri`. Значение для точно такой же политики будет следующим:

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`

Чтобы определить, какая политика была использована для подписи маркера идентификации (а также определить, откуда получать метаданные), можно воспользоваться одним из двух вариантов. Сначала имя политики включается в утверждение `acr` в `id_token`. Сведения об анализе утверждений маркера идентификации см. в [справочнике по маркерам Azure AD B2C](active-directory-b2c-reference-tokens.md). Другой вариант — закодировать политику в значении параметра `state` при отправке запроса. Затем декодировать параметр `state`, чтобы определить, какая политика была использована. Каждый из этих методов является допустимым.

После получения документа метаданных из конечной точки метаданных OpenID Connect можно использовать открытые ключи RSA-256, расположенные в этой конечной точке, для проверки подписи маркера идентификации. В каждый момент времени в этой конечной точке может находиться множество ключей, каждый из которых определяется `kid`. Заголовок `id_token` также содержит утверждение `kid`. Оно указывает на ключ, который был использован для подписи маркера идентификации. Дополнительные сведения см. в [справочнике по маркерам Azure AD B2C](active-directory-b2c-reference-tokens.md), включая раздел [Проверка маркеров](active-directory-b2c-reference-tokens.md#token-validation).
<!--TODO: Improve the information on this-->

После проверки подписи маркера идентификации для некоторых утверждений требуется проверка. Например: 

* Проверьте утверждение `nonce` во избежание атак с использованием воспроизведения маркеров. Его значение должно совпадать с указанным вами в запросе на вход.
* Проверьте утверждение `aud`, чтобы убедиться, что для вашего приложения был выдан маркер идентификации. Его значением должен быть идентификатор приложения вашего приложения.
* Проверьте утверждения `iat` и `exp`, чтобы убедиться, что срок действия маркера идентификации не истек.

Вам нужно выполнить дополнительные проверки, которые подробно описаны в [спецификации OpenID Connect Core](http://openid.net/specs/openid-connect-core-1_0.html). Вам также может потребоваться проверить дополнительные утверждения в зависимости от сценария. Ниже приведены некоторые из стандартных проверок:

* Обеспечение регистрации пользователя или организации в приложении.
* Предоставление пользователю необходимого уровня авторизации и привилегий.
* Обеспечение определенного уровня проверки подлинности, например с помощью Многофакторной идентификации Azure.

Дополнительные сведения об утверждениях в маркере идентификации см. в [справочнике по маркерам Azure AD B2C](active-directory-b2c-reference-tokens.md).

После полной проверки маркера идентификации можно запустить сеанс пользователя. В приложении используйте утверждения в маркере идентификации для получения сведений о пользователе. Эти сведения можно использовать для отображения, записей, авторизации и т. д.

## <a name="get-access-tokens"></a>Получение маркеров доступа
Если вашим веб-приложениям требуется только выполнять политики, вы можете пропустить следующие несколько разделов. Сведения в следующих разделах применяются только к веб-приложениям, которым необходимо выполнять защищенные аутентификацией вызовы веб-API, защищенные Azure AD B2C.

Теперь, когда пользователь вошел в одностраничное приложение, можно получить маркеры доступа для вызова интерфейсов веб-API, защищенных с помощью Azure AD. Даже если вы уже получили маркер с помощью типа ответа `token`, то этот метод можно использовать для получения маркеров для дополнительных ресурсов. При этом пользователям не нужно повторно выполнять вход.

В обычном потоке веб-приложения маркеры можно получить, отправив запрос к конечной точке `/token`.  Однако конечная точка не поддерживает запросы CORS, поэтому получение и обновление маркеров с помощью вызовов AJAX недоступно. Вместо этого для получения новых маркеров для других веб-API можно использовать неявный поток данных в скрытом HTML-элементе iframe. Ниже приведен пример (разрывы строк — для удобства чтения):

```

https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
&response_mode=fragment
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&prompt=none
&domain_hint=organizations
&login_hint=myuser@mycompany.com
&p=b2c_1_sign_in
```

| Параметр | Обязательный? | ОПИСАНИЕ |
| --- | --- | --- |
| client_id |Обязательно |Идентификатор приложения, назначенный вашему приложению на [портале Azure](https://portal.azure.com). |
| response_type |Обязательно |Должен включать `id_token` для входа в OpenID Connect.  Этот параметр также может содержать `token` типа ответа. Если использовать `token`, то приложение сможет получить маркер доступа непосредственно от конечной точки авторизации, не отправляя новый запрос на вход в эту конечную точку. При использовании типа ответа `token` параметр `scope` должен содержать область, определяющую ресурсы, для которых необходимо выдавать маркер. |
| redirect_uri |Рекомендуется |Универсальный код ресурса (URI) перенаправления приложения, на который можно отправлять ответы аутентификации для их получения приложением. Он должен в точности соответствовать одному из универсальных кодов ресурса (URI) перенаправления, зарегистрированных на портале, но иметь форму URL-адреса. |
| scope |Обязательно |Список областей с разделителями-пробелами.  Для получения маркеров укажите все области, которые необходимы для целевого ресурса. |
| response_mode |Рекомендуется |Указывает метод, с помощью которого результирующий маркер будет отправлен приложению.  Возможные значения: `query`, `form_post` или `fragment`. |
| state |Рекомендуется |Значение, включенное в запрос, которое также возвращается в ответе маркера.  Это может быть строка любого содержимого.  Как правило, с целью предотвращения подделки межсайтовых запросов используется генерируемое случайным образом уникальное значение.  Параметр state используется также для кодирования сведений о состоянии пользователя в приложении перед созданием запроса на аутентификацию. Например, сведений об открытой на тот момент странице или представлении. |
| nonce |Обязательно |Значение, включенное в запрос и созданное приложением, которое входит в состав полученного маркера идентификации в качестве утверждения.  Приложение может проверить это значение во избежание атак с использованием воспроизведения токена. Обычно это значение представляет собой случайную уникальную строку, которая определяет источник запроса. |
| prompt |Обязательно |Для обновления и получения маркеров в скрытом запросе iframe используйте `prompt=none`. Таким образом, iframe не перестает отвечать на странице входа приложения и сразу же возвращает данные. |
| login_hint |Обязательно |Для обновления и получения маркеров в скрытом запросе iframe включите в эту подсказку имя пользователя. Это позволяет различать сеансы пользователя в определенный момент времени. Имя пользователя можно извлечь из предыдущей операции входа с помощью утверждения `preferred_username`. |
| domain_hint |Обязательно |Может иметь значение `consumers` или `organizations`.  Для обновления и получения маркеров в скрытом запросе iframe необходимо включить в запрос значение `domain_hint`.  Извлеките утверждение `tid` из маркера идентификации предыдущей операции входа, чтобы определить, какое значение следует использовать.  Если значение утверждения `tid` — `9188040d-6c67-4c5b-b112-36a304b66dad`, то используйте `domain_hint=consumers`.  Или используйте `domain_hint=organizations`. |

Если задать параметр `prompt=none`, то этот запрос успешно выполнится или немедленно завершится с ошибкой, и вы вернетесь к своему приложению.  Успешный ответ будет отправлен в ваше приложение на указанный URI перенаправления с помощью метода, заданного в параметре `response_mode`.

### <a name="successful-response"></a>Успешный ответ
Успешный ответ с использованием `response_mode=fragment` выглядит следующим образом:

```
GET https://aadb2cplayground.azurewebsites.net/#
access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&state=arbitrary_data_you_sent_earlier
&token_type=Bearer
&expires_in=3599
&scope=https%3A%2F%2Fapi.contoso.com%2Ftasks.read
```

| Параметр | ОПИСАНИЕ |
| --- | --- |
| access_token |Маркер, запрошенный приложением. |
| token_type |Маркер всегда будет иметь тип Bearer (Носитель). |
| state |Если запрос содержит параметр `state`, то в ответе должно отображаться то же значение. Приложение должно проверить, совпадают ли значения параметра `state` в запросе и ответе. |
| expires_in |Срок действия маркера доступа (в секундах). |
| scope |Области, для которых действителен маркер доступа. |

### <a name="error-response"></a>Сообщение об ошибке
Сообщения об ошибках также можно отправлять на универсальный код ресурса (URI) перенаправления, чтобы приложение могло их правильно обработать.  Для `prompt=none` ожидаемая ошибка выглядит следующим образом:

```
GET https://aadb2cplayground.azurewebsites.net/#
error=user_authentication_required
&error_description=the+request+could+not+be+completed+silently
```

| Параметр | ОПИСАНИЕ |
| --- | --- |
| error |Строка кода ошибки, которую можно использовать для классификации типов возникающих ошибок. Эту строку также можно использовать для реагирования на ошибки. |
| error_description |Конкретное сообщение об ошибке, с помощью которого можно определить первопричину возникновения ошибки аутентификации. |

После появления этой ошибки в запросе iframe пользователю необходимо войти еще раз в интерактивном режиме для получения нового маркера. Это можно обрабатывать любым способом, который лучше всего подходит для вашего приложения.

## <a name="refresh-tokens"></a>Маркеры обновления
Срок действия маркеров идентификации и доступа достаточно короткий. Поэтому приложение должно быть готово периодически обновлять их.  Чтобы обновить маркер любого типа, выполните тот же скрытый запрос iframe, который использовался в предыдущем примере, используя параметр `prompt=none` для управления действиями Azure AD.  Чтобы получить новое значение `id_token`, обязательно используйте `response_type=id_token` и `scope=openid`, а также параметр `nonce`.

## <a name="send-a-sign-out-request"></a>Отправка запроса на выход
Для выхода пользователя из приложения перенаправьте его в Azure AD для выполнения выхода. Если этого не сделать, то пользователи смогут снова пройти аутентификацию в приложении без ввода учетных данных, так как они будут иметь действительный сеанс единого входа с Azure AD.

Можно просто перенаправить пользователя на точку `end_session_endpoint`, которая указана в том же документе метаданных OpenID Connect, описанном выше в разделе [Проверка маркера идентификации](#validate-the-id-token). Например: 

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| Параметр | Обязательный? | ОПИСАНИЕ |
| --- | --- | --- |
| p |Обязательно |Политика, которую необходимо использовать для выхода пользователя из приложения. |
| post_logout_redirect_uri |Рекомендуется |URL-адрес, на который пользователя следует перенаправить после успешного выхода. Если он не указан, то Azure AD B2C покажет пользователю универсальное сообщение. |

> [!NOTE]
> При перенаправлении пользователя на `end_session_endpoint` очищается часть его данных состояния единого входа через Azure AD B2C. Хотя фактически пользователь не выходит из сеанса поставщика удостоверений социальных сетей. Если пользователь выберет тот же поставщик удостоверений во время последующего входа, то он будет повторно аутентифицирован без ввода учетных данных. Например, если пользователь хочет выйти из приложения Azure AD B2C, то это совершенно не означает, что он также хочет полностью выйти из учетной записи Facebook. Тем не менее для локальных учетных записей необходимо правильно завершить сеанс пользователя.
> 
> 

## <a name="use-your-own-azure-ad-b2c-tenant"></a>Использование собственного клиента Azure AD B2C
Чтобы отправить эти запросы самостоятельно, выполните следующие три действия. Замените значения, приведенные в этой статье в качестве примера, собственными значениями:

1. [Создайте клиента Azure AD B2C](active-directory-b2c-get-started.md). Используйте имя своего клиента в запросах.
2. [Создайте приложение](active-directory-b2c-app-registration.md) для получения идентификатора приложения и значения `redirect_uri`. Включите в свое приложение веб-приложение или веб-API. При необходимости можно также создать секретный код приложения.
3. [Создайте собственные политики](active-directory-b2c-reference-policies.md) для получения имен политик.

## <a name="samples"></a>Примеры

* [Создание одностраничного приложения с помощью Node.js](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-nodejs-webapi)
* [Создание одностраничного приложения с помощью .NET](https://github.com/Azure-Samples/active-directory-b2c-javascript-singlepageapp-dotnet-webapi)

