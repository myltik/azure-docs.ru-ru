---
title: Просмотр и анализ собранных данных Azure Log Analytics | Документация Майкрософт
description: Эта статья содержит руководство, в котором описывается, как создать поиски по журналам и анализировать данные, хранящиеся в ресурсе Log Analytics, с помощью портала поиска по журналам.  Это руководство включает в себя выполнение некоторых простых запросов с целью возврата различных типов данных и анализа результатов.
services: log-analytics
documentationcenter: log-analytics
author: mgoedtel
manager: carmonm
editor: ''
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 04/03/2018
ms.author: magoedte
ms.custom: mvc
ms.openlocfilehash: 6345fe89a3bf25041621213274ea0c3081848d99
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2018
---
# <a name="view-or-analyze-data-collected-with-log-analytics-log-search"></a>Просмотр и анализ данных, собранных с помощью поиска по журналам Log Analytics

В Log Analytics поиски по журналам можно использовать, создавая запросы для анализа собранных данных, используя созданные ранее панели мониторинга, которые можно настраивать с помощью графических представлений большинства значимых поисковых запросов.  После определения сбора оперативных данных с виртуальных машин Azure и журналов действий в этом руководстве вы узнаете, как:

> [!div class="checklist"]
> * выполнять простой поиск данных о событии и использовать возможности для изменения и фильтрации результатов; 
> * работать с данными производительности.

Для выполнения примера в этом руководстве требуется виртуальная машина [, подключенная к рабочей области Log Analytics](log-analytics-quick-collect-azurevm.md).  

Вы можете создавать и изменять запросы, а также работать с возвращенными данными в интерактивном режиме одним из двух способов.  Для простых запросов используйте страницу поиска по журналам на портале Azure, а для расширенных — портал расширенной аналитики. Дополнительные сведения о различиях в функциональных возможностях двух порталов см. в статье [Порталы для создания и изменения запросов к журналу в службе Azure Log Analytics](log-analytics-log-search-portals.md)

В этом руководстве мы будет работать с поиском по журналам на портале Azure. 

## <a name="log-in-to-azure-portal"></a>Вход на портал Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com). 

## <a name="open-the-log-search-portal"></a>Открытие портала поиска по журналам 
Откройте портал поиска по журналам, используя   

1. На портале Azure щелкните **Все службы**. В списке ресурсов введите **Log Analytics**. Как только вы начнете вводить символы, список отфильтруется соответствующим образом. Выберите **Log Analytics**.
2. В области подписок Log Analytics выберите рабочую область, а затем выберите плитку **Log Search** (Поиск по журналам).<br><br> ![Кнопка поиска по журналу](media/log-analytics-tutorial-viewdata/azure-portal-02.png)

## <a name="create-a-simple-search"></a>Создание простого поиска
Самый быстрый способ получить некоторые данные для работы — создать простой запрос, который возвращает все записи в таблице.  Если у вас есть клиенты Windows или Linux, подключенные к рабочей области, у вас будут данные в таблице событий (Windows) или таблице системного журнала (Linux).

Введите один из следующих запросов в поле поиска и нажмите кнопку поиска.  

```
Event
```
```
Syslog
```

Данные возвращаются в представлении списка по умолчанию. Вы можете просмотреть общее количество возвращенных записей.

![Простой запрос](media/log-analytics-tutorial-viewdata/log-analytics-portal-eventlist-01.png)

Отображаются только первые несколько свойств каждой записи.  Щелкните **Показать больше**, чтобы отобразить все свойства конкретной записи.

## <a name="filter-results-of-the-query"></a>Фильтрация результатов запроса
В левой области экрана расположена панель фильтров, которая позволяет добавить фильтрацию к запросу, не изменяя его напрямую.  Для этого типа записи показано несколько свойств. Вы можете выбрать одно или несколько значений свойств для сужения результатов поиска.

При работе с **событиями** установите флажок рядом с **Ошибка** в разделе **EVENTLEVELNAME**.   Если вы работаете с **системным журналом**, установите флажок рядом с **Ошибка** в разделе **SEVERITYLEVEL**.  Это позволит изменить запрос на один из указанных ниже, чтобы ограничить результаты событиями ошибки.

```
Event | where (EventLevelName == "Error")
```
```
Syslog | where (SeverityLevel == "err")
```

![Фильтр](media/log-analytics-tutorial-viewdata/log-analytics-portal-eventlist-02.png)

Добавьте свойства на панель фильтров, выбрав **Добавить в фильтры** в меню свойств одной из записей.

![Меню добавления в фильтры](media/log-analytics-tutorial-viewdata/log-analytics-portal-eventlist-03.png)

Вы можете задать тот же фильтр, выбрав **Фильтр** в меню свойств записи со значением, которое необходимо отфильтровать.  

При наведении на свойства, имена которых выделены синим цветом, доступен только параметр **Фильтр**.  Это *доступные для поиска* поля, индексируемые для условий поиска.  Поля, выделенные серым цветом, — это поля *с возможностью поиска произвольного текста*, имеющие только параметр **Показать ссылки**.  Этот параметр возвращает записи, имеющие это значение в любом свойстве.

Вы можете группировать результаты по одному свойству, выбрав параметр **Группировать по** в меню записи.  Это позволит добавить оператор [суммирования](https://docs.loganalytics.io/docs/Language-Reference/Tabular-operators/summarize-operator) к запросу, который отображает результаты на диаграмме.  Вы можете сгруппировать по нескольким свойствам, однако необходимо будет изменить запрос напрямую.  Выберите меню записи рядом со свойством **Компьютер** и выберите **Group by 'Computer'** (Группировать по компьютеру).  

![Группировка по компьютеру](media/log-analytics-tutorial-viewdata/log-analytics-portal-eventlist-04.png)

## <a name="work-with-results"></a>Работа с результатами
Портал поиска по журналам имеет множество функций для работы с результатами запроса.  Вы можете сортировать, фильтровать и группировать результаты, чтобы анализировать данные, не изменяя фактический запрос.  По умолчанию результаты запроса не сортируются.

Чтобы просмотреть данные в табличном представлении, которое предоставляет дополнительные параметры для фильтрации и сортировки, щелкните **Таблица**.  

![Табличное представление](media/log-analytics-tutorial-viewdata/log-search-portal-table-01.png)

Щелкните стрелку рядом с записью, чтобы просмотреть сведения для этой записи.

![Сортировка результатов](media/log-analytics-tutorial-viewdata/log-search-portal-table-02.png)

Выполните сортировку по любому полю, щелкнув заголовок соответствующего столбца.

![Сортировка результатов](media/log-analytics-tutorial-viewdata/log-search-portal-table-03.png)

Отфильтруйте результаты по определенному значению в столбце с помощью кнопки "Фильтр", а затем укажите условия фильтра.

![Фильтрация результатов](media/log-analytics-tutorial-viewdata/log-search-portal-table-04.png)

Сгруппируйте по столбцу, перетащив заголовок соответствующего столбца в верхнюю часть результатов.  Вы можете сгруппировать по нескольким полям, перетащив несколько столбцов в верхнюю часть результатов.

![Группирование результатов](media/log-analytics-tutorial-viewdata/log-search-portal-table-05.png)


## <a name="work-with-performance-data"></a>Работа с данными о производительности
Данные о производительности для агентов Windows и Linux хранятся в рабочей области Log Analytics в таблице **Производительность**.  Записи о производительности выглядят как любые другие записи. Мы собираемся создать простой запрос, который возвращает все записи о производительности, а также события.

```
Perf
```

![Данные о производительности](media/log-analytics-tutorial-viewdata/log-analytics-portal-perfsearch-01.png)

Возвращать миллионы записей для всех объектов и счетчиков производительности не очень полезно.  Вы можете воспользоваться методами, используемыми выше, чтобы отфильтровать данные. Или просто введите указанный ниже запрос непосредственно в поле поиска по журналам.  В результате будут возвращены только записи использования процессора для компьютеров Windows и Linux.

```
Perf | where (ObjectName == "Processor")  | where (CounterName == "% Processor Time")
```

![Использование процессора](media/log-analytics-tutorial-viewdata/log-analytics-portal-perfsearch-02.png)

Это ограничивает данные до определенного счетчика, но это не помещает их в особенно удобный формат.  Данные можно отобразить на графике, однако сначала необходимо сгруппировать их по компьютеру или времени создания.  Чтобы сгруппировать по нескольким полям, необходимо изменить запрос напрямую следующим образом.  Для вычисления среднего значения за каждый час используется функция [avg](https://docs.loganalytics.io/docs/Language-Reference/Aggregation-functions/avg()) для свойства **CounterValue**.

```
Perf  | where (ObjectName == "Processor")  | where (CounterName == "% Processor Time") | summarize avg(CounterValue) by Computer, TimeGenerated
```

![Диаграмма данных о производительности](media/log-analytics-tutorial-viewdata/log-analytics-portal-perfsearch-03.png)

Теперь, когда данные сгруппированы подходящим образом, их можно отобразить на визуальной диаграмме, добавив оператор [обработки](https://docs.loganalytics.io/docs/Language-Reference/Tabular-operators/render-operator).  

```
Perf  | where (ObjectName == "Processor")  | where (CounterName == "% Processor Time") | summarize avg(CounterValue) by Computer, TimeGenerated | render timechart
```

![График](media/log-analytics-tutorial-viewdata/log-analytics-portal-linechart-01.png)

## <a name="next-steps"></a>Дополнительная информация
В этом руководстве рассматривалось создание базовых запросов поиска по журналам для анализа данных событий и производительности.  Перейдите к следующему руководству, чтобы узнать, как визуализировать данные путем создания панели мониторинга.

> [!div class="nextstepaction"]
> [Создание панелей мониторинга данных Log Analytics и предоставление общего доступа к ним](log-analytics-tutorial-dashboards.md)