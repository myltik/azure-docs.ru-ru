---
title: Получение сведений о состоянии для задания импорта и экспорта Azure | Документация Майкрософт
description: Узнайте, как получить сведения о состоянии заданий службы импорта и экспорта Microsoft Azure.
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: ''
ms.assetid: 22d7e5f0-94da-49b4-a1ac-dd4c14a423c2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/16/2016
ms.author: muralikk
ms.openlocfilehash: 13169716c47cf9389c8f2651393ac744441bdd6f
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
ms.locfileid: "23059909"
---
# <a name="retrieving-state-information-for-an-importexport-job"></a>Получение сведений о состоянии задания импорта и экспорта
Чтобы получить сведения о заданиях импорта и экспорта, можно вызвать операцию [Get Job](/rest/api/storageimportexport/jobs#Jobs_Get). Возвращаемые сведения включают:

-   текущее состояние задания;

-   приблизительный процент выполнения каждого задания;

-   текущее состояние каждого диска;

-   универсальные коды ресурсов (URI) для больших двоичных объектов, содержащих журналы ошибок и подробные журналы (если их ведение включено).

В следующих разделах описаны сведения, возвращаемые операцией `Get Job`.

## <a name="job-states"></a>Состояния задания
В таблице и на схеме состояний ниже описаны состояния, через которые проходит задание в течение своего жизненного цикла. Текущее состояние задания можно определить, вызвав операцию `Get Job`.

![JobStates](./media/storage-import-export-retrieving-state-info-for-a-job/JobStates.png "JobStates")

В следующей таблице описаны все состояния, через которые может пройти задание.

|Состояние задания|ОПИСАНИЕ|
|---------------|-----------------|
|`Creating`|После вызова операции Put Job задание создается и для него задается состояние `Creating`. Когда задание пребывает в состоянии `Creating`, служба импорта и экспорта считает, что диски еще не доставлены в центр обработки данных. Задание может оставаться в состоянии `Creating` до двух недель, после чего служба автоматически удаляет его.<br /><br /> Если вызвать операцию Update Job Properties, пока задание пребывает в состоянии `Creating`, задание остается в состоянии `Creating`, а время ожидания сбрасывается до двух недель.|
|`Shipping`|После отправки пакета следует вызывать операцию Update Job Properties, чтобы изменить состояние задания на `Shipping`. Состояние Shipping можно задать только в том случае, если для задания настроены свойства `DeliveryPackage` (почтовая компания и номер для отслеживания) и `ReturnAddress`.<br /><br /> Задание может оставаться в состоянии Shipping до двух недель. Если по истечении двух недель диски не будут получены, операторы службы импорта и экспорта получат соответствующее уведомление.|
|`Received`|Когда все диски будут получены в центре обработки данных, заданию будет присвоено состояние Received.|
|`Transferring`|Когда диски будут получены и ЦОД начнет обрабатывать хотя бы один диск, заданию будет присвоено состояние `Transferring`. Подробные сведения см. в приведенном ниже разделе `Drive States` (Состояния дисков).|
|`Packaging`|После завершения обработки всех дисков задание будет переведено в состояние `Packaging` до момента, пока диски не будут отправлены обратно клиенту.|
|`Completed`|После отправки всех дисков клиенту заданию присваивается состояние `Completed`, если оно выполнено без ошибок. Задание с состоянием `Completed` автоматически удаляется через 90 дней.|
|`Closed`|После отправки всех дисков клиенту заданию присваивается состояние `Closed`, если во время обработки этого задания возникли ошибки. Задание с состоянием `Closed` автоматически удаляется через 90 дней.|

Задание можно отменить только в определенных состояниях. Отмененное задание пропускает шаг копирования данных, но во всем остальном оно проходит через те же состояния, что и задание, которое не было отменено.

В следующей таблице описаны ошибки, которые могут возникнуть в каждом состоянии задания, а также влияние этих ошибок на задание.

|Состояние задания|Событие|Решение и дальнейшие действия|
|---------------|-----------|------------------------------|
|`Creating or Undefined`|Один или несколько дисков для задания прибыли, но задание не находится в состоянии `Shipping` или записи об этом задании отсутствуют в службе.|Рабочая группа службы импорта и экспорта попытается связаться с клиентом, чтобы создать задание или добавить необходимые сведения для его дальнейшего выполнения.<br /><br /> Если рабочая группа не сможет связаться с клиентом в течение двух недель, она попытается вернуть диски.<br /><br /> Если вернуть диски и связаться с клиентом не удастся, диски будут безопасно уничтожены через 90 дней.<br /><br /> Обратите внимание, что задание не будет обрабатываться, пока его состояние не изменится на `Shipping`.|
|`Shipping`|Пакет для задания не прибыл в течение двух недель.|Рабочая группа уведомит клиента о неполучении пакета. В зависимости от ответа клиента рабочая группа продлит период ожидания пакета либо отменит задание.<br /><br /> Если с клиентом не удается связаться или он не отвечает в течение 30 дней, рабочая группа инициирует переход задания из состояния `Shipping` непосредственно в состояние `Closed`.|
|`Completed/Closed`|Диски не были доставлены по обратному адресу или были повреждены при перевозке (применимо только к заданию экспорта).|Если диски не доходят по обратному адресу, клиент должен сначала вызвать операцию Get Job или проверить состояние задания на портале, чтобы убедиться, что диски были отправлены. Если диски отправлены, клиент должен связаться с транспортной компанией, чтобы попытаться найти диски.<br /><br /> Если диски были повреждены при перевозке, клиент может запросить другое задание экспорта или загрузить отсутствующие большие двоичные объекты.|
|`Transferring/Packaging`|Обратный адрес для задания указан неправильно или не указан вообще.|Рабочая группа свяжется с контактным лицом по заданию, чтобы получить правильный адрес.<br /><br /> Если связаться с клиентом не удастся, диски будут безопасно уничтожены через 90 дней.|
|`Creating / Shipping/ Transferring`|В пакет входит диск, который не указан в списке импортируемых дисков.|Лишние диски не будут обрабатываться и будут возвращены клиенту по завершении задания.|

## <a name="drive-states"></a>Состояния диска
В таблице и на схеме ниже описан жизненный цикл отдельного диска по мере выполнения задания импорта или экспорта. Чтобы получить текущее состояние диска, вызовите операцию `Get Job` и проверьте элемент `State` в свойстве `DriveList`.

![DriveStates](./media/storage-import-export-retrieving-state-info-for-a-job/DriveStates.png "DriveStates")

В следующей таблице описаны все состояния, через которые может пройти диск.

|Состояние диска|ОПИСАНИЕ|
|-----------------|-----------------|
|`Specified`|Когда задание импорта создается с помощью операции Put Job, диску присваивается начальное состояние `Specified`. При создании задания экспорта диск не указывается, поэтому начальное состояние диска — `Received`.|
|`Received`|Диск переходит в состояние `Received`, если оператор службы импорта и экспорта обработал диски, полученные от транспортной компании для задания импорта. Для задания экспорта начальное состояние диска — `Received`.|
|`NeverReceived`|Диск переходит в состояние `NeverReceived`, когда прибывает пакет для задания, но этот пакет не содержит требуемый диск. Диск также может перейти в это состояние через две недели с момента получения службой сведений о доставке, если пакет еще не прибыл в центр обработки данных.|
|`Transferring`|Диск перейдет в состояние `Transferring`, когда служба начнет передавать данные с диска в хранилище Microsoft Azure.|
|`Completed`|Диск перейдет в состояние `Completed`, если служба успешно передаст все данные и при этом не возникнет ни единой ошибки.|
|`CompletedMoreInfo`|Диск перейдет в состояние `CompletedMoreInfo`, если служба обнаружит проблемы при копировании данных на диск или с диска. Добавленные сведения могут содержать сообщения об ошибках, предупреждения или информационные сообщения о перезаписи больших двоичных объектов.|
|`ShippedBack`|Диск перейдет в состояние `ShippedBack`, если он был отправлен из центра обработки данных по обратному адресу.|

В следующей таблице описаны состояния сбоя диска и действия для каждого состояния.

|Состояние диска|Событие|Решение и дальнейшие действия|
|-----------------|-----------|-----------------------------|
|`NeverReceived`|Диск, помеченный как `NeverReceived` (так как он не был получен после отправки задания), прибывает в другой посылке.|Рабочая группа переведет диск в состояние `Received`.|
|`N/A`|Диск, не входящий ни в одно задание, прибывает в центр обработки данных в рамках другого задания.|Диск будет помечен как лишний и будет возвращен клиенту по завершении задания, связанного с исходным пакетом.|

## <a name="faulted-states"></a>Состояния сбоя
Если жизненный цикл задания или диска не развивается должным образом, задание или диск переходит в состояние `Faulted`. В этом случае рабочая группа связывается с клиентом по электронной почте или по телефону. После устранения проблемы задание или диск будут выведены из состояния `Faulted` и переведены в соответствующее состояние.

## <a name="next-steps"></a>Дополнительная информация

* [Использование REST API службы импорта и экспорта Azure](storage-import-export-using-the-rest-api.md)
