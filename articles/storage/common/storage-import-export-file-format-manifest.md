---
title: Формат файла манифеста импорта и экспорта Azure | Документация Майкрософт
description: Изучите формат файла манифеста диска, описывающего сопоставление между большими двоичными объектами в хранилище BLOB-объектов Azure и файлами на диске для задания импорта или экспорта в службе импорта и экспорта.
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: ''
ms.assetid: f3119e1c-2c25-48ad-8752-a6ed4adadbb0
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: muralikk
ms.openlocfilehash: c1857eb94fba13c30e7f07669616f5d0ab9953f4
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
ms.locfileid: "23059739"
---
# <a name="azure-importexport-service-manifest-file-format"></a>Формат файла манифеста службы импорта и экспорта Azure
Файл манифеста диска описывает сопоставление между большими двоичными объектами в хранилище BLOB-объектов Azure и файлами на диске, включая задание импорта или экспорта. Для операции импорта файл манифеста создается в рамках процесса подготовки диска и сохраняется на нем перед отправкой в центр обработки данных Azure. Во время операции экспорта манифест создается и сохраняется на диске службой импорта и экспорта Azure.  
  
Для заданий импорта и экспорта файл манифеста диска хранится на диске импорта или экспорта и не передается в службу через операции API.  
  
Ниже показан общий формат файла манифеста диска.  
  
```xml
<?xml version="1.0" encoding="UTF-8"?>  
<DriveManifest Version="2014-11-01">  
  <Drive>  
    <DriveId>drive-id</DriveId>  
    import-export-credential  
  
    <!-- First Blob List -->  
    <BlobList>  
      <!-- Global properties and metadata that applies to all blobs -->  
      [<MetadataPath Hash="md5-hash">global-metadata-file-path</MetadataPath>]  
      [<PropertiesPath   
        Hash="md5-hash">global-properties-file-path</PropertiesPath>]  
  
      <!-- First Blob -->  
      <Blob>  
        <BlobPath>blob-path-relative-to-account</BlobPath>  
        <FilePath>file-path-relative-to-transfer-disk</FilePath>  
        [<ClientData>client-data</ClientData>]  
        [<Snapshot>snapshot</Snapshot>]  
        <Length>content-length</Length>  
        [<ImportDisposition>import-disposition</ImportDisposition>]  
        page-range-list-or-block-list          
        [<MetadataPath Hash="md5-hash">metadata-file-path</MetadataPath>]  
        [<PropertiesPath Hash="md5-hash">properties-file-path</PropertiesPath>]  
      </Blob>  
  
      <!-- Second Blob -->  
      <Blob>  
      . . .  
      </Blob>  
    </BlobList>  
  
    <!-- Second Blob List -->  
    <BlobList>  
    . . .  
    </BlobList>  
  </Drive>  
</DriveManifest>  
  
import-export-credential ::=   
  <StorageAccountKey>storage-account-key</StorageAccountKey> | <ContainerSas>container-sas</ContainerSas>  
  
page-range-list-or-block-list ::=   
  page-range-list | block-list  
  
page-range-list ::=   
    <PageRangeList>  
      [<PageRange Offset="page-range-offset" Length="page-range-length"   
       Hash="md5-hash"/>]  
      [<PageRange Offset="page-range-offset" Length="page-range-length"   
       Hash="md5-hash"/>]  
    </PageRangeList>  
  
block-list ::=  
    <BlockList>  
      [<Block Offset="block-offset" Length="block-length" [Id="block-id"]  
       Hash="md5-hash"/>]  
      [<Block Offset="block-offset" Length="block-length" [Id="block-id"]   
       Hash="md5-hash"/>]  
    </BlockList>  

```

## <a name="manifest-xml-elements-and-attributes"></a>XML-элементы и атрибуты манифеста

В следующей таблице указаны элементы данных и атрибуты формата XML манифеста диска.  
  
|XML-элемент|type|ОПИСАНИЕ|  
|-----------------|----------|-----------------|  
|`DriveManifest`|Корневой элемент|Корневой элемент файла манифеста. Все остальные элементы в файле размещены под этим элементом.|  
|`Version`|Атрибут, строка|Версия файла манифеста.|  
|`Drive`|Вложенный XML-элемент|Содержит манифест для каждого диска.|  
|`DriveId`|Строка|Уникальный идентификатор диска. Идентификатор диска можно узнать путем запроса серийного номера диска. Кроме того, серийный номер диска обычно напечатан снаружи диска. В файле манифеста элемент `DriveID` должен предшествовать элементу `BlobList`.|  
|`StorageAccountKey`|Строка|Требуется для заданий импорта, если не указан `ContainerSas`. Ключ учетной записи хранения Azure, связанный с заданием.<br /><br /> Этот элемент отсутствует в манифесте для операции экспорта.|  
|`ContainerSas`|Строка|Требуется для заданий импорта, если не указан `StorageAccountKey`. Контейнер SAS для доступа к большим двоичным объектам, связанным с заданием. Дополнительные сведения о его формате см. в статье [Jobs](/rest/api/storageimportexport/jobs#Jobs_CreateOrUpdate) (Задания). Этот элемент отсутствует в манифесте для операции экспорта.|  
|`ClientCreator`|Строка|Указывает клиент, с помощью которого создан XML-файл. Это значение не интерпретируется службой импорта и экспорта.|  
|`BlobList`|Вложенный XML-элемент|Содержит список больших двоичных объектов, которые являются частью задания импорта или экспорта. Метаданные и свойства всех больших двоичных объектов в списке совпадают.|  
|`BlobList/MetadataPath`|Строка|Необязательный элемент. Указывает относительный путь к файлу на диске, содержащему метаданные по умолчанию, которые будут заданы для больших двоичных объектов в списке для операции импорта. При необходимости эти метаданные можно переопределить для каждого конкретного большого двоичного объекта.<br /><br /> Этот элемент отсутствует в манифесте для операции экспорта.|  
|`BlobList/MetadataPath/@Hash`|Атрибут, строка|Указывает значение MD5-хэша файла метаданных в кодировке Base16.|  
|`BlobList/PropertiesPath`|Строка|Необязательный элемент. Указывает относительный путь к файлу на диске, содержащему свойства по умолчанию, которые будут заданы для больших двоичных объектов в списке для операции импорта. При необходимости эти свойства можно переопределить для каждого конкретного большого двоичного объекта.<br /><br /> Этот элемент отсутствует в манифесте для операции экспорта.|  
|`BlobList/PropertiesPath/@Hash`|Атрибут, строка|Указывает значение MD5-хэша файла свойств в кодировке Base16.|  
|`Blob`|Вложенный XML-элемент|Содержит сведения о каждом большом двоичном объекте в каждом списке таких объектов.|  
|`Blob/BlobPath`|Строка|Относительный универсальный код ресурса большого двоичного объекта, начинающийся с имени контейнера. Если большой двоичный объект находится в корневом контейнере, этот путь должен начинаться с `$root`.|  
|`Blob/FilePath`|Строка|Указывает относительный путь к файлу на диске. Если это возможно, для заданий экспорта путь к большому двоичному объекту будет использоваться как путь к файлу, *например* `pictures/bob/wild/desert.jpg` будет экспортирован в `\pictures\bob\wild\desert.jpg`. Из-за ограничения имен файловой системы NTFS большой двоичный объект может быть экспортирован в файл с путем, который не соответствует пути к большому двоичному объекту.|  
|`Blob/ClientData`|Строка|Необязательный элемент. Содержит комментарии от клиента. Это значение не интерпретируется службой импорта и экспорта.|  
|`Blob/Snapshot`|Datetime|Необязательно для заданий экспорта. Указывает идентификатор моментального снимка экспортированного большого двоичного объекта.|  
|`Blob/Length`|Целое число |Указывает общую длину большого двоичного объекта в байтах. Значение может быть до 200 ГБ для блочного большого двоичного объекта и до 1 ТБ для страничного BLOB-объекта. Для страничного BLOB-объекта это значение должно быть кратно 512.|  
|`Blob/ImportDisposition`|Строка|Необязательно для заданий импорта, пропущено для заданий экспорта. Указывает, как служба импорта и экспорта должна обрабатывать в рамках задания импорта случаи, когда большой двоичный объект с тем же именем уже существует. Если это значение опущено в манифесте импорта, значение по умолчанию — `rename`.<br /><br /> Возможные значения для этого элемента:<br /><br /> -   `no-overwrite`: если целевой большой двоичный объект с таким именем уже существует, операция импорта пропускает этот файл.<br />-    `overwrite`: любой существующий целевой большой двоичный объект полностью перезаписывается новым импортированным файлом.<br />-    `rename`: новый большой двоичный объект будет загружен с измененным именем.<br /><br /> Правило переименования<br /><br /> Если имя большого двоичного объекта не содержит точку, новое имя создается путем добавления `(2)` к исходному имени. Если новое имя также конфликтует с существующим именем большого двоичного объекта, `(3)` добавляется вместо `(2)` и т. д.<br />Если имя большого двоичного объекта содержит точку, то часть после последней точки считается именем расширения. Аналогично описанной выше процедуре для создания нового имени перед последней точкой вставляется `(2)`. Если новое имя будет по-прежнему конфликтовать с именем существующего большого двоичного объекта, служба подставляет `(3)`, `(4)` и так далее, пока не будет найдено неконфликтующее имя.<br /><br /> Некоторые примеры<br /><br /> Большой двоичный объект `BlobNameWithoutDot` будет переименован на:<br /><br /> `BlobNameWithoutDot (2)  // if BlobNameWithoutDot exists`<br /><br /> `BlobNameWithoutDot (3)  // if both BlobNameWithoutDot and BlobNameWithoutDot (2) exist`<br /><br /> Большой двоичный объект `Seattle.jpg` будет переименован на:<br /><br /> `Seattle (2).jpg  // if Seattle.jpg exists`<br /><br /> `Seattle (3).jpg  // if both Seattle.jpg and Seattle (2).jpg exist`|  
|`PageRangeList`|Вложенный XML-элемент|Требуется для страничного BLOB-объекта.<br /><br /> Для операции импорта указывает список байтовых диапазонов импортируемого файла. Каждый диапазон страниц описывается смещением и длиной в исходном файле, который описывает диапазон страниц, а также MD5-хэшем области. Требуется атрибут диапазона страниц `Hash`. Служба будет проверять, совпадает ли хэш данных в большом двоичном объекте с MD5-хэшем из диапазона страниц. Для описания импортируемого файла с общим размером до 1 ТБ может использоваться любое число диапазонов страниц. Все диапазоны страниц должны быть упорядочены по смещению и не должны перекрываться.<br /><br /> Для операции экспорта указывает набор байтовых диапазонов большого двоичного объекта, который был экспортирован на диск.<br /><br /> Диапазоны страниц могут совместно охватить только поддиапазоны большого двоичного объекта или файла.  Оставшаяся часть файла, не попавшая ни в один диапазон страниц, ожидается, и ее содержимое может быть не определено.|  
|`PageRange`|XML-элемент|Представляет диапазон страниц.|  
|`PageRange/@Offset`|Атрибут, целое число|Задает смещение в файле переноса и большом двоичном объекте, где начинается указанный диапазон страниц. Это значение должно быть кратно 512.|  
|`PageRange/@Length`|Атрибут, целое число|Указывает длину диапазона страниц. Это значение должно быть кратно 512 и не превышать 4 МБ.|  
|`PageRange/@Hash`|Атрибут, строка|Указывает значение MD5-хэша диапазона страниц в кодировке Base16.|  
|`BlockList`|Вложенный XML-элемент|Требуется для блочного BLOB-объекта с именованными блоками.<br /><br /> Для операции импорта список блоков указывает набор блоков, которые будут импортированы в службу хранилища Azure. Для операции экспорта список блоков указывает, где в файле на диске экспорта сохранен каждый блок. Каждый блок описывается смещением в файле и длиной. Для именования каждого блока используется атрибут идентификатора блока, и каждый из них содержит MD5-хэш. Для описания большого двоичного объекта может использоваться до 50 000 блоков.  Все блоки должны быть упорядочены по смещению и вместе должны охватывать полный диапазон файла, *т. е.* между блоками не должно быть зазора. Если размер большого двоичного объекта не превышает 64 МБ, идентификаторы всех блоков должны полностью присутствовать или отсутствовать. Идентификаторы блоков должны быть строками в кодировке Base64. Дополнительные требования к идентификаторам блоков см. в статье [Put Block](/rest/api/storageservices/put-block) (Операция Put Block).|  
|`Block`|XML-элемент|Представляет блок.|  
|`Block/@Offset`|Атрибут, целое число|Задает смещение там, где начинается указанный блок.|  
|`Block/@Length`|Атрибут, целое число|Указывает число байтов в блоке. Это значение не должно превышать 4 МБ.|  
|`Block/@Id`|Атрибут, строка|Указывает строку, представляющую идентификатор блока.|  
|`Block/@Hash`|Атрибут, строка|Указывает значение MD5-хэша блока в кодировке Base16.|  
|`Blob/MetadataPath`|Строка|Необязательный элемент. Указывает относительный путь к файлу метаданных. Во время импорта задаются метаданные целевого большого двоичного объекта. Во время операции экспорта метаданные большого двоичного объекта сохраняются в файле метаданных на диске.|  
|`Blob/MetadataPath/@Hash`|Атрибут, строка|Указывает значение MD5-хэша файла метаданных большого двоичного объекта в кодировке Base16.|  
|`Blob/PropertiesPath`|Строка|Необязательный элемент. Указывает относительный путь к файлу свойств. Во время импорта задаются свойства целевого большого двоичного объекта. Во время операции экспорта свойства большого двоичного объекта сохраняются в файле свойств на диске.|  
|`Blob/PropertiesPath/@Hash`|Атрибут, строка|Указывает значение MD5-хэша файла свойств большого двоичного объекта в кодировке Base16.|  
  
## <a name="next-steps"></a>Дополнительная информация
 
* [Справочник по REST API импорта и экспорта службы хранилища](/rest/api/storageimportexport/)
