---
title: "\"Горячее\", \"холодное\" и архивное хранилище Azure для BLOB-объектов | Документация Майкрософт"
description: "\"Горячее\", \"холодное\" и архивное хранилище для учетных записей хранения Azure."
services: storage
documentationcenter: ''
author: kuhussai
manager: jwillis
editor: ''
ms.assetid: eb33ed4f-1b17-4fd6-82e2-8d5372800eef
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/11/2017
ms.author: kuhussai
ms.openlocfilehash: 21b09d9c428f9c29e0048faa32ce5349a127be89
ms.sourcegitcommit: 9cdd83256b82e664bd36991d78f87ea1e56827cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2018
---
# <a name="azure-blob-storage-hot-cool-and-archive-storage-tiers"></a>Хранилище BLOB-объектов Azure: горячий, холодный и архивный уровни

## <a name="overview"></a>Обзор

В службе хранилища Azure реализовано три уровня для хранения BLOB-объектов. Это позволяет экономно хранить данные с учетом особенностей их использования. **"Горячий" уровень хранилища** Azure оптимизирован для хранения часто используемых данных. **Холодный уровень хранилища** Azure оптимизирован для хранения данных, которые используются редко и хранятся не менее 30 дней. **Архивный уровень хранилища** оптимизирован для хранения данных, которые используются редко и хранятся не менее 180 дней. Требования к задержке для таких данных гибкие (порядка нескольких часов). Архивный уровень хранилища доступен только на уровне большого двоичного объекта. На уровне учетной записи хранения его невозможно использовать. Хотя холодные данные предусматривают более низкую частоту обращения, они должны характеризоваться такими же показателями надежности, доступности, пропускной способности и времени получения доступа, как горячие. Приемлемым компромиссом для более экономного хранения редко используемых данных является соглашение об уровне обслуживания, предусматривающее более низкую доступность. Кроме того, предоставление доступа к таким данным стоит дороже, чем к часто используемыми данными. Архивное хранилище используется в автономном режиме. Оно обеспечивает наименьшие затраты на хранение, но требует наибольших затрат на доступ. На уровне учетной записи можно задать только горячий и холодный уровни хранилища (не архивный). На уровне объектов можно задать все три уровня.

В настоящее время объемы данных, хранящихся в облаке, увеличиваются в геометрической прогрессии. Чтобы оптимизировать затраты при расширении хранилища, размещайте данные на разных уровнях с учетом частоты обращения и планируемого срока хранения. Данные, хранящиеся в облаке, создаются, обрабатываются и используются по-разному. Одни данные активно используют и изменяют на протяжении всего жизненного цикла. Другие данные часто используются в начале цикла, но по мере их устаревания к ним обращаются все реже. Третьи данные не используют или делают это редко, возможно даже единожды за весь срок хранения.

Каждый из этих сценариев доступа к данным имеет свои преимущества: разные уровни хранения оптимизированы для определенных шаблонов доступа. Теперь в хранилище BLOB-объектов Azure можно использовать разные модели ценообразования, выбрав наиболее подходящий уровень хранения данных: горячий, холодный или архивный.

## <a name="storage-accounts-that-support-tiering"></a>Учетные записи хранения, которые поддерживают распределение по уровням

Данные хранилища объектов можно распределять только между горячим, холодным и архивным уровнями в учетной записи хранилища BLOB-объектов либо в учетной записи общего назначения версии 2 (GPv2). Учетные записи общего назначения версии 1 (GPv1) не поддерживают распределение по уровням. Однако клиенты могут легко преобразовать имеющиеся учетные записи GPv1 или учетные записи хранилища BLOB-объектов в учетные записи GPv2 на портале Azure. Для этого достаточно одного щелчка. GPv2 предоставляет новую структуру ценообразования для больших двоичных объектов, файлов и очередей, а также доступ к различным новым возможностям хранилища. Кроме того, некоторые новые функции и скидки будут предлагаться только в пределах учетных записей GPv2. Поэтому клиенты должны оценить использование учетных записей GPv2, но использовать их только после проверки цены для всех служб, так как плата за некоторые рабочие нагрузки в GPv2 может быть больше, чем GPv1. Дополнительные сведения см. в статье [Варианты учетной записи хранения Azure](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

Учетные записи хранилища BLOB-объектов и GPv2 предоставляют атрибут **AccessTier** на уровне учетной записи, позволяющий указать уровень хранилища по умолчанию как горячий или холодный для любого большого двоичного объекта в учетной записи хранения, для которого не задан уровень на уровне объекта. Для объектов с уровнем, заданным на уровне объекта, уровень учетной записи не применяется. Архивный уровень может применяться только на уровне объекта. Между этими уровнями хранилища можно переключаться в любое время.

## <a name="hot-access-tier"></a>"Горячий" уровень доступа

Стоимость хранения данных на горячем уровне хранилища выше, чем на холодном и архивном уровнях. Но на этом уровне доступ к данным обходится дешевле. Ниже перечислены ситуации, в которых данные нужно хранить на "горячем" уровне хранилища.

* Данные активно используют или планируют часто получать к ним доступ (для чтения и записи).
* Данные, которые вы планируете обрабатывать и в конечном счете перенести, лучше отнести к "холодному" уровню хранилища.

## <a name="cool-access-tier"></a>"Холодный" уровень доступа

На холодном уровне хранилища дешевле хранить данные, но доступ к ним стоит дороже по сравнению с горячим уровнем. Этот уровень предназначен для данных, которые будут храниться на холодном уровне не менее 30 дней. Ниже перечислены ситуации, в которых данные нужно хранить на "холодном" уровне хранилища.

* Наборы данных резервного копирования и аварийного восстановления краткосрочного хранения.
* Старое мультимедийное содержимое, которое нечасто просматривают, но которое должно быть доступно сразу по необходимости.
* Большие наборы данных, которые нужно хранить при меньших затратах, при этом большую часть данных собирают для последующей обработки (*например*, нужно долго хранить данные научных исследований или необработанные данные телеметрии производственного объекта).

## <a name="archive-access-tier"></a>Архивный уровень доступа

Архивный уровень хранилища — это предложение самой низкой ценовой категории для хранения данных и более высокой ценовой категории для получения данных по сравнению с горячим и холодным уровнями. Этот уровень предназначен для данных, для которых допустима задержка извлечения в несколько часов и которые будут храниться не менее 180 дней.

Так как большой двоичный объект является архивным хранилищем, он используется в автономном режиме. Его данные нельзя читать, копировать, перезаписывать и изменять. Исключением являются метаданные, которые находятся в сети и доступны. Также нельзя делать моментальные снимки BLOB-объекта в архивном хранилище. Но можно выполнять операции удаления, перечисления, получение свойств и метаданных, а также изменения уровня BLOB-объектов.

Пример сценария использования для архивного уровня хранилища включает:

* Долгосрочное резервное копирование, вторичное резервное копирование и архивные наборы данных
* Исходные (необработанные) данные, которые необходимо сохранить даже после их окончательной обработки (*например*, необработанные мультимедийные данные после перекодирования в другие форматы).
* Данные соответствия требованиям и архивные данные, которые нужно хранить в течение длительного времени и которые вряд ли когда-либо будут использовать (*например*, записи камер безопасности, старые рентгенограммы и результаты МРТ в медицинских заведениях или аудиозаписи и записи разговоров с клиентами в финансовых службах).

### <a name="blob-rehydration"></a>Восстановление больших двоичных объектов
Для чтения данных в архивном хранилище сначала необходимо изменить уровень BLOB-объекта на "горячий" или "холодный". Этот процесс называется восстановлением. Его выполнение может занять до 15 часов. Для достижения оптимальной производительности мы настоятельно рекомендуем использовать крупные большие двоичные объекты. Восстановление нескольких небольших двоичных объектов одновременно может занять дополнительное время.

При восстановлении вы можете проверить свойство **Archive Status** BLOB-объекта, чтобы убедиться, что уровень изменился. Для состояния отображается значение rehydrate-pending-to-hot или rehydrate-pending-to-cool в зависимости от целевого уровня. По завершении свойство состояния архивации удаляется, а для свойства **уровня доступа** большого двоичного объекта отображается значение "горячего" или "холодного" уровня.  

## <a name="blob-level-tiering"></a>Распределение BLOB-объектов по уровням

Распределение BLOB-объектов по уровням позволяет изменять уровень данных для объектов в ходе одной операции — [установки уровня BLOB-объекта](/rest/api/storageservices/set-blob-tier). Можно легко изменить уровень доступа к BLOB-объекту на "горячий", "холодный" или архивный, изменив шаблон использования. Перемещать данные между учетными записями не требуется. Все изменения уровня вступают в силу немедленно, за исключением случаев, когда BLOB-объект восстанавливается из архива, что может занять несколько часов. Время последнего изменения уровня большого двоичного объекта определяет атрибут **Access Tier Change Time** свойства большого двоичного объекта. Если большой двоичный объект используется на архивном уровне, его нельзя перезаписать. Поэтому отправка того же самого большого двоичного объекта не допускается в этом сценарии. Большой двоичный объект можно перезаписать на горячем и холодном уровнях хранилища. В этом случае новый большой двоичный объект наследует уровень перезаписанного.

BLOB-объекты всех трех уровней хранилища могут сосуществовать в пределах одной учетной записи. Любой большой двоичный объект, которому явно не присвоен уровень, наследует его из параметра уровня доступа в учетной записи. Если уровень доступа выводится из учетной записи, свойству большого двоичного объекта **Access Tier Inferred** присваивается значение true, а свойство большого двоичного объекта **Access Tier** соответствует уровню учетной записи. На портале Azure свойство Access Tier Inferred отображается на уровне доступа большого двоичного объекта: например, Hot (inferred) (Горячий (выведен)) или Cool (inferred) (Холодный (выведен)).

> [!NOTE]
> Архивное хранилище и распределение BLOB-объектов по уровням поддерживают только большие двоичные объекты. Уровень большого двоичного объекта, который содержит моментальные снимки, изменить нельзя.

### <a name="blob-level-tiering-billing"></a>Выставление счетов за распределение BLOB-объектов по уровням

Перемещение большого двоичного объекта на более "холодный" уровень ("горячий" -> "холодный", "горячий" -> архивный или "холодный" -> архивный) оплачивается как операция записи на целевой уровень. Запись на целевой уровень оплачивается за каждые 10 000 операций, а запись данных — за каждый ГБ. Перемещение большого двоичного объекта на более "теплый" уровень (архивный -> "холодный", архивный -> "горячий" или "холодный" -> "горячий") оплачивается, как операция чтения на исходном уровне. Чтение на исходном уровне оплачивается за каждые 10 000 операций, а получение данных — за каждый ГБ.

При переключении уровня учетной записи с "горячего" на "холодный" плата будет взиматься за операции записи (за каждые 10 000) для всех больших двоичных объектов без заданного уровня только в учетных записях GPv2. В учетных записях хранилища BLOB-объектов плата за это не взимается. Плата будет взиматься за операции чтения (за каждые 10 000) и получения данных (за гигабайт), если переключить учетную запись хранилища BLOB-объектов или учетную запись GPv2 с холодного уровня на горячий. Плата за раннее удаление также может применяться к любому большому двоичному объекту, перемещенному из "холодного" или архивного уровня.

### <a name="cool-and-archive-early-deletion"></a>Раннее удаление с "холодного" и архивного уровней

В дополнение к ежемесячной плате за гигабайт любой большой двоичный объект, перемещаемый на "холодный" уровень (только для учетных записей GPv2), регулируется периодом раннего удаления в 30 дней для "холодного" уровня, а любой большой двоичный объект, перемещаемый на архивный уровень, регулируется периодом раннего удаления в 180 дней для архивного уровня. Эта плата пропорциональна. Например, если большой двоичный объект перемещается в архив, а затем удаляется или перемещается на "горячий" уровень через 45 дней, будет взиматься плата за раннее удаление, эквивалентная 135 (180 минус 45) дням хранения этого большого двоичного объекта в архиве.

## <a name="comparison-of-the-storage-tiers"></a>Сравнение уровней хранилища

В таблице ниже приведены результаты сравнения "горячего" и "холодного" уровней хранилища.

| | **"Горячий" уровень хранилища** | **"Холодный" уровень хранилища** | **Архивный уровень хранилища**
| ---- | ----- | ----- | ----- |
| **Доступность** | 99,9 % | 99 % | Недоступно |
| **Доступность** <br> **(операции чтения RA-GRS)**| 99,99 % | 99,9 % | Недоступно |
| **Плата за использование** | Выше стоимость хранения, ниже расходы на доступ и транзакции | Ниже стоимость хранения, выше расходы на доступ и транзакции | Ниже стоимость хранения, выше расходы на доступ и транзакции |
| **Объекты минимального размера** | Недоступно | Недоступно | Недоступно |
| **Минимальный срок хранения** | Недоступно | 30 дней (только для GPv2) | 180 дней
| **Задержка** <br> **(время до получения первого байта)** | Миллисекунды | Миллисекунды | < 15 часов
| **Целевые показатели масштабируемости и производительности** | Такие же, как при использовании учетных записей хранения общего назначения | Такие же, как при использовании учетных записей хранения общего назначения | Такие же, как при использовании учетных записей хранения общего назначения |

> [!NOTE]
> Учетные записи хранения BLOB-объектов обеспечивают такую же производительность и масштабируемость, как учетные записи хранения общего назначения. Дополнительные сведения см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

## <a name="quickstart-scenarios"></a>Сценарии быстрого запуска

В этом разделе описаны следующие сценарии с использованием портала Azure:

* Изменение уровня доступа по умолчанию для учетной записи GPv2 или учетной записи хранилища BLOB-объектов.
* Изменение уровня большого двоичного объекта в учетной записи GPv2 или учетной записи хранилища BLOB-объектов.

### <a name="change-the-default-account-access-tier-of-a-gpv2-or-blob-storage-account"></a>Изменение уровня доступа по умолчанию для учетной записи GPv2 или учетной записи хранилища BLOB-объектов

1. Войдите на [портале Azure](https://portal.azure.com).

2. Чтобы перейти к вашей учетной записи хранения, выберите "Все ресурсы", а затем — необходимую учетную запись хранения.

3. В колонке "Параметры" щелкните **Конфигурация** , чтобы просмотреть и (или) изменить конфигурацию учетной записи.

4. Выберите нужный уровень хранилища в соответствии со своими потребностями, задав для параметра **Уровень доступа** значение **Холодный** или **Горячий**.

5. Щелкните "Сохранить" в верхней части колонки.

### <a name="change-the-tier-of-a-blob-in-a-gpv2-or-blob-storage-account"></a>Измените уровень большого двоичного объекта в учетной записи GPv2 или учетной записи хранилища BLOB-объектов.

1. Войдите на [портале Azure](https://portal.azure.com).

2. Чтобы перейти к большому двоичному объекту в своей учетной записи хранения, выберите "Все ресурсы". Затем последовательно выберите учетную запись хранения, контейнер и большой двоичный объект.

3. В колонке свойств большого двоичного объекта в раскрывающемся меню **Уровень доступа** выберите **горячий**, **холодный** или **архивный** уровень хранилища.

5. Щелкните "Сохранить" в верхней части колонки.

## <a name="faq"></a>Часто задаваемые вопросы

**Следует ли использовать учетную запись хранилища BLOB-объектов или учетную запись GPv2, если нужно распределить данные по уровням?**

Мы рекомендуем использовать учетную запись GPv2 вместо учетных записей хранилища BLOB-объектов для распределения по уровням. GPv2 поддерживает все возможности, которые поддерживают учетные записи хранилища BLOB-объектов и многие другие функции. Цены на учетную запись хранилища BLOB-объектов и учетную запись GPv2 почти идентичны. Но некоторые новые возможности и скидки будут доступны только в пределах учетных записей GPv2. Учетные записи GPv1 не поддерживают распределение по уровням.

Структура ценообразования в учетных записях GPv1 и GPv2 различна, поэтому клиенты должны тщательно оценить их, прежде чем принимать решение об использовании учетных записей GPv2. Имеющуюся учетную запись хранилища BLOB-объектов или учетную запись GPv1 можно легко преобразовать в GPv2 одним щелчком мыши. Дополнительные сведения см. в статье [Варианты учетной записи хранения Azure](../common/storage-account-options.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

**Можно ли хранить объекты во всех трех ("горячем", "холодном" и архивном) уровнях хранилища в одной учетной записи?**

Да. Атрибут **Access Tier**, назначенный на уровне учетной записи, является уровнем по умолчанию. Он применяется ко всем объектам в этой учетной записи без явно указанного уровня. Но функция распределения BLOB-объектов по уровням позволяет задавать уровень доступа на уровне объекта независимо от параметра уровня доступа, назначенного в учетной записи. Большие двоичные объекты на любом из трех уровней хранилища (горячий, холодный и архивный) могут существовать в одной учетной записи.

**Можно ли изменить уровень хранилища по умолчанию для учетной записи хранилища BLOB-объектов или GPv2?**

Вы можете изменить уровень хранилища по умолчанию, установив атрибут **Access Tier** для учетной записи хранения. Изменение уровня хранилища применяется ко всем объектам, которые хранятся в учетной записи и для которых явно не назначен уровень. Изменение уровня хранилища с "горячего" на "холодный" предусматривает оплату за операции записи (за каждые 10 000) для всех больших двоичных объектов без заданного уровня. Это применимо только для учетных записей GPv2. Изменение уровня хранилища с "холодного" на "горячий" предусматривает оплату за операции чтения (за каждые 10 000) и получения данных (за каждый гигабайт) для всех больших двоичных объектов в учетных записях хранилища BLOB-объектов и учетных записях GPv2.

**Можно ли задать архивный уровень в качестве уровня доступа к учетной записи по умолчанию?**

Нет. Только "горячий" и "холодный" уровни хранилища можно задать как уровень доступа к учетной записи по умолчанию. Архивный уровень можно задать только на уровне объекта.

**В каких регионах доступны "горячий", "холодный" и архивный уровень хранилища?**

"Горячий" и "холодный" уровни хранилища, а также распределение BLOB-объектов по уровням доступны во всех регионах. Хранилище архивного уровня изначально будет доступно только в выбранных регионах. Полный список см. на странице [Доступность продуктов по регионам](https://azure.microsoft.com/regions/services/).

**Отличается ли поведение BLOB-объектов на "холодном" уровне хранилища от поведения этих объектов на "горячем" уровне?**

Для больших двоичных объектов на горячем уровне хранилища характерна такая же задержка, как для больших двоичных объектов в учетных записях GPv1, GPv2 и учетных записях хранилища BLOB-объектов. Для больших двоичных объектов на холодном уровне хранилища характерна такая же задержка (в миллисекундах), как для больших двоичных объектов в учетных записях GPv1, GPv2 и учетных записях хранилища BLOB-объектов. Для больших двоичных объектов на архивном уровне хранилища характерна задержка в несколько часов в учетных записях GPv1, GPv2 и учетных записях хранилища BLOB-объектов.

Доступность BLOB-объектов на "холодном" уровне хранилища несколько ниже (в соответствии с соглашением об уровне обслуживания), чем у BLOB-объектов на "горячем" уровне. Дополнительные сведения см. в статье [Соглашение об уровне обслуживания для хранилища](https://azure.microsoft.com/support/legal/sla/storage/v1_2/).

**Одинаковы ли операции на "горячем", "холодном" и архивном уровне?**

Да. Все операции на "горячем" и "холодном" уровнях полностью согласованы. Все допустимые архивные операции, включая удаление, перечисление, получение параметров и метаданных большого двоичного объекта, а также задание уровня большого двоичного объекта полностью согласованы для "горячего" и "холодного" уровней. Большой двоичный объект невозможно прочитать или изменить, пока он находится на архивном уровне.

**Как узнать, что восстановление большого двоичного объекта с архивированного уровня на "горячий" или "холодный" уровень завершено?**

При восстановлении можно использовать операцию получения свойств большого двоичного объекта для опроса атрибута **состояния архивации**, чтобы убедиться, что изменение уровня завершено. Для состояния отображается значение rehydrate-pending-to-hot или rehydrate-pending-to-cool в зависимости от целевого уровня. По завершении свойство состояния архивации удаляется, а для свойства **уровня доступа** большого двоичного объекта отображается значение "горячего" или "холодного" уровня.  

**Когда начнется выставление счетов по соответствующему тарифу после установки уровня большого двоичного объекта?**

Плата за каждый большой двоичный объект выставляется в соответствии с уровнем, обозначенным в свойстве **Уровень доступа**. При задании нового уровня для большого двоичного объекта свойство **Уровень доступа** немедленно отразит новый уровень для всех переходов, кроме восстановления большого двоичного объекта из архивного уровня в "горячий" или "холодный", что может занять несколько часов. В этом случае плата будет выставляться по тарифам архива, пока не будет завершено восстановление, после чего свойство **Уровень доступа** отразит новый уровень. Только после этого вам будет выставлен счет по тарифам "горячего" или "холодного" уровня.

**Как определить, будет ли взиматься плата за раннее удаление при удалении или перемещении большого двоичного объекта из "холодного" или архивного уровня?**

За любой большой двоичный объект, который удаляется или перемещается с "холодного" (только для учетных записей GPv2) или архивного уровней до истечения 30 и 180 дней соответственно, будет взиматься плата за раннее удаление. Вы можете определить срок хранения большого двоичного объекта на "холодном" или архивном уровне, проверив свойство большого двоичного объекта **Access Tier Change Time**, которое предоставляет метку последнего изменения уровня. Дополнительные сведения см. в статье [Хранилище BLOB-объектов Azure: "горячий", "холодный" и архивный (предварительная версия) уровни](#cool-and-archive-early-deletion).

**Какие средства Azure и пакеты SDK поддерживают распределение BLOB-объектов по уровням и архивное хранилище?**

Портал Azure, PowerShell и средства CLI, а также клиентские библиотеки .NET, Java, Python и Node.js поддерживают распределение BLOB-объектов по уровням и архивное хранилище.  

**Сколько данных можно хранить на "горячем", "холодном" и архивном уровне данных?**

Хранилище данных и другие ограничения устанавливаются на уровне учетной записи, а не на уровне хранилища. Таким образом можно использовать все ограничения для одного уровня или для всех трех. Дополнительные сведения см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](../common/storage-scalability-targets.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json).

## <a name="next-steps"></a>Дополнительная информация

### <a name="evaluate-hot-cool-and-archive-in-gpv2-blob-storage-accounts"></a>Оценка горячего, холодного и архивного уровней в учетной записи хранилища BLOB-объектов GPv2

[Доступность продуктов по регионам](https://azure.microsoft.com/regions/#services)

[Оценка использования текущих учетных записей хранения путем включения метрик службы хранилища Azure](../common/storage-enable-and-view-metrics.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json)

[Цены на горячий, холодный и архивный уровни в учетных записях хранилища BLOB-объектов и учетных записях GPv2 по регионам](https://azure.microsoft.com/pricing/details/storage/)

[Проверка сведений о ценах на передачу данных](https://azure.microsoft.com/pricing/details/data-transfers/)
