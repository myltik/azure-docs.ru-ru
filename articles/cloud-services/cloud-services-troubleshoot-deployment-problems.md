---
title: Устранение неполадок, которые могут возникнуть при развертывании облачной службы | Документация Майкрософт
description: Во время развертывания облачной службы в Azure вы можете столкнуться с несколькими типичными проблемами. В этой статье приведены решения некоторых из них.
services: cloud-services
documentationcenter: ''
author: simonxjx
manager: felixwu
editor: ''
tags: top-support-issue
ms.assetid: a18ae415-0d1c-4bc4-ab6c-c1ddea02c870
ms.service: cloud-services
ms.devlang: na
ms.topic: troubleshooting
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 11/03/2017
ms.author: v-six
ms.openlocfilehash: 3c56a5750c9f8a6c59ea07c01c101f358331174b
ms.sourcegitcommit: b07d06ea51a20e32fdc61980667e801cb5db7333
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2017
ms.locfileid: "26408185"
---
# <a name="troubleshoot-cloud-service-deployment-problems"></a>Устранение неполадок, которые могут возникнуть при развертывании облачной службы
При развертывании пакета приложения облачной службы в Azure сведения о развертывании можно получить на панели **Свойства** портала Azure. Сведения, отображающиеся на этой панели, можно использовать для устранения неполадок в работе облачной службы. Кроме того, вы можете передать эту информацию в службу поддержки Azure при открытии нового запроса на поддержку.

Панель **Свойства** можно найти следующим образом.

* На портале Azure щелкните развертывание нужной облачной службы, выберите **Все параметры**, а затем нажмите кнопку **Свойства**.

> [!NOTE]
> Содержимое панели **Свойства** можно скопировать в буфер обмена, щелкнув значок в правом верхнем углу панели.
>
>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="problem-i-cannot-access-my-website-but-my-deployment-is-started-and-all-role-instances-are-ready"></a>Проблема: у меня нет доступа к моему веб-сайту, но мое развертывание запущено и все экземпляры роли готовы
URL-адрес веб-сайта, отображаемый на портале, не включает в себя порт. По умолчанию для веб-сайтов используется порт 80. Если в приложении настроено использование другого порта, то при открытии веб-сайта в URL-адрес нужно добавить номер нужного порта.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure проверьте порты на наличие экземпляров ролей (в разделе **Входные конечные точки**).
3. Если номер порта — не 80, добавьте правильное значение порта в URL-адрес при доступе к приложению. Чтобы указать нестандартный порт, введите URL-адрес, после него поставьте двоеточие (:), а затем укажите номер порта без пробелов.

## <a name="problem-my-role-instances-recycled-without-me-doing-anything"></a>Проблема: мои экземпляры ролей перезапускаются автоматически
Восстановление службы происходит автоматически, когда Azure обнаруживает проблемные узлы и, следовательно, перемещает экземпляры ролей в новые узлы. В этом случае экземпляры ролей могут перезапускаться автоматически. Чтобы определить, произошло ли восстановление службы, выполните следующие действия.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure ознакомьтесь со сведениями и определите, восстанавливалась ли служба во время перезапуска ролей.

Кроме того, роли перезапускаются примерно раз в месяц, когда обновляются ОС узла и гостевая ОС.  
Дополнительные сведения см. в записи блога [Role Instance Restarts Due to OS Upgrades](http://blogs.msdn.com/b/kwill/archive/2012/09/19/role-instance-restarts-due-to-os-upgrades.aspx) (Перезапуск экземпляра роли из-за обновлений ОС).

## <a name="problem-i-cannot-do-a-vip-swap-and-receive-an-error"></a>Проблема: когда я пробую переключить виртуальный IP-адрес, отображается сообщение об ошибке
Переключение виртуального IP-адреса не допускается, если развертывание обновляется. Развертывание обновляется автоматически в таких случаях:

* доступна новая операционная система на виртуальной машине и на вашем устройстве настроено автоматическое обновление;
* выполняется восстановление службы.

Чтобы узнать, препятствует ли автоматическое обновление переключению виртуального IP-адреса, сделайте следующее:

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure найдите значение параметра **Состояние**. Если указано значение **Готово**, проверьте **последнюю операцию**: возможно, недавно выполнялась операция, которая могла помешать переключению виртуального IP-адреса.
3. Повторите шаги 1 и 2 для развертывания в производственной среде.
4. Если выполняется автоматическое обновление, дождитесь его завершения, прежде чем пытаться переключить виртуальный IP-адрес.

## <a name="problem-a-role-instance-is-looping-between-started-initializing-busy-and-stopped"></a>Проблема: экземпляр роли циклически переключается между состояниями «Запущено», «Инициализация», «Занято» и «Остановлено»
Это может указывать на проблему с кодом, пакетом или файлом конфигурации приложения. В этом случае состояние будет изменяться каждые несколько минут, а на портале Azure могут отображаться примерно такие состояния: **Перезапуск**, **Занято** или **Инициализация**. Это означает, что что-то не так с приложением и что эта проблема не дает работать экземпляру роли.

Дополнительные сведения об устранении этой проблемы см. в записях блога [Azure PaaS Compute Diagnostics Data](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx) (Данные диагностики для вычислительных сред Azure PaaS) и [Common issues that cause roles to recycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md) (Распространенные проблемы, которые вызывают повторное использование ролей).

## <a name="problem-my-application-stopped-working"></a>Проблема: мое приложение перестало работать
1. На портале Azure щелкните экземпляр роли.
2. На панели **Свойства** портала Azure ознакомьтесь со следующими условиями, связанными с устранением проблемы:
   * Если работа экземпляра роли недавно остановилась (вы можете проверить значение **счетчика прерываний**), развертывание, возможно, обновляется. Подождите: работа экземпляра роли может возобновиться автоматически.
   * Если состояние экземпляра роли — **Занято**, проверьте код приложения: возможно, обрабатывается событие [StatusCheck](https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck) . Может потребоваться добавить или исправить код, который обрабатывает это событие.
   * Просмотрите данные диагностики и сценарии устранения неполадок в записи блога [Данные компьютерной диагностики PaaS Azure](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).

> [!WARNING]
> Если перезапустить облачную службу, будут сброшены свойства развертывания, при этом сведения о первоначальной проблеме будут удалены.
>
>

## <a name="next-steps"></a>Дополнительная информация
Просмотрите дополнительные [статьи об устранении неполадок](https://docs.microsoft.com/azure/cloud-services/cloud-services-allocation-failures) в облачных службах.

Чтобы узнать, как устранять неполадки ролей облачной службы с помощью диагностических данных компьютеров Azure PaaS, см. [серию статей в блоге Кевина Уильямсона](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).
