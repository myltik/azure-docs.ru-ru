<properties
	pageTitle="Автомасштабирование облачной службы на портале | Microsoft Azure"
	description="Узнайте, как с помощью портала настроить правила автомасштабирования для веб-роли или рабочей роли облачной службы в Azure."
	services="cloud-services"
	documentationCenter=""
	authors="Thraka"
	manager="timlt"
	editor=""/>

<tags
	ms.service="cloud-services"
	ms.workload="tbd"
	ms.tgt_pltfrm="na"
	ms.devlang="na"
	ms.topic="article"
	ms.date="09/06/2016"
	ms.author="adegeo"/>


# Автомасштабирование облачной службы

> [AZURE.SELECTOR]
- [Портал Azure](cloud-services-how-to-scale-portal.md)
- [Классический портал Azure](cloud-services-how-to-scale.md)

Для рабочей роли облачной службы можно задать условия, которые активируют операции масштабировании. Условия для роли могут основываться на нагрузке роли на ЦП, диск или сеть. Можно также задать условие на основе очереди сообщений или метрики какого-то другого ресурса Azure, связанного с подпиской.

>[AZURE.NOTE] Эта статья посвящена веб-ролям и рабочим ролям облачной службы. Виртуальные машины (классические), создаваемые напрямую, размещаются в облачной службе. Стандартную виртуальную машину можно масштабировать, связав ее с [группой доступности](../virtual-machines/virtual-machines-windows-classic-configure-availability.md) и включив или отключив ее вручную.

## Рекомендации

При настройке масштабирования приложения следует учитывать следующие сведения.

- Масштабирование зависит от использования ядер. Более крупные экземпляры ролей задействуют больше ядер. Масштабировать приложение можно только в пределах количества ядер для используемой подписки. Например, если подписка ограничена двадцатью ядрами и выполняется приложение с двумя средними по размерам облачными службами (всего четыре ядра), то можно увеличить масштаб других развернутых в рамках подписки облачных служб на шестнадцать ядер. Дополнительные сведения о размерах см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).

- Можно настроить масштабирование на основе порогового значения очереди сообщений. Дополнительные сведения об использовании очередей см. в статье [Использование службы хранения очередей](../storage/storage-dotnet-how-to-use-queues.md).

- Можно также масштабировать другие ресурсы, связанные с подпиской.

- В целях обеспечения высокой доступности приложения необходимо убедиться, что приложение развернуто с двумя и более экземплярами ролей. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/).

## Где находится функция масштабирования?

После выбора облачной службы должна появиться колонка облачной службы.

1. В колонке облачной службы в элементе **Roles and Instances** (Роли и экземпляры) выберите имя облачной службы. **ВАЖНО**. Щелкните роль облачной службы, а не экземпляр роли, который расположен под ней.

    ![](./media/cloud-services-how-to-scale-portal/roles-instances.png)

2. Выберите элемент **scale** (масштаб).

    ![](./media/cloud-services-how-to-scale-portal/scale-tile.png)

## Автоматическое масштабирование

Параметры масштабирования для роли можно настроить с помощью двух режимов — **ручной** или **автоматический**. Ручной: в этом режиме, как и следовало ожидать, задается абсолютное число экземпляров. Автоматический: этот режим позволяет задать набор правил, определяющих как и насколько вы хотите масштабировать.

Для параметра **Режим масштабирования** выберите значение **Правила расписания и производительности**.

![Параметры масштабирования облачных служб с профилем и правилом](./media/cloud-services-how-to-scale-portal/schedule-basics.png)

1. Существующий профиль.
2. Добавьте правило для родительского профиля.
3. Добавьте другой профиль.

Выберите **Добавить профиль**. Профиль определяет режим, который вы хотите использовать для масштабирования: **всегда**, **периодичность** или **фиксированная дата**.

После настройки профиля и правил выберите значок **Сохранить** вверху экрана.

#### Профиль

Профиль задает минимальное и максимальное число экземпляров для масштабирования, а также определяет, когда этот диапазон масштабирования активен.

* **Всегда**

    Всегда сохраняйте этот диапазон доступных экземпляров.

    ![Облачная служба, которая масштабируется всегда](./media/cloud-services-how-to-scale-portal/select-always.png)
    
* **Периодичность**

    Выберите дни недели для масштабирования.

    ![Облачная служба, которая масштабируется с заданной периодичностью](./media/cloud-services-how-to-scale-portal/select-recurrence.png)
    
* **Фиксированная дата**

    Фиксированный диапазон дат для масштабирования роли.

    ![Облачная служба, которая масштабируется в фиксированную дату](./media/cloud-services-how-to-scale-portal/select-fixed.png)

По завершении настройки профиля нажмите кнопку **ОК**, расположенную в нижней части колонки профиля.

#### правило;

Правила добавляются в профиль и представляют собой условие, которое будет активировать масштабирование.

Триггер правила основан на метрике облачной службы (использование ЦП, активность диска или сетевая активность), к которой можно добавить условное значение. Дополнительно можно задать триггер на основе очереди сообщений или метрики какого-то другого ресурса Azure, связанного с подпиской.

![](./media/cloud-services-how-to-scale-portal/rule-settings.png)

По завершении настройки правила нажмите кнопку **ОК**, расположенную в нижней части колонки правила.

## Вернемся к ручному масштабированию

Перейдите к разделу [Настройки масштабирования](#where-scale-is-located) и выберите для параметра **Режим масштабирования** значение **Число экземпляров, вводимое вручную**.

![Параметры масштабирования облачных служб с профилем и правилом](./media/cloud-services-how-to-scale-portal/manual-basics.png)

При этом из роли удаляется автоматическое масштабирование, и теперь можно непосредственно задать число экземпляров.

1. Параметр масштабирования (ручного или автоматического).
2. Ползунок экземпляров роли, устанавливающий число экземпляров для масштабирования.
3. Экземпляры роли для масштабирования.

После настройки параметров масштабирования выберите значок **Сохранить** вверху экрана.

<!---HONumber=AcomDC_0914_2016-->