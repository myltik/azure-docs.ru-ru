---
title: Вопросы и ответы по проблемам развертывания для облачных служб Microsoft Azure | Документы Майкрософт
description: В этой статье приведены часто задаваемые вопросы по развертыванию для облачных служб Microsoft Azure.
services: cloud-services
documentationcenter: ''
author: genlin
manager: cshepard
editor: ''
tags: top-support-issue
ms.assetid: 84985660-2cfd-483a-8378-50eef6a0151d
ms.service: cloud-services
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/11/2018
ms.author: genli
ms.openlocfilehash: 05217129d4993514acaf8c717847040584984cb3
ms.sourcegitcommit: c52123364e2ba086722bc860f2972642115316ef
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/11/2018
ms.locfileid: "34068910"
---
# <a name="deployment-issues-for-azure-cloud-services-frequently-asked-questions-faqs"></a>Проблемы развертывания для облачных служб Azure. Вопросы и ответы (FAQ)

В этой статье приведены часто задаваемые вопросы по проблемам развертывания для [облачных служб Microsoft Azure](https://azure.microsoft.com/services/cloud-services). Сведения о размерах приводятся в статье [Размеры для облачных служб](cloud-services-sizes-specs.md) .

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="why-does-deploying-a-cloud-service-to-the-staging-slot-sometimes-fail-with-a-resource-allocation-error-if-there-is-already-an-existing-deployment-in-the-production-slot"></a>Почему иногда развертывание облачной службы для промежуточной области завершается с ошибкой выделения ресурсов, если в рабочей области уже существует развертывание?
Если в одной из областей облачной службы имеется развертывание, вся облачная служба прикрепляется к определенному кластеру. Это означает, что если развертывание уже существует в рабочей области, то новое промежуточное развертывание может быть выделено только в том же кластере, что и рабочая область.

Сбой выделения происходит, когда кластер, в котором размещается облачная служба, не имеет достаточных физических вычислительных ресурсов для удовлетворения запроса на развертывание.

Статья [Сбой выделения ресурсов для облачной службы: решения](cloud-services-allocation-failures.md#solutions) поможет устранить такие ошибки выделения.

## <a name="why-does-scaling-up-or-scaling-out-a-cloud-service-deployment-sometimes-result-in-allocation-failure"></a>Почему масштабирование развертывания облачной службы иногда приводит к сбою выделения?
При развертывании облачной службы она обычно прикрепляется к конкретному кластеру. Это означает, что при масштабировании существующей облачной службы должны выделяться новые экземпляры в том же кластере. Если кластер почти заполнен или нужный размер или тип виртуальной машины недоступен, запрос может завершиться ошибкой.

Статья [Сбой выделения ресурсов для облачной службы: решения](cloud-services-allocation-failures.md#solutions) поможет устранить такие ошибки выделения.

## <a name="why-does-deploying-a-cloud-service-into-an-affinity-group-sometimes-result-in-allocation-failure"></a>Почему развертывание облачной службы в территориальной группе иногда приводит к появлению ошибки выделения?
Если облачная служба не прикреплена ни к какой территориальной группе, структура может распределить новое развертывание в пустую облачную службу в любом кластере соответствующего региона. По возможности развертывания в одну и ту же территориальную группу будут выполняться в одном и том же кластере. Если кластер близок к заполнению, запрос может завершиться ошибкой.

Статья [Сбой выделения ресурсов для облачной службы: решения](cloud-services-allocation-failures.md#solutions) поможет устранить такие ошибки выделения.

## <a name="why-does-changing-vm-size-or-adding-a-new-vm-to-an-existing-cloud-service-sometimes-result-in-allocation-failure"></a>Почему изменение размера ВМ или добавление новой ВМ в существующую облачную службу иногда приводит к появлению ошибки выделения?
Кластеры в центре обработки данных могут иметь разные конфигурации типов машин (например, серии A, серии Av2, серии D, серии Dv2, серии G, серии H и т. д.). Однако не во всех кластерах будут присутствовать все виды виртуальных машин. Например, при попытке добавить ВМ серии D в облачную службу, которая уже развернута в кластере, в котором присутствует только серия A, может возникать ошибка выделения. Это также происходит при попытке изменить размер и SKU ВМ (например, при переключении из серии A в серию D).

Статья [Сбой выделения ресурсов для облачной службы: решения](cloud-services-allocation-failures.md#solutions) поможет устранить такие ошибки выделения.

Чтобы проверить размеры, доступные в вашем регионе, см. статью [Microsoft Azure. Доступность продуктов по регионам](https://azure.microsoft.com/regions/services).

## <a name="why-does-deploying-a-cloud-service-sometime-fail-due-to-limitsquotasconstraints-on-my-subscription-or-service"></a>Почему развертывание облачной службы иногда завершается неудачно из-за ограничений или квот для моей подписки или службы?
Развертывание облачной службы может завершиться неудачно, если ресурсы, которые требуется выделить, превышают квоту по умолчанию или максимальную квоту, разрешенную для вашей службы на уровне региона или центра обработки данных. Дополнительные сведения см. в статье [Ограничения облачных служб](../azure-subscription-service-limits.md#cloud-services-limits).

Вы также можете отслеживать текущую квоту и использование для своей подписки на портале: портал Azure = > "Подписки" = > \<соответствующая подписка> = > "Использование + квота".

Информацию об использовании ресурсов можно также получить через API выставления счетов Azure. См. раздел [API использования ресурсов Azure (предварительная версия)](../billing/billing-usage-rate-card-overview.md#azure-resource-usage-api-preview).

## <a name="how-can-i-change-the-size-of-a-deployed-cloud-service-vm-without-redeploying-it"></a>Как изменить размер виртуальной машины развернутой облачной службы без ее повторного развертывания?
Нельзя изменить размер виртуальной машины развернутой облачной службы без ее повторного развертывания. Размер ВМ встроен в CSDEF, который может быть обновлен только путем повторного развертывания.

Дополнительные сведения см. в разделе [Как обновить облачную службу](cloud-services-update-azure-service.md).

## <a name="why-am-i-not-able-to-deploy-cloud-services-through-service-management-apis-or-powershell-when-using-azure-resource-manager-storage-account"></a>Почему я не могу развернуть облачные службы с помощью API управления службами или PowerShell, когда я использую учетную запись хранения Azure Resource Manager? 

Облачная служба является классическим ресурсом, который напрямую несовместим с моделью Azure Resource Manager. Поэтому ее нельзя связать с учетной записью хранения Azure Resource Manager. Возможные сценарии: 
 
- Развертывание с помощью REST API.

    Чтобы обойти это ограничение при развертывании с помощью API REST управления службами, укажите URL-адрес SAS хранилища больших двоичных объектов, которое будет работать с классической учетной записью хранения и учетной записью хранения Azure Resource Manager. Дополнительные сведения о свойстве PackageUrl см. [здесь](https://msdn.microsoft.com/library/azure/ee460813.aspx).
  
- Развертывание с помощью [портала Azure](https://portal.azure.com).

    Развертывание удастся выполнить с [портала Azure](https://portal.azure.com), так как вызов идет через прокси-сервер или оболочку совместимости, которые обеспечивают взаимодействие между классическими ресурсами и ресурсами Azure Resource Manager. 
 
## <a name="why-does-azure-portal-require-me-to-provide-a-storage-account-for-deployment"></a>Почему на портале Azure требуется предоставить учетную запись хранения для развертывания? 

На классическом портале пакет загружался непосредственно в слой службы управления API. Затем в слое API пакет временно помещался во внутреннюю учетную запись хранения.  Такой процесс сопровождается проблемами с производительностью и масштабируемостью, так как слой API не разрабатывался в качестве службы для отправки файлов.  На портале Azure (модель развертывания Resource Manager) мы обошли промежуточный этап передачи в слой API. Это ускорило развертывание и повысило его надежность. 

Что касается затрат, они очень незначительны. Одну и ту же учетную запись хранения можно повторно использовать для всех развертываний. При помощи [калькулятора стоимости хранилища](https://azure.microsoft.com/pricing/calculator/#storage1) вы можете рассчитать расходы на отправку пакета службы (CSPKG-файл), скачивание CSPKG-файла и удаление CSPKG-файла. 
