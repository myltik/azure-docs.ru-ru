---
title: Запуск сервера приложений Java на классической виртуальной машине Azure
description: В этом руководстве используются ресурсы, созданные с помощью классической модели развертывания, а также приведены инструкции по созданию виртуальной машины Windows и ее настройке для работы сервера приложений Apache Tomcat.
services: virtual-machines-windows
documentationcenter: java
author: rmcmurray
manager: mbaldwin
tags: azure-service-management
ms.assetid: d627aa09-f7d6-4239-8110-f8fc5111b939
ms.service: virtual-machines-windows
ms.workload: web
ms.tgt_pltfrm: vm-windows
ms.devlang: Java
ms.topic: article
ms.date: 04/11/2018
ms.author: robmcm
ms.openlocfilehash: e13228a707e7dae4a4c2505154d01215c40b4716
ms.sourcegitcommit: 1362e3d6961bdeaebed7fb342c7b0b34f6f6417a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/18/2018
ms.locfileid: "31528034"
---
# <a name="how-to-run-a-java-application-server-on-a-virtual-machine-created-with-the-classic-deployment-model"></a>Использование сервера приложений Java на виртуальной машине, созданной с помощью классической модели развертывания.
> [!IMPORTANT]
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель Resource Manager и классическая модель](../../../resource-manager-deployment-model.md). В этой статье рассматривается использование классической модели развертывания. Для большинства новых развертываний Майкрософт рекомендует использовать модель диспетчера ресурсов. Шаблон Resource Manager для развертывания веб-приложения с Java 8 и Tomcat см. [здесь](https://azure.microsoft.com/documentation/templates/201-web-app-java-tomcat/).
> [!INCLUDE [virtual-machines-common-classic-createportal](../../../../includes/virtual-machines-classic-portal.md)]

В Azure можно использовать виртуальную машину для обеспечения возможностей сервера. Например, виртуальную машину, работающую в Azure, можно настроить для размещения сервера приложений Java, такого как Apache Tomcat.

После изучения этого руководства вы получите представление о том, как создавать виртуальные машины Azure и настраивать их на выполнение сервера приложений Java. Вы узнаете, как выполнять следующие задачи:

* Как создать виртуальную машину с установленным комплектом разработчика Java (JDK).
* Как удаленно войти в виртуальную машину.
* Как установить сервер приложений Java (Apache Tomcat) на виртуальной машине.
* Как создать конечную точку для виртуальной машины.
* Как открыть порт в брандмауэре для сервера приложений.

В результате установки сервер Tomcat будет выполняться на виртуальной машине.

![Виртуальная машина с Apache Tomcat][virtual_machine_tomcat]

[!INCLUDE [create-account-and-vms-note](../../../../includes/create-account-and-vms-note.md)]

## <a name="to-create-a-virtual-machine"></a>Для создания виртуальной машины
1. Войдите на [портале Azure](https://portal.azure.com).  
2. Щелкните **Создать ресурс**, выберите **Вычисления**, а затем щелкните **Смотреть все** в разделе **Рекомендуемые приложения**.
3. Щелкните **JDK**, а затем в области **JDK** выберите **JDK 8**.  
   Образы виртуальных машин, поддерживающие **JDK 6** и **JDK 7**, доступны в случае использования устаревших приложений, которые невозможно выполнять в JDK 8.
4. В области JDK 8 выберите **Классический** и нажмите кнопку **Создать**.
5. В колонке **Основные**:
   1. Укажите имя виртуальной машины.
   2. Введите имя администратора в поле **Имя пользователя**. Запомните это имя и связанный с ним пароль, указанный в соседнем поле. Они понадобятся для удаленного входа в виртуальную машину.
   3. Введите пароль в поле **Новый пароль** и повторно введите его в поле **Подтверждение пароля**. Это пароль для учетной записи администратора.
   4. Выберите соответствующую **подписку**.
   5. В разделе **Группа ресурсов** щелкните **Создать** и введите имя новой группы ресурсов. Или щелкните **Использовать существующий** и выберите одну из доступных групп ресурсов.
   6. Выберите расположение, в котором размещена виртуальная машина, например **Юго-Центральный регион США**.
6. Нажмите кнопку **Далее**.
7. В колонке **Virtual machine image size** (Размер образа виртуальной машины) выберите **A1 Standard** (Стандартный A1) или другой подходящий образ.
8. Нажмите кнопку **Выбрать**.

9. В колонке **Параметры** нажмите кнопку **ОК**. Можно использовать значения по умолчанию, предоставляемые Azure.  
10. В колонке **Сводка** нажмите кнопку **ОК**.

## <a name="to-remotely-sign-in-to-your-virtual-machine"></a>Удаленный вход в виртуальную машину
1. Войдите на [портал Azure](https://portal.azure.com).
2. Щелкните **Виртуальные машины (классические)**. При необходимости щелкните **Больше служб** в левом нижнем углу в перечне категорий служб. Запись **Виртуальные машины (классические)** находится в группе **Вычисления**.
3. Щелкните имя виртуальной машины, в которую необходимо войти.
4. После запуска виртуальной машины в верхней части области отобразится меню для подключений.
5. Щелкните **Подключить**.
6. Отвечайте на запросы, появляющиеся при подключении к виртуальной машине. Как правило, необходимо сохранить или открыть RDP-файл, содержащий сведения о подключении. Возможно, потребуется скопировать значение url:port (последняя часть первой строки RDP-файла) и вставить его в приложение удаленного входа.

## <a name="to-install-a-java-application-server-on-your-virtual-machine"></a>Вот как можно установить сервер приложений Java на виртуальной машине
Вы можете скопировать сервер приложений Java на виртуальную машину или установить сервер приложений Java с помощью установщика.

В этом руководстве в качестве устанавливаемого сервера приложений Java используется Tomcat.

1. После входа в систему на виртуальной машине запустите сеанс браузера для сервера [Apache Tomcat](http://tomcat.apache.org/download-80.cgi).
2. Дважды щелкните ссылку на **Установщик службы Windows 32-разрядной и 64-разрядной версии**. При использовании этого метода сервер Tomcat устанавливается в качестве службы Windows.
3. При появлении запроса выберите выполнение установщика.
4. В мастере **Установка Apache Tomcat** следуйте указаниям по установке Tomcat. Для целей данного учебника можно принять значения по умолчанию. Когда отобразится диалоговое окно **Completing the Apache Tomcat Setup Wizard** (Завершение работы мастера установки Apache Tomcat), в нем можно установить флажок **Run Apache Tomcat** (Запустить Apache Tomcat), чтобы немедленно запустить сервер Tomcat. Для завершения процесса установки Tomcat нажмите кнопку **Готово** .

## <a name="to-start-tomcat"></a>Вот как можно запустить Tomcat

Сервер Tomcat можно запустить вручную, открыв на виртуальной машине окно командной строки и выполнив команду **net&nbsp;start&nbsp;Tomcat8**.

После запуска сервера Tomcat для доступа к нему можно использовать URL-адрес <http://localhost:8080>, который вводится в браузере виртуальной машины.

Чтобы можно было наблюдать за работой сервера Tomcat с внешних компьютеров, необходимо создать конечную точку и открыть порт.

## <a name="to-create-an-endpoint-for-your-virtual-machine"></a>Вот как можно создать конечную точку для виртуальной машины
1. Войдите на [портале Azure](https://portal.azure.com).
2. Щелкните **Виртуальные машины (классические)**.
3. Щелкните имя виртуальной машины, на которой выполняется сервер приложений Java.
4. Нажмите кнопку **Конечные точки**.
5. Щелкните **Добавить**.
6. В диалоговом окне **Добавить конечную точку**:
   1. Укажите имя конечной точки, например **HttpIn**.
   2. Выберите **TCP** в качестве протокола.
   3. Укажите **80** для общего порта.
   4. Укажите **8080** для частного порта.
   5. Для плавающего IP-адреса выберите значение **Отключено**.
   6. Список управления доступом оставьте без изменений.
   7. Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно и создать конечную точку.

## <a name="to-open-a-port-in-the-firewall-for-your-virtual-machine"></a>Вот как можно открыть порт в брандмауэре для виртуальной машины
1. Войдите в виртуальную машину.
2. Нажмите **кнопку "Пуск" в Windows**.
3. Нажмите **Панель управления**.
4. Щелкните **Система и безопасность**, **Брандмауэр Windows**, а затем — **Расширенные настройки**.
5. Щелкните **Правила для входящих подключений**, а затем — **Создать правило**.  
   ![Новое правило для входящего подключения][NewIBRule]
6. Для параметра **Тип правила** выберите значение **Порт**, а затем нажмите кнопку **Далее**.  
   ![Порт нового правила для входящего подключения][NewRulePort]
7. На экране **Протокол и порты** выберите **TCP**, укажите порт **8080** в качестве **определенного локального порта** и нажмите кнопку **Далее**.  
  ![Новое правило для входящего подключения][NewRuleProtocol]
8. На экране **Действие** выберите **Разрешить подключение** и нажмите кнопку **Далее**.
   ![Действие нового правила для входящего подключения][NewRuleAction]
9. На экране **Профиль** выберите **В составе домена**, **Личный** и **Открытый**, а затем нажмите кнопку **Далее**.
   ![Профиль нового правила для входящего подключения][NewRuleProfile]
10. На экране **Имя** укажите имя для правила, например **HttpIn** (имя правила необязательно должно совпадать с именем конечной точки), а затем нажмите кнопку **Готово**.  
    ![Имя нового правила для входящего подключения][NewRuleName]

С этого момента ваш веб-сайт Tomcat должен быть доступен для просмотра во внешнем браузере. В строке адреса браузера введите URL-адрес в формате **http://*ваше\_DNS-имя\_.* cloudapp.net**, где ***ваше\_DNS-имя\_*** соответствует DNS-имени, указанному при создании виртуальной машины.

## <a name="application-lifecycle-considerations"></a>Вопросы, связанные с жизненным циклом приложения
* Вы можете создать собственный архив веб-приложения (WAR) и добавить его в папку **webapps** . Например, создайте динамический веб-проект базовой страницы службы Java (JSP) и экспортируйте его как WAR-файл. Затем скопируйте WAR-файл в папку Apache Tomcat **webapps** на виртуальной машине и запустите его в браузере.
* По умолчанию после установки службы Tomcat она настроена на ручной запуск. Для переключения на автоматический запуск используйте оснастку служб. Запустите оснастку служб. Для этого нажмите кнопку **Пуск** в Windows, а затем щелкните **Администрирование** и **Службы**. Дважды щелкните службу **Apache Tomcat** и присвойте параметру **Тип запуска** значение **Автоматически**.

    ![Настройка службы для автоматического запуска][service_automatic_startup]

    Преимущество автоматического запуска службы Tomcat заключается в том, что она запускается при перезагрузке виртуальной машины (например, после установки обновлений программного обеспечения, требующих перезагрузки компьютера).

## <a name="next-steps"></a>Дополнительная информация
Узнайте о других службах (таких как служба хранилища Azure, служебная шина, База данных SQL), которые можно включить в приложения Java. Ознакомьтесь со сведениями, представленными в [центре разработчиков Java](https://azure.microsoft.com/develop/java/).

[virtual_machine_tomcat]:media/java-run-tomcat-app-server/WA_VirtualMachineRunningApacheTomcat.png

[service_automatic_startup]:media/java-run-tomcat-app-server/WA_TomcatServiceAutomaticStart.png









[NewIBRule]:media/java-run-tomcat-app-server/NewInboundRule.png
[NewRulePort]:media/java-run-tomcat-app-server/NewRulePort.png
[NewRuleProtocol]:media/java-run-tomcat-app-server/NewRuleProtocol.png
[NewRuleAction]:media/java-run-tomcat-app-server/NewRuleAction.png
[NewRuleName]:media/java-run-tomcat-app-server/NewRuleName.png
[NewRuleProfile]:media/java-run-tomcat-app-server/NewRuleProfile.png


<!-- Deleted from the "To create an ednpoint for your virtual mache" 3/17/2017,
     to use the new portal.
6. In the **Add endpoint** dialog box, ensure **Add standalone endpoint** is selected, and then click **Next**.
7. In the **New endpoint details** dialog box:
-->
