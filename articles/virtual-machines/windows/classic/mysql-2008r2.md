---
title: Создание классической виртуальной машины Azure с MySQL | Документация Майкрософт
description: Создайте виртуальную машину Azure под управлением Windows Server 2012 R2 и базу данных MySQL, используя классическую модель развертывания.
services: virtual-machines-windows
documentationcenter: ''
author: cynthn
manager: jeconnoc
editor: tysonn
tags: azure-service-management
ms.assetid: 98fa06d2-9b92-4d05-ac16-3f8e9fd4feaa
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: cynthn
ms.openlocfilehash: be2a4232fdb59deb87d6d9340fd22909707294b8
ms.sourcegitcommit: 5b2ac9e6d8539c11ab0891b686b8afa12441a8f3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30918121"
---
# <a name="install-mysql-on-a-virtual-machine-created-with-the-classic-deployment-model-running-windows-server-2016"></a>Установка MySQL на виртуальной машине Windows Server 2016 R2, созданной с помощью классической модели развертывания
[MySQL](https://www.mysql.com) является популярной базой данных SQL с открытым исходным кодом. В этом руководстве демонстрируются установка и запуск **версии от сообщества MySQL 5.7.18** в качестве сервера MySQL на виртуальной машине **Windows Server 2016 R2**. Рабочая процедура для других версий MySQL или Windows Server может немного отличаться.

Инструкции по установке MySQL в Linux см. в статье [Как установить MySQL в Azure](../../linux/mysql-install.md).

> [!IMPORTANT]
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель Resource Manager и классическая модель](../../../resource-manager-deployment-model.md). В этой статье рассматривается использование классической модели развертывания. Для большинства новых развертываний Майкрософт рекомендует использовать модель диспетчера ресурсов.
> [!INCLUDE [virtual-machines-common-classic-createportal](../../../../includes/virtual-machines-classic-portal.md)]

## <a name="create-a-virtual-machine-running-windows-server-2016"></a>Создание виртуальной машины Windows Server 2016
Если у вас еще нет виртуальной машины Windows Server 2016 R2, создайте ее, следуя этому [руководству](./tutorial.md).

## <a name="attach-a-data-disk"></a>Присоединение диска данных
После создания виртуальной машины к ней можно подключить диск данных. Рекомендуется добавить его для рабочих нагрузок. Кроме того, это позволит гарантировать свободное пространство на диске с операционной системой (C).

Ознакомьтесь со статьей [Подключение диска данных к виртуальной машине Windows](../attach-managed-disk-portal.md) и следуйте изложенным в ней указаниям по подключению пустого диска. Установите для параметра кэширования узла значение **Нет** или **Только для чтения**.

## <a name="log-on-to-the-virtual-machine"></a>Вход на виртуальную машину
Далее вам необходимо [войти в систему виртуальной машины](./connect-logon.md), чтобы установить MySQL.

## <a name="install-and-run-mysql-community-server-on-the-virtual-machine"></a>Установка и запуск MySQL Community Server на виртуальной машине
Выполните следующие действия для установки, настройки и запуска версии сервера MySQL для сообщества.

> [!NOTE]
> При скачивании элементов с помощью Internet Explorer можно отключить **конфигурацию усиленной безопасности** и упростить процесс скачивания. В меню "Пуск" щелкните "Администрирование" > "Диспетчер сервера" > "Локальный сервер", щелкните **Конфигурация усиленной безопасности** для IE и выключите эту функцию.
>
>

1. После подключения к виртуальной машине с помощью удаленного рабочего стола щелкните элемент **Internet Explorer** на начальном экране.
2. Нажмите кнопку **Сервис** в правом верхнем углу (значок шестеренки) и выберите **Свойства браузера**. Откройте вкладку **Безопасность**, щелкните значок **Надежные сайты**, а затем нажмите кнопку **Сайты**. Добавьте http://*.mysql.com в список надежных сайтов. Нажмите кнопку **Закрыть**, а затем кнопку **ОК**.
3. В адресной строке браузера Internet Explorer введите https://dev.mysql.com/downloads/mysql/.
4. Используйте сайт MySQL, чтобы найти и скачать последнюю версию установщика MySQL для Windows. При выборе установщика MySQL скачайте версию, которая содержит полный набор файлов (например, mysql-installer-community-5.7.18.0.msi размером в 352,8 МБ), и сохраните файл установщика.
5. После завершения загрузки установщика нажмите **Выполнить** , чтобы запустить установку.
6. На странице **Лицензионное соглашение** примите условия лицензионного соглашения и нажмите кнопку **Далее**.
7. На странице **Choosing a Setup Type** (Выбор типа установки) выберите тип установки и нажмите кнопку **Далее**. В следующих шагах предполагается, что вы выбрали вариант установки **Server only** (Только для серверов).
8. Если отображается страница **Check Requirements** (Проверьте требования), щелкните **Execute** (Выполнить), чтобы установить недостающие компоненты. Следуйте инструкциям, например, чтобы установить среду выполнения распространяемого компонента C++.
9. На странице **Установка** нажмите кнопку **Выполнить**. После завершения установки нажмите кнопку **Next**(Далее).

10. На странице **Product Configuration** (Конфигурация продукта) нажмите кнопку **Далее**.

11. На странице **Type and Networking** (Тип и сеть) укажите требуемый тип конфигурации и параметры подключения, включая TCP-порт (если это необходимо). Установите флажок **Показать расширенные параметры** и нажмите кнопку **Далее**.
    ![](./media/mysql-2008r2/MySQL_TypeNetworking.png)

12. На странице **Accounts and Roles** (Учетные записи и роли) укажите надежный пароль пользователя root MySQL. При необходимости добавьте дополнительные учетные записи пользователей MySQL и нажмите кнопку **Next**(Далее).

    ![](./media/mysql-2008r2/MySQL_AccountsRoles_Filled.png)
13. На странице **Служба Windows** укажите изменения параметров по умолчанию, позволяющие запустить сервер MySQL в качестве службы Windows, и нажмите кнопку **Далее**.

    ![](./media/mysql-2008r2/MySQL_WindowsService.png)
14. Варианты выбора на странице **Plugins and Extensions** (Подключаемые модули и расширения) являются необязательными. Нажмите кнопку **Next** (Далее), чтобы продолжить.
15. На странице **Дополнительные параметры** внесите необходимые изменения в параметры ведения журнала и нажмите кнопку **Далее**.

    ![](./media/mysql-2008r2/MySQL_AdvOptions.png)
16. На странице **Apply Server Configuration** (Применить конфигурацию сервера) нажмите кнопку **Выполнить**. Завершив настройку, нажмите кнопку **Finish**(Готово).
17. На странице **Product Configuration** (Конфигурация продукта) нажмите кнопку **Далее**.
18. На странице **Установка завершена** щелкните **Скопировать журнал в буфер обмена**, если хотите просмотреть его позднее, и нажмите кнопку **Готово**.
19. На начальном экране введите **mysql**, а затем щелкните **MySQL 5.7 Command Line Client** (Клиент командной строки MySQL 5.6).
20. Введите пароль привилегированного пользователя, указанный на шаге 12, чтобы появилось окно, в котором можно выполнить команды для настройки MySQL. Подробные сведения о командах и синтаксисе см. в [справочных руководствах по MySQL](https://dev.mysql.com/doc/refman/5.7/en/server-configuration.html).

    ![](./media/mysql-2008r2/MySQL_CommandPrompt.png)
21. Можно также настроить параметры по умолчанию конфигурации сервера, например базовые каталог и диск, а также каталоги и диски данных. Дополнительные сведения см. в статье [Значения по умолчанию для конфигурации сервера 6.1.2](https://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html).

## <a name="configure-endpoints"></a>Настройка конечных точек

Чтобы служба MySQL была доступна для клиентских компьютеров в Интернете, необходимо настроить конечную точку для TCP-порта и создать правило брандмауэра Windows. По умолчанию служба сервера MySQL Server ожидает передачи данных от клиентов MySQL через порт 3306. Можно указать другой порт, при условии, что он соответствует значению, указанному на странице **Type and Networking** (Тип и сеть) (шаг 11 предыдущей процедуры).

> [!NOTE]
> Для рабочей среды необходимо рассмотреть возможные последствия с точки зрения безопасности, так как это сделает службу MySQL Server доступной для всех компьютеров в Интернете. Вы можете определить набор исходных IP-адресов, которым разрешено использовать конечную точку, с помощью списка управления доступом (ACL). Дополнительные сведения см. в статье [Настройка конечных точек виртуальной машины](setup-endpoints.md).
>
>

Чтобы настроить конечную точку для службы сервера MySQL, выполните следующие действия:

1. На портале Azure щелкните **Виртуальные машины (классические)**, выберите имя виртуальной машины MySQL, а затем щелкните **Конечные точки**.
2. На панели команд нажмите кнопку **Добавить**.
3. На странице **Добавление конечной точки** введите уникальное имя в поле **Имя**.
4. Выберите протокол **TCP**.
5. Введите номер порта, например **3306**, в полях **Общий порт** и **Частный порт**, а затем нажмите кнопку **ОК**.

## <a name="add-a-windows-firewall-rule-to-allow-mysql-traffic"></a>Добавление правила брандмауэра Windows для разрешения трафика MySQL
Чтобы добавить правило брандмауэра Windows, которое разрешает трафик MySQL из Интернета, выполните следующую команду в _командной строке Windows PowerShell с повышенными привилегиями_ на виртуальной машине MySQL Server.

    New-NetFirewallRule -DisplayName "MySQL57" -Direction Inbound –Protocol TCP –LocalPort 3306 -Action Allow -Profile Public

## <a name="test-your-remote-connection"></a>Проверка удаленного подключения
Чтобы проверить удаленное подключение к виртуальной машине Azure, на которой выполняется служба MySQL Server, необходимо указать DNS-имя облачной службы, содержащей виртуальную машину.

1. На портале Azure щелкните **Виртуальные машины (классические)**, выберите имя виртуальной машины MySQL Server, а затем щелкните **Обзор**.
2. Запишите значение **DNS-имя**, отображаемое на панели мониторинга виртуальной машины. Вот пример: 

   ![](media/mysql-2008r2/MySQL_DNSName.png)
3. На локальном компьютере, где запущен MySQL, или на клиенте MySQL выполните следующую команду для входа в качестве пользователя MySQL:

     mysql -u <yourMysqlUsername> -p -h <yourDNSname>

   Например, для имени пользователя MySQL _dbadmin3_ и DNS-имени виртуальной машины _testmysql.cloudapp.net_ запустить службу MySQL можно, выполнив следующую команду.

     mysql -u dbadmin3 -p -h testmysql.cloudapp.net

## <a name="next-steps"></a>Дополнительная информация
Дополнительные сведения о запуске MySQL см. в [документации по MySQL](http://dev.mysql.com/doc/).
