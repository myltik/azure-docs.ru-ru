---
title: Развертывание SAP S/4HANA или BW/4HANA на виртуальной машине Azure | Документация Майкрософт
description: Развертывание SAP S/4HANA или BW/4HANA на виртуальной машине Azure
services: virtual-machines-linux
documentationcenter: ''
author: hermanndms
manager: jeconnoc
editor: ''
tags: azure-resource-manager
keywords: ''
ms.assetid: 44bbd2b6-a376-4b5c-b824-e76917117fa9
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 09/15/2016
ms.author: hermannd
ms.openlocfilehash: 10c5116afa46817a42834e0350937fde7ae0b927
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34657348"
---
# <a name="deploy-sap-s4hana-or-bw4hana-on-azure"></a>Развертывание SAP S/4HANA или BW/4HANA в Azure
В этой статье описывается, как развернуть платформу S/4HANA в Azure с помощью SAP Cloud Appliance Library (SAP CAL) 3.0. Чтобы развернуть другие решения на основе SAP HANA, например BW/4HANA, выполните те же действия.

> [!NOTE]
Дополнительные сведения о лицензии SAP см. на веб-сайте [Библиотека SAP Cloud Appliance Library](https://cal.sap.com/). У SAP также есть блог о [библиотеке SAP Cloud Appliance Library 3.0](http://scn.sap.com/community/cloud-appliance-library/blog/2016/05/27/sap-cloud-appliance-library-30-came-with-a-new-user-experience).

> [!NOTE]
Начиная с 29 мая 2017 г. для развертывания SAP CAL можно использовать модель развертывания с помощью Azure Resource Manager в дополнение к менее популярной классической модели развертывания. Мы рекомендуем использовать новую модель развертывания с помощью Resource Manager.

## <a name="step-by-step-process-to-deploy-the-solution"></a>Пошаговый процесс развертывания решения

На снимках экрана, представленных ниже, показано развертывание S/4HANA в Azure с использованием SAP CAL. Процесс развертывания других решений, например BW/4 HANA, аналогичен описанному ниже.

Страница **Решения** отображает некоторые решения на основе SAP CAL HANA, доступные в Azure. Пункт **SAP S/4HANA 1610 FPS01, полностью активное устройство** находится в строке посередине:

![Решения SAP CAL](./media/cal-s4h/s4h-pic-1c.png)

### <a name="create-an-account-in-the-sap-cal"></a>Создание учетной записи в SAP CAL
1. Для входа в SAP CAL впервые используйте пользователя S-User SAP или других пользователей, зарегистрированных в SAP. Затем определите учетную запись SAP CAL, которая используется SAP CAL для развертывания устройств в Azure. Вот что нужно сделать в определении учетной записи:

    a. Выберите модель развертывания в Azure (Resource Manager или классическая).

    b. Введите подписку Azure. Учетную запись SAP CAL можно назначить только одной подписке. Если вам требуется несколько подписок, необходимо создать еще одну учетную запись SAP CAL.

    c. Предоставьте SAP CAL разрешение на развертывание в вашей подписке Azure.

    > [!NOTE]
    Далее показано, как создать учетную запись SAP CAL для развертываний Resource Manager. При наличии учетной записи SAP CAL, связанной с классической моделью развертывания, *выполните* следующие действия, чтобы создать учетную запись SAP CAL. Новую учетную запись SAP CAL нужно развернуть в модели Resource Manager.

2. Создайте учетную запись SAP CAL. На странице **Учетные записи** отображается три варианта для Azure: 

    a. **Microsoft Azure (classic)** (Microsoft Azure (классическая)) — это классическая модель развертывания. Мы не рекомендуем ее использовать.

    Б. **Microsoft Azure** — это новая модель развертывания с помощью Resource Manager.

    c. **Windows Azure operated by 21Vianet** (Windows Azure, управляемый 21Vianet) — это вариант для Китая, который использует классическую модель развертывания.

    Чтобы выполнить развертывание с использованием модели Resource Manager, выберите **Microsoft Azure**.

    ![Сведения об учетной записи SAP CAL](./media/cal-s4h/s4h-pic-2a.png)

3. Введите **идентификатор подписки** Azure, который можно найти на портале Azure.

   ![Учетные записи CAL SAP](./media/cal-s4h/s4h-pic3c.png)

4. Чтобы разрешить SAP CAL выполнить развертывание в указанной подписке Azure, щелкните **Авторизовать**. На вкладке браузера появится следующая страница:

   ![Вход в облачные службы в Internet Explorer](./media/cal-s4h/s4h-pic4c.png)

5. Если в списке указано несколько пользователей, выберите связанную учетную запись Майкрософт с назначенной ролью соадминистратора в выбранной подписке Azure. На вкладке браузера появится следующая страница:

   ![Подтверждение входа в облачные службы в Internet Explorer](./media/cal-s4h/s4h-pic5a.png)

6. Нажмите кнопку **Принимаю**. При успешном выполнении авторизации снова появится определение учетной записи SAP CAL. Через некоторое время появится сообщение с подтверждением успешного выполнения авторизации.

7. Чтобы назначить новую учетную запись SAP CAL пользователю, в поле справа введите **идентификатор пользователя** и щелкните **Добавить**.

   ![Сопоставление учетной записи с пользователем](./media/cal-s4h/s4h-pic8a.png)

8. Чтобы сопоставить учетную запись с пользователем, использованным для входа в SAP CAL, щелкните **Просмотр**. 
 
9. Чтобы создать сопоставление между пользователем и новой учетной записью SAP CAL, щелкните **Создать**.

   ![Сопоставление учетной записи пользователя и SAP CAL](./media/cal-s4h/s4h-pic9b.png)

Вы успешно создали учетную запись SAP CAL, позволяющую выполнять следующие задачи:

- использовать модель развертывания с помощью Resource Manager;
- развертывать системы SAP в подписке Azure.

Теперь можно начать развертывание S/4HANA в подписку пользователя в Azure.

> [!NOTE]
Прежде чем продолжить, проверьте, есть ли у вас квоты на виртуальные ЦП Azure для виртуальных машин Azure серии H. Сейчас SAP CAL использует виртуальные машины Azure серии H для развертывания некоторых решений на основе SAP HANA. В вашей подписке может не быть квот на виртуальные ЦП для серии Н. В этом случае обратитесь в службу поддержки Azure, чтобы получить квоту на как минимум 16 виртуальных ЦП серии H.

> [!NOTE]
При развертывании решения на Azure в SAP CAL может оказаться, что можно выбрать только один регион Azure. Чтобы выполнить развертывание в регионе Azure, отличном от предложенного SAP CAL, необходимо приобрести подписку CAL от SAP. Также может потребоваться написать SAP сообщение, чтобы активировать для вашей учетной записи CAL возможность доставки в регионы Azure, отличные от тех, которые были изначально предложены.

### <a name="deploy-a-solution"></a>Развертывание решения

Давайте развернем решение со страницы **Решения** SAP CAL. В SAP CAL есть две последовательности развертывания:

- Базовая последовательность, которая использует одну страницу для определения развертываемой системы.
- Расширенная последовательность, которая позволяет выбрать определенные размеры виртуальных машин. 

Здесь мы рассмотрим базовый путь развертывания.

1. На странице**Сведения об учетной записи** сделайте следующее:

    a. Выберите учетную запись SAP CAL. (Используйте учетную запись, которая связана с моделью развертывания Resource Manager.)

    Б. Введите **имя** экземпляра.

    c. Выберите **регион** Azure. SAP CAL предложит регион. Если необходим другой регион Azure и у вас нет подписки SAP CAL, необходимо заказать подписку CAL с SAP.

    d. Введите главный **пароль** для решения длиной восемь или девять знаков. Пароль используется администраторами различных компонентов.

   ![Базовый режим SAP CAL: создание экземпляра](./media/cal-s4h/s4h-pic10a.png)

2. Щелкните **Создать** и в появившемся диалоговом окне щелкните **ОК**.

   ![Поддерживаемые SAP CAL размеры виртуальных машин](./media/cal-s4h/s4h-pic10b.png)

3. В диалоговом окне **Закрытый ключ** щелкните **Хранилище**, чтобы сохранить закрытый ключ в SAP CAL. Чтобы использовать защиту паролем для закрытого ключа, щелкните **Скачать**. 

   ![Закрытый ключ SAP CAL](./media/cal-s4h/s4h-pic10c.png)

4. Ознакомьтесь с сообщением в разделе **Предупреждение** и щелкните **ОК**.

   ![Предупреждения SAP CAL](./media/cal-s4h/s4h-pic10d.png)

    После этого начнется развертывание. В зависимости от размера и сложности решения (оценку предоставляет SAP CAL) через некоторое время состояние экземпляра сменится на "Активный", и он будет готов к использованию.

5. Чтобы найти виртуальные машины, собранные вместе со связанными ресурсами в одну группу ресурсов, перейдите на портал Azure: 

   ![Объекты SAP CAL, развернутые на новом портале](./media/cal-s4h/sapcaldeplyment_portalview.png)

6. На портале SAP CAL состояние отображается как **Активный**. Чтобы подключиться к решению, щелкните **Подключить**. В рамках этого решения развернуты разные параметры для подключения к различным компонентам.

   ![Экземпляры SAP CAL](./media/cal-s4h/active_solution.png)

7. Прежде чем вы сможете использовать один из вариантов подключения к развернутой системе, щелкните **Руководство по началу работы**. 

   ![Подключение к экземпляру](./media/cal-s4h/connect_to_solution.png)

    В документации указаны пользователи для каждого из способов подключения. Для этих пользователей заданы основные пароли, указанные в начале развертывания. В документации также представлены другие пользователи с более широкими возможностями и их пароли, которые можно использовать для входа в развернутую систему. 

    Например, при использовании графического пользовательского интерфейса SAP, предварительно установленного на компьютере с удаленным рабочим столом Windows, система S/4 может выглядеть следующим образом:

   ![SM50 в предварительно установленном графическом пользовательском интерфейсе SAP](./media/cal-s4h/gui_sm50.png)

    Или при использовании DBACockpit экземпляр может выглядеть следующим образом:

   ![SM50 в DBACockpit в графическом пользовательском интерфейсе SAP](./media/cal-s4h/dbacockpit.png)

В течение нескольких часов в Azure будет развернуто работоспособное устройство S/4SAP.

Если вы приобрели подписку SAP CAL, SAP полностью поддерживает развертывание с помощью SAP CAL в Azure. Используется очередь поддержки BC-VCM-CAL.







