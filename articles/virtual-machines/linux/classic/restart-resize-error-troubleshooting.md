---
title: Неполадки при перезапуске или изменении размера виртуальной машины | Документация Майкрософт
description: Устранение неполадок в классическом развертывании при перезагрузке или изменении размера существующей виртуальной машины Linux в Azure.
services: virtual-machines-linux
documentationcenter: ''
author: Deland-Han
manager: felixwu
editor: ''
tags: top-support-issue
ms.assetid: 73f2672c-602e-4766-8948-2b180115d299
ms.service: virtual-machines-linux
ms.topic: troubleshooting
ms.tgt_pltfrm: vm-linux
ms.workload: required
ms.date: 01/10/2017
ms.devlang: na
ms.author: delhan
ms.openlocfilehash: 7f5718a7e1ab2b14902fa61ffb3053910e584ac6
ms.sourcegitcommit: b5c6197f997aa6858f420302d375896360dd7ceb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/21/2017
ms.locfileid: "24051619"
---
# <a name="troubleshoot-classic-deployment-issues-with-restarting-or-resizing-an-existing-linux-virtual-machine-in-azure"></a>Устранение неполадок в классическом развертывании при перезагрузке или изменении размера существующей виртуальной машины Linux в Azure.
> [!div class="op_single_selector"]
> * [Классический](restart-resize-error-troubleshooting.md)
> * [Resource Manager](../restart-resize-error-troubleshooting.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
> 
> 

Когда вы запускаете остановленную виртуальную машину Azure или изменяете размер существующей виртуальной машины Azure, часто возникает ошибка выделения ресурсов. Это происходит, когда кластер или регион не имеют доступных ресурсов или не поддерживают запрашиваемый размер виртуальной машины.

> [!IMPORTANT] 
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель Resource Manager и классическая модель](../../../resource-manager-deployment-model.md). В этой статье рассматривается использование классической модели развертывания. Для большинства новых развертываний Майкрософт рекомендует использовать модель диспетчера ресурсов. Версия для модели развертывания с помощью Resource Manager доступна [здесь](../restart-resize-error-troubleshooting.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).
> [!INCLUDE [virtual-machines-common-classic-createportal](../../../../includes/virtual-machines-classic-portal.md)]

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="collect-audit-logs"></a>Сбор журналов аудита
Для устранения неполадок прежде всего соберите журналы аудита, чтобы определить ошибку, связанную с этой проблемой.

На портале Azure последовательно выберите **Обзор** > **Виртуальные машины** > *имя вашей виртуальной машины Linux* > **Параметры** > **Журналы аудита**.

## <a name="issue-error-when-starting-a-stopped-vm"></a>Проблема: ошибка во время запуска остановленной виртуальной машины
При попытке запустить остановленную виртуальную машину отображается сообщение об ошибке выделения.

### <a name="cause"></a>Причина:
Запрос на запуск остановленной виртуальной машины нужно выполнять в исходном кластере, в котором размещена облачная служба. Но этот кластер не имеет свободного места для выполнения запроса.

### <a name="resolution"></a>Способы устранения:
* Создайте новую облачную службу и свяжите ее с регионом или виртуальной сетью на основе региона, но не с территориальной группой.
* Удалите остановленную виртуальную машину.
* Повторно создайте виртуальную машину в новой облачной службе с помощью дисков.
* Запустите вновь созданную виртуальную машину.

Если при попытке создания облачной службы появляется сообщение об ошибке, повторите попытку позже или измените регион для облачной службы.

> [!IMPORTANT]
> Новая облачная служба будет иметь новое имя и новый виртуальный IP-адрес. Поэтому эти данные следует изменить для всех зависимостей, которые используют информацию о существующей облачной службе.
> 
> 

## <a name="issue-error-when-resizing-an-existing-vm"></a>Проблема: ошибка при изменении размера существующей виртуальной машины
При попытке изменить размер существующей виртуальной машины отображается сообщение об ошибке выделения.

### <a name="cause"></a>Причина:
Запрос на изменение размера виртуальной машины нужно выполнять в исходном кластере, в котором размещена облачная служба. Но этот кластер не поддерживает запрашиваемый размер виртуальной машины.

### <a name="resolution"></a>Способы устранения:
Уменьшите запрашиваемый размер виртуальной машины и повторите запрос на изменение размера.

* Последовательно выберите **Просмотреть все** > **Виртуальные машины (классика)** > *имя своей виртуальной машины* > **Настройки** > **Размер**. Подробные инструкции см. в статье [Перезапуск виртуальной машины](https://msdn.microsoft.com/library/dn168976.aspx).

Если размер виртуальной машины уменьшить невозможно, выполните следующие действия.

* Создайте новую облачную службу, не связанную с территориальной группой или с виртуальной сетью, которая связана с территориальной группой.
* Создайте в этой службе новую виртуальную машину большего размера.

Вы можете объединить все виртуальные машины в одной облачной службе. Если существующая облачная служба связана с виртуальной сетью на основе региона, вы можете подключить новую облачную службу к существующей виртуальной сети.

Если существующая облачная служба не связана с виртуальной сетью на основе региона, следует удалить виртуальные машины из существующей облачной службы и воссоздать их в новой облачной службе с помощью дисков. Не забывайте, что новая облачная служба будет иметь новое имя и новый виртуальный IP-адрес. Следовательно, эти данные потребуется обновить для всех зависимостей, которые используют эту информацию о существующей облачной службе.

## <a name="next-steps"></a>Дополнительная информация
При возникновении проблем во время создания виртуальной машины Linux в Azure см. статью, посвященную [устранению неполадок в развертывании](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

