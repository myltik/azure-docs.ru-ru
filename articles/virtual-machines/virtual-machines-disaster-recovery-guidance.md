---
title: Сценарии аварийного восстановления для виртуальных машин Azure | Документация Майкрософт
description: Узнайте, что делать, если прерывание работы службы Azure влияет на виртуальные машины Azure.
services: virtual-machines
documentationcenter: ''
author: kmouss
manager: jeconnoc
editor: ''
ms.assetid: 65272148-ff06-4bce-91f1-851d706d4d40
ms.service: virtual-machines
ms.workload: virtual-machines
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/31/2017
ms.author: kmouss;aglick
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 70aec41c885ab81371f5318f7557b0e628ac3308
ms.sourcegitcommit: 5b2ac9e6d8539c11ab0891b686b8afa12441a8f3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/06/2018
ms.locfileid: "30915421"
---
# <a name="what-to-do-in-the-event-that-an-azure-service-disruption-impacts-azure-vms"></a>Что делать, если прерывание работы службы Azure влияет на виртуальные машины Azure
Корпорация Майкрософт прилагает все усилия для того, чтобы наши службы всегда были доступны. Иногда по независящим от нас обстоятельствам происходят незапланированные нарушения работы служб.

Корпорация Майкрософт предоставляет соглашения об уровне обслуживания (SLA) для своих служб, в которых гарантируется их время бесперебойной работы и доступность. Соглашения об уровне обслуживания для отдельных служб Azure можно найти в разделе [Соглашения об уровне обслуживания Azure](https://azure.microsoft.com/support/legal/sla/).

В платформе Azure уже имеется множество встроенных возможностей для поддержки высокодоступных приложений. Дополнительные сведения об этих службах см. в статье [Аварийное восстановление и высокая доступность для приложений на платформе Azure](../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md).

В этой статье описывается действительный сценарий аварийного восстановления, при котором из-за масштабного стихийного бедствия или обширного прерывания работы службы весь регион оказывается подвержен сбою. Такие события происходят нечасто, но необходимо быть готовыми к тому, что сбой всего региона возможен. Если весь регион испытывает перебои в работе службы, то локально избыточные копии ваших данных становятся временно недоступными. Если включена георепликация, то в другом регионе будут храниться три дополнительные копии больших двоичных объектов и таблиц службы хранилища Azure. В случае сбоя всего региона или аварии, при которой основной регион не может быть восстановлен, Azure перераспределяет все DNS-записи в геореплицированный регион.

Чтобы помочь вам в таких ситуациях, мы предлагаем следующие рекомендации для виртуальных машин Azure. Эти рекомендации нужно применять в случае сбоя службы во всем регионе, в котором развернуто приложение виртуальной машины Azure.

## <a name="option-1-initiate-a-failover-by-using-azure-site-recovery"></a>Вариант 1. Инициация отработки отказа с помощью Azure Site Recovery
Для виртуальных машин можно настроить службу Azure Site Recovery, которая позволяет быстро восстановить приложение одним щелчком мыши. Репликацию можно выполнять в выбранном регионе Azure, не ограничиваясь парными регионами. Вы можете начать с [репликации виртуальных машин](https://aka.ms/a2a-getting-started). Вы можете [создать план восстановления](../site-recovery/site-recovery-create-recovery-plans.md), чтобы автоматизировать всю процедуру отработки отказа для вашего приложения. Вы можете заранее [проверить процедуры отработки отказа](../site-recovery/site-recovery-test-failover-to-azure.md) без влияния на рабочее приложение или текущую репликацию. В случае сбоя основного региона вам потребуется просто [запустить отработку отказа](../site-recovery/site-recovery-failover.md) и перенести приложение в целевой регион.


## <a name="option-2-wait-for-recovery"></a>Вариант 2. Ожидание восстановления
В этом случае вам не нужно предпринимать какие-либо действия. Знайте, что мы активно работаем над восстановлением доступности службы. Текущее состояние служб можно просмотреть на [панели мониторинга работоспособности служб Azure](https://azure.microsoft.com/status/).

Это наилучший вариант, если вы не настроили Azure Site Recovery, геоизбыточное хранилище с доступом для чтения или геоизбыточное хранилище до прерывания работы службы. Если вы настроили хранилище или геоизбыточное хранилище с доступом для чтения для учетной записи хранения, в которой размещаются виртуальные жесткие диски вашей виртуальной машины, то вы можете восстановить виртуальный жесткий диск базового образа и попробовать подготовить новую виртуальную машину на его основе. Этот вариант не является предпочтительным, так как он не гарантирует синхронизацию данных. Следовательно, не гарантируется, что этот вариант будет работать.


> [!NOTE]
> Учтите, что этот процесс нельзя контролировать и он выполняется только при нарушении работы службы на уровне региона. Поэтому для обеспечения самого высокого уровня доступности необходимо также использовать и другие стратегии архивации приложения. Дополнительные сведения см. в разделе о [стратегиях аварийного восстановления данных](https://docs.microsoft.com/azure/architecture/resiliency/disaster-recovery-azure-applications#data-strategies-for-disaster-recovery).
>
>

## <a name="next-steps"></a>Дополнительная информация

- Начните [защищать приложения, работающие на виртуальных машинах Azure](https://aka.ms/a2a-getting-started), с помощью Azure Site Recovery

- Чтобы больше узнать о том, как реализовать стратегию обеспечения аварийного восстановления и высокого уровня доступности, ознакомьтесь с разделом [Аварийное восстановление и высокий уровень доступности для приложений на платформе Azure](../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md).

- Возможности облачной платформы подробно описаны в [техническом руководстве по обеспечению непрерывности бизнес-процессов Azure](../resiliency/resiliency-technical-guidance.md).


- Если инструкции не ясны или вы хотите, чтобы корпорация Майкрософт выполнила эти действия от вашего имени, свяжитесь со [службой поддержки клиентов](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade).
