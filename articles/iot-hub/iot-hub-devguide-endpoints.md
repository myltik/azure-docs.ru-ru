---
title: Общие сведения о конечных точках Центра Интернета вещей Azure | Документация Майкрософт
description: Руководство разработчика. Справочные сведения о конечных точках Центра Интернета вещей, доступных устройствах и службе.
author: dominicbetts
manager: timlt
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.date: 01/29/2018
ms.author: dobett
ms.openlocfilehash: 37e1bd0b479e27f0d871495c0725fc865cbb8572
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34632583"
---
# <a name="reference---iot-hub-endpoints"></a>Руководство. Конечные точки Центра Интернета вещей

[!INCLUDE [iot-hub-basic](../../includes/iot-hub-basic-partial.md)]

## <a name="iot-hub-names"></a>Имена центров Интернета вещей

Имя Центра Интернета вещей, в котором размещены ваши конечные точки, можно найти на портале в колонке **Обзор**. По умолчанию DNS-имя Центра Интернета вещей выглядит следующим образом: `{your iot hub name}.azure-devices.net`.

Службу Azure DNS можно использовать для создания пользовательского DNS-имени для вашего Центра Интернета вещей. Дополнительные сведения см. в статье [Использование Azure DNS для указания параметров личного домена для службы Azure](../dns/dns-custom-domain.md).

## <a name="list-of-built-in-iot-hub-endpoints"></a>Список встроенных конечных точек Центра Интернета вещей

Центр Интернета вещей Azure — это мультитенантная служба, которая предоставляет возможность пользоваться своими функциями разным субъектам. На схеме ниже показаны разные конечные точки, которые предоставляет Центр Интернета вещей.

![Конечные точки Центра Интернета вещей][img-endpoints]

В следующем списке описываются конечные точки.

* **Поставщик ресурсов.** Поставщик ресурсов Центра Интернета вещей предоставляет интерфейс [Azure Resource Manager][lnk-arm]. С помощью этого интерфейса владельцы подписки Azure могут создавать и удалять Центры Интернета вещей, а также обновлять их свойства. Свойства Центра Интернета вещей определяют [политики безопасности на уровне центра][lnk-accesscontrol] (а не контроль доступа на уровне устройств) и функциональные параметры, относящиеся к обмену сообщениями между облаком и устройством в обоих направлениях. Поставщик ресурсов Центра Интернета вещей также позволяет [экспортировать удостоверения устройств][lnk-importexport].
* **Управление удостоверениями устройств.** Каждый Центр Интернета вещей предоставляет набор конечных точек HTTPS REST, которые позволяют управлять удостоверениями устройств (создавать, получать, обновлять и удалять их). [Удостоверения устройств][lnk-device-identities] нужны для аутентификации устройств и контроля доступа к ним.
* **Управление двойником устройства.** Каждый Центр Интернета вещей предоставляет набор доступных для службы конечных точек HTTPS REST, чтобы запрашивать и обновлять [двойники устройств][lnk-twins] (теги и свойства).
* **Управление заданиями.** Каждый Центр Интернета вещей предоставляет набор доступных для службы конечных точек HTTPS REST, чтобы запрашивать [задания][lnk-jobs] и управлять ими.
* **Конечные точки устройств**. Для каждого устройства в реестре удостоверений Центр Интернета вещей предоставляет набор конечных точек:

  * *Отправка сообщений с устройства в облако.* Устройство использует эту конечную точку для [отправки сообщений с устройства в облако][lnk-d2c].
  * *Получение сообщений из облака на устройство.* Устройство использует эту конечную точку для получения целевых [сообщений из облака][lnk-c2d].
  * *Инициирование отправки файлов.* Устройство использует эту конечную точку для получения URI SAS службы хранилища Azure из Центра Интернета вещей, чтобы [отправить файл][lnk-upload].
  * *Получение и обновление свойств двойников устройств*. Устройство использует эти конечные точки для доступа к свойствам [своего двойника][lnk-twins].
  * *Получение запросов прямых методов*. Устройство использует эту конечную точку для ожидания передачи данных запросов [прямых методов][lnk-methods].

    Эти конечные точки предоставляются по протоколам [MQTT v3.1.1][lnk-mqtt], HTTPS 1.1 и [AMQP 1.0][lnk-amqp]. Протокол AMQP также доступен в [WebSockets][lnk-websockets] через порт 443.

* **Конечные точки службы**. Каждый Центр Интернета вещей предоставляет набор конечных точек серверной части решения для взаимодействия с устройствами. За одним исключением эти конечные точки предоставляются только по протоколу [AMQP][lnk-amqp]. Конечная точка для вызова метода предоставляется по протоколу HTTPS.
  
  * *Получение сообщений с устройства в облако.* Эта конечная точка совместима с [концентраторами событий Azure][lnk-event-hubs]. С ее помощью во внутреннем приложении считываются [сообщения, отправляемые с устройства в облако][lnk-d2c]. Помимо этой встроенной конечной точки в Центре Интернета вещей можно создать пользовательские конечные точки.
  * *Отправка сообщений из облака на устройство и получение уведомлений о доставке.* Эти конечные точки позволяют серверной части решения отправлять надежные [сообщения из облака на устройство][lnk-c2d] и получать уведомления о доставке или истечении срока действия.
  * *Получение уведомлений о файлах*. Эта конечная точка обмена сообщениями позволяет получать уведомления при успешной отправке файла устройствами. 
  * *Вызов прямого метода.* Эта конечная точка позволяет внутренней службе вызывать [прямой метод][lnk-methods] на устройстве.
  * *Получение событий мониторинга операций*. Эта конечная точка позволяет получать события мониторинга операций, если ваш Центр Интернета вещей настроен выдавать их. Дополнительные сведения см. в статье [Мониторинг операций Центра Интернета вещей][lnk-operations-mon].

В статье [Azure IoT SDKs][lnk-sdks] (Пакеты SDK для Azure IoT) описываются способы получения доступа к этим конечным точкам.

Все конечные точки Центра Интернета вещей используют протокол [TLS][lnk-tls]. Кроме того, конечные точки не предоставляются по незашифрованным или незащищенным каналам.

## <a name="custom-endpoints"></a>Пользовательские конечные точки

Чтобы использовать существующие в подписке службы Azure в качестве конечных точек для маршрутизации сообщений, их можно связать с Центром Интернета вещей. Эти конечные точки действуют как конечные точки служб и используются в качестве приемников для маршрутов сообщений. Устройства не могут выполнять запись в дополнительные конечные точки напрямую. Дополнительные сведения о маршрутах сообщений см. в записи руководства для разработчиков об [отправке и получении сообщений с помощью Центра Интернета вещей][lnk-devguide-messaging].

Сейчас Центр Интернета вещей поддерживает использование следующих служб Azure в качестве дополнительных конечных точек:

* Контейнеры службы хранилища Azure
* Концентраторы событий
* Очереди служебной шины
* Разделы шины обслуживания

Для маршрутизации сообщений Центру Интернета вещей требуется доступ на запись к этим конечным точкам служб. При настройке конечных точек через портал Azure необходимые разрешения добавляются автоматически. Настройте в службах поддержку ожидаемой пропускной способности. При первой настройке решения Интернета вещей может потребоваться отслеживать дополнительные конечные точки, а затем вносить необходимые изменения с учетом реальной нагрузки.

Если сообщение соответствует нескольким маршрутам, каждый из которых указывает на одну и ту же конечную точку, то Центр Интернета вещей доставляет сообщения в эту конечную точку только один раз. Таким образом не требуется настраивать дедупликацию для очереди или раздела служебной шины. В секционированных очередях сопоставление секций гарантирует упорядочивание сообщений.

Сведения об ограничениях на количество добавляемых конечных точек см. в статье [Справочник: квоты и регулирование][lnk-devguide-quotas].

### <a name="when-using-azure-storage-containers"></a>Использование контейнеров службы хранилища Azure

Центр Интернета вещей поддерживает только запись данных в контейнеры службы хранилища Azure в виде больших двоичных объектов формата [Apache Avro](http://avro.apache.org/). Центр Интернета вещей собирает сообщения и записывает данные в большой двоичный объект всякий раз, когда:

* Пакет достигает определенного размера.
* Прошло определенное количество времени.

Центр Интернета вещей будет записывать пустой большой двоичный объект, если нет данных для записи.

По умолчанию Центр Интернета вещей использует следующее соглашение об именовании файлов:

```
{iothub}/{partition}/{YYYY}/{MM}/{DD}/{HH}/{mm}
```

Вы можете применять любое соглашение об именовании, однако необходимо использовать все перечисленные токены.

### <a name="when-using-service-bus-queues-and-topics"></a>Использование очередей и разделов служебной шины Azure

Для очередей и разделов служебной шины, которые используются как конечные точки Центра Интернета вещей, **сеансы** или **поиск повторяющихся данных** должны быть выключены. Если одна из этих возможностей включена, на портале Azure конечная точка будет отображаться как **недоступная**.

## <a name="field-gateways"></a>Шлюзы поля

В решении Интернета вещей *полевой шлюз* располагается между устройствами и конечными точками Центра Интернета вещей. Обычно он находится ближе к устройствам. Устройства взаимодействуют напрямую с полевым шлюзом с помощью протоколов, поддерживаемых устройствами. Полевой шлюз подключается к конечной точке Центра Интернета вещей с помощью протокола, поддерживаемого Центром Интернета вещей. Полевой шлюз может быть специально выделенным оборудованием или маломощным компьютером, работающим под управлением программного обеспечения настраиваемого шлюза.

Для реализации полевого шлюза можно использовать [Edge Интернета вещей Azure][lnk-iot-edge]. IoT Edge предлагает определенные функции, например мультиплексировать обмен данными на нескольких устройствах в рамках одного и того же подключения к Центру Интернета вещей.

## <a name="next-steps"></a>Дополнительная информация

Другие справочные статьи в руководстве разработчика для Центра Интернета вещей:

* [Справочник по языку запросов Центра Интернета вещей для двойников устройств и заданий][lnk-devguide-query]
* [Quotas and throttling][lnk-devguide-quotas] (Квоты и регулирование)
* [Поддержка MQTT в Центре Интернета вещей][lnk-devguide-mqtt]

[lnk-iot-edge]: https://github.com/Azure/iot-edge

[img-endpoints]: ./media/iot-hub-devguide-endpoints/endpoints.png
[lnk-amqp]: https://www.amqp.org/
[lnk-mqtt]: http://mqtt.org/
[lnk-websockets]: https://tools.ietf.org/html/rfc6455
[lnk-arm]: ../azure-resource-manager/resource-group-overview.md
[lnk-event-hubs]: http://azure.microsoft.com/documentation/services/event-hubs/

[lnk-tls]: https://tools.ietf.org/html/rfc5246


[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-accesscontrol]: iot-hub-devguide-security.md#access-control-and-permissions
[lnk-importexport]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-d2c]: iot-hub-devguide-messages-d2c.md
[lnk-device-identities]: iot-hub-devguide-identity-registry.md
[lnk-upload]: iot-hub-devguide-file-upload.md
[lnk-c2d]: iot-hub-devguide-messages-c2d.md
[lnk-methods]: iot-hub-devguide-direct-methods.md
[lnk-twins]: iot-hub-devguide-device-twins.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-jobs]: iot-hub-devguide-jobs.md

[lnk-devguide-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-devguide-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-devguide-messaging]: iot-hub-devguide-messaging.md
[lnk-operations-mon]: iot-hub-operations-monitoring.md
