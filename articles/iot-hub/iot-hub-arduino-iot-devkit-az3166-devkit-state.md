---
title: Использование двойников устройств Azure для управления состоянием пользовательского светодиодного индикатора платы MXChip IoT DevKit | Документация Майкрософт
description: Данное руководство описывает процесс управления пользовательским светодиодным индикатором и мониторинга состояния DevKit с помощью двойников устройств Центра Интернета вещей Azure.
author: liydu
manager: jeffya
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.tgt_pltfrm: arduino
ms.date: 04/04/2018
ms.author: liydu
ms.openlocfilehash: 2845b545484f4eef1e6999c1c54aaba5de14b832
ms.sourcegitcommit: 266fe4c2216c0420e415d733cd3abbf94994533d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/01/2018
ms.locfileid: "34633270"
---
# <a name="mxchip-iot-devkit"></a>MXChip IoT DevKit

С помощью этого примера можно отслеживать состояние датчиков и сведения о Wi-Fi MXChip IoT DevKit, а также управлять цветом пользовательского светодиодного индикатора с помощью двойников устройств Центра Интернета вещей Azure.

## <a name="what-you-learn"></a>Что вы узнаете

- Как выполнять мониторинг состояния датчиков MXChip IoT DevKit.
- Как управлять цветом светодиодного индикатора RGB DevKit.

## <a name="what-you-need"></a>Необходимые элементы

- Настройте среду разработки согласно инструкциям в статье [Подключение платы IoT DevKit AZ3166 к Центру Интернета вещей Azure в облаке](https://docs.microsoft.com/azure/iot-hub/iot-hub-arduino-iot-devkit-az3166-get-started).
- В окне терминала GitBash (или в другом интерфейсе командной строки Git) выполните следующие команды.
    - `git clone https://github.com/DevKitExamples/DevKitState.git`
    - `cd DevKitState`
    - `code .`

## <a name="provision-azure-services"></a>Подготовка служб Azure

1. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - , **cloud-provision**.
2. Ход выполнения воспроизводится на вкладке **Терминал** панели **Приветствие**.
3. При появлении запроса с сообщением *What subscription would you like to choose* (Какую подписку вы хотели бы выбрать) сделайте свой выбор.
4. Выберите группу ресурсов. 
 
    > [!NOTE]
    > При наличии свободного Центра Интернета вещей этот шаг будет пропущен.

5. При появлении запроса с сообщением *What IoT hub would you like to choose* (Какой Центр Интернета вещей вы хотели бы выбрать) выберите или создайте Центр Интернета вещей.
6. На экране появится нечто похожее на *Приложение-функция. Название приложения-функции — xxx*. Запишите название приложения-функции, используемое далее.
7. Дождитесь окончания развертывания шаблона Azure Resource Manager, о чем свидетельствует появившееся сообщение *Resource Manager template deployment: Done* (Развертывание шаблона диспетчера ресурсов: выполнено).

## <a name="deploy-function-app"></a>Развертывание приложения-функции

1. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - **cloud-deploy**.
2. Дождитесь, пока завершится передача кода приложения-функции (появится сообщение *function app deploys: Done* (Развертывание приложения-функции: выполнено)).

## <a name="configure-iot-hub-device-connection-string-in-devkit"></a>Настройка строки подключения к устройству Центра Интернета вещей в DevKit

1. Подключите MXChip IoT DevKit к компьютеру.
2. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - **config-device-connection**.
3. На MXChip IoT DevKit нажмите и удерживайте кнопку **A**, дополнительно нажмите кнопку **Сброс**, а затем отпустите кнопку **A**, чтобы DevKit вошел в режим настройки.
4. Дождитесь окончания процесса настройки строки подключения.

## <a name="upload-arduino-code-to-devkit"></a>Передача кода Arduino в DevKit

После подключения MXChip IoT DevKit к компьютеру сделайте следующее:
1. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Run Build Task...** (Запустить задачу сборки...). После этого эскиз Arduino скомпилируется и будет передан в DevKit.
2. Если эскиз успешно передан, на экран выводится сообщение *Build & Upload Sketch: success* (Сборка и передача эскиза: успешно).

## <a name="monitor-devkit-state-in-browser"></a>Мониторинг состояния DevKit в браузере

1. Откройте в веб-браузере файл `DevKitState\web\index.html`, созданный на шаге [требуемых элементов](#whatyouneed).
2. Откроется соответствующая веб-страница.![Укажите название приложения-функции.](media/iot-hub-arduino-iot-devkit-az3166-devkit-state/devkit-state-function-app-name.png)
1. Введите название приложения-функции, записанное ранее.
2. Нажмите кнопку **Подключиться**.
3. Через несколько секунд страница обновится и на ней отобразится состояние подключения DevKit по Wi-Fi, а также состояние каждого из встроенных датчиков.

## <a name="control-the-devkits-user-led"></a>Управление пользовательским светодиодным индикатором DevKit

1. Выберите вариант графического изображения светодиодного пользовательского индикатора на рисунке веб-страницы.
2. Через несколько секунд экран обновится и на нем будет показано текущее состояние пользовательского индикатора, обозначаемое соответствующим цветом.
3. Попробуйте изменить значение цвета светодиодного индикатора RGB, перемещая ползунки элементов управления цветом палитры RGB.

## <a name="example-operation"></a>Пример действий

![Пример процедуры тестирования](media/iot-hub-arduino-iot-devkit-az3166-devkit-state/devkit-state.gif)

> [!NOTE]
> Вы можете просмотреть необработанные данные двойника устройства на портале Azure: "Центр Интернета вещей" —\> "Устройства Интернета вещей" —\> *\<ваше_устройство\>* -\> "Двойник устройства".

## <a name="next-steps"></a>Дополнительная информация

Вы узнали, как выполнять такие задачи:
- Подключение устройства MXChip IoT DevKit к акселератору решений для удаленного мониторинга Интернета вещей Azure.
- Определение состояния системы и управление цветом светодиодного индикатора RGB DevKit с помощью функции двойников устройств Интернета вещей Azure.

Ниже приведены предлагаемые дальнейшие действия:

* [Общие сведения об акселераторе решений для удаленного мониторинга Интернета вещей Azure](https://docs.microsoft.com/azure/iot-suite/)
* [Connect an MXChip IoT DevKit device to your Azure IoT Central application](https://docs.microsoft.com/microsoft-iot-central/howto-connect-devkit) (Подключение устройства MXChip IoT DevKit к приложению Azure IoT Central)
