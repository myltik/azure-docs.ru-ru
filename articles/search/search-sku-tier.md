---
title: Выбор SKU или ценовой категории для службы поиска Azure | Документация Майкрософт
description: 'Выполнять подготовку службы поиска Azure можно в рамках таких SKU: "Бесплатный", "Базовый" и "Стандартный" (последний уровень доступен с разными конфигурациями ресурсов и уровнями производительности).'
services: search
author: HeidiSteen
manager: cgronlun
tags: azure-portal
ms.service: search
ms.topic: conceptual
ms.date: 10/24/2016
ms.author: heidist
ms.openlocfilehash: 6fe41a8c4d184fef4d1bb0a12fed44a49ef8a6da
ms.sourcegitcommit: fa493b66552af11260db48d89e3ddfcdcb5e3152
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2018
---
# <a name="choose-a-sku-or-pricing-tier-for-azure-search"></a>Выбор SKU или ценовой категории для службы поиска Azure
В Поиске Azure [служба подготавливается](search-create-service-portal.md) согласно конкретной ценовой категории или SKU. Доступны такие уровни: **Бесплатный**, **Базовый** и **Стандартный** (уровень **Стандартный** доступен для нескольких конфигураций и емкостей).

Эта статья поможет вам выбрать подходящий уровень. Если емкости уровня окажется недостаточно, вам понадобится подготовить новую службу на более высоком уровне, а затем перезагрузить индексы. Обновление SKU службы на месте не поддерживается.

> [!NOTE]
> После выбора уровня и [подготовки службы поиска](search-create-service-portal.md) в ней можно увеличить число реплик и секций. Соответствующие указания приведены в разделе [Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure](search-capacity-planning.md).
>
>

## <a name="how-to-approach-a-pricing-tier-decision"></a>Выбор ценовой категории
В Поиске Azure уровень определяет емкость, а не доступность функций. Обычно для каждого уровня доступны все функции, включая функции предварительной версии. Единственное исключение — отсутствие поддержки индексаторов для уровня HD S3.

> [!TIP]
> Мы рекомендуем выполнять подготовку службы уровня **Бесплатный** (по одной для каждой подписки, с неограниченным сроком действия). Таким образом служба всегда будет доступна для упрощенных проектов. Можно использовать службу уровня **Бесплатный** для тестирования и оценки, а затем создать вторую платную службу уровня **Базовый** или **Стандартный** для больших тестовых рабочих нагрузок или рабочих нагрузок в производственной среде.
>
>

Емкость и расходы на запуск службы взаимосвязаны. С помощью этой статьи вы сможете выбрать SKU в соответствии со своими потребностями. Но для этого вам необходимо следующее:

* приблизительно оценить количество и размер индексов, которые вы планируете создать;
* приблизительно оценить количество и размер документов для передачи;
* иметь некоторое представление об объеме запросов с учетом числа запросов в секунду. Рекомендации по производительности и оптимизации службы "Поиск Azure" см. [здесь](search-performance-optimization.md).

Количество и размер важны, так как предельные значения определяются на основе жесткого ограничения количества индексов на службу или ресурсов (хранилища или реплики), используемых службой. Фактическое ограничение службы зависит от того, что первым израсходуется: ресурсы или объекты.

Когда вы определитесь с ресурсами, переходите к следующим шагам.

* **Шаг 1**. Ознакомьтесь с описаниями SKU ниже, чтобы узнать больше о доступных вариантах.
* **Шаг 2**. Ответьте на приведенные ниже вопросы, чтобы принять предварительное решение.
* **Шаг 3**. Примите окончательное решение, просмотрев расценки и жесткие ограничения на ресурсы хранения.

## <a name="sku-descriptions"></a>Описания SKU
В таблице ниже приведены описания каждого уровня.

| Уровень | Основные сценарии |
| --- | --- |
| **Бесплатный** |Общая служба (бесплатно) используемая для оценки, анализа и небольших рабочих нагрузок. Так как служба используется совместно с другими подписчиками, пропускная способность запросов и индексирования зависит от количества пользователей службы. Небольшая емкость (50 МБ или 3 индекса по 10 000 документов каждый). |
| **базовая;** |Небольшие рабочие нагрузки на выделенном оборудовании. Высокая доступность. Максимум 3 реплики и 1 секция (2 ГБ). |
| **S1** |Уровень "Стандартный 1" предлагает гибкое сочетание секций (12) и реплик (12) для средних рабочих нагрузок на выделенном оборудовании. Можно назначать разделы и реплики в сочетании, которое поддерживается максимальным числом оплачиваемых единиц поиска (36). На этом уровне размер секций составляет 25 ГБ. |
| **S2** |Уровень "Стандартный 2" поддерживает более ресурсоемкие рабочие нагрузки с использованием тех же 36 единиц поиска, что и для уровня S1, но с учетом более крупных секций и реплик. На этом уровне размер секций составляет 100 ГБ. |
| **S3** |Уровень "Стандартный 3" поддерживает пропорционально более ресурсоемкие рабочие нагрузки на системах более высокого уровня с конфигурациями, состоящими из 12 секций или 12 реплик, с использованием 36 единиц поиска. На этом уровне размер секций составляет 200 ГБ. |
| **S3 HD** |Уровень "Стандартный 3, высокая плотность" предназначен для большого количества небольших индексов. Допускается использовать до трех секций по 200 ГБ каждая.|

> [!NOTE]
> Максимальное количество реплик и секций для выставления счетов определяется количеством единиц поиска (максимум 36 единиц на службу). Это задает более низкий эффективный предел в сравнении с максимальными значениями по номинальной стоимости. Например, чтобы использовать максимальное количество реплик (12), у вас должно быть не более 3 разделов (12 * 3 = 36 единиц). Точно также, чтобы использовать максимальное количество разделов, сократите число реплик до 3. Схему с допустимыми сочетаниями см. в статье [Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure](search-capacity-planning.md).
>
>

## <a name="review-limits-per-tier"></a>Просмотр ограничений для каждой категории
На схеме ниже представлено подмножество [ограничений службы в Поиске Azure](search-limits-quotas-capacity.md). Кроме того, перечислены факторы, которые чаще всего влияют на решение о выборе SKU. Вы можете использовать эту схему при просмотре приведенных ниже вопросов.

| Ресурс | Free | базовая; | S1 | S2 | S3 | S3 HD |
| --- | --- | --- | --- | --- | --- | --- |
| Соглашение об уровне обслуживания (SLA): |Нет <sup>1</sup> |Yes |Yes |Yes |Yes |Yes |
| Ограничения индексов |3 |5 |50 |200 |200 |1000 <sup>2</sup> |
| Ограничения документов |10 000 документов в целом |1 млн на службу |15 млн на раздел |60 млн на раздел |120 млн на раздел |1 млн на индекс |
| Максимальное количество разделов |Недоступно |1 |12 |12 |12 |3 <sup>2</sup> |
| Размер секции |Всего 50 МБ |2 ГБ на службу |25 ГБ на один раздел |100 ГБ на секцию (максимум 1,2 ТБ на службу) |200 ГБ на раздел (максимум 2,4 ТБ на службу) |200 ГБ (максимум 600 ГБ на службу) |
| Максимальное количество реплик |Недоступно |3 |12 |12 |12 |12 |

<sup>1</sup> Для бесплатной и предварительной версий не предусмотрены соглашения об уровне обслуживания. Для всех оплачиваемых уровней соглашения об уровне обслуживания вступают в силу, если для службы обеспечена достаточная избыточность. Для соглашения об уровне обслуживания, предусматривающего создание запросов (чтение), требуется не менее двух реплик. Для соглашения об уровне обслуживания, предусматривающего создание запросов и индексацию (чтение и запись), требуется не менее трех реплик. Число секций для соглашения об уровне обслуживания не учитывается. 

<sup>2</sup> Уровни S3 и S3 HD основаны на идентичной инфраструктуре, но в каждом из них максимальное ограничение достигается по-разному. Уровень S3 предназначен для небольшого числа очень больших индексов. Таким образом его максимальный предел ограничивается ресурсами (2,4 TB для каждой службы). Уровень S3 HD предназначен для большого числа очень небольших индексов. При 1000 индексов достигается предел уровня S3 HD, определяемый ограничениями индексов. Если вы приобрели уровень S3 HD, но вам нужно использовать более 1000 индексов, обратитесь в службу поддержки Майкрософт, чтобы получить инструкции о дальнейших действиях.

## <a name="eliminate-skus-that-dont-meet-requirements"></a>Исключение номеров SKU, которые не соответствуют требованиям
Ответы на приведенные ниже вопросы помогут вам определиться с выбором SKU для своей рабочей нагрузки.

1. Имеются ли требования в рамках **соглашения об уровне обслуживания** ? Можно использовать любую оплачиваемую категорию ("Базовый" и выше), но для службы необходимо настроить избыточность. Для соглашения об уровне обслуживания, предусматривающего создание запросов (чтение), требуется не менее двух реплик. Для соглашения об уровне обслуживания, предусматривающего создание запросов и индексацию (чтение и запись), требуется не менее трех реплик. Число секций для соглашения об уровне обслуживания не учитывается.
2. **Сколько индексов** вам нужно? Один из ключевых факторов, которые влияют на выбор SKU, — это число индексов, поддерживаемых каждым SKU. Эта характеристика заметно отличается. Особенно это касается нижних ценовых категорий. Требования к количеству индексов могут быть главным решающим фактором при выборе SKU.
3. **Сколько документов** будет загружаться в каждый индекс? Число и размер документов определяют итоговый размер индекса. Рассчитав размер индекса, вы можете сопоставить этот размер и размер раздела в рамках каждого SKU, дополняя расчет числом разделов, необходимых для хранения индекса заданного размера.
4. **Какова ожидаемая нагрузка по запросам**? Определившись с требованиями к хранилищу, переходите с расчету рабочих нагрузок запросов. Для SKU уровня S2 и S3 предусмотрена сходная пропускная способность. При этом требования в рамках соглашения об уровне обслуживания исключают из рассмотрения все предварительные версии SKU.
5. Если вы выбираете между уровнями S2 и S3, определите, нужны ли вам [индексаторы](search-indexer-overview.md). Индексаторы пока еще не доступны для уровня S3 HD. Альтернативным подходом является использование модели отправки обновлений индекса, согласно вы создаете код приложения для отправки набора данных в индекс.

Большинство клиентов может оценить соответствие SKU своим потребностям, ответив на приведенные выше вопросы. Если вы все еще не уверены, какой SKU выбрать, то можете задать вопросы на форумах MSDN и StackOverflow или обратиться в службу поддержки Azure, чтобы получить дополнительные рекомендации.

## <a name="decision-validation-does-the-sku-offer-sufficient-storage-and-qps"></a>Проверка правильности решения: обеспечивает ли SKU достаточный объем хранилища и число запросов в секунду?
В качестве последнего шага еще раз просмотрите сведения, представленные на странице [с расценками](https://azure.microsoft.com/pricing/details/search/) и в разделах об [ограничениях службы для служб и индексов](search-limits-quotas-capacity.md), чтобы проверить свои расчеты ограничений для подписок и служб.

Если цена или требования к хранилищу вас не устраивают, вы можете, например, перераспределить рабочие нагрузки между несколькими службами меньшего размера. Как вариант, вы также можете уменьшить индексы или использовать фильтры для повышения эффективности запросов.

> [!NOTE]
> Требования к хранилищу могут стать непомерными, если документы содержат лишние данные. В идеале документы должны содержать только доступные для поиска данные или метаданные. Двоичные данные недоступны для поиска и должны храниться отдельно (возможно, в таблицах или хранилищах BLOB-объектов Azure) с URL-адресом на внешние данные, содержащимся в поле в индексе. Максимальный размер отдельного документа составляет 16 МБ (или меньше при выполнении массовой отправки нескольких документов в одном запросе). Дополнительные сведения см. в статье [Ограничения поиска Azure](search-limits-quotas-capacity.md).
>
>

## <a name="next-step"></a>Дальнейшие действия
Когда вы точно определитесь с SKU, переходите к следующим шагам.

* [Создание службы поиска Azure с помощью портала Azure](search-create-service-portal.md)
* [Планирование емкости в Поиске Azure](search-capacity-planning.md)
