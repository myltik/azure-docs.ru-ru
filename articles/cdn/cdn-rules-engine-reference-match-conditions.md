---
title: Условия соответствия для обработчика правил Azure CDN | Документация Майкрософт
description: Справочная документация по условиям соответствия для обработчика правил сети доставки содержимого Azure.
services: cdn
documentationcenter: ''
author: Lichard
manager: akucer
editor: ''
ms.assetid: 669ef140-a6dd-4b62-9b9d-3f375a14215e
ms.service: cdn
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/21/2017
ms.author: rli
ms.openlocfilehash: f8dac5469e7160fae93e8251ab7f4195a383f8b4
ms.sourcegitcommit: 6fcd9e220b9cd4cb2d4365de0299bf48fbb18c17
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/05/2018
ms.locfileid: "30173327"
---
# <a name="azure-cdn-rules-engine-match-conditions"></a>Условия соответствия обработчика правил Azure CDN 
В этой статье подробно описаны доступные условия соответствия для [обработчика правил](cdn-rules-engine.md) сети доставки содержимого (CDN) Azure.

Вторая часть правила — это условие соответствия. Условие соответствия определяет различные типы запросов, для которых будет выполнен ряд функций.

Например, с помощью условия соответствия вы сможете:
- Отфильтровать запросы содержимого в определенном расположении.
- Отфильтровать запросы, созданные с определенного IP-адреса или страны.
- Отфильтровать запросы по информации из заголовка.

## <a name="always-match-condition"></a>Условие соответствия "Всегда"

Условие соответствия "Всегда" применяет набор функций по умолчанию ко всем запросам.

ИМЯ | Назначение
-----|--------
[Всегда](#always) | Применяет набор функций по умолчанию ко всем запросам.

## <a name="device-match-condition"></a>Условие соответствия "Устройство"

Условие соответствия "Устройство" определяет запросы, поступающие с мобильного устройства, на основе его свойств.  

ИМЯ | Назначение
-----|--------
[Устройство](#device) | Определяет запросы, поступающие с мобильного устройства, на основе его свойств.

## <a name="location-match-conditions"></a>Условия соответствия "Расположение"

Условия соответствия "Расположение" определяют запросы на основе расположения запрашивающей стороны.

ИМЯ | Назначение
-----|--------
[Номер AS](#as-number) | Определяет запросы, поступающие из конкретной сети.
[Страна](#country) | Определяет запросы, поступающие из указанных стран.

## <a name="origin-match-conditions"></a>Условия соответствия "Источник"

Условия соответствия "Источник" определяют запросы, которые указывают на хранилище сети доставки содержимого или сервер-источник клиента.

ИМЯ | Назначение
-----|--------
[Источник CDN](#cdn-origin) | Определяет запросы к содержимому, хранящемуся в хранилище сети доставки контента.
[Источник клиента](#customer-origin) | Определяет запросы к содержимому, хранящемуся на конкретном сервере-источнике клиента.

## <a name="request-match-conditions"></a>Условия соответствия "Запрос"

Условия соответствия "Запрос" определяют запросы на основе их свойств.

ИМЯ | Назначение
-----|--------
[IP-адрес клиента](#client-ip-address) | Определяет запросы, поступающие с конкретного IP-адреса.
[Параметр файла cookie](#cookie-parameter) | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного значения.
[Регулярное выражение параметра файла cookie](#cookie-parameter-regex) | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного регулярного выражения.
[Граничная запись CNAME](#edge-cname) | Определяет запрос, который указывает на конкретную граничную запись CNAME.
[Домен источников ссылок](#referring-domain) | Определяет запросы, на которые давались ссылки с указанных имен узла.
[Литерал заголовка запроса](#request-header-literal) | Определяет запросы, содержащие указанный заголовок, для которого задано указанное значение.
[Регулярное выражение заголовка запроса](#request-header-regex) | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному регулярному выражению.
[Шаблон заголовка запроса](#request-header-wildcard) | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному шаблону.
[Метод запроса](#request-method) | Определяет запросы по их HTTP-методу.
[Схема запроса](#request-scheme) | Определяет запросы по их HTTP-протоколу.

## <a name="url-match-conditions"></a>Условия соответствия "URL-адрес"

Условия соответствия "URL-адрес" определяют запросы на основе их URL-адресов.

ИМЯ | Назначение
-----|--------
[Каталог URL-пути](#url-path-directory) | Определяет запросы по относительному пути.
[Расширение URL-пути](#url-path-extension) | Определяет запросы по их расширению имени файла.
[Имя файла URL-пути](#url-path-filename) | Определяет запросы по их имени файла.
[Литерал URL-пути](#url-path-literal) | Сравнивает относительный путь запроса с указанным значением.
[Регулярное выражение URL-пути](#url-path-regex) | Сравнивает относительный путь запроса с указанным регулярным выражением.
[Шаблон URL-пути](#url-path-wildcard) | Сравнивает относительный путь запроса с указанным шаблоном.
[Литерал запроса URL-адреса](#url-query-literal) | Сравнивает строку запроса с указанным значением.
[Параметр запроса URL-адреса](#url-query-parameter) | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному шаблону.
[Регулярное выражение запроса URL-адреса](#url-query-regex) | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному регулярному выражению.
[Шаблон запроса URL-адреса](#url-query-wildcard) | Сравнивает указанное значение со строкой запроса.


## <a name="reference-for-rules-engine-match-conditions"></a>Справка по условиям соответствия обработчика правил

---
### <a name="always"></a>Всегда

Условие соответствия "Всегда" применяет набор функций по умолчанию ко всем запросам.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="as-number"></a>Номер AS 
Сеть "Номер AS" определяется по собственному номеру автономной системы (ASN). 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых выполняется условие соответствия номера AS.
- **Соответствует**. ASN клиентской сети должен соответствовать одному из указанных номеров ASN. 
- **Не соответствует**. ASN клиентской сети не должен соответствовать ни одному из указанных номеров ASN.

Основные сведения
- Укажите несколько номеров AS, разделив их одним пробелом. Например, "64514 64515" соответствует запросам, которые поступают из сети 64514 или 64515.
- Некоторые запросы могут не возвращать допустимый номер AS. Вопросительный знак (?) будет соответствовать запросам, для которых невозможно определить допустимый ASN.
- Полностью укажите ASN для нужной сети. Частичные значения сопоставляться не будут.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="cdn-origin"></a>Источник CDN
Условие соответствия "Источник CDN" выполняется, если соблюдены оба следующих условия:
- Было запрошено содержимое из хранилища CDN.
- Универсальный код ресурса (URI) запроса использует тип точки доступа к содержимому (например, /000001), который определен в этом условии соответствия.
  - URL-адрес CDN. Универсальный код ресурса запроса должен содержать выбранную точку доступа к содержимому.
  - URL-адрес граничной записи CNAME. Соответствующая конфигурация граничной записи CNAME должна указывать на выбранную точку доступа к содержимому.
  
Основные сведения
 - Точка доступа к содержимому определяет службу, которая будет обрабатывать запрошенное содержимое.
 - Не используйте инструкцию AND IF для объединения определенных условий соответствия. Например, объединение условий соответствия "Источник CDN" и "Источник клиента" привело бы к созданию шаблона соответствия, который не может быть сопоставлен. Поэтому невозможно объединить два условия соответствия "Источник CDN" с помощью инструкции AND IF.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="client-ip-address"></a>IP-адрес клиента
Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия IP-адреса клиента.
- **Соответствует**. IP-адрес клиента должен соответствовать одному из указанных IP-адресов. 
- **Не соответствует**. IP-адрес клиента не должен соответствовать ни одному из указанных IP-адресов. 

Основные сведения
- Используйте нотацию CIDR.
- Укажите несколько IP-адресов и/или блоков IP-адресов, разделив их одним пробелом. Например: 
  - **Пример IPv4**: 1.2.3.4 10.20.30.40 соответствует любым запросам, поступающим из 1.2.3.4 или 10.20.30.40.
  - **Пример IPv6**: 1:2:3:4:5:6:7:8 10:20:30:40:50:60:70:80 соответствует любым запросам, поступающим из 1:2:3:4:5:6:7:8 или 10:20:30:40:50:60:70:80.
- Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Например: 
  - **Пример IPv4**: 5.5.5.64/26 соответствует любым запросам, поступающим из диапазона 5.5.5.64–5.5.5.127.
  - **Пример IPv6**: 1:2:3:/48 соответствует любым запросам, поступающим из диапазона 1:2:3:0:0:0:0:0–1:2:3:ffff:ffff:ffff:ffff:ffff.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="cookie-parameter"></a>Параметр файла cookie
Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Параметр файла cookie".
- **Соответствует.** Необходим запрос, содержащий указанный файл cookie со значением, которое соответствует хотя бы одному из значений, определенных в этом условии соответствия.
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - Не содержит указанный файл cookie.
  - Содержит указанный файл cookie, но его значение не соответствует ни одному из значений, определенных в этом условии соответствия.
  
Основные сведения
- Имя файла cookie: 
  - Так как подстановочные знаки, включая звездочки (*), не поддерживаются при указании имени файла cookie, для сравнения могут использоваться только точные соответствия имен файлов cookie.
  - Для каждого экземпляра этого условия соответствия можно указать только одно имя файла cookie.
  - Сравнение имен файлов cookie выполняется без учета регистра.
- Значение файла cookie: 
  - Указывайте несколько значений файла cookie, разделяя их одним пробелом.
  - Для значения cookie можно использовать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values). 
  - Если подстановочный знак не указан, этому условию соответствия может отвечать только точное соответствие. Например, "Значение" будет соответствовать варианту "Значение", а не "Значение 1" или "Значение 2".
  - Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр для значения cookie в запросе.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="cookie-parameter-regex"></a>Регулярное выражение параметра файла cookie
Условие соответствия "Регулярное выражение параметра файла cookie" определяет имя и значение файла cookie. Определить нужное значение cookie можно с помощью [регулярных выражений](cdn-rules-engine-reference.md#regular-expressions). 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Регулярное выражение параметра файла cookie".
- **Соответствует.** Необходим запрос, содержащий указанный файл cookie со значением, соответствующим указанному регулярному выражению.
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - Не содержит указанный файл cookie.
  - Содержит указанный файл cookie, но его значение не соответствует указанному регулярному выражению.
  
Основные сведения
- Имя файла cookie: 
  - Так как регулярные выражения и подстановочные знаки, включая звездочки (*), не поддерживаются при указании имени файла cookie, для сравнения могут использоваться только точные соответствия имен файлов cookie.
  - Для каждого экземпляра этого условия соответствия можно указать только одно имя файла cookie.
  - Сравнение имен файлов cookie выполняется без учета регистра.
- Значение файла cookie: 
  - Для значения файла cookie можно использовать регулярные выражения.
  - Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр для значения cookie в запросе.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

--- 
### <a name="country"></a>Страна
Вы можете определить страну, указав ее код. 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Страна".
- **Соответствует**. Запрос должен содержать указанные значения кода страны. 
- **Не соответствует**. Запрос не должен содержать указанные значения кода страны.

Основные сведения
- Укажите несколько кодов стран, разделяя их одним пробелом.
- При указании кода страны подстановочные знаки не поддерживаются.
- Коды стран Европы и Азии не охватывают всех IP-адресов в этих регионах.
- Некоторые запросы могут не возвращать допустимый код страны. Вопросительный знак (?) будет соответствовать запросам, для которых невозможно определить допустимый код страны.
- Коды стран нужно вводить с учетом регистра.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

#### <a name="implementing-country-filtering-by-using-the-rules-engine"></a>Реализация фильтрации по стране с помощью обработчика правил
Это условие соответствия позволяет выполнять множество настроек на основе расположения, из которого поступает запрос. Например, поведение функции фильтрации по стране можно реализовать с помощью следующей конфигурации:

- Соответствие шаблона URL-пути. Задайте для [условия соответствия шаблона URL-пути](#url-path-wildcard) каталог, который будет защищен. 
    Добавьте звездочку в конце относительного пути, чтобы с помощью этого правила ограничить доступ ко всем его дочерним элементам.

- Соответствие страны. Задайте для условия соответствия страны нужный набор стран.
   - Разрешить. Задайте для условия соответствия страны параметр **Не соответствует**, чтобы разрешить доступ к содержимому в расположении, определенном с помощью условия соответствия шаблона URL-пути, только для указанных стран.
   - Блокировать. Задайте для условия соответствия страны параметр **Соответствует**, чтобы блокировать для указанных стран доступ к содержимому в расположении, определенном с помощью условия соответствия шаблона URL-пути.

- Функция запрета доступа (403). Включите [функцию запрета доступа (403)](cdn-rules-engine-reference-features.md#deny-access-403) для репликации части блокирования или разрешения функции фильтрации по стране.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="customer-origin"></a>Источник клиента

Основные сведения 
- Условие соответствия "Источник клиента" выполняется независимо от того, запрашивается ли содержимое через URL-адрес CDN или через URL-адрес граничной записи CNAME, указывающий на выбранный источник клиента.
- Конфигурацию источника клиента, на которую ссылается правило, невозможно удалить со страницы "Источник клиента". Прежде чем пытаться удалить конфигурацию источника клиента, убедитесь, что на нее не ссылаются следующие конфигурации:
  - условие соответствия "Источник клиента";
  - конфигурация граничной записи CNAME.
- Не используйте инструкцию AND IF для объединения определенных условий соответствия. Например, объединение условий соответствия "Источник клиента" и "Источник CDN" привело бы к созданию шаблона соответствия, который не может быть сопоставлен. Поэтому невозможно объединить два условия соответствия "Источник клиента" с помощью инструкции AND IF.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="device"></a>Устройство

Условие соответствия "Устройство" определяет запросы, поступающие с мобильного устройства, на основе его свойств. Мобильные устройства обнаруживаются с помощью [WURFL](http://wurfl.sourceforge.net/). 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Устройство".
- **Соответствует**. Устройство инициатора запроса должно соответствовать указанному значению. 
- **Не соответствует**. Устройство инициатора запроса не должно соответствовать указанному значению.

Основные сведения

- Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр для указанного значения.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

#### <a name="string-type"></a>Тип строки
Возможность WURFL обычно принимает любое сочетание цифр, букв и знаков. Из-за гибкой структуры этой возможности необходимо выбрать способ интерпретации значения, связанного с этим условием соответствия. В таблице ниже описан доступный набор параметров:

type     | ОПИСАНИЕ
---------|------------
Литерал  | Выберите этот параметр, чтобы с помощью [литерального значения](cdn-rules-engine-reference.md#literal-values) большинства знаков предотвратить их преобразование в специальные значения.
Подстановочный знак | Выберите этот параметр, чтобы использовать все [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values).
Регулярное выражение    | Выберите этот параметр, чтобы использовать [регулярные выражения](cdn-rules-engine-reference.md#regular-expressions). Они позволяют определить шаблон знаков.

#### <a name="wurfl-capabilities"></a>Возможности WURFL
Возможность WURFL обозначает категорию, описывающую мобильные устройства. Выбранная возможность определяет тип описания мобильного устройства для идентификации запросов.

В следующей таблице перечислены возможности WURFL и их переменные для обработчика правил.
<br>
> [!NOTE] 
> Следующие переменные поддерживаются в возможностях **Заголовок запроса Modify Client** и **Заголовок ответа Modify Client**.

Функция | Переменная | ОПИСАНИЕ | Примеры значений
-----------|----------|-------------|----------------
Название торговой марки | %{wurfl_cap_brand_name} | Строка, указывающая название торговой марки устройства. | Samsung
ОС устройства | %{wurfl_cap_device_os} | Строка, указывающая операционную систему, установленную на устройстве. | iOS
Версия ОС устройства | %{wurfl_cap_device_os_version} | Строка, указывающая номер версии операционной системы, установленной на устройстве. | 1.0.1
Двойная ориентация | %{wurfl_cap_dual_orientation} | Логическое значение, указывающее на то, поддерживает ли устройство двойную ориентацию. | Да
Предпочитаемое DTD для HTML | %{wurfl_cap_html_preferred_dtd} | Строка, указывающая предпочитаемое определение типа документа (DTD) для HTML-содержимого для мобильного устройства. | Нет<br/>xhtml_basic<br/>html5
Встраивание изображения | %{wurfl_cap_image_inlining} | Логическое значение, указывающее на то, поддерживает ли устройство изображения в кодировке Base64. | false
Используется ОС Android | %{wurfl_vcap_is_android} | Логическое значение, указывающее на то, использует ли устройство ОС Android. | Да
Используется ОС iOS | %{wurfl_vcap_is_ios} | Логическое значение, указывающее на то, использует ли устройство ОС iOS. | false
Является устройством типа Smart TV | %{wurfl_cap_is_smarttv} | Логическое значение, указывающее на то, является ли устройство устройством типа Smart TV. | false
Является смартфоном | %{wurfl_vcap_is_smartphone} | Логическое значение, указывающее на то, является ли устройство смартфоном. | Да
Является планшетом | %{wurfl_cap_is_tablet} | Логическое значение, указывающее на то, является ли устройство планшетом. Это описание не зависит от операционной системы. | Да
Является беспроводным устройством | %{wurfl_cap_is_wireless_device} | Логическое значение, указывающее на то, является ли устройство беспроводным. | Да
Маркетинговое имя | %{wurfl_cap_marketing_name} | Строка, указывающая маркетинговое имя устройства. | BlackBerry 8100 Pearl
Браузер мобильного устройства | %{wurfl_cap_mobile_browser} | Строка, указывающая браузер, используемый для запроса содержимого на устройстве. | Chrome
Версия браузера мобильного устройства | %{wurfl_cap_mobile_browser_version} | Строка, указывающая версию браузера, используемого для запроса содержимого на устройстве. | 31
Имя модели | %{wurfl_cap_model_name} | Строка, указывающая имя модели устройства. | s3
Прогрессивное скачивание | %{wurfl_cap_progressive_download} | Логическое значение, указывающее на то, поддерживает ли устройство воспроизведение аудио- и видеофайлов во время скачивания. | Да
Дата выпуска | %{wurfl_cap_release_date} | Строка, указывающая год и месяц добавления устройства в базу данных WURFL.<br/><br/>Формат: `yyyy_mm` | 2013_december
Высота в разрешении | %{wurfl_cap_resolution_height} | Целое число, указывающее высоту устройства в пикселях. | 768
Ширина в разрешении | %{wurfl_cap_resolution_width} | Целое число, указывающее ширину устройства в пикселях. | 1024

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="edge-cname"></a>Граничная запись Cname
Основные сведения 
- Список доступных граничных записей CNAME ограничивается соответствующими записями, настроенными на странице "Записи CNAME" платформы, на которой настроен обработчик правил.
- Прежде чем удалять конфигурацию граничной записи CNAME, убедитесь, что условие соответствия "Граничная запись CNAME" не ссылается на нее. Конфигурации граничной записи CNAME, которые были определены в правиле, невозможно удалить со страницы "Граничные записи CNAME". 
- Не используйте инструкцию AND IF для объединения определенных условий соответствия. Например, объединение условий соответствия "Граничная запись CNAME" и "Источник клиента" привело бы к созданию шаблона соответствия, который никогда не может быть сопоставлен. Поэтому невозможно объединить два условия соответствия "Источник граничной записи CNAME" с помощью инструкции AND IF.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="referring-domain"></a>Домен источников ссылок
Имя узла, связанное с источником ссылок, через которое запрашивалось содержимое, определяет, выполняется ли условие "Домен источников ссылок". 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Домен источников ссылок".
- **Соответствует**. Имя узла источников ссылок должно соответствовать указанным значениям. 
- **Не соответствует**. Имя узла источников ссылок не должно соответствовать указанным значениям.

Основные сведения
- Укажите несколько имен узла, разделив их одним пробелом.
- Это условие соответствия поддерживает [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values).
- Если указанное значение не содержит звездочку, оно должно точно соответствовать имени узла источника ссылок. Например, значение "mydomain.com" не соответствует "www.mydomain.com."
- Используйте параметр **Без учета регистра**, чтобы определить, учитывается ли регистр при сравнении.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---  
### <a name="request-header-literal"></a>Литерал заголовка запроса
Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Литерал заголовка запроса".
- **Соответствует.** Необходим запрос, содержащий указанный заголовок. Его значение должно соответствовать значению, которое определено в этом условии соответствия.
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - Не содержит указанный заголовок.
  - Содержит указанный заголовок, но его значение не соответствует определенному значению в этом условии соответствия.
  
Основные сведения
- Сравнение имен заголовка всегда выполняется без учета регистра. Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр при сравнении значений заголовка.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---  
### <a name="request-header-regex"></a>Регулярное выражение заголовка запроса
Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Регулярное выражение заголовка запроса".
- **Соответствует.** Необходим запрос, содержащий указанный заголовок. Его значение должно соответствовать шаблону, определенному в указанном [регулярном выражении](cdn-rules-engine-reference.md#regular-expressions).
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - Не содержит указанный заголовок.
  - Содержит указанный заголовок, но его значение не соответствует указанному регулярному выражению.

Основные сведения
- Имя заголовка: 
  - Сравнения имен заголовка выполняются без учета регистра.
  - Замените пробелы в имени заголовка на "%20." 
- Значение заголовка: 
  - Для значения заголовка можно использовать регулярные выражения.
  - Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр при сравнении значений заголовка.
  - Условие соответствия выполняется, только если значение заголовка точно соответствует хотя бы одному из указанных шаблонов.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания 

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="request-header-wildcard"></a>Шаблон заголовка запроса
Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Шаблон заголовка запроса".
- **Соответствует.** Необходим запрос, содержащий указанный заголовок. Его значение должно соответствовать хотя бы одному из значений, определенных в этом условии соответствия.
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - Не содержит указанный заголовок.
  - Содержит указанный заголовок, но его значение не соответствует ни одному из указанных значений.
  
Основные сведения
- Имя заголовка: 
  - Сравнения имен заголовка выполняются без учета регистра.
  - Пробелы в имени заголовка должны быть заменены на "%20." Вы также можете использовать это значение для указания пробелов в значении заголовка.
- Значение заголовка: 
  - Для значения заголовка можно использовать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values).
  - Используйте параметр **Без учета регистра**, чтобы определить, будет ли учитываться регистр при сравнении значений заголовка.
  - Условие соответствия выполняется, если значение заголовка точно соответствует хотя бы одному из указанных шаблонов.
  - Укажите несколько значений, разделив их одним пробелом.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="request-method"></a>Метод запроса
Условие соответствия "Метод запроса" выполняется, только если ресурсы запрашиваются с помощью выбранного метода запроса. Доступны следующие методы запроса:
- ПОЛУЧЕНИЕ
- HEAD 
- ПУБЛИКАЦИЯ 
- OPTIONS 
- ОТПРАВКА 
- УДАЛИТЬ 
- TRACE; 
- CONNECT. 

Основные сведения
- По умолчанию только метод запроса GET может создавать кэшированное содержимое в сети. Все остальные методы запроса передаются через сеть.
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="request-scheme"></a>Схема запроса
Условие соответствия "Схема запроса" выполняется, только если ресурсы запрашиваются с помощью выбранного протокола. Доступные протоколы: 
- HTTP
- HTTPS

Основные сведения
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
  - Завершение заполнения кэша
  - Внутренний максимальный срок по умолчанию
  - Принудительное использование внутреннего максимального срока
  - Не учитывать источник без кэша
  - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-directory"></a>Каталог URL-пути
Идентифицирует запрос по его относительному пути, который исключает имя файла запрошенного ресурса.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Каталог URL-пути".
- **Соответствует**. Запрос должен содержать относительный URL-адрес, исключая имя файла, соответствующее указанному шаблону URL-адреса.
- **Не соответствует**. Запрос должен содержать относительный URL-адрес, исключая имя файла, которое не соответствует указанному шаблону URL-адреса.

Основные сведения
- Используйте параметр **Относительно**, чтобы указать, где начинается точка сравнения URL-адресов: перед точкой доступа к содержимому или после нее. Точка доступа к содержимому представляет собой часть пути и отображается между именем узла Verizon CDN и относительным путем к запрошенному ресурсу (например, /800001/CustomerOrigin). Она определяет расположение по типу сервера (например, источник CDN или клиента) и номеру счета заказчика.

   Для параметра **Относительно** доступны следующие значения:
   - **Корневой домен**. Указывает, что точка сравнения URL-адресов начинается непосредственно после имени узла CDN. 

     Например, http:\//wpc.0001.&lt;домен&gt;/**800001/myorigin/myfolder**/index.htm

   - **Исходный домен**. Указывает, что точка сравнения URL-адресов начинается после точки доступа к содержимому (например, /000001 или /800001/myorigin). Так как запись CNAME \*.azureedge.net создана относительно исходного каталога в имени узла Verizon CDN по умолчанию, пользователи Azure CDN должны использовать значение **Исходный домен**. 

     Например, https:\//&lt;конечная_точка&gt;.azureedge.net/**myfolder**/index.htm 

     Этот URL-адрес указывает следующее имя узла Verizon CDN: http:\//wpc.0001.&lt;домен&gt;/800001/myorigin/**myfolder**/index.htm

- URL-адрес граничной записи CNAME перезаписывается URL-адресом CDN перед сравнением URL-адресов.

    Например, оба URL-адреса ниже указывают на один ресурс и, таким образом, имеют один URL-путь.
    - URL-адрес CDN: http:\//wpc.0001.&lt;домен&gt;/800001/CustomerOrigin/path/asset.htm
    
    - URL-адрес граничной записи CNAME: http:\//&lt;конечная_точка&gt;.azureedge.net/path/asset.htm
    
    Дополнительные сведения:
    - Личный домен: https:\//my.domain.com/path/asset.htm
    
    - URL-адрес (относительно корневого домена): /800001/CustomerOrigin/path/
    
    - URL-адрес (относительно исходного домена): /path/

- Часть URL-адреса, используемая для сравнения URL-адресов, заканчивается непосредственно перед именем файла запрошенного ресурса. Завершающая косая черта является последним знаком в пути такого типа.
    
- Замените все пробелы в шаблоне URL-пути на "%20."
    
- Каждый шаблон URL-пути может содержать одну или несколько звездочек (*), где каждая звездочка соответствует последовательности одного или нескольких знаков.
    
- Укажите несколько URL-путей в шаблоне, разделив их одним пробелом.

    Например, */sales/ */marketing/

- Для спецификации URL-пути можно использовать [значения с подстановочными знаками](cdn-rules-engine-reference.md#wildcard-values).

- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-extension"></a>Расширение URL-пути
Определяет запросы с помощью расширения файла запрошенного ресурса.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Расширение URL-пути".
- **Соответствует**. URL-адрес запроса должен содержать расширение файла, которое точно соответствует указанному шаблону.

   Например, если указать "htm", сопоставятся ресурсы "htm", а не "html".  

- **Не соответствует**. Запрос URL-адреса должен содержать расширение файла, которое не соответствует указанному шаблону.

Основные сведения
- Укажите расширения файла для сопоставления в поле **Значение**. Не используйте точку в начале. Например, используйте htm вместо .htm.

- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.

- Укажите несколько расширений файла, разделив их одним пробелом. 

    Например, htm html.

- Так, если задать "htm", выполнится сопоставление для ресурсов "htm", а не "html".


#### <a name="sample-scenario"></a>Пример сценария

В примере конфигурации ниже предполагается, что это условие соответствия выполняется, если запрос соответствует одному из указанных расширений.

Спецификация значения: asp aspx php html.

Это условие соответствия выполняется, если найдены URL-адреса, оканчивающиеся на такие расширения:
- .asp
- .aspx
- .php
- .html

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-filename"></a>Имя файла URL-пути
Определяет запросы по имени файла запрошенного ресурса. В целях этого условия соответствия имя файла состоит из имени запрошенного ресурса, точки и расширения файла (например, index.html).

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Имя файла URL-пути".
- **Соответствует**. Запрос должен содержать в его URL-пути имя файла, которое соответствует указанному шаблону.
- **Не соответствует**. Запрос должен содержать в его URL-пути имя файла, которое не соответствует указанному шаблону.

Основные сведения
- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.

- Чтобы указать несколько расширений файла, разделите их одним пробелом.

    Например, index.htm index.html.

- Замените пробелы в значении имени файла на "%20."
    
- Для значения имени файла можно использовать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values). Например, каждый шаблон имени файла может содержать одну или несколько звездочек (*), где каждая звездочка соответствует последовательности одного или нескольких знаков.
    
- Если подстановочные знаки не указаны, этому условию соответствия может отвечать только точное соответствие.

    Например, "presentation.ppt" будет соответствовать ресурсу с именем "presentation.ppt", а не "presentation.pptx".

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-literal"></a>Литерал URL-пути
Сравнивает URL-путь запроса, включая имя файла, с указанным значением.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Литерал URL-пути".
- **Соответствует**. Запрос должен содержать URL-путь, соответствующий указанному шаблону.
- **Не соответствует**. Запрос должен содержать URL-путь, не соответствующий указанному шаблону.

Основные сведения
- Используйте параметр **Относительно**, чтобы указать, где начинается точка сравнения URL-адресов: перед точкой доступа к содержимому или после нее. 

    Для параметра **Относительно** доступны следующие значения:
     - **Корневой домен**. Указывает, что точка сравнения URL-адресов начинается непосредственно после имени узла CDN.

       Например, http:\//wpc.0001.&lt;домен&gt;/**800001/myorigin/myfolder/index.htm**

     - **Исходный домен**. Указывает, что точка сравнения URL-адресов начинается после точки доступа к содержимому (например, /000001 или /800001/myorigin). Так как запись CNAME \*.azureedge.net создана относительно исходного каталога в имени узла Verizon CDN по умолчанию, пользователи Azure CDN должны использовать значение **Исходный домен**. 

       Например, https:\//&lt;конечная_точка&gt;.azureedge.net/**myfolder**/index.htm

     Этот URL-адрес указывает следующее имя узла Verizon CDN: http:\//wpc.0001.&lt;домен&gt;/800001/myorigin/**myfolder/index.htm**

- URL-адрес граничной записи CNAME перезаписывается URL-адресом CDN перед сравнением URL-адресов.

    Например, оба URL-адреса ниже указывают на один ресурс и, таким образом, имеют один URL-путь:
    - URL-адрес CDN: http:\//wpc.0001.&lt;домен&gt;/800001/CustomerOrigin/path/asset.htm
    - URL-адрес граничной записи CNAME: http:\//&lt;конечная_точка&gt;.azureedge.net/path/asset.htm
    
    Дополнительные сведения:
    
    - URL-адрес (относительно корневого домена): /800001/CustomerOrigin/path/asset.htm
   
    - URL-адрес (относительно исходного домена): /path/asset.htm

- Строки запроса в URL-адресе не учитываются.
- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.
- Значение, указанное для этого условия соответствия, сравнивается со значением относительного пути точного запроса, выполняемого клиентом.

- Чтобы сопоставить все запросы, выполненные для определенного каталога, используйте условие соответствия [Каталог URL-пути](#url-path-directory) или [Шаблон URL-пути](#url-path-wildcard).

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-regex"></a>Регулярное выражение URL-пути
Сравнивает URL-путь запроса с указанным [регулярным выражением](cdn-rules-engine-reference.md#regular-expressions).

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Регулярное выражение URL-пути".
- **Соответствует**. Запрос должен содержать URL-путь, соответствующий указанному регулярному выражению.
- **Не соответствует**. Запрос должен содержать URL-путь, не соответствующий указанному регулярному выражению.

Основные сведения
- URL-адрес граничной записи CNAME перезаписывается URL-адресом CDN перед сравнением URL-адресов. 
 
    Например, оба URL-адреса указывают на один ресурс и, таким образом, имеют один URL-путь.

     - URL-адрес CDN: http:\//wpc.0001.&lt;домен&gt;/800001/CustomerOrigin/path/asset.htm

     - URL-адрес граничной записи CNAME: http:\//my.domain.com/path/asset.htm
    
    Дополнительные сведения:
    
     - URL-адрес: /800001/CustomerOrigin/path/asset.htm

- Строки запроса в URL-адресе не учитываются.
    
- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.
    
- Пробелы в URL-пути нужно заменить на "%20."

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-path-wildcard"></a>Шаблон URL-пути
Сравнивает относительный URL-путь запроса с указанным шаблоном подстановочного знака.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Шаблон URL-пути".
- **Соответствует**. Запрос должен содержать URL-путь, соответствующий указанному шаблону подстановочного знака.
- **Не соответствует**. Запрос должен содержать URL-путь, не соответствующий указанному шаблону подстановочного знака.

Основные сведения
- Параметр **Относительно** определяет начало точки сравнения URL-адресов: перед точкой доступа к содержимому или после нее.

   Этот параметр может принимать следующие значения:
     - **Корневой домен**. Указывает, что точка сравнения URL-адресов начинается непосредственно после имени узла CDN.

       Например, http:\//wpc.0001.&lt;домен&gt;/**800001/myorigin/myfolder/index.htm**

     - **Исходный домен**. Указывает, что точка сравнения URL-адресов начинается после точки доступа к содержимому (например, /000001 или /800001/myorigin). Так как запись CNAME \*.azureedge.net создана относительно исходного каталога в имени узла Verizon CDN по умолчанию, пользователи Azure CDN должны использовать значение **Исходный домен**. 

       Например, https:\//&lt;конечная_точка&gt;.azureedge.net/**myfolder**/index.htm

     Этот URL-адрес указывает следующее имя узла Verizon CDN: http:\//wpc.0001.&lt;домен&gt;/800001/myorigin/**myfolder/index.htm**

- URL-адрес граничной записи CNAME перезаписывается URL-адресом CDN перед сравнением URL-адресов.

    Например, оба URL-адреса ниже указывают на один ресурс и, таким образом, имеют один URL-путь:
     - URL-адрес CDN: http://wpc.0001.&lt;domain&gt;/800001/CustomerOrigin/path/asset.htm
     - URL-адрес граничной записи CNAME: http:\//&lt;конечная_точка&gt;.azureedge.net/path/asset.htm
    
    Дополнительные сведения:
    
     - URL-адрес (относительно корневого домена): /800001/CustomerOrigin/path/asset.htm
    
     - URL-адрес (относительно исходного домена): /path/asset.htm
    
- Укажите несколько URL-путей, разделив их одним пробелом.

   Например: /marketing/asset.* /sales/*.htm

- Строки запроса в URL-адресе не учитываются.
    
- Используйте параметр **Без учета регистра**, чтобы определить, выполняется ли для сравнения регистр.
    
- Замените пробелы в URL-пути на "%20."
    
- Для значения, указанного для URL-пути, можно использовать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values). Каждый шаблон URL-пути может содержать одну или несколько звездочек (*), где каждая звездочка может соответствовать последовательности одного или нескольких знаков.

#### <a name="sample-scenarios"></a>Примеры сценариев

В примере конфигураций в таблице ниже предполагается, что это условие соответствия выполняется, если запрос соответствует указанному шаблону URL-адреса:

Значение                   | Относительно    | Результат 
------------------------|----------------|-------
\*/test.html \*/test.php  | Корневой или исходный домен | Этому шаблону соответствуют запросы ресурсов с именем "test.html" или "test.php" в любой папке.
/80ABCD/origin/text/*   | Корневой домен           | Для соответствия этому шаблону запрошенный ресурс должен отвечать следующим требованиям: <br />— находится в источнике клиента ("origin"); <br />— относительный путь начинается с папки с именем "text". То есть запрошенный ресурс может находиться в папке "text" или одной из ее рекурсивных вложенных папок.
*/css/* */js/*          | Корневой или исходный домен | Этому шаблону соответствуют все URL-адреса CDN и граничной записи CNAME, содержащие папку css или js.
*.jpg *.gif *.png       | Корневой или исходный домен | Этому шаблону соответствуют все URL-адреса CDN или граничной записи CNAME, оканчивающиеся на .jpg, .gif или .png. Альтернативный способ указать этот шаблон — использовать [условие соответствия "Расширение URL-пути"](#url-path-extension).
/images/\* /media/\*      | Исходный домен         | Этому шаблону соответствуют URL-адреса CDN или граничной записи CNAME, относительные пути которых начинаются с папки "images" или "media". <br />URL-адрес CDN: http:\//wpc.0001.&lt;домен&gt;/800001/myorigin/images/sales/event1.png<br />Пример URL-адреса граничной записи CNAME: http:\//cdn.mydomain.com/images/sales/event1.png

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-query-literal"></a>Литерал запроса URL-адреса
Сравнивает строку запроса с указанным значением.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Литерал запроса URL-адреса".
- **Соответствует**. Запрос должен содержать строку запроса URL-адреса, соответствующую указанной строке запроса.
- **Не соответствует**. Запрос должен содержать строку запроса URL-адреса, не соответствующую указанной строке запроса.

Основные сведения

- Только точные соответствия строки запроса отвечают этому условию соответствия.
    
- Используйте параметр **Без учета регистра** для управления чувствительностью к регистру сравнений строки запроса.
    
- Не используйте вопросительный знак (?) в начале в тексте значения строки запроса.
    
- Для некоторых знаков требуется кодирование в формат URL-адреса. Используйте знак процента для кодирования таких знаков в формат URL-адреса:

   Character | Кодирование в формат URL-адреса
   ----------|---------
   Пробел     | %20
   &         | %25

- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
   - Завершение заполнения кэша
   - Внутренний максимальный срок по умолчанию
   - Принудительное использование внутреннего максимального срока
   - Не учитывать источник без кэша
   - Внутреннее максимальное значение устаревания

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-query-parameter"></a>Параметр запроса URL-адреса
Определяет запросы, содержащие указанный параметр строки запроса. Для этого параметра задается значение, соответствующее указанному шаблону. Параметры строки запроса (например, параметр=значение) в URL-адресе запроса определяют, выполнено ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра. 

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Параметр запроса URL-адреса".
- **Соответствует**. Запрос должен содержать указанный параметр со значением, которое соответствует хотя бы одному из значений, определенных в этом условии соответствия.
- **Не соответствует**. Запрос должен отвечать любому из следующих критериев:
  - не содержит указанный параметр;
  - содержит указанный параметр, но его значение не соответствует ни одному из значений, определенных в этом условии соответствия.

Это условие соответствия предоставляет простой способ указания сочетания имени и значения параметра. При сопоставлении параметра строки запроса для обеспечения большей гибкости можно использовать условие соответствия [Шаблон запроса URL-адреса](#url-query-wildcard).

Основные сведения
- Для каждого экземпляра этого условия соответствия можно указать только одно имя с параметром запроса URL-адреса.
    
- Так как подстановочные знаки не поддерживаются, если указано имя параметра, для сравнения могут использоваться только точные соответствия имен параметров.
- Значения параметра могут включать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values).
   - Каждый шаблон значения параметра может содержать одну или несколько звездочек (*), где каждая звездочка может соответствовать последовательности одного или нескольких знаков.
   - Для некоторых знаков требуется кодирование в формат URL-адреса. Используйте знак процента для кодирования таких знаков в формат URL-адреса:

       Character | Кодирование в формат URL-адреса
       ----------|---------
       Пробел     | %20
       &         | %25

- Укажите несколько значений параметра строки запроса, разделив их одним пробелом. Это условие соответствия выполняется, если запрос содержит одно из указанных сочетаний имени и значения.

   - Пример 1

     - Конфигурация:

       ValueA ValueB

     - Эта конфигурация соответствует параметрам строки запроса ниже:

       Parameter1=ValueA
    
       Parameter1=ValueB

   - Пример 2

     - Конфигурация: 

        Value%20A Value%20B

     - Эта конфигурация соответствует параметрам строки запроса ниже:

       Parameter1=Value%20A

       Parameter1=Value%20B

- Это условие соответствия выполняется, только если есть точное соответствие как минимум с одним из указанных сочетаний значения и имени в строке запроса.

   Например, если использовать конфигурацию в предыдущем примере, сочетание значения и имени параметра "Parameter1=ValueAdd" не будет считаться совпадением. Тем не менее, если указать одно из значений ниже, оно будет соответствовать этому сочетанию имени и значения:

   - ValueA ValueB ValueAdd
   - ValueA* ValueB

- Используйте параметр **Без учета регистра** для управления чувствительностью к регистру сравнений строки запроса.
    
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
   - Завершение заполнения кэша
   - Внутренний максимальный срок по умолчанию
   - Принудительное использование внутреннего максимального срока
   - Не учитывать источник без кэша
   - Внутреннее максимальное значение устаревания

#### <a name="sample-scenarios"></a>Примеры сценариев
В следующем примере показано, как этот параметр действует в определенных ситуациях.

ИМЯ  | Значение |  Результат
------|-------|--------
Пользователь  | Ivan   | Для соответствия этому шаблону строка запроса запрошенного URL-адреса должна быть "?user=ivan."
Пользователь  | *     | Для соответствия этому шаблону строка запроса запрошенного URL-адреса должна содержать параметр пользователя.
Email | Ivan\* | Для соответствия этому шаблону строка запроса запрошенного URL-адреса должна содержать параметр адреса электронной почты, который начинается с "Ivan".

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-query-regex"></a>Регулярное выражение запроса URL-адреса
Определяет запросы, содержащие указанный параметр строки запроса. Для этого параметра задается значение, соответствующее указанному [регулярному выражению](cdn-rules-engine-reference.md#regular-expressions).

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Регулярное выражение запроса URL-адреса".
- **Соответствует**. Запрос должен содержать строку запроса URL-адреса, соответствующую указанному регулярному выражению.
- **Не соответствует**. Запрос должен содержать строку запроса URL-адреса, не соответствующую указанному регулярному выражению.

Основные сведения
- Только точные совпадения для указанного регулярного выражения отвечают этому условию соответствия.
    
- Используйте параметр **Без учета регистра** для управления чувствительностью к регистру сравнений строки запроса.
    
- В целях этого параметра строка запроса начинается с первого знака после разделителя вопросительного знака (?) строки запроса.
    
- Для некоторых знаков требуется кодирование в формат URL-адреса. Используйте знак процента для кодирования таких знаков в формат URL-адреса:

   Character | Кодирование в формат URL-адреса | Значение
   ----------|--------------|------
   Пробел     | %20          | \%20
   &         | %25          | \%25

   Обратите внимание, что знаки процента необходимо экранировать.

- Дважды экранируйте специальные знаки регулярного выражения (например, \^$.+), добавив обратную косую черту в регулярное выражение.

   Например: 

   Значение | Интерпретируется как 
   ------|---------------
   \\+    | +
   \\\\+   | \\+

- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
   - Завершение заполнения кэша
   - Внутренний максимальный срок по умолчанию
   - Принудительное использование внутреннего максимального срока
   - Не учитывать источник без кэша
   - Внутреннее максимальное значение устаревания


[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

---
### <a name="url-query-wildcard"></a>Шаблон запроса URL-адреса
Сравнивает указанное значение со строкой запроса.

Параметр **Соответствует**/**Не соответствует** определяет требования, при которых будет выполняться условие соответствия "Шаблон запроса URL-адреса".
- **Соответствует**. Запрос должен содержать строку запроса URL-адреса, соответствующую указанному значению шаблона.
- **Не соответствует**. Запрос должен содержать строку запроса URL-адреса, не соответствующую указанному значению шаблона.

Основные сведения
- В целях этого параметра строка запроса начинается с первого знака после разделителя вопросительного знака (?) строки запроса.
- Значения параметра могут содержать [подстановочные знаки](cdn-rules-engine-reference.md#wildcard-values).
   - Каждый шаблон значения параметра может содержать одну или несколько звездочек (*), где каждая звездочка может соответствовать последовательности одного или нескольких знаков.
   - Для некоторых знаков требуется кодирование в формат URL-адреса. Используйте знак процента для кодирования таких знаков в формат URL-адреса:

     Character | Кодирование в формат URL-адреса
     ----------|---------
     Пробел     | %20
     &         | %25

- Укажите несколько значений, разделив их одним пробелом.

   Например, *Parameter1=ValueA* *ValueB* *Parameter1=ValueC&Parameter2=ValueD*

- Этому условию отвечают только точные совпадения, соответствующие хотя бы одному из указанных шаблонов строки запроса.
    
- Используйте параметр **Без учета регистра** для управления чувствительностью к регистру сравнений строки запроса.
    
- Из-за способа отслеживания параметров кэша это условие соответствия несовместимо со следующими функциями:
   - Завершение заполнения кэша
   - Внутренний максимальный срок по умолчанию
   - Принудительное использование внутреннего максимального срока
   - Не учитывать источник без кэша
   - Внутреннее максимальное значение устаревания

#### <a name="sample-scenarios"></a>Примеры сценариев
В следующем примере показано, как этот параметр действует в определенных ситуациях.

 ИМЯ                 | ОПИСАНИЕ
 ---------------------|------------
user=ivan              | Для соответствия этому шаблону строка запроса запрошенного URL-адреса должна быть "?user=ivan."
\*user=\* \*optout=\* | Для соответствия этому шаблону запрос URL-адреса CDN должен содержать параметр пользователя или OptOut.

[Вверх](#match-conditions-for-the-azure-cdn-rules-engine)

</br>

## <a name="next-steps"></a>Дополнительная информация
* [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
* [Обработчик правил Azure CDN](cdn-rules-engine-reference.md)
* [Условные выражения обработчика правил Azure CDN](cdn-rules-engine-reference-conditional-expressions.md)
* [Функции обработчика правил Azure CDN](cdn-rules-engine-reference-features.md)
* [Переопределение стандартного поведения через HTTP с помощью обработчика правил](cdn-rules-engine.md)

