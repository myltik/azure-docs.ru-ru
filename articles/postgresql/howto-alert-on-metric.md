---
title: Настройка оповещений о метриках в службе "База данных Azure для PostgreSQL" на портале Azure
description: В этой статье описывается, как настроить уведомления на основе метрик для базы данных Azure для PostgreSQL и получить к ним доступ с помощью портала Azure.
services: postgresql
author: rachel-msft
ms.author: raagyema
manager: kfile
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 02/28/2018
ms.openlocfilehash: b4b15998276dd6c32e9c15622aa0251c6c066085
ms.sourcegitcommit: c765cbd9c379ed00f1e2394374efa8e1915321b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2018
ms.locfileid: "29690261"
---
# <a name="use-the-azure-portal-to-set-up-alerts-on-metrics-for-azure-database-for-postgresql"></a>Настройка оповещений на основе метрик для базы данных Azure для PostgreSQL на портале Azure 

В этой статье показано, как настроить оповещения для базы данных Azure для PostgreSQL с помощью портала Azure. Вы можете получать оповещения на основе метрик мониторинга для служб Azure.

Оповещение активируется, когда значение указанной метрики выходит за рамки заданного порога. Сначала оно активируется, когда условие выполняется, а затем — когда условие перестает выполняться. 

Оповещения можно настроить для выполнения следующих действий при его активации:
* отправка уведомлений по электронной почте администратору службы и соадминистраторам;
* отправка уведомления на указанные дополнительные электронные адреса;
* вызов веб-перехватчика.

Для настройки правил генерации оповещений и получения сведений о них можно использовать:
* [портал Azure](../monitoring-and-diagnostics/insights-alerts-portal.md)
* [PowerShell](../monitoring-and-diagnostics/insights-alerts-powershell.md)
* [интерфейса командной строки (CLI)](../monitoring-and-diagnostics/insights-alerts-command-line-interface.md)
* [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931945.aspx)

## <a name="create-an-alert-rule-on-a-metric-from-the-azure-portal"></a>Создание правила генерации оповещений на основе метрики на портале Azure
1. На [портале Azure](https://portal.azure.com/) выберите сервер базы данных Azure для PostgreSQL, который нужно отследить.

2. В разделе боковой панели **Мониторинг** выберите **Правила оповещения**, как показано ниже:

   ![Выбор "Правила оповещения"](./media/howto-alert-on-metric/1-alert-rules.png)

3. Выберите значок **Добавить оповещение метрики** (+). 

4. Откроется страница **Add rule** (Добавление правила), как показано ниже.  Заполните необходимые сведения:

   ![Форма добавления оповещения для метрики](./media/howto-alert-on-metric/2-add-rule-form.png)

   | Параметр | ОПИСАНИЕ  |
   |---------|---------|
   | ИМЯ | Укажите имя правило генерации оповещений. Это значение отправляется по электронной почте с уведомлением об оповещении. |
   | ОПИСАНИЕ | Укажите краткое описание правила генерации оповещений. Это значение отправляется по электронной почте с уведомлением об оповещении. |
   | Оповещения включены | Для этого типа оповещений выберите значение **Метрики**. |
   | Подписка | В этом поле предварительно указывается подписка, в которой размещена база данных Azure для PostgreSQL. |
   | Группа ресурсов | В этом поле предварительно указывается группа ресурсов базы данных Azure для PostgreSQL. |
   | Ресурс | В этом поле предварительно указывается имя базы данных Azure для PostgreSQL. |
   | Метрика | Выберите метрику, для которой нужно выдать оповещение. Например, **Storage percentage** (Процент загрузки хранилища). |
   | Условие | Выберите условие для сравниваемой метрики. Например, **Greater than** (Больше). |
   | Threshold (Пороговое значение) | Пороговое значение для метрики, например 85 (в процентах). |
   | Период | Период времени, в течение которого правило метрики должно быть выполнено, после чего будет активировано оповещение. Например, **За последние 30 минут**. |

   Исходя из примера, оповещение определяет загрузку хранилища больше 85 % в течение 30 минут. Это оповещение активируется, если средняя загрузка хранилища превышает 85 % в течение 30 минут. После первой активации оповещение активируется повторно, если средняя загрузка хранилища ниже 85 % не менее 30 минут.

5. Выберите необходимый метод уведомления для правила генерации оповещений. 

   Установите флажок **Участники, читатели и владельцы электронной почты**, если администраторы и соадминистраторы должны получать электронные сообщения при активации оповещения.

   Если вы хотите отправлять уведомления при активации оповещения на дополнительные электронные адреса, добавьте их в поле **Дополнительные адреса электронной почты администратора**. При указании нескольких электронных адресов разделите их точкой с запятой: *email@contoso.com;email2@contoso.com*

   (Необязательно.) Укажите допустимый универсальный код ресурса (URI) в поле **Веб-перехватчик**, если его необходимо вызывать при срабатывании оповещения.

6. Нажмите кнопку **ОК**, чтобы создать оповещение.

   Через несколько минут оповещение включится и будет активироваться, как было описано выше.

## <a name="manage-your-alerts"></a>Управление оповещениями
После создания оповещение можно выбрать и сделать следующее:

* просмотреть диаграмму, отображающую пороговое и фактическое значения метрики за предыдущий день, относящиеся к этому оповещению;
* **изменить** или **удалить** правило генерации оповещений;
* **отключить** или **включить** его, если нужно временно остановить или возобновить получение уведомлений.

## <a name="next-steps"></a>Дополнительная информация
* Узнайте больше о [настройке веб-перехватчиков webhook в оповещениях](../monitoring-and-diagnostics/insights-webhooks-alerts.md).
* Прочитайте [обзор сбора метрики](../monitoring-and-diagnostics/insights-how-to-customize-monitoring.md) и узнайте, как можно обеспечить, чтобы служба была доступна и отвечала на запросы.
