---
title: Журналы сервера в базе данных Azure для PostgreSQL
description: В этой статье объясняется, как служба "База данных Azure для PostgreSQL" создает журналы запросов и ошибок и как настраивается срок хранения журналов.
services: postgresql
author: rachel-msft
ms.author: raagyema
manager: kfile
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 02/28/2018
ms.openlocfilehash: a8d560aa8906e3ba1f65758239b645cd1b1df032
ms.sourcegitcommit: c765cbd9c379ed00f1e2394374efa8e1915321b9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/28/2018
ms.locfileid: "29691099"
---
# <a name="server-logs-in-azure-database-for-postgresql"></a>Журналы сервера в базе данных Azure для PostgreSQL 
База данных Azure для PostgreSQL создает журналы запросов и ошибок. Однако доступ к журналам транзакций не поддерживается. Журналы запросов и ошибок можно использовать для идентификации, устранения и исправления ошибок конфигурации, а также для повышения производительности. Дополнительные сведения см. на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала).

## <a name="access-server-logs"></a>Доступ к журналам сервера
Чтобы просмотреть и скачать журналы ошибок сервера Azure PostgreSQL, можно воспользоваться порталом Azure, [Azure CLI](howto-configure-server-logs-using-cli.md) или интерфейсами REST API Azure.

## <a name="log-retention"></a>Хранение журналов
Вы можете настроить срок хранения системных журналов, используя параметр **log\_retention\_period**, связанный с сервером. Единица измерения для этого параметра — дни. По умолчанию используется значение 3 дня. Максимальное значение — "7 дней". Ваш сервер должен иметь достаточный объем выделенной памяти для хранения файлов журналов.
Файлы журналов сменяются каждый час или по достижении размера в 100 МБ (в зависимости от того, какое событие произойдет первым).

## <a name="configure-logging-for-azure-postgresql-server"></a>Настройка ведения журнала для сервера Azure PostgreSQL
Вы можете включить для своего сервера ведение журнала запросов и журнала ошибок. Журналы ошибок могут содержать сведения об автоматической очистке, подключениях и контрольных точках.

Чтобы включить ведение журнала запросов для экземпляра базы данных PostgreSQL, необходимо настроить два параметра сервера: `log\_statement` и `log\_min\_duration\_statement`.

Параметр **log\_statement** определяет, какие инструкции SQL регистрируются. Рекомендуется задать этому параметру значение ***all*** (Все), чтобы регистрировались все инструкции. По умолчанию задано значение "none" (Нет).

Параметр **log\_min\_duration\_statement** задает для регистрируемой инструкции минимальную длительность (в миллисекундах). Все инструкции SQL, которые выполняются дольше заданного значения, записываются в журнал. По умолчанию этот параметр отключен и задано значение "минус один" (–1). Включение этого параметра может быть полезным, когда требуется отследить в приложениях неоптимизированные запросы.

Параметр **log\_min\_messages** позволяет определить, сообщения какого уровня должны записываться в журнал сервера. Значение по умолчанию — WARNING (Предупреждение) 

Дополнительные сведения об этих настройках см. в документации на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала). Чтобы настроить конкретно параметры сервера базы данных Azure для PostgreSQL, см. статью [Настройка параметров конфигурации сервера с помощью Azure CLI](howto-configure-server-parameters-using-cli.md).

## <a name="next-steps"></a>Дополнительная информация
- Сведения о доступе к журналам с помощью Azure CLI приведены в статье [Настройка журналов сервера и получение к ним доступа с помощью Azure CLI](howto-configure-server-logs-using-cli.md).
- Дополнительные сведения о параметрах сервера см. в статье [Настройка параметров службы в базе данных Azure для PostgreSQL](howto-configure-server-parameters-using-cli.md).
