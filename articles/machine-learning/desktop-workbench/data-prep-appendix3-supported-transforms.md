---
title: Применение преобразования для подготовки данных в службе "Машинное обучение Azure" | Документация Майкрософт
description: В этой статье приводится полный список преобразований, доступных в службе "Машинное обучение Azure" для подготовки данных.
services: machine-learning
author: euangMS
ms.author: euang
manager: lanceo
ms.reviewer: jmartens, jasonwhowell, mldocs
ms.service: machine-learning
ms.component: desktop-workbench
ms.workload: data-services
ms.custom: ''
ms.devlang: ''
ms.topic: article
ms.date: 02/01/2018
ms.openlocfilehash: 0ad4202f62aada30a8eab996858d3e972876e5f2
ms.sourcegitcommit: 944d16bc74de29fb2643b0576a20cbd7e437cef2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2018
ms.locfileid: "34831287"
---
# <a name="use-data-transforms-for-data-preparation-in-azure-machine-learning"></a>Применение преобразования для подготовки данных в службе "Машинное обучение Azure"

*Преобразование* в службе "Машинное обучение Azure" получает данные в заданном формате, выполняет с ними операцию (например, изменяет тип данных) и выводит полученные данные в новом формате. Для разных преобразований применяются разные интерфейсы и реакции на события. Соединив в цепочку несколько преобразований посредством действий в потоке данных, вы можете выполнять сложные и повторяющиеся преобразования данных. Это основные функциональные возможности подготовки данных.

Ниже приведены преобразования, доступные в службе "Машинное обучение Azure". 

## <a name="column-selection"></a>Выбор столбцов 
Многие из перечисленных ниже преобразований могут работать с одним или несколькими столбцами. Чтобы выбрать несколько столбцов, используйте клавишу Ctrl. Чтобы выбрать диапазон столбцов, используйте клавишу SHIFT.

## <a name="transforms-from-the-main-menu-or-the-grid-header"></a>Преобразования из главного меню или сетки заголовка 
Преобразования можно вызвать с помощью элемента "Преобразования" в главном меню. Вы также можете выбрать их, щелкнув правой кнопкой мыши имя столбца в сетке данных. Если выбрано несколько столбцов, меню преобразований будет открываться при щелчке любого из них правой кнопкой мыши.

В контекстном меню отображаются только допустимые преобразования для выбранного типа данных. Главное меню содержит все преобразования, но отключает те, которые не относятся к выбранным столбцам.

Кроме того, вы можете вызвать небольшой набор контекстных преобразований, щелкнув ячейку правой кнопкой мыши. Это преобразования копирование, замены и фильтрации. При этих преобразованиях учитывается тип данных. Поэтому доступные варианты для числовых и текстовых столбцов будут разными.

## <a name="derive-column-by-example"></a>Получение столбца по образцу
С помощью этого преобразования можно создать столбец, производный от одного или нескольких имеющихся столбцов. Во время преобразования определяется требуемый формат вывода. При этом оцениваются входные (выбранные) столбцы и предлагаемый образец выходных данных. 

Чтобы использовать это преобразование, выберите один или несколько столбцов. Добавьте новый (пустой) производный столбец для образца. Введите в него образец результатов, которые нужно получить в производном столбце (если он будет производным от других столбцов), и технология "по образцу" заполнит все остальные ячейки в этом столбце. 

В сложных случаях может потребоваться несколько образцов. Для этого выберите другую ячейку и введите еще один образец.

Технология "По образцу" использует для анализа значений все выбранные столбцы. Если при вызове этого преобразования не выбран ни один столбец, используются все ячейки текущей строки. Если вы выберете только нужные столбцы, результат будет более точным.

Вы можете выбрать столбцы перед вызовом преобразования. Когда откроется редактор преобразования, все выбранные в качестве входных данных столбцы будут отмечены флажками в верхней части. Устанавливая или снимая эти флажки в заголовках столбцов, вы можете изменить набор выбранных столбцов.

Более подробное описание преобразования **Derived Column by Example** (Получение столбца по образцу) и дополнительные примеры см. в [этой статье](data-prep-derive-column-by-example.md).  

## <a name="split-column-by-example"></a>Разделение столбца по образцу
При этом преобразовании выполняется попытка разделить существующий столбец на *n* столбцов с помощью механизма "по образцу". Вы можете выполнить автоматическое разделение для создаваемых столбцов.

Более подробное описание преобразования **Split Column by Example** (Разделение столбцов по образцу) и дополнительные примеры см. в [этой статье](data-prep-split-column-by-example.md).

## <a name="expand-json"></a>Развертывание JSON

Это преобразование позволяет добавить несколько столбцов, развернув столбец с допустимым текстом JSON.

Более подробное описание преобразования **Expand JSON** (Развертывание JSON) и дополнительные примеры см. в [этой статье](data-prep-expand-json.md).


## <a name="combine-columns-by-example"></a>Объединение столбцов по образцу

Это преобразование добавляет новый столбец, объединив значения из нескольких столбцов. 

Более подробное описание преобразования **Combine Columns by Example** (Объединение столбцов по образцу) и дополнительные примеры см. в [этой статье](data-prep-combine-columns-by-example.md).


## <a name="duplicate-column"></a>Дублирование столбца
При этом преобразовании создается точная копия одного или нескольких столбцов и новым столбцам присваиваются имена, производные от имен исходных столбцов.

## <a name="text-clustering"></a>Кластеризация текста 
Преобразование позволяет сгруппировать несогласованные значения, которые должны совпадать.  

При этом преобразовании выполняется анализ на сходство значений в одном столбце и их группирование в кластеры. Для каждого кластера определяется каноническое значение, которое подставляется вместо всех экземпляров и всех значений в этом кластере. Вы можете удалить полные кластеры и изменить каноническое значение. Также можно удалить из кластера отдельные экземпляры. Вы можете изменить фильтр порогового значения для показателя сходства, который используется при группировании экземпляров в кластер.

По умолчанию во время этого преобразования создается столбец, в котором все значения экземпляров кластера заменяются каноническим значением, выбранным для этого кластера. Вы также можете добавить отдельный столбец (с настраиваемым именем), который содержит показатель сходства для каждого экземпляра, для дальнейшего использования в потоке данных.

## <a name="replace-values"></a>Замена значений
Это преобразование позволяет заменить одну строку другой. Исходная строка может быть неполной строкой или полной ячейкой. Замена может применяться к одному или нескольким столбцам. В строке поиска можно использовать специальные и обычные символы. 

## <a name="replace-na-values"></a>Замена недопустимых значений
Это преобразование позволяет заменить разные формы недоступных или недопустимых значений (Н/Д, НД, NULL, не число и т. д.) и пустые строки одним согласованным значением. Оно поддерживает один или несколько столбцов и предлагается, только если столбец выбран. Если столбцы не выбраны, оно отсутствует в главном меню преобразований.

## <a name="replace-missing-values"></a>Замена отсутствующих значений
Это преобразование позволяет заменить отсутствующие данные одним значением, а также поддерживает один или несколько столбцов. Оно предлагается, только если столбец выбран. Если столбцы не выбраны, оно отсутствует в главном меню преобразований.

## <a name="replace-error-values"></a>Замена ошибочных значений
Это преобразование позволяет заменить ошибки одним значением, а также поддерживает один или несколько столбцов. Оно предлагается, только если столбец выбран. Если столбцы не выбраны, оно отсутствует в главном меню преобразований.

## <a name="trim-string"></a>Обрезка строк
Это преобразование позволяет удалить начальные и конечные пробелы (в том числе знаки табуляции и т. д.) из одного или нескольких столбцов.

## <a name="adjust-precision"></a>Изменение точности
Это преобразование позволяет указать требуемое число десятичных разрядов для числового столбца.

## <a name="rename-column"></a>Переименование столбца
Это преобразование изменяет имя выбранного столбца. Его можно вызвать через контекстное меню, которое открывается при щелчке имени столбца.

## <a name="remove-column"></a>Удаление столбца
Это преобразование удаляет выбранные столбцы и работает с одним или несколькими столбцами. 

## <a name="keep-column"></a>Сохранение столбца
Это преобразование сохраняет только выбранные столбцы и работает с одним или несколькими столбцами.

## <a name="handle-path-column"></a>Обработка столбца пути
При импорте файла функция **добавления источника данных** автоматически добавляет в набор данных столбец пути. Этот столбец содержит полное имя файла, которое считается путем к набору данных. Преобразование позволяет удалить этот дополнительный столбец из набора данных или добавить его.

## <a name="convert-field-type-to-numeric"></a>Преобразование поля в числовой тип
Это преобразование изменяет тип столбца на числовой. Вы можете указать разделитель для чисел, отличных от целых. По умолчанию для этого преобразования разделитель не запрашивается. Чтобы задать его, вызовите редактор при помощи пункта меню **Изменить**. Это преобразование работает с одним или несколькими столбцами.

## <a name="convert-field-type-to-date"></a>Преобразование типа поля в поле даты
Это преобразование изменяет тип столбца на значение даты. Используется установленный по умолчанию формат даты и времени, который вы можете переопределить с помощью директив `strftime`. Вы также можете добавить к значениям времени фиксированную дату.

По умолчанию для этого преобразования формат не запрашивается. Чтобы задать его, на завершающем этапе вызовите редактор при помощи пункта меню **Изменить**. Это преобразование работает с одним или несколькими столбцами.

В тип даты можно преобразовать только даты в диапазоне от 22.09.1677 до 11.04.2262.

## <a name="convert-field-type-to-boolean"></a>Преобразование поля в логический тип
Это преобразование изменяет тип столбца на логическое значение (true или false). Оно поддерживает сопоставление нескольких значений со значениями True и False. Вы можете изменить эти сопоставления. Также поддерживается константа, с которой можно сопоставлять значения, не указанные в таблицах сопоставления с True и False. Это преобразование работает с одним или несколькими столбцами.

## <a name="convert-field-type-to-string"></a>Преобразование поля в строку
Это преобразование изменяет тип столбца на строковый и работает с одним или несколькими столбцами.

## <a name="convert-unix-timestamp-to-datetime"></a>Преобразование метки времени Unix в дату и время
При этом преобразовании распознается формат метки времени Unix, даже если он представлен в наборе данных в строковом виде, и правильно преобразуется в тип даты.

## <a name="filter"></a>Фильтр
Это преобразование поддерживает фильтрацию строк по значениям в одном или нескольких столбцах. Условия фильтра зависят от типа данных каждого столбца. Таким образом вы можете отфильтровать строковые столбцы по критерию "содержит" или "не содержит". Числовые столбцы могут фильтроваться по критериям "больше" или "меньше".

Вызвав преобразование **фильтра** из главного меню или щелкнув правой кнопкой мыши заголовок столбца, вы можете передать несоответствующие столбцы в другой поток данных. Если вы примените эту возможность, основной поток данных продолжит работать со строками, которые **соответствуют** фильтру, а для тех, которые ему **не соответствуют**, создастся другой поток данных.

## <a name="use-first-row-as-headers"></a>Использование первой строки в качестве заголовков
Это преобразование назначает первую строку из набора данных строкой имен столбцов. Если у некоторых столбцов в первой строке нет данных, то их имена создаются автоматически. Это преобразование используется, когда импорт данных начинается как минимум со второй строки. Импорт можно начинать и с последующего набора данных, используя параметр **Skip Rows** (Пропуск строк). Это преобразование можно также применять для удаления рекламы или для использования только автоматически созданных имен всех столбцов.

## <a name="join"></a>Объединение
Это преобразование позволяет объединить два потока данных. Вы можете выбрать, что следует включать в выходные данные: все успешно объединенные строки, строки "слева" без соответствия или строки "справа" без соответствия.

Преобразование **соединения** запускается из одного потока данных и выбирает его в качестве одной стороны соединения. Затем оно предлагает выбрать другой поток данных в качестве другой стороны соединения. Когда оба потока выбраны, преобразование предлагает выбрать для каждой из сторон один столбец в качестве объединителя. Если объединение нужно выполнять по нескольким столбцам, перед запуском преобразования объединения следует создать производный столбец, сцепив в нем нужные данные специально для целей объединения. Преобразование может предложить ключ для объединения или даже автоматически создать производный ключевой столбец.

По завершении соединения выводится представление схемы Sankey соединения. Ширина линий относительно друг друга представляет число строк, перемещаемых в этой части потока соединения. На правой панели можно выбрать успешно преобразованные строки, а на левой — строки без соответствия, или же можно отобразить строки без соответствия исключительно справа. Вы также можете выбрать только одну ветвь.

## <a name="append-rows"></a>Добавление строк
Это преобразование добавляет в текущий поток данные из другого потока данных. Оно сопоставляет столбцы по позиции для добавления новых строк в конец.

## <a name="append-columns"></a>Добавление столбцов
Это преобразование добавляет в текущий поток новые столбцы из другого потока данных. Оно добавляет новые столбцы справа и не пытается выровнять данные в строках.

## <a name="summarize"></a>Суммирование
Это преобразование вычисляет статистические выражения для сочетания уникальных значений в одном или нескольких выделенных столбцах. 

Поддерживаются следующие статистические выражения: COUNT (количество), SUM (сумма), MIN (наименьшее), MAX (наибольшее), MEAN (среднее), VARIANCE (дисперсия), STANDARD DEVIATION (стандартное отклонение). Из списка статистических выражений предлагаются только те, которые применимы к типу данных в выбранном столбце. Неприменимые статистические функции недоступны для выбора. Например, для строкового столбца нет возможности вычислить среднее значение, но можно выбрать максимальное или минимальное значение.

Открыв редактор, перетащите заголовок столбца на панель в верхнем углу слева. На этой панели отображаются столбцы, по которым выполняются статистические вычисления. Она является иерархической, то есть вы можете выполнять вложенные статистические вычисления. Панель редактора в верхнем углу справа позволяет выбрать статистическое выражение для конкретного столбца. Для любого столбца можно применить одно или несколько статистических вычислений. Когда вы выберете хотя бы одно вычисление, в сетке внизу справа будут представлены примеры результатов вычисления для предварительного просмотра. 

Это преобразование является аналогом `ANSI-SQL GROUP BY`.

## <a name="remove-duplicates"></a>Удаление дубликатов
Это преобразование позволяет удалить всю строку, в одном или нескольких столбцах для которой обнаружены повторяющиеся значения. Если не выбран ни один столбец, будут удаляться только полностью совпадающие строки.

## <a name="sort"></a>Сортировать
Это преобразование сортирует данные. Данные могут сортироваться по значениям одного или нескольких столбцов. В редакторе для каждого столбца можно отдельно выбрать сортировку по возрастанию (используется по умолчанию) или по убыванию.

Это преобразование является аналогом `ANSI-SQL ORDER BY`.

## <a name="output-transforms"></a>Преобразования выходных данных
Следующие преобразования обрабатывают выходные данные. Вы можете создать несколько блоков записи в одном потоке данных, чтобы записывать данные из разных расположений потока.

### <a name="write-to-csv"></a>Запись в CSV-файл
При этом преобразовании данные из текущего расположения в потоке записываются в формате CSV. Преобразование позволяет выбрать расположение файла (локальное или удаленное) и его различные настройки.

### <a name="write-to-parquet"></a>Запись в Parquet
При этом преобразовании данные из текущего расположения в потоке записываются в формате Parquet. Преобразование позволяет выбрать расположение файла (локальное или удаленное) и его различные настройки.

## <a name="script-based-transforms"></a>Преобразования на основе сценариев
Для приведенных ниже преобразований используются сценарии на языке Python, что позволяет реализовать возможности, отсутствующие в основном продукте. 

>[!NOTE]
>Прежде чем использовать любое из этих преобразований, прочтите статью [Расширения Python для подготовки данных](data-prep-python-extensibility-overview.md).

### <a name="add-column-script"></a>Добавление столбцов (сценарий)
Это преобразование добавляет столбец к данным, используя выражение Python.
Дополнительные сведения см. в разделе [Пример пользовательских преобразований столбцов (Python)](data-prep-appendix10-sample-custom-column-transforms-python.md).

### <a name="advanced-filter-script"></a>Расширенный фильтр (сценарий)
Это преобразование позволяет создать на Python фильтр уровня строк.
Дополнительные сведения см. в разделе [Пример пользовательских преобразований потока данных (Python)](data-prep-appendix6-sample-filter-expressions-python.md).

### <a name="transform-dataflow-script"></a>Преобразование потока данных (сценарий)
Это преобразование позволяет применить код Python ко всему набору данных.
Дополнительные сведения см. в разделе [Пример пользовательских преобразований потока данных (Python)](data-prep-appendix7-sample-transform-data-flow-python.md).

Это преобразование также позволяет применить код Python ко всему разделу данных.
Дополнительные сведения см. в разделе [Пример пользовательских преобразований потока данных (Python)](data-prep-appendix7-sample-transform-data-flow-python.md).

### <a name="write-dataflow-script"></a>Запись потока данных (сценарий)
Это преобразование использует код Python для записи всего набора данных.
Дополнительные сведения см. в разделе [Пример подключений к местам назначений (Python)](data-prep-appendix9-sample-destination-connections-python.md).



