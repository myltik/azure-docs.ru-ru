---
title: "Подробное руководство по применению средства подготовки данных в службе \"Машинное обучение Azure\" | Документация Майкрософт"
description: "В этой статье содержатся сведения о выполнении ранее созданных пакетов источников данных и подготовки данных."
services: machine-learning
author: hughz
ms.author: cforbe
manager: mwinkle
ms.reviewer: jmartens, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.custom: 
ms.devlang: 
ms.topic: article
ms.date: 02/13/2018
ms.openlocfilehash: 0849747fe6d66d55d11c131b51b07d8f689774e1
ms.sourcegitcommit: 0b02e180f02ca3acbfb2f91ca3e36989df0f2d9c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2018
---
# <a name="data-preparation-operationalization"></a>Применение средства подготовки данных 

## <a name="operationalization-scenario"></a>Сценарий применения

Ниже приведены различные сценарии применения средства обработки данных, с которыми может столкнуться пользователь.

### <a name="develop-your-model-based-on-training-data"></a>Разработка модели на основе данных для обучения

Предположим, вам необходимо создать и развернуть службу API оценки в режиме реального времени. Сначала нужно разработать модель для оценки на основе набора данных для обучения. Средство подготовки данных импортирует образец ваших данных для обучения в качестве нового источника данных. После подготовки данных в пакете DataPrep находятся этапы подготовки. С помощью учетной записи службы "Экспериментирование" Машинного обучения Azure (AzureML) пользователь может выполнять итерацию модели машинного обучения, чтобы создавать метки для каждого потока входных данных в данных для обучения.

По мере обновления признаков данных пользователь возвращается к пакету DataPrep для подготовки данных иным образом и сохраняет эти шаги. Этот итерационный процесс создания новых признаков и настройки модели машинного обучения продолжается до тех пор, пока модель не начнет точно оценивать тестовые данные. 

### <a name="deploy-your-model-to-the-azure-model-management-service"></a>Развертывание модели в службе управления моделями Машинного обучения

Теперь у вас есть данные клиента, которые необходимо оценить в режиме реального времени. Служба управления моделями Машинного обучения позволяет развернуть модель в качестве службы с помощью интерфейса командной строки Python AzureML. Развернутая служба предоставляет конечную точку REST для получения данных клиента в режиме реального времени и возврата соответствующих выходных меток из обученной модели.

Для простоты использования конечная точка модели принимает данные в формате JSON. Входными данными должна быть строка JSON, представляющая собой двумерный массив данных, который будет преобразован в источник данных DataPrep с помощью метода ReadJSONLiteral. Пакет подготовки данных, созданный во время этапа экспериментирования, можно затем применить для потоковых данных JSON. Итоговую таблицу данных можно передать в обученную модель для оценки.

## <a name="read-json-literal-transformation"></a>Преобразование Read JSON Literal

### <a name="description"></a>ОПИСАНИЕ

В целях практического применения средство подготовки данных содержит преобразование **ReadJsonLiteral** для выполнения действия и создания таблицы данных Pandas или Spark. Процедура преобразования принимает имеющийся пакет подготовки данных и источник данных JSON в качестве входных данных. Она выполняется через интерфейс командной строки Python DataPrep.

### <a name="instructions"></a>Указания

#### <a name="pythoncli"></a>Интерфейс командной строки Python

В области Azure Machine Learning Workbench откройте интерфейс командной строки (Файл > Открыть командную строку).

В этом примере пакет подготовки данных TrainingPreparationSteps используется для подготовки данных и добавления признаков тома для каждого экземпляра входных данных.

```
>>> import azureml.dataprep.package as azdp

>>> azdp.run_on_data.__doc__
"Generate a dataframe based on a selected dataflow in a package using in-memory data sources.
'user_config' is expected as a dictionary that maps the absolute path of a dsource file to an in-memory data source represented as a list of lists."

>>> real_time_customer_data = [[1.0, 1.5, 2.5], [2.5, 1.5, 3]]
>>> azdp.run_on_data({ "C:\\TrainingSampleData.dsource": real_time_customer_data}, "C:\\TrainingPreparationSteps.dprep")
    Height   Width   Depth  Volumne
0   1.0       1.5    2.5    3.75
1   2.5       1.5    3.0    11.25
```

`run_on_data()` имеет следующие необязательные параметры:
 - `dataflow_idx`: указывает индекс необходимого потока данных для выполнения в пакете.
 - `secrets`: словарь хранилища секретов (ключ: secretId, значение: хранимый секрет).
 - `spark`: указывает сеанс Spark для выполнения Spark.

#### <a name="input"></a>Входные данные

Двумерный массив входных данных ("массив массивов"). В Python входные данные должны состоять из списка списков. Так как JSON не имеет собственного типа данных, все объекты Python в формате datetime.datetime преобразуются в строки даты в формате ISO. Для конечных точек REST входные данные должны составлять строковый литерал JSON, представляющий собой двумерный массив JSON.

#### <a name="output"></a>Выходные данные

Таблица данных Pandas или Spark. Тип таблицы данных определяется платформой, выбранной в конфигурации запуска (`.runconfig`). Итоговую таблицу данных можно передать в качестве входных данных в обученную модель для оценки.
