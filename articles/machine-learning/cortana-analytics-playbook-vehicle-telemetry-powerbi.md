---
title: "Использование панели Power BI для прогнозирования исправности автомобиля и манеры вождения с помощью Azure | Документация Майкрософт"
description: "Используйте возможности Cortana Intelligence, чтобы получить прогнозы и актуальную информацию об исправности и манере вождения автомобиля в режиме реального времени."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: aaeb29a5-4a13-4eab-bbf1-885690d86c56
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: bradsev
translationtype: Human Translation
ms.sourcegitcommit: f497366f8e66ba79b0e5978fde54d0b33048aa8d
ms.openlocfilehash: 24d440049b5e889c6d4417cc16787edd42bc5848
ms.lasthandoff: 01/24/2017


---
# <a name="vehicle-telemetry-analytics-solution-template-power-bi-dashboard-setup-instructions"></a>Инструкции по настройке информационной панели Power BI шаблона решения для аналитики телеметрии автомобилей
Из этого **меню** можно открыть разделы сборника тренировочных заданий. 

[!INCLUDE [cap-vehicle-telemetry-playbook-selector](../../includes/cap-vehicle-telemetry-playbook-selector.md)]

Ниже приведены примеры использования решения для аналитики телеметрии автомобилей. Они демонстрируют, как возможности Cortana Intelligence помогают автодилерам, производителям автомобилей и страховым компаниям получать прогнозы и актуальную информацию об исправности автомобиля и манере вождения в реальном времени, чтобы повышать качество обслуживания клиентов, исследований и маркетинговых кампаний. В этом документе приведены пошаговые инструкции по настройке отчетов и информационной панели Power BI после развертывания решения в подписке. 

## <a name="prerequisites"></a>Предварительные требования
1. Разверните решение для аналитики телеметрии автомобилей, перейдя по следующей ссылке: [https://gallery.cortanaanalytics.com/SolutionTemplate/Vehicle-Telemetry-Analytics-3](https://gallery.cortanaanalytics.com/SolutionTemplate/Vehicle-Telemetry-Analytics-3)  
2. [Установите Microsoft Power BI Desktop.](http://www.microsoft.com/download/details.aspx?id=45331)
3. [Подписка Azure.](https://azure.microsoft.com/pricing/free-trial/). Если у вас нет подписки Azure, для начала получите бесплатную подписку Azure.
4. Учетная запись Microsoft Power BI

## <a name="cortana-intelligence-suite-components"></a>Компоненты Cortana Intelligence Suite
В вашей подписке будут развернуты следующие службы Cortana Intelligence из шаблона решения для аналитики телеметрии автомобилей.

* **Концентраторы событий** принимают миллионы событий телеметрии автомобилей в Azure.
* **Stream Analytics**получает данные об исправности автомобиля в реальном времени и помещает их в долгосрочное хранилище для более детальной пакетной аналитики.
* **Машинное обучение** обнаруживает аномалии в реальном времени и выполняет пакетную обработку для получения прогнозных данных.
* **HDInsight** используется для преобразования данных при масштабировании.
* **Фабрика данных** предназначена для координации, планирования и мониторинга конвейера пакетной обработки, а также управления ресурсами.

**Power BI** предоставляет для этого решения расширенную панель мониторинга для визуализации данных в режиме реального времени и прогнозной аналитики. 

В решении используются два источника данных: **симулированные сигналы автомобиля с набором диагностических данных** и **каталог автомобиля**.

В это решение входит симулятор телематики автомобиля. Он выдает диагностическую информацию и сигналы, соответствующие состоянию автомобиля и манере вождения в определенный момент времени. 

Каталог автомобилей — это справочный набор данных для сопоставления номера шасси знака (VIN) с моделью автомобиля.

## <a name="power-bi-dashboard-preparation"></a>Подготовка информационной панели Power BI
### <a name="deployment"></a>Развертывание
По завершении развертывания вы увидите приведенную ниже схему, все компоненты которой будут отмечены ЗЕЛЕНЫМ цветом. 

* Чтобы проверить, развернуты ли соответствующие службы, щелкните стрелку в правом верхнем углу зеленых узлов.
* Чтобы скачать пакет для симуляции данных, щелкните стрелку в правом верхнем углу узла **Vehicle Telematics Simulator** (Симулятор телематики автомобиля). Сохраните файлы на локальном компьютере и извлеките их. 

![Развернутые компоненты](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/1-deployed-components.png)

Теперь все готово к настройке информационной панели Power BI с расширенными возможностями визуализации для получения информации об исправности автомобиля и манере вождения в реальном времени, а также прогнозных данных. Создание отчетов и настройка панели мониторинга займут от 45 минут до часа. 

### <a name="setup-power-bi-real-time-dashboard"></a>Настройка панели мониторинга Power BI в реальном времени
**Создание симулированных данных**

1. На локальном компьютере перейдите в папку с извлеченным пакетом симулятора телематики автомобиля.
  ![Папка симулятора](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/2-vehicle-telematics-simulator-folder.png)
2. Запустите приложение ***CarEventGenerator.exe***.
3. Он выдает диагностическую информацию и сигналы, соответствующие состоянию автомобиля и манере вождения в определенный момент времени. Эти данные публикуются в экземпляре концентратора событий Azure, настроенном в развертывании.

![Диагностика](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/3-vehicle-telematics-diagnostics.png)

**Запуск приложения панели мониторинга в реальном времени**

Решение содержит приложение, которое создает в Power BI информационную панель, работающую в реальном времени. Это приложение прослушивает экземпляр концентратора событий, из которого Stream Analytics постоянно публикует события. Это приложение обрабатывает данные каждого события, которое оно получает, с помощью конечной точки оценки ответа на запрос службы машинного обучения. Итоговый набор данных публикуется для визуализации в API push-уведомлений Power BI. 

Загрузить приложение можно так:

1. Щелкните узел Power BI в представлении схемы и на панели свойств перейдите по ссылке **Download Real-time Dashboard Application** (Скачать приложение информационной панели в реальном времени). ![Информационная панель](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard-new1.png)
2. Извлеките и сохраните приложение на локальном компьютере. ![Приложение информационной панели](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/4-real-time-dashboard-application.png)
3. Запустите приложение **RealtimeDashboardApp.exe**
4. Укажите действительные учетные данные Power BI, войдите и нажмите кнопку **Принять**
   
   ![Войдите в Power BI.](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/5-sign-into-powerbi.png)
   
   ![Разрешения для информационной панели Power BI](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/6-powerbi-dashboard-permissions.png)

### <a name="configure-power-bi-reports"></a>Настройка отчетов Power BI
Подготовка отчетов и панели мониторинга в реальном времени занимает около 30–45 минут. Перейдите на страницу [http://powerbi.com](http://powerbi.com) и войдите в систему.

![Войдите в Power BI.](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/6-1-powerbi-signin.png)

В Power BI создается новый набор данных. Щелкните набор данных **ConnectedCarsRealtime** .

![Выберите набор данных подключенных автомобилей в реальном времени](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/7-select-connected-cars-realtime-dataset.png)

Сохраните пустой отчет, нажав **CTRL+S**.

![Сохраните пустой отчет.](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/8-save-blank-report.png)

Введите для отчета имя *Аналитика телеметрии автомобилей в реальном времени: отчеты*.

![Присвойте имя отчету.](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/9-provide-report-name.png)

## <a name="real-time-reports"></a>Отчеты в реальном времени
Это решение включает три отчета в реальном времени, описывающие:

1. исправные автомобили;
2. автомобили, которым требуется обслуживание;
3. Статистика работоспособности автомобилей

Вы можете настроить все три отчета в реальном времени или перейти к следующему разделу, в котором описана настройка пакетных отчетов. Мы рекомендуем сразу создать все три отчета для визуализации всей аналитической информации, предоставляемой этим решением в реальном времени.  

### <a name="1-vehicles-in-operation"></a>1. исправные автомобили;
Дважды щелкните элемент **Страница 1** и переименуйте его на "Исправные автомобили".  
    ![Подключенные автомобили — исправные автомобили](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4a.png)  

В разделе **Поля** выберите поле **VIN** и укажите тип визуализации **Карточка**.  

Создается карточка визуализации, как показано на рисунке.  
    ![Подключенные автомобили — выберите номер шасси](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4b.png)

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите поля **Город** и **VIN**. Измените тип визуализации на **Карта**. Перетащите поле **VIN** в область значений. Перетащите поле **Город** из раздела "Поля" в область **Условные обозначения**.   
    ![Подключенные автомобили — визуализация "Карточка"](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4c.png)

В разделе **Визуализации** откройте раздел **Формат**, щелкните **Заголовок** и измените значение поля **Текст** на **Исправные автомобили по городам**.  
    ![Подключенные автомобили — исправные автомобили по городам](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4d.png)   

Визуализация будет выглядеть, как показано на рисунке.    
    ![Подключенные автомобили — итоговая визуализация](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4e.png)

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите поля **Город** и **VIN**. Затем измените тип визуализации на **Гистограмма с группировкой**. Убедитесь, что поле **Город** размещено в области **Ось**, а **VIN** — в области **Значение**.  

Отсортируйте гистограмму по параметру **Count of vin** (Количество VIN).  
    ![Подключенные автомобили — количество номеров шасси](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4f.png)  

Измените заголовок гистограммы в поле **Заголовок** на **Исправные автомобили по городам**.  

В разделе **Формат** выберите **Цвета данных** и щелкните **On** (Вкл.) для параметра **Показать все**.  
    ![Подключенные автомобили — отображение всех цветов данных](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4g.png)  

Измените цвет для каждого города, щелкнув цветной значок.  
    ![Подключенные автомобили — изменение цветов](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4h.png)  

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите тип визуализации **Гистограмма с группировкой**, перетащите поле **Город** в область **Ось**, поле **Модель** — в область **Условные обозначения**, а поле **VIN** — в область **Значение**.  
    ![Подключенные автомобили — кластеризованная гистограмма](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4i.png)  
    ![Подключенные автомобили — отрисовка](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4j.png)

Измените визуальное представление на странице, как показано на рисунке.  
    ![Подключенные автомобили — визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4k.png)

Отчет «Исправные автомобили» в реальном времени настроен. Вы можете создать следующий отчет в реальном времени или перейти к настройке панели мониторинга. 

### <a name="2-vehicles-requiring-maintenance"></a>2) автомобили, которым требуется обслуживание;
Добавьте новый отчет, щелкнув ![Добавить](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4add.png) , и переименуйте его в **Автомобили, которым требуется обслуживание**

![Подключенные автомобили — автомобили, требующие обслуживания](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4l.png)  

Выберите поле **VIN** и измените тип визуализации на **Карточка**.  
    ![Подключенные автомобили — визуализация "Карточка номера шасси"](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4m.png)  

В наборе данных есть поле с именем MaintenanceLabel. Это поле может иметь значение&0; или&1;. Оно задается моделью машинного обучения Azure, которая включена в решение и интегрирована с механизмом обработки в реальном времени. Значение&1; означает, что автомобилю требуется обслуживание. 

Вот как добавить фильтр **уровня страницы** для отображения данных об автомобилях, которым требуется обслуживание. 

1. Перетащите поле **MaintenanceLabel** в область **Фильтры уровня страницы**.  
   ![Подключенные автомобили — фильтры уровня страницы](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4n1.png)  
2. В нижней части фильтра уровня страницы MaintenanceLabel щелкните меню **Простая фильтрация** .  
   ![Подключенные автомобили — базовая фильтрация](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4n2.png)  
3. Задайте значение фильтра **1**  .  
   ![Подключенные автомобили — значение фильтра](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4n3.png)  

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите тип визуализации **Гистограмма с группировкой**.  
![Подключенные автомобили — визуализация «Карточка номера шасси»](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4o.png)  
![Подключенные автомобили — кластеризованная гистограмма](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4p.png)

Перетащите поле **Модель** в область **Оси**, а поле **VIN** — в область **Значение**. Отсортируйте визуализацию по параметру **Количество VIN**.  Измените заголовок гистограммы в поле **Заголовок** на **Автомобили, которым требуется обслуживание, по моделям**.  

Перетащите поля **VIN** в область **Насыщенность цвета** (раздел **Поля** ![Поля](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4field.png) на вкладке **Визуализация**).  
![Подключенные автомобили — насыщенность цвета](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4q.png)  

Измените тип визуализации параметра **Цвета данных** из раздела **Формат**.  
Измените минимальное значение цвета на **F2C812**.  
Измените максимальное значение цвета на **FF6300**.  
![Подключенные автомобили — изменения цвета](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4r.png)  
![Подключенные автомобили — новые цвета визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4s.png)  

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите тип визуализации **Гистограмма с группировкой**. Затем перетащите поле **VIN** в область **Значение**, а поле **Город** — в область **Ось**. Отсортируйте гистограмму по параметру **Count of vin** (Количество VIN). Измените заголовок гистограммы в поле **Заголовок** на **Автомобили, требующие обслуживания, по городам** .  
![Подключенные автомобили — автомобили, требующие обслуживания, по городам](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4t.png)  

Щелкните пустую область, чтобы добавить новую визуализацию.  

Выберите визуализацию **Многострочная карточка**, а затем перетащите поля **Модель** и **VIN** в область **Поля**.  
![Подключенные автомобили — многострочная карточка](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4u.png)    

После переупорядочивания всех элементов визуализации итоговый отчет будет выглядеть следующим образом:   
![Подключенные автомобили — многострочная карточка](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4v.png)  

Отчет «Автомобили, которым требуется обслуживание» в реальном времени настроен. Вы можете создать следующий отчет в реальном времени или перейти к настройке панели мониторинга. 

### <a name="3-vehicles-health-statistics"></a>3. Статистика работоспособности автомобилей
Добавьте новый отчет, щелкнув ![Добавить](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4add.png) , и переименуйте его в **Статистика работоспособности автомобилей**  

Выберите тип визуализации **Датчик**. Затем перетащите поле **Скорость** в области **Value, Minimum Value, Maximum Value** (Значение, Минимальное значение, Максимальное значение).  
![Подключенные автомобили — многострочная карточка](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4w.png)  

В области **Значение** для параметра **Скорость** измените агрегирование по умолчанию на **Среднее**. 

В области **Minimum area** (Минимальное значение) для параметра **Скорость** измените агрегирование по умолчанию на **Минимум**.

В области **Maximum area** (Максимальное значение) для параметра **Скорость** измените агрегирование по умолчанию на **Максимум**.

![Подключенные автомобили — многострочная карточка](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4x.png)  

В качестве **заголовка датчика** укажите **Средняя скорость**. 

![Подключенные автомобили — датчик](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4y.png)  

Щелкните пустую область, чтобы добавить новую визуализацию.  

Аналогичным образом добавьте следующие **датчики**: **Среднее количество моторного масла**, **Среднее количество топлива** и **Средняя температура двигателя**.  

В поле каждого датчика измените агрегирование по умолчанию, выполнив шаги, приведенные выше для датчика **Средняя скорость** .

![Подключенные автомобили — датчики](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4z.png)

Щелкните пустую область, чтобы добавить новую визуализацию.

Из раздела "Визуализации" выберите **График и гистограмма с группировкой** и перетащите поле **Город** в область **Общая ось**. Затем перетащите поля **Скорость**, **Давление в шинах и Моторное масло** в область **Значения столбцов**. Измените тип агрегирования на **Среднее**. 

Перетащите поле **Температура двигателя** в область **Значения строк** и измените тип агрегирования на **Среднее**. 

![Подключенные автомобили — поля визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4aa.png)

Измените **заголовок** диаграммы в соответствующем поле на **Среднее значение скорости, давления в шинах, температуры моторного масла и двигателя**.  

![Подключенные автомобили — поля визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4bb.png)

Щелкните пустую область, чтобы добавить новую визуализацию.

Выберите визуализацию **Диаграмма дерева** из раздела "Визуализации" и перетащите поле **Модель** в область **Группа**. Затем перетащите поле **Вероятность обслуживания** в область **Значения**.

Измените **заголовок** диаграммы в соответствующем поле на **Модели автомобилей, которым требуется обслуживание**.

![Подключенные автомобили — изменение заголовка диаграммы](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4cc.png)

Щелкните пустую область, чтобы добавить новую визуализацию.

Выберите тип визуализации **100% Stacked Bar Chart** (Нормированная линейчатая диаграмма) и перетащите поле **Город** в область **Ось**. Затем перетащите поля **Вероятность обслуживания** и **Вероятность отзыва** в область **Значение**.

![Подключенные автомобили — добавление новой визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4dd.png)

Щелкните **Формат**, выберите **Цвета данных** и задайте для цвета **Вероятность обслуживания** значение **F2C80F**.

Измените **заголовок** диаграммы в соответствующем поле на **Вероятность обслуживания и отзыва автомобилей по городам**.

![Подключенные автомобили — добавление новой визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4ee.png)

Щелкните пустую область, чтобы добавить новую визуализацию.

Выберите тип визуализации **Диаграмма с областями** и перетащите поле **Модель** в область **Ось**. Затем перетащите поля **Моторное масло, Давление в шинах, Скорость, Вероятность обслуживания** в область **Значения**. Измените тип агрегирования на **Среднее**. 

![Подключенные автомобили — изменение типа агрегирования](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4ff.png)

Измените заголовок диаграммы на **Среднее значение количества моторного масла, давления в шинах, скорости и вероятности обслуживания по моделям**.

![Подключенные автомобили — изменение заголовка диаграммы](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4gg.png)

Щелкните пустую область, чтобы добавить новую визуализацию.

1. Выберите тип визуализации **Точечная диаграмма** .
2. Перетащите поле **Модель** в области **Сведения** и **Условные обозначения**.
3. Перетащите поле **Топливо** в область **Ось X** и измените тип агрегирования на **Среднее**.
4. Перетащите поле **Температура двигателя** в область **Ось Y** и измените тип агрегирования на **Среднее**.
5. Перетащите поле **VIN** в область **Размер**.

![Подключенные автомобили — добавление новой визуализации](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4hh.png)

Измените **заголовок** диаграммы в соответствующем поле на **Среднее значение количества топлива и температуры двигателя по моделям**.

![Подключенные автомобили — изменение заголовка диаграммы](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4ii.png)

Итоговый отчет будет выглядеть так, как показано ниже.

![Подключенные автомобили — итоговый отчет](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.4jj.png)

### <a name="pin-visualizations-from-the-reports-to-the-real-time-dashboard"></a>Закрепление визуализаций из отчетов на панели мониторинга в реальном времени
Чтобы создать пустую панель мониторинга, щелкните значок плюса рядом с заголовком «Панели мониторинга». Панели можно присвоить имя «Панель мониторинга аналитики телеметрии автомобилей».

![Подключенные автомобили — панель мониторинга](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.5.png)

Закрепите визуализацию с созданными отчетами на панели мониторинга. 

![Подключенные автомобили — панель мониторинга](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-3.6.png)

После того как вы создадите все три отчета и закрепите соответствующие визуализации на панели мониторинга, она будет выглядеть так, как показано на рисунке ниже. Если вы создали не все отчеты, панель мониторинга может выглядеть иначе. 

![Подключенные автомобили — панель мониторинга](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/connected-cars-4.0.png)

Поздравляем! Вы настроили панель мониторинга в реальном времени. По мере выполнения файлов CarEventGenerator.exe и RealtimeDashboardApp.exe на панели мониторинга будут отображаться соответствующие обновления в реальном времени. Для выполнения следующих действий может потребоваться 10–15 минут.

## <a name="setup-power-bi-batch-processing-dashboard"></a>Настройка панели мониторинга пакетной обработки Power BI
> [!NOTE]
> Чтобы завершить выполнение и обработать данные за год, конвейеру пакетной обработки потребуется около двух часов (после завершения развертывания). Поэтому дождитесь завершения обработки перед выполнением следующих шагов. 
> 
> 

**Скачивание файла конструктора Power BI**

* Предварительно настроенный файл конструктора Power BI входит в состав развертывания.
* Щелкните узел Power BI в представлении схемы и в области свойств щелкните ссылку **Download the Power BI designer file** (Скачать файл конструктора Power BI). ![Download Power BI Designer (Скачать файл конструктора Power BI)](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/9.5-download-powerbi-designer.png)
* Сохраните файл на локальном компьютере.

**Настройка отчетов Power BI**

* Откройте файл конструктора VehicleTelemetryAnalytics - Desktop Report.pbix с помощью Power BI Desktop. Установите Power BI Desktop (если вы еще не сделали это) с помощью [установщика Power BI Desktop](http://www.microsoft.com/download/details.aspx?id=45331). 
* Щелкните **Изменить запросы**.

![Изменение запроса Power BI](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/10-edit-powerbi-query.png)

* Дважды щелкните **Источник**.

![Настройка источника Power BI](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/11-set-powerbi-source.png)

* Обновите строку подключения, указав сервер Azure SQL, подготовленный как часть развертывания. Чтобы отобразить имя сервера в области свойств, щелкните на схеме узел Azure SQL.

![Просмотр имени сервера](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/11.5-view-server-name.png)

* Для параметра **База данных** оставьте значение *connectedcar*.

![Настройка базы данных Power BI](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/12-set-powerbi-database.png)

* Нажмите кнопку **ОК**.
* Отобразится вкладка **Windows credential** (Учетные данные Windows), выбранная по умолчанию. Измените ее на **Учетные данные базы данных**, щелкнув вкладку **База данных** справа.
* Укажите **имя пользователя** и **пароль** в соответствующих полях для доступа к Базе данных SQL Azure (выбрано на этапе развертывания).

![Указание учетных данных базы данных](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/13-provide-database-credentials.png)

* Добавьте новый отчет, щелкнув **Подключить**
* Повторите описанные выше действия для каждого из оставшихся трех запросов на правой панели. Затем обновите сведения о подключении к источнику данных.
* Щелкните **Close and Load**(Закрыть и загрузить). Наборы данных файла Power BI Desktop подключены к таблицам базы данных SQL Azure.
* **Закройте** файл Power BI Desktop.

![Закрытие Power BI Desktop](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/14-close-powerbi-desktop.png)

* Нажмите кнопку **Сохранить** , чтобы сохранить изменения. 

Теперь вы настроили все отчеты для пакетной обработки в решении. 

## <a name="upload-to-powerbicom"></a>Отправка на *powerbi.com*
1. Перейдите на веб-портал Power BI по адресу http://powerbi.com и войдите в систему.
2. Щелкните **Получить данные**  
3. Отправьте файл Power BI Desktop.  
4. Для этого щелкните **Получить данные -> Files Get (Получение файлов) -> Локальный файл**.  
5. Выберите **VehicleTelemetryAnalytics – Desktop Report.pbix**  
6. После отправки файла вы перейдете обратно в свою рабочую область Power BI.  

Набор данных, отчет и пустая панель мониторинга будут созданы автоматически.  

Закрепите диаграммы на имеющейся информационной панели **Vehicle Telemetry Analytics Dashboard** (Информационная панель аналитики телеметрии автомобилей) в **Power BI**. Щелкните пустую панель мониторинга, созданную ранее, а затем перейдите к разделу **Отчеты** и щелкните отправленный отчет.  

![Телеметрия автомобилей Power BI.com](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard1.png) 

**Обратите внимание, что в отчете шесть страниц.**  
Страница 1. Плотность автомобиля.  
Страница 2. Работоспособность автомобилей в реальном времени.  
Страница 3. Агрессивно управляемые автомобили.   
Страница 4. Отозванные автомобили.  
Страница 5. Автомобили с экономным расходом топлива.  
Страница 6. Логотип компании Contoso.  

![Подключенные автомобили Power BI.com](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard2.png)

**На странице 3**закрепите следующие данные.  

1. Количество VIN  
   ![Подключенные автомобили Power BI.com](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard3.png) 
2. Агрессивно управляемые автомобили по моделям — каскадная диаграмма.  
   ![Телеметрия автомобиля — закрепление диаграмм 4](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard4.png)

**На странице 5**закрепите следующие данные. 

1. Количество VIN    
   ![Телеметрия автомобиля — закрепление диаграмм 5](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard5.png)  
2. Автомобили с экономным расходом топлива по моделям: гистограмма с группировкой.  
   ![Телеметрия автомобиля — закрепление диаграмм 6](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard6.png)

**На странице 4**закрепите следующие данные.  

1. Количество VIN  
   ![Телеметрия автомобиля — закрепление диаграмм 7](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard7.png) 
2. Отозванные автомобили по городам, моделям: диаграмма "дерево".  
   ![Телеметрия автомобиля — закрепление диаграмм 8](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard8.png)  

**На странице 6**закрепите следующие данные.  

1. Логотип компании Contoso Motors.  
   ![Телеметрия автомобиля — закрепление диаграмм 9](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard9.png)

**Упорядочение панели мониторинга**  

1. Перейдите к панели мониторинга.
2. Наведите указатель на каждую диаграмму и переименуйте ее на основании наименований на приведенном ниже изображении панели мониторинга. Расположите диаграммы, как показано на экране панели мониторинга ниже.  
   ![Телеметрия автомобиля — упорядочение панели мониторинга 2](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-organize-dashboard2.png)  
   ![Телеметрия автомобилей Power BI.com](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-dashboard.png)
3. Если вы создали все отчеты, рассмотренные в этой статье, настроенная панель мониторинга будет выглядеть следующим образом. 

![Телеметрия автомобиля — упорядочение панели мониторинга 2](./media/cortana-analytics-playbook-vehicle-telemetry-powerbi-dashboard/vehicle-telemetry-organize-dashboard3.png)

Поздравляем! Вы создали отчеты и панель мониторинга для сбора данных о состоянии автомобилей и манере вождения (в том числе прогнозные данные и данные пакетной обработки) в режиме реального времени.  


