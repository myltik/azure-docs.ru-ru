---
title: Использование веб-службы машинного обучения с помощью шаблона веб-приложения | Документация Майкрософт
description: Использование шаблона веб-приложения в Azure Marketplace для использования прогнозной веб-службы в машинном обучении Azure.
keywords: веб-служба, ввод в эксплуатацию, REST API, машинное обучение
services: machine-learning
documentationcenter: ''
author: YasinMSFT
ms.author: yahajiza
manager: hjerez
editor: cgronlun
ms.assetid: e0d71683-61b9-4675-8df5-09ddc2f0d92d
ms.service: machine-learning
ms.component: studio
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.openlocfilehash: 03729a5b94b355869367e7f356e299f9afe38f75
ms.sourcegitcommit: 944d16bc74de29fb2643b0576a20cbd7e437cef2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/07/2018
ms.locfileid: "34835004"
---
# <a name="consume-an-azure-machine-learning-web-service-by-using-a-web-app-template"></a>Использование веб-службы Машинного обучения Azure с помощью шаблона веб-приложения

Вы можете разрабатывать прогнозную модель и развертывать ее как веб-службу Azure с помощью:
- Студии машинного обучения Azure.
- Таких инструментов, как R или Python. 

Затем с помощью REST API можно получить доступ к рабочей модели.

Существует несколько способов использования REST API и доступа к веб-службе. Например, вы можете создать приложение на языке C#, R или Python с помощью примера кода, который создается при развертывании веб-службы. (Пример кода доступен на [портале веб-службы машинного обучения](https://services.azureml.net/quickstart) или на панели мониторинга веб-службы в Студии машинного обучения.) Кроме того, можно использовать одновременно созданный для вас образец книги Microsoft Excel.

Быстрее и легче всего можно получить доступ к веб-службе через шаблоны веб-приложений, доступные в [Azure Marketplace](https://azure.microsoft.com/marketplace/web-applications/all/).

[!INCLUDE [machine-learning-free-trial](../../../includes/machine-learning-free-trial.md)]

## <a name="azure-machine-learning-web-app-templates"></a>Шаблоны веб-службы Машинного обучения Azure
С помощью шаблонов веб-служб, доступных в Azure Marketplace, можно создать пользовательское веб-приложение, которое «знает» входные данные вашей веб-службы и ожидаемые результаты. Вам нужно всего лишь предоставить веб-приложению доступ к веб-службе и данным, а шаблон выполнит все остальные действия.

Доступны два шаблона:

* [шаблон веб-приложения службы «запрос — ответ» Azure ML;](https://azure.microsoft.com/marketplace/partners/microsoft/azuremlaspnettemplateforrrs/)
* [шаблон веб-приложения службы пакетного выполнения Azure ML.](https://azure.microsoft.com/marketplace/partners/microsoft/azuremlbeswebapptemplate/)

С помощью URI API и ключа для веб-службы каждый из шаблонов создает пример приложения ASP.NET. Затем шаблон развертывает приложение в Azure как веб-сайт. 

Шаблон службы "запрос — ответ" (RRS) создает веб-приложение, которое можно использовать для отправки одной строки данных в веб-службу, чтобы получить один результат. Шаблон службы пакетного выполнения (BES) создает веб-приложение, которое можно использовать для отправки нескольких строк данных, чтобы получить несколько результатов.

Для использования этих шаблонов не требуется создавать код. Вы просто предоставляете ключ API и универсальный код ресурса (URI), а шаблон создается в приложении.

Чтобы получить ключ API и URI запроса для веб-службы, выполните следующие действия:

1. На [портале веб-служб](https://services.azureml.net/quickstart) вверху выберите **Веб-службы**. А для классической веб-службы выберите **Classic Web Services** (Классические веб-службы).
2. Выберите веб-службы, к которым нужно получить доступ.
3. Для классической веб-службы выберите конечную точку, к которой хотите получить доступ.
4. Вверху выберите **Consume** (Использование).
5. Скопируйте и сохраните значение первичного или вторичного ключа.
6. Создавая шаблон RRS, скопируйте URI **запроса и ответа** и сохраните его. Создавая шаблон BES, скопируйте URI **пакетных запросов** и сохраните его.


## <a name="how-to-use-the-request-response-service-template"></a>Использование шаблона службы "Запрос и ответ"
Выполните эти действия, чтобы использовать шаблон веб-приложения RRS, как показано на схеме ниже.

![Использование веб-шаблона RRS][image1]


<!--    ![API Key][image3] -->

<!-- This value will look like this:
   
        https://ussouthcentral.services.azureml.net/workspaces/<workspace-id>/services/<service-id>/execute?api-version=2.0&details=true
   
    ![Request URI][image4] -->

1. Войдите на [портале Azure](https://portal.azure.com).
2. Выберите **New** (Создать), найдите и выберите **веб-приложение службы "Запрос и ответ" Машинного обучения Azure**, а затем выберите **Создать**. 
3. На панели **Создать**:
   
   * Присвойте веб-приложению уникальное имя. URL-адресом веб-приложения будет это имя, за которым следует **.azurewebsites.net**. Например, **http://carprediction.azurewebsites.net**.
   * Выберите подписку Azure и службы, с которыми работает ваша веб-служба.
   * Нажмите кнопку **Создать**.
     
   ![Создание веб-приложения][image5]

4. Когда служба Azure завершит развертывание веб-приложения, выберите **URL-адрес** на странице параметров веб-приложения в Azure или введите URL-адрес в веб-браузере. Например, введите **http://carprediction.azurewebsites.net**.
5. При первом запуске веб-приложение запрашивает ввести значения в поля **API Post URL** (URL-адрес записи API) и **Ключ API**. Введите значения, которые были сохранены ранее (URI запроса и ключ API соответственно). Нажмите кнопку **Submit** (Отправить).
     
   ![Ввод URI записи и ключа API][image6]

6. Веб-приложение отобразит страницу **Конфигурация веб-приложения** с текущими параметрами веб-службы. Здесь можно вносить изменения в параметры, которые использует веб-приложение.
   
   > [!NOTE]
   > Изменение этих параметров влияет только на параметры этого веб-приложения. Это не изменяет параметры веб-службы по умолчанию. Например, если изменить текст в параметре **Описание**, описание, отображаемое на панели мониторинга веб-службы в Студии машинного обучения, не изменится.
   > 
   > 
   
    После завершения выберите **Save changes** (Сохранить изменения), а затем **Go to Home Page** (Перейти на домашнюю страницу).

7. На домашней странице можно ввести значения для отправки в веб-службу. Закончив, выберите **Отправить** и получите результат.

Если вы хотите вернуться на страницу **Конфигурация**, перейдите на страницу веб-приложения **setting.aspx**. Например, перейдите на страницу **http://carprediction.azurewebsites.net/setting.aspx**. Снова будет предложено ввести ключ API. Это необходимо, чтобы получить доступ к странице и обновить параметры.

Можно остановить, перезапустить или удалить веб-приложения на портале Azure, как любое другое веб-приложение. При условии, что приложение работает, можно перейти к домашнему веб-адресу и ввести новые значения.

## <a name="how-to-use-the-batch-execution-service-template"></a>Использование шаблона службы пакетного выполнения
Шаблон веб-приложения BES можно использовать тем же образом, что и шаблон RRS. Разница состоит только в том, что созданное веб-приложение можно использовать для отправки нескольких строк данных и получения нескольких результатов.

Входные значения для веб-службы пакетного выполнения можно получить из службы хранилища Azure или локального файла. Результаты сохраняются в контейнере службы хранилища Azure. Поэтому необходимо, чтобы результат, полученный от веб-приложения, сохранялся в контейнере службы хранилища Azure. Кроме того, необходимо подготовить входные данные.

![Использование веб-шаблона BES][image2]

1. Чтобы создать веб-приложение BES, выполните ту же процедуру, что и для шаблона RRS. Но в этом случае перейдите к [шаблону веб-приложения службы пакетного выполнения Машинного обучения Azure](https://azure.microsoft.com/marketplace/partners/microsoft/azuremlbeswebapptemplate/), чтобы открыть шаблон BES в Azure Marketplace. Выберите **Создание веб-приложения**.

2. Чтобы указать, куда следует сохранить результаты, введите сведения о целевом контейнере на домашней странице веб-приложения. Кроме того, укажите источник входных значений для веб-приложения: локальный файл или контейнер службы хранилища Azure.
   Нажмите кнопку **Submit** (Отправить).
   
   ![Сведения о хранилище][image7]

В веб-приложении отображается страница с состоянием задания. После завершения задания вы получите расположение результатов в хранилище BLOB-объектов Azure. Результаты также можно загрузить в локальный файл.

## <a name="for-more-information"></a>Дополнительные сведения
Дополнительная информация:

* Создание эксперимента машинного обучения в Студии машинного обучения — см. статью [Руководство по машинному обучению. Создание первого эксперимента по обработке и анализу данных в Студии машинного обучения Azure](create-experiment.md).
* Развертывание эксперимента машинного обучения в качестве веб-службы — см. статью [Развертывание веб-службы машинного обучения Azure](publish-a-machine-learning-web-service.md).
* Сведения о других способах доступа к веб-службе см. в статье [Как использовать веб-службу машинного обучения Azure](consume-web-services.md).

[image1]: media/consume-web-service-with-web-app-template/rrs-web-template-flow.png
[image2]: media/consume-web-service-with-web-app-template/bes-web-template-flow.png
[image3]: media/consume-web-service-with-web-app-template/api-key.png
[image4]: media/consume-web-service-with-web-app-template/post-uri.png
[image5]: media/consume-web-service-with-web-app-template/create-web-app.png
[image6]: media/consume-web-service-with-web-app-template/web-service-info.png
[image7]: media/consume-web-service-with-web-app-template/storage.png
