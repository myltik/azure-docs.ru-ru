<properties 
	pageTitle="Подготовка виртуальной машины Майкрософт для обработки и анализа данных | Microsoft Azure" 
	description="Настройка и создание виртуальной машины в Azure для обработки и анализа данных и машинного обучения." 
	services="machine-learning" 
	documentationCenter="" 
	authors="bradsev" 
	manager="jhubbard" 
	editor="cgronlun" />

<tags 
	ms.service="machine-learning" 
	ms.workload="data-services" 
	ms.tgt_pltfrm="na" 
	ms.devlang="na" 
	ms.topic="article" 
	ms.date="09/07/2016" 
	ms.author="bradsev" />


# Подготовка виртуальной машины Майкрософт для обработки и анализа данных

Виртуальная машина Майкрософт для обработки и анализа данных — это образ виртуальной машины (VM) Azure, в котором предварительно установлен и настроен ряд распространенных средств, обычно необходимых для анализа данных и машинного обучения. К этим средствам относятся:

- Microsoft R Server Developer Edition
- дистрибутив Anaconda Python;
- Записная книжка Jupyter (с ядрами R и Python).
- выпуск Visual Studio Community;
- Power BI Desktop;
- SQL Server 2016 Developer Edition.
- Инструменты машинного обучения
    - [Computational Network Toolkit (CNTK)](https://github.com/Microsoft/CNTK): набор программных средств для глубокого обучения от Microsoft Research.
    - [Vowpal Wabbit](https://github.com/JohnLangford/vowpal_wabbit): система быстрого машинного обучения, поддерживающая такие методы, как онлайн-обучение, хэширование, общее сокращение, сокращение, обучение поиску, активное и интерактивное обучение.
    - [XGBoost](https://xgboost.readthedocs.org/en/latest/): инструмент, предоставляющий быструю и точную реализацию повышенного дерева.
    - [Rattle](http://rattle.togaware.com/) (аналитический инструмент R для легкого обучения): инструмент, который облегчает начало работы с анализом данных и машинным обучением в R с помощью графического пользовательского интерфейса, в котором осуществляется исследование данных и моделирование с автоматическим созданием кода R.
    - [mxnet](https://github.com/dmlc/mxnet): платформа глубокого обучения, предназначенная для обеспечения эффективности и гибкости.
- Библиотеки R и Python для машинного обучения Azure и других служб Azure
- Git, включая Git Bash, для работы с репозиториями исходного кода, такими как GitHub и Visual Studio Team Services.
- Порты Windows для нескольких популярных служебных программ командной строки Linux (включая awk, sed, perl, grep, find, wget, curl и др.), доступные в командной строке.


Обработка и анализ данных включают в себя повторяющееся выполнение последовательности задач: поиска, загрузки и предварительной обработки данных, построения и тестирования моделей, а также развертывания моделей для использования в интеллектуальных приложениях. Для выполнения этих задач специалисты по обработке и анализу данных используют широкий набор инструментов. Поиск правильной версии программного обеспечения и его последующая загрузка и установка могут занимать довольно много времени. Виртуальная машина Майкрософт для обработки и анализа данных позволяет упростить выполнение этих задач, предоставляя готовый образ, который можно подготовить в Azure. В этом образе уже будут предварительно установлены и настроены все популярные инструменты.

Виртуальная машина Майкрософт для обработки и анализа данных придает значительный импульс вашему аналитическому проекту. Она позволяет работать над задачами, используя различные языки, включая R, Python, SQL и C#. Visual Studio использует удобный интерфейс IDE для разработки и тестирования кода. Пакет SDK Azure в виртуальной машине позволяет создавать приложения с помощью различных служб на облачной платформе Майкрософт.

Плата за программное обеспечение для этого образа виртуальной машины не взимается. Вы платите только за использование Azure. Сумма зависит от размера виртуальной машины, которая будет подготовлена. Дополнительные сведения об оплате вычислительных ресурсов см. в разделе "Сведения о ценах" на странице [Data Science Virtual Machine](https://azure.microsoft.com/marketplace/partners/microsoft-ads/standard-data-science-vm/) (Виртуальная машина для обработки и анализа данных).


## Предварительные требования

Прежде чем создавать виртуальную машину Майкрософт для обработки и анализа данных, необходимо убедиться в наличии следующих компонентов.

- **Подписка на Azure** — сведения о ее получении см. в разделе [Получение бесплатной пробной версии Azure](https://azure.microsoft.com/documentation/videos/get-azure-free-trial-for-testing-hadoop-in-hdinsight/).

*   **Учетная запись хранения Azure** — ознакомьтесь с разделом [Создание учетной записи хранения Azure](storage-create-storage-account.md#create-a-storage-account) для получения информации о процессе ее создания. Если вы не хотите использовать имеющуюся учетную запись хранения, то можно настроить новую учетную запись при создании виртуальной машины.


## Создание виртуальной машины Майкрософт для обработки и анализа данных

Ниже приведены шаги по созданию экземпляра виртуальной машины Майкрософт для обработки и анализа данных.

1.	Перейдите к списку виртуальных машин на [портале Azure](https://portal.azure.com/#create/microsoft-ads.standard-data-science-vmstandard-data-science-vm).
2.	 В нижней части страницы нажмите кнопку **Создать**. Откроется мастер. ![configure-data-science-vm](./media/machine-learning-data-science-provision-vm/configure-data-science-virtual-machine.png)
3.	 Мастеру, который используется для создания виртуальной машины Майкрософт для обработки и анализа данных, требуются **входные данные** для всех **пяти шагов**, перечисленных в правой части этого рисунка. Ниже приведено описание входных данных, необходимых для настройки на каждом из шагов.
	
	1.	 **Основы**
		1.	 **Имя** — имя создаваемого сервера для обработки и анализа данных.
		2.	 **Имя пользователя** — идентификатор учетной записи администратора.
		3.	 **Пароль** — пароль учетной записи администратора.
		4.	 **Подписка** — при наличии нескольких подписок выберите ту, в которой будет создана виртуальная машина и для которой будет взиматься плата.
		5.	 **Группа ресурсов** — вы можете создать новую группу или использовать существующую.
		6.	 **Расположение** — выберите наиболее подходящий центр обработки данных. Обычно это центр обработки данных, в котором размещена большая часть ваших данных, или ближайший к вашему физическому расположению центр для наиболее быстрого доступа к сети.
		 
	2.	 **Размер**. Выберите один из типов серверов, соответствующий вашим функциональным требованиям и финансовым ограничениям. Дополнительные варианты размера виртуальной машины можно увидеть, щелкнув "Просмотреть все".
	
	3.	 **Параметры**:
		1.	 **Тип диска**. Выберите "Премиум", если требуется твердотельный накопитель (SSD), в противном случае выберите "Стандартный".
		2.	 **Учетная запись хранения**. Вы можете создать учетную запись хранения Azure в подписке или использовать имеющуюся учетную запись в *расположении*, выбранном на этапе работы мастера **Основные сведения**.
		3.	 **Другие параметры**. В большинстве случаев используются значения по умолчанию. Если нужно использовать значения, отличные от значений по умолчанию, вы можете навести указатель мыши на информационную ссылку, чтобы получить справку по конкретному полю.

	4.	 **Сводка**. Проверьте, все ли сведения введены правильно.
	5.	 **Купить**. Чтобы начать подготовку, щелкните **Купить**. Отобразится ссылка на условия транзакции. За использование виртуальной машины не взимается дополнительная плата, кроме платы за размер сервера, выбранный на шаге **Размер**.


>[AZURE.NOTE] Подготовка занимает 10–20 минут. Состояние подготовки отображается на портале Azure.

## Доступ к виртуальной машине Майкрософт для обработки и анализа данных

После создания виртуальной машины можно подключиться к ней с помощью удаленного рабочего стола, используя учетную запись администратора, настроенную в разделе **Основные сведения**.

После создания и подготовки виртуальной машины вы можете начать использовать установленные и настроенные на ней средства. Для многих средств предусмотрены значки на рабочем столе и элементы в меню "Пуск".

## Создание надежного пароля на сервере записной книжки Jupyter 

Чтобы создать надежный пароль для сервера записной книжки Jupyter, установленного на виртуальной машине, выполните следующую команду из командной строки на виртуальной машине для обработки и анализа данных.

	c:\anaconda\python.exe -c "import IPython;print IPython.lib.passwd()"

При появлении запроса укажите надежный пароль.

В выходных данных вы увидите хэш пароля в формате "sha1:xxxxxx". Скопируйте этот хэш пароля и замените существующий хэш, который находится в файле конфигурации записной книжки **C:\\ProgramData\\jupyter\\jupyter\_notebook\_config.py** в параметре ***c.NotebookApp.password***.

Замените только часть (xxxxxx) в значении хэша, заключенного в кавычки. Сами кавычки и префикс ***sha1:*** в значении параметра нужно сохранить.

Наконец, необходимо остановить и перезапустить сервер Jupyter, работающий на виртуальной машине в качестве запланированной задачи Windows с именем **Start\_IPython\_Notebook**. Если после перезапуска этой задачи новый пароль не принят, попробуйте завершить все запущенные процессы Python, используя диспетчер задач, а затем перезапустить запланированную задачу. Кроме того, попробуйте перезагрузить виртуальную машину.

## Средства, установленные на виртуальной машине Майкрософт для обработки и анализа данных

### Microsoft R Server Developer Edition
Если вы хотите использовать R для аналитики, на виртуальной машине установлен Microsoft Developer edition. Microsoft R Server — это широко развертываемая платформа аналитики корпоративного класса на основе R, которая поддерживается, масштабируется и является безопасной. С поддержкой разнообразной статистики для данных большого размера, прогнозирующего моделирования и машинного обучения R Server поддерживает весь диапазон аналитических операций — просмотр, анализ, визуализацию и моделирование. Используя и расширяя R с открытым исходным кодом, Microsoft R Server полностью совместим с R-сценариями, функциями и пакетами CRAN для анализа данных в масштабе предприятия. Он также устраняет ограничения памяти R с открытым исходным кодом путем добавления параллельной и фрагментарной обработки данных. Таким образом пользователи получают возможность анализа данных, размер которых намного превышает объем основной памяти. Выпуск Visual Studio Community, включенный в виртуальную машину, содержит расширение "R Tools for Visual Studio" (Инструменты R для Visual Studio), которое предоставляет полную интегрированную среду разработки для работы с R. Кроме того, вы можете скачать и использовать другие интегрированные среды разработки, например [RStudio](http://www.rstudio.com).

### Python
Для разработки на языке Python установлен дистрибутив Anaconda Python версий 2.7 и 3.5. Этот дистрибутив содержит базовую версию Python, а также примерно 300 наиболее популярных математических и инженерных пакетов и пакетов аналитики данных. Можно использовать средства Python для Visual Studio (PTVS), установленные в выпуске Visual Studio 2015 Community, или одну из сред IDE, объединенную с Anaconda, например IDLE или Spyder. Их можно запустить, выполнив поиск на панели поиска (сочетание клавиш **WINDOWS**+**S**).

>[AZURE.NOTE] Чтобы инструменты Python для Visual Studio указывали на Anaconda Python 2.7 и 3.5, необходимо создать пользовательские среды для каждой версии. Чтобы настроить пути сред в выпуске Visual Studio 2015 Community, последовательно выберите пункты **Tools** (Инструменты) -> **Python Tools** (Инструменты Python) -> **Python Environments** (Среды Python), а затем нажмите кнопку **+ Custom** (+ Настраиваемые).

Anaconda Python 2.7 устанавливается в папку C:\\Anaconda, а Anaconda Python 3.5 — в папку С:\\Anaconda\\envs\\py35. Подробное описание шагов см. в [документации по PTVS](https://github.com/Microsoft/PTVS/wiki/Selecting-and-Installing-Python-Interpreters#hey-i-already-have-an-interpreter-on-my-machine-but-ptvs-doesnt-seem-to-know-about-it).

### Портативный компьютер Jupyter
Дистрибутив Anaconda также содержит записную книжку Jupyter, среду для совместного использования кода и анализа. Сервер записной книжки Jupyter предварительно настроен для Python 2, Python 3 и ядер R. На рабочем столе есть значок "Записная книжка Jupyter", с помощью которого можно запустить браузер для доступа к серверу записной книжки. Если для доступа к виртуальной машине используется удаленный рабочий стол, то для доступа к серверу записной книжки Jupyter можно перейти по ссылке [https://localhost:9999/](https://localhost:9999/), когда выполнен вход в виртуальную машину.
 
>[AZURE.NOTE] При появлении любых предупреждений о сертификатах нажмите кнопку "Продолжить".

Мы также включили примеры записных книжек для Python и R. После входа в Jupyter можно найти записные книжки Jupyter, демонстрирующие способы работы с Microsoft R Server, службами R в SQL Server 2016 (внутренняя аналитика базы данных), Python и другими технологиями Azure. Ссылки на примеры можно найти на домашней странице записной книжки, войдя в записную книжку Jupyter с помощью пароля, созданного на предыдущем шаге.

### Выпуск Visual Studio Community 2015
На виртуальной машине установлен выпуск Visual Studio Community. Это бесплатная версия популярного IDE от Майкрософт, которую можно использовать для ознакомления, а также для небольших групп. Условия лицензионного соглашения вы можете просмотреть [здесь](https://www.visualstudio.com/support/legal/mt171547). Откройте Visual Studio, дважды щелкнув значок на рабочем столе или выбрав соответствующий пункт в меню **Пуск**. Кроме того, вы можете выполнить поиск программ следующим образом: нажмите клавиши **WINDOWS** + **S** и введите запрос "Visual Studio". Выполнив вход, вы сможете создавать проекты, используя такие языки, как C#, Python, R и node.js. Кроме того, установлены подключаемые модули, облегчающие работу со службами Azure, например каталог данных Azure, Azure HDInsight (Hadoop, Spark) и Azure Data Lake.

>[AZURE.NOTE] Может появиться сообщение о том, что период ознакомления истек. Чтобы получить доступ к выпуску Visual Studio Community, введите учетные данные учетной записи Майкрософт или создайте бесплатную учетную запись.

### SQL Server 2016 Developer Edition
На виртуальной машине предоставляется версия для разработчиков SQL Server 2016 со службами R для выполнения внутренней аналитики базы данных. Службы R предоставляют платформу для разработки и развертывания аналитических приложений. Вы можете воспользоваться функциональным и мощным языком R, а также множеством пакетов, предоставляемых сообществом, для создания моделей и формирования прогнозов для данных SQL Server. Так как службы R (в базе данных) интегрируют язык R с SQL Server, это позволяет поддерживать тесный контакт между аналитикой и данными. При этом сокращаются затраты и уменьшаются риски для системы безопасности, связанные с перемещением данных.

>[AZURE.NOTE] Выпуск для разработчиков SQL Server 2016 предназначен только для разработки и тестирования. Для его использования в рабочей среде требуется лицензия.

Для доступа к серверу SQL Server запустите **SQL Server Management Studio**. Имя виртуальной машины используется в качестве имени сервера. При входе от имени администратора в ОС Windows используйте проверку подлинности Windows. Выполнив вход в SQL Server Management Studio, вы можете создавать других пользователей и базы данных, импортировать данные и выполнять запросы SQL.

Чтобы включить внутреннюю аналитику базы данных с использованием Microsoft R, войдите в систему с правами администратора сервера, а затем выполните в SQL Server Management Studio следующую команду как однократное действие:

        CREATE LOGIN [%COMPUTERNAME%\SQLRUserGroup] FROM WINDOWS 
        
        (Please replace the %COMPUTERNAME% with your VM name)


### Таблицы Azure 
На виртуальной машине установлено несколько инструментов Azure.

- Имеется ярлык на рабочем столе для доступа к документации по пакету SDK для Azure.
- **AzCopy** используется для перемещения данных в учетную запись хранения Microsoft Azure и из нее. Чтобы ознакомиться со сведениями об использовании, введите **Azcopy** в командной строке.
- **Microsoft Azure Storage Explorer** используется для просмотра объектов, сохраненных в учетной записи хранения Azure, а также для перемещения данных в службу хранилища Azure и обратно. Для доступа к этому инструменту можно ввести **Storage Explorer** в поле поиска или найти его в меню "Пуск" в Windows.
- **Adlcopy** используется для перемещения данных в Azure Data Lake. Чтобы ознакомиться со сведениями об использовании, введите **adlcopy** в командной строке.
- **dtui** используется для перемещения данных в Azure DocumentDB (базу данных NoSQL в облаке) и обратно. Введите **dtui** в командной строке.
- **Шлюз управления данными Майкрософт** позволяет перемещать данные между локальными источниками данных и облаком. Он используется в таких инструментах, как фабрика данных Azure.
- **Microsoft Azure PowerShell** — инструмент, используемый для управления ресурсами Azure на языке сценариев PowerShell, также установлен на вашей виртуальной машине.

###Power BI

Для создания панелей мониторинга и реализации широких возможностей визуализации установлено средство **Power BI Desktop**. Используйте это средство для извлечения данных из различных источников, создания панелей мониторинга и отчетов и их публикации в облаке. Дополнительные сведения см. на сайте [Power BI](http://powerbi.microsoft.com). Power BI Desktop можно найти в меню "Пуск".

>[AZURE.NOTE] Для доступа к Power BI необходима учетная запись Office 365.

## Дополнительные средства разработки Майкрософт
Для поиска и скачивания других инструментов разработки Майкрософт можно использовать [**установщик веб-платформы Майкрософт**](https://www.microsoft.com/web/downloads/platform.aspx). Ярлык этого средства также находится на рабочем столе виртуальной машины Майкрософт для обработки и анализа данных.

## Важные каталоги на виртуальной машине

| Элемент | Каталог |
| ------------------------------| ---------------- |
|Конфигурации сервера записной книжки Jupyter | C:\\ProgramData\\jupyter |
|Корневой каталог примеров записных книжек Jupyter| c:\\dsvm\\notebooks|
|Другие примеры | c:\\dsvm\\samples|
| Anaconda (по умолчанию: Python 2.7) | c:\\Anaconda |
| Среда Anaconda Python 3.5 | c:\\Anaconda\\envs\\py35|
|Каталог экземпляров R Server (изолированный) (экземпляр R по умолчанию) | C:\\Program Files\\Microsoft SQL Server\\130\\R\_SERVER |
| Каталог экземпляров R Server (в базе данных) | C:\\Program Files\\Microsoft SQL Server\\MSSQL13.MSSQLSERVER\\R\_SERVICES |
| Прочие инструменты | c:\\dsvm\\tools|

>[AZURE.NOTE] В экземплярах виртуальной машины Майкрософт для обработки и анализа данных, предшествующих версии 1.5.0 (созданных до 3 сентября 2016 г.), структура каталогов немного отличалась от указанной в предыдущей таблице.

## Дальнейшие действия
Ниже приведены некоторые дальнейшие действия для продолжения обучения.

* Просмотреть различные средства обработки и анализа данных на виртуальной машине для анализа данных можно, щелкнув меню "Пуск" и проверив установленные средства в меню.
* Перейдите к каталогу **C:\\Program Files\\Microsoft SQL Server\\130\\R\_SERVER\\library\\RevoScaleR\\demoScripts**, в котором можно найти примеры использования библиотеки RevoScaleR в R, поддерживающей анализ данных на корпоративном уровне.
* См. статью [10 задач, которые можно выполнить в виртуальной машине для обработки и анализа данных](http://aka.ms/dsvmtenthings).
* Изучите систематический подход к созданию комплексных аналитических решений с помощью [процесса обработки и анализа данных группы](https://azure.microsoft.com/documentation/learning-paths/data-science-process/).
* Примеры машинного обучения и анализа данных с использованием Cortana Intelligence Suite см. на странице [коллекции Cortana Intelligence](http://gallery.cortanaintelligence.com). Мы также добавили значок на рабочий стол и элемент в меню **Пуск** для этой коллекции на виртуальной машине.

<!---HONumber=AcomDC_0914_2016-->