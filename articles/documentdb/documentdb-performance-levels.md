---
title: "Уровни производительности в DocumentDB | Документация Майкрософт"
description: "Узнайте, каким образом с помощью уровней производительности в DocumentDB можно резервировать пропускную способность для каждой коллекции."
services: documentdb
author: mimig1
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: 7dc21c71-47e2-4e06-aa21-e84af52866f4
ms.service: documentdb
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/08/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
translationtype: Human Translation
ms.sourcegitcommit: 094729399070a64abc1aa05a9f585a0782142cbf
ms.openlocfilehash: 659d6bd63ea996af7b7b172f998884354e5d5858
ms.lasthandoff: 03/07/2017


---
# <a name="retiring-the-s1-s2-and-s3-performance-levels-in-documentdb"></a>Прекращение использования уровней производительности S1, S2 и S3 в DocumentDB

> [!IMPORTANT] 
> Использование уровней производительности S1, S2 и S3, которые рассматриваются в этой статье, прекращается. Они больше не будут доступны для новых коллекций DocumentDB.
>

В этой статье представлен обзор уровней производительности S1, S2 и S3, а также рассматривается процедура переноса коллекций, использующих эти уровни производительности, в односекционные коллекции (это произойдет 1 августа 2017 г.). Ознакомившись с данной статьей, вы сможете ответить на следующие вопросы.

- [Почему прекращается использование уровней производительности S1, S2 и S3?](#why-retired)
- [Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?](#compare)
- [Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?](#uninterrupted-access)
- [Как изменится моя коллекция после переноса?](#collection-change)
- [Как изменятся мои счета после переноса на односекционные коллекции?](#billing-change)
- [Что делать, если мне нужен объем хранилища больше 10 ГБ?](#more-storage-needed)
- [Могу ли я переключаться между уровнями производительности S1, S2 и S3 до 1 августа 2017 г.?](#change-before)
- [Как узнать, что моя коллекция перенесена?](#when-migrated)
- [Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?](#migrate-diy)
- [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="why-retired"></a>

## <a name="why-are-the-s1-s2-and-s3-performance-levels-being-retired"></a>Почему прекращается использование уровней производительности S1, S2 и S3?

Уровни производительности S1, S2 и S3 не предлагают той гибкости, которая обеспечивается односекционными коллекциями DocumentDB. Пропускная способность и емкость хранилища для уровней производительности S1, S2 и S3 предварительно заданы и не изменяются. Теперь в DocumentDB доступна настройка пропускной способности и емкости хранилища, что обеспечивает гораздо большую гибкость и возможность масштабирования по мере изменения потребностей.

<a name="compare"></a>

## <a name="how-do-single-partition-collections-and-partitioned-collections-compare-to-the-s1-s2-s3-performance-levels"></a>Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?

В приведенной ниже таблице сравниваются пропускная способность и емкость хранилища, доступные для односекционных и секционированных коллекций, а также для уровней производительности S1, S2, S3. В этом примере данные приводятся для региона "Восточная часть США 2":

|   |Секционированная коллекция|Односекционная коллекция|S1|S2|S3|
|---|---|---|---|---|---|
|Максимальная пропускная способность|Без ограничений|10 000 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Минимальная пропускная способность|2500 ЕЗ/с|400 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Максимальный объем хранилища|Без ограничений|10 ГБ|10 ГБ|10 ГБ|10 ГБ|
|Цена|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище:&0;,25 долл. США за&1; ГБ|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище:&0;,25 долл. США за&1; ГБ|25 долл. США|50 долл. США|100 долл. США|

Вы являетесь пользователем подписки EA? Если это так, то ознакомьтесь с разделом [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="uninterrupted-access"></a>

## <a name="what-do-i-need-to-do-to-ensure-uninterrupted-access-to-my-data"></a>Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?

Ничего не нужно делать, DocumentDB выполнит перенос самостоятельно. Если у вас есть коллекция уровня S1, S2 или S3, то 31 июля 2017 г. она будет перенесена в односекционную коллекцию. 

<a name="collection-change"></a>

## <a name="how-will-my-collection-change-after-the-migration"></a>Как изменится моя коллекция после переноса?

Если у вас есть коллекция уровня S1, то она будет перенесена в односекционную коллекцию с пропускной способностью 400 ЕЗ/с. 400 ЕЗ/с — это самая низкая пропускная способность, доступная в односекционных коллекциях. При этом стоимость односекционной коллекции с пропускной способностью 400 ЕЗ/с примерно равна стоимости коллекции уровня S1 с пропускной способностью 250 ЕЗ/с. Таким образом, вам не нужно оплачивать дополнительные 150 ЕЗ/с, которые вам доступны.

Если у вас есть коллекция уровня S2, то она будет перенесена в односекционную коллекцию с пропускной способностью 1000 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

Если у вас есть коллекция уровня S3, то она будет перенесена в односекционную коллекцию с пропускной способностью 2500 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

В каждом из этих случаев после переноса коллекции можно настроить уровень пропускной способности или выполнить масштабирование, чтобы обеспечить низкую задержку при доступе пользователей. Чтобы изменить уровень пропускной способности после переноса коллекции, просто откройте учетную запись DocumentDB на портале Azure, щелкните "Масштаб", выберите коллекцию, а затем измените уровень пропускной способности, как показано на этом снимке экрана:

![Как масштабировать пропускную способность с помощью портала Azure](./media/documentdb-performance-levels/azure-documentdb-portal-scale-throughput.png)

<a name="billing-change"></a>

## <a name="how-will-my-billing-change-after-im-migrated-to-the-single-partition-collections"></a>Как изменятся мои счета после переноса на односекционные коллекции?

Предположим, что у вас 10 коллекций уровня S1, каждая из которых имеет емкость хранилища 1 ГБ и находится в регионе "Восточная часть США". Вы переносите эти 10 коллекций S1 в 10 односекционных коллекций с пропускной способностью 400 ЕЗ/с (минимальный уровень). Если у вас будет 10 односекционных коллекций в течение полного месяца, то счет будет иметь следующий вид:

![Сравнение цены на 10 коллекций уровня S1 с ценой на 10 односекционных коллекций](./media/documentdb-performance-levels/documentdb-s1-vs-standard-pricing.png)

<a name="more-storage-needed"></a>

## <a name="what-if-i-need-more-than-10-gb-of-storage"></a>Что делать, если мне нужен объем хранилища больше 10 ГБ?

Независимо от того, используется ли коллекция с уровнем производительности S1, S2 или S3 или односекционная коллекция (каждая из которых имеет емкость хранилища 10 ГБ), вы можете воспользоваться средством переноса данных DocumentDB, чтобы перенести свои данные в секционированную коллекцию с практически неограниченной емкостью хранилища. Сведения о преимуществах секционированной коллекции см. в статье [Секционирование и масштабирование в Azure DocumentDB](documentdb-partition-data.md). Сведения о том, как перенести коллекцию уровня S1, S2 или S3 или односекционную коллекцию в секционированную коллекцию, см. в разделе [Переход с односекционных на секционированные коллекции](documentdb-partition-data.md#migrating-from-single-partition). 

<a name="change-before"></a>

## <a name="can-i-change-between-the-s1-s2-and-s3-performance-levels-before-august-1-2017"></a>Могу ли я переключаться между уровнями производительности S1, S2 и S3 до 1 августа 2017 г.?

Изменение уровней производительности S1, S2 и S3 на портале или с помощью программных средств доступно только для существующих учетных записей, относящихся к этим уровням. С 1 августа 2017 г. уровни производительности S1, S2 и S3 станут недоступны. В случае перехода с уровня производительности S1, S2 или S3 на односекционную коллекцию вы не сможете вернуться на уровень S1, S2 или S3.

<a name="when-migrated"></a>

## <a name="how-will-i-know-when-my-collection-has-migrated"></a>Как узнать, что моя коллекция перенесена?

Перенос будет выполнен 31 июля 2017 г. Если у вас есть коллекция, использующая уровень производительности S1, S2 или S3, то служба поддержки DocumentDB свяжется с вами по электронной почте до выполнения переноса. После того, как перенос будет выполнен, 1 августа 2017 г. на портале Azure отобразится, что коллекция использует ценовую категорию "Стандартный".

![Как убедиться, что коллекция была перенесена в ценовую категорию "Стандартный"](./media/documentdb-performance-levels/documentdb-portal-standard-pricing-applied.png)

<a name="migrate-diy"></a>

## <a name="how-do-i-migrate-from-the-s1-s2-s3-performance-levels-to-single-partition-collections-on-my-own"></a>Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?

Вы можете самостоятельно выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции, используя портал Azure или программные средства. Сделайте это сами до 1 августа, чтобы воспользоваться функцией гибкой пропускной способности, доступной в односекционных коллекциях, или мы выполним для вас этот перенос 31 июля 2017 г.

**Перенос в односекционные коллекции с помощью портала Azure**

1. На [**портале Azure**](https://portal.azure.com) щелкните **NoSQL (DocumentDB)**, затем выберите учетную запись DocumentDB для изменения. 
 
    Если на навигационной панели нет пункта **NoSQL (DocumentDB)**, то щелкните значок >, прокрутите до пункта **Базы данных**, выберите **NoSQL (DocumentDB)**, а затем выберите учетную запись DocumentDB.  

2. В меню ресурсов в разделе **Коллекции** щелкните **Масштаб**, в раскрывающемся списке выберите коллекцию для изменения и щелкните **Ценовая категория**. Учетные записи со стандартной пропускной способностью имеют ценовую категорию S1, S2 или S3.  В колонке **Выбор ценовой категории** щелкните **Стандартная**, чтобы изменить определяемую пользователем пропускную способность, а затем нажмите кнопку **Выбрать**, чтобы сохранить изменения.

    ![Снимок экрана колонки "Параметры", на котором показано, где можно изменить значение пропускной способности](./media/documentdb-performance-levels/documentdb-change-performance-set-thoughput.png)

3. В колонке **Масштаб** значение **Ценовая категория** меняется на **Стандартная** и появляется поле **Пропускная способность (единицы запросов в секунду)** со значением 400 (единиц запросов в секунду) по умолчанию. Задайте пропускную способность от 400 до 10 000 [единиц запросов](documentdb-request-units.md)в секунду. **Estimated Monthly Bill** (Предварительный месячный счет) в нижней части страницы автоматически обновляется, показывая оценку ежемесячных расходов. 

    >[!IMPORTANT] 
    > После сохранения изменений и перехода на ценовую категорию "Стандартный" невозможно вернуться в использованию уровней производительности S1, S2 или S3.

4. Нажмите кнопку **Сохранить**, чтобы сохранить изменения.

    Если в ходе работы выяснится, что требуется более высокая пропускная способность (больше 10 000 единиц запроса в секунду) или больший объем хранилища (больше 10 ГБ), то вы можете создать секционированную коллекцию. Сведения о переносе односекционной коллекции в секционированную см. в разделе [Переход с односекционных на секционированные коллекции](documentdb-partition-data.md#migrating-from-single-partition).

    > [!NOTE]
    > Изменение уровня S1, S2 или S3 на "Стандартный" может занять до 2 минут.
    > 
    > 

**Перенос в односекционные коллекции с помощью пакета SDK для .NET**

Другой вариант изменения уровней производительности вашей коллекции — с помощью наших пакетов SDK. В этом разделе описывается только процесс изменения уровня производительности коллекции с помощью нашего [пакета SDK для .NET](https://msdn.microsoft.com/library/azure/dn948556.aspx), но он аналогичен и для других [пакетов SDK](https://msdn.microsoft.com/library/azure/dn781482.aspx). Если вы не знакомы с пакетом SDK для .NET, то ознакомьтесь с этим [руководством по началу работы](documentdb-get-started.md).

Ниже приведен фрагмент кода для изменения пропускной способности коллекции до 5000 единиц запроса в секунду.
    
```C#
    //Fetch the resource to be updated
    Offer offer = client.CreateOfferQuery()
                      .Where(r => r.ResourceLink == collection.SelfLink)    
                      .AsEnumerable()
                      .SingleOrDefault();

    // Set the throughput to 5000 request units per second
    offer = new OfferV2(offer, 5000);

    //Now persist these changes to the database by replacing the original resource
    await client.ReplaceOfferAsync(offer);
```

Посетите [MSDN](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.aspx) , чтобы просмотреть дополнительные примеры и узнать больше о методах нашего предложения:

* [**ReadOfferAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.readofferasync.aspx)
* [**ReadOffersFeedAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.readoffersfeedasync.aspx)
* [**ReplaceOfferAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.replaceofferasync.aspx)
* [**CreateOfferQuery**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.linq.documentqueryable.createofferquery.aspx)

<a name="ea-customer"></a>

## <a name="how-am-i-impacted-if-im-an-ea-customer"></a>Как на мне отразится перенос, если я являюсь пользователем подписки EA?

Для пользователей подписки EA цена не будет изменяться до истечения действующего контракта.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о ценах и управление данными с помощью Azure DocumentDB см. в следующих статьях.

1.    [Секционирование и масштабирование в Azure DocumentDB](documentdb-partition-data.md). Узнайте, чем отличаются односекционные и секционированные коллекции. В статье также содержатся советы по реализации стратегии секционирования для удобства масштабирования.
2.    [Цены на DocumentDB](https://azure.microsoft.com/pricing/details/documentdb/). Ознакомьтесь со сведениями о ценах на подготовку пропускной способности и использование хранилища.
3.    [Единицы запроса в DocumentDB](documentdb-request-units.md). Узнайте, как потребляется пропускная способность в зависимости от типа операции, например чтение, запись или запрос.
4.    [Моделирование данных в DocumentDB](documentdb-modeling-data.md). Узнайте, как моделировать данные для DocumentDB.
